import{r as s,u as e,g as t,j as a,C as i,b as r,c as l,a as d,I as n,B as c}from"./index-YuSKEDmV.js";import{A as m}from"./AdminLayout-Ig1TpGiV.js";import{S as o}from"./separator-Z3g1psCp.js";import{s as x}from"./supabase-DUkWVuqu.js";const g=()=>{const[g,h]=s.useState([]),[j,u]=s.useState(""),[f,p]=s.useState(!1),N=e(),{toast:k}=t(),v=async()=>{const{data:s,error:e}=await x.from("skill_tests").select("id,title,created_at").eq("skill_slug","grammar-fix-it").order("created_at",{ascending:!1});e||h(s??[])};s.useEffect(()=>{document.title="Grammar Fix-it Tests | Admin",v()},[]);return a.jsx(m,{title:"Grammar Fix-it Tests",showBackButton:!0,children:a.jsxs("section",{className:"space-y-4",children:[a.jsxs(i,{children:[a.jsx(r,{children:a.jsx(l,{className:"text-base",children:"+ Add New Grammar Test"})}),a.jsxs(d,{className:"flex gap-2 items-center",children:[a.jsx(n,{placeholder:"Test title (e.g., Set 1)",value:j,onChange:s=>u(s.target.value)}),a.jsx(c,{onClick:async()=>{if(!j.trim())return;p(!0);const{data:s,error:e}=await x.from("skill_tests").insert({skill_slug:"grammar-fix-it",title:j.trim()}).select("id").maybeSingle();p(!1),e?k({title:"Failed to create test",description:e.message,variant:"destructive"}):(u(""),await v(),(null==s?void 0:s.id)&&N(`/admin/skills/grammar/tests/${s.id}`))},disabled:f,children:f?"Adding...":"Add"})]})]}),a.jsx(o,{}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[g.map(s=>a.jsxs(i,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(r,{className:"pb-2",children:a.jsx(l,{className:"text-sm",children:s.title})}),a.jsx(d,{children:a.jsx(c,{size:"sm",variant:"secondary",onClick:()=>N(`/admin/skills/grammar/tests/${s.id}`),children:"Manage Test"})})]},s.id)),0===g.length&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{g as default};
