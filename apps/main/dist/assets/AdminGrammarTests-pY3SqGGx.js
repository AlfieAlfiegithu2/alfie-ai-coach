import{r as s,u as e,h as a,j as t,A as i,C as r,b as l,c as d,a as n,I as c,B as m,_ as o}from"./index-CLtpBfLK.js";import{s as x}from"./supabase-Bqkrifq5.js";const g=()=>{const[g,h]=s.useState([]),[u,j]=s.useState(""),[f,p]=s.useState(!1),N=e(),{toast:k}=a(),v=async()=>{const{data:s,error:e}=await x.from("skill_tests").select("id,title,created_at").eq("skill_slug","grammar-fix-it").order("created_at",{ascending:!1});e||h(s??[])};s.useEffect(()=>{document.title="Grammar Fix-it Tests | Admin",v()},[]);return t.jsx(i,{title:"Grammar Fix-it Tests",showBackButton:!0,children:t.jsxs("section",{className:"space-y-4",children:[t.jsxs(r,{children:[t.jsx(l,{children:t.jsx(d,{className:"text-base",children:"+ Add New Grammar Test"})}),t.jsxs(n,{className:"flex gap-2 items-center",children:[t.jsx(c,{placeholder:"Test title (e.g., Set 1)",value:u,onChange:s=>j(s.target.value)}),t.jsx(m,{onClick:async()=>{if(!u.trim())return;p(!0);const{data:s,error:e}=await x.from("skill_tests").insert({skill_slug:"grammar-fix-it",title:u.trim()}).select("id").maybeSingle();p(!1),e?k({title:"Failed to create test",description:e.message,variant:"destructive"}):(j(""),await v(),(null==s?void 0:s.id)&&N(`/admin/skills/grammar/tests/${s.id}`))},disabled:f,children:f?"Adding...":"Add"})]})]}),t.jsx(o,{}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[g.map(s=>t.jsxs(r,{className:"hover:shadow-lg transition-shadow",children:[t.jsx(l,{className:"pb-2",children:t.jsx(d,{className:"text-sm",children:s.title})}),t.jsx(n,{children:t.jsx(m,{size:"sm",variant:"secondary",onClick:()=>N(`/admin/skills/grammar/tests/${s.id}`),children:"Manage Test"})})]},s.id)),0===g.length&&t.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{g as default};
