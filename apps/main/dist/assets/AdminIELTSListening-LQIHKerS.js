import{_ as e}from"./supabase-DWL4C3fA.js";import{c as s,r as t,j as a,C as n,b as i,d as r,a as l,B as o,J as c,u as d,G as m,w as u,g as x,l as p,L as h,bb as b,bo as g,P as f,I as j,H as v,X as N,T as w,N as y,E as _,F as q,S as k,p as C,q as T,s as F,t as A,D as I,m as E,n as S,o as U,bp as O}from"./index-CmOVWJw-.js";import{A as M}from"./AdminLayout-C6Vwy61u.js";import{I as P,P as L}from"./ImageQuestionExtractor-CKGXBoO_.js";import{U as $}from"./upload-3qOCHoJE.js";import{T as R}from"./trash-2-C8PwyB4u.js";import{I as Q}from"./image-CWGu7Eoa.js";import{S as z}from"./save-BPidftIN.js";import{L as D}from"./list-ordered-BpMNhIPv.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=s("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),V=s("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),G=s("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),H=s("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),J=s("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function W({audioFile:e,onTrimComplete:s}){const[d,m]=t.useState(0),[u,x]=t.useState([0,0]),[p,h]=t.useState(!1),b=t.useRef(null),g=t.useRef(null),f=t.useState(()=>URL.createObjectURL(e))[0];t.useEffect(()=>()=>URL.revokeObjectURL(f),[f]),t.useEffect(()=>{const e=b.current;if(!e)return;const s=()=>{const s=e.duration;m(s),x([0,s])};return e.addEventListener("loadedmetadata",s),()=>e.removeEventListener("loadedmetadata",s)},[e]);const j=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return a.jsxs(n,{className:"border-2 border-purple-200 dark:border-purple-800",children:[a.jsx(i,{children:a.jsxs(r,{className:"flex items-center gap-2",children:[a.jsx(H,{className:"w-5 h-5 text-purple-500"}),"Trim Audio"]})}),a.jsxs(l,{className:"space-y-6",children:[a.jsx("audio",{ref:b,src:f,controls:!0,className:"w-full",onTimeUpdate:e=>{const s=e.currentTarget.currentTime;s<u[0]?e.currentTarget.currentTime=u[0]:s>u[1]&&(e.currentTarget.currentTime=u[0],e.currentTarget.pause())}}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[a.jsxs("span",{children:["Start: ",j(u[0])]}),a.jsxs("span",{children:["End: ",j(u[1])]})]}),a.jsxs("div",{className:"relative h-10 flex items-center select-none",children:[a.jsx("input",{type:"range",min:0,max:d,step:.1,value:u[0],onChange:e=>{const s=parseFloat(e.target.value);s<u[1]&&x([s,u[1]])},className:"absolute w-full h-2 bg-transparent appearance-none pointer-events-none z-30 [&::-webkit-slider-thumb]:pointer-events-auto [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-600 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-white [&::-webkit-slider-thumb]:shadow-md"}),a.jsx("input",{type:"range",min:0,max:d,step:.1,value:u[1],onChange:e=>{const s=parseFloat(e.target.value);s>u[0]&&x([u[0],s])},className:"absolute w-full h-2 bg-transparent appearance-none pointer-events-none z-30 [&::-webkit-slider-thumb]:pointer-events-auto [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-600 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-white [&::-webkit-slider-thumb]:shadow-md"}),a.jsx("div",{className:"absolute w-full h-2 bg-secondary rounded-full overflow-hidden z-10",children:a.jsx("div",{className:"h-full bg-purple-200 dark:bg-purple-900/50",style:{left:u[0]/d*100+"%",right:100-u[1]/d*100+"%",position:"absolute"}})})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Duration: ",j(d)]}),a.jsxs("span",{children:["Trimmed Length: ",j(u[1]-u[0])]})]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx(o,{onClick:async()=>{const[t,a]=u;if(t>=a)c.error("Start time must be before end time");else{h(!0);try{const n=await e.arrayBuffer();g.current||(g.current=new(window.AudioContext||window.webkitAudioContext));const i=g.current,r=await i.decodeAudioData(n),l=Math.floor(t*r.sampleRate),o=Math.floor(a*r.sampleRate)-l,d=i.createBuffer(r.numberOfChannels,o,r.sampleRate);for(let e=0;e<r.numberOfChannels;e++){const s=r.getChannelData(e),t=d.getChannelData(e);for(let e=0;e<o;e++)t[e]=s[l+e]}const m=function(e){const s=e.length*e.numberOfChannels*2+44,t=new ArrayBuffer(s),a=new DataView(t),n=[];let i=0,r=0;const l=e=>{a.setUint16(r,e,!0),r+=2},o=e=>{a.setUint32(r,e,!0),r+=4};o(1179011410),o(s-8),o(1163280727),o(544501094),o(16),l(1),l(e.numberOfChannels),o(e.sampleRate),o(2*e.sampleRate*e.numberOfChannels),l(2*e.numberOfChannels),l(16),o(1635017060),o(s-r-4);for(let c=0;c<e.numberOfChannels;c++)n.push(e.getChannelData(c));for(;r<s;){for(let s=0;s<e.numberOfChannels;s++){let e=Math.max(-1,Math.min(1,n[s][i]));e=e<0?32768*e:32767*e,a.setInt16(r,e,!0),r+=2}i++}return t}(d),u=new Blob([m],{type:"audio/wav"}),x=new File([u],e.name.replace(/\.[^/.]+$/,"")+"_trimmed.wav",{type:"audio/wav"});s(x,t,a),c.success(`Audio trimmed: ${t.toFixed(1)}s to ${a.toFixed(1)}s`)}catch(n){console.error("Trim error:",n),c.error(`Failed to trim audio: ${n.message}`)}finally{h(!1)}}},disabled:p,className:"flex-1",children:p?"Trimming...":"Apply Trim"})})]})]})}const K={note_completion:{label:"Note Completion",icon:q,description:"Fill in blanks in notes"},table_completion:{label:"Table/Form Completion",icon:J,description:"Fill in table cells"},map_labeling:{label:"Map/Plan Labeling",icon:G,description:"Label locations on a map"},multiple_choice_matching:{label:"Multiple Choice Matching",icon:D,description:"Match letters A-H to items"},sentence_completion:{label:"Sentence Completion",icon:q,description:"Complete sentences"},flowchart_completion:{label:"Flowchart Completion",icon:B,description:"Fill in flowchart boxes"},plan_labeling:{label:"Plan/Diagram Labeling",icon:V,description:"Label a plan or diagram"},multiple_choice:{label:"Multiple Choice",icon:D,description:"Choose correct answer"},fill_blank:{label:"Fill in the Blank",icon:q,description:"Generic fill-in-blank"}},X={questionCount:5,questionType:"note_completion",instruction:"Write NO MORE THAN TWO WORDS OR A NUMBER for each answer."},Y=()=>{var s,D,B,V,G,J,Y,Z,ee;const se=d(),{testType:te,testId:ae}=m(),{admin:ne,loading:ie}=u(),re=te||"ielts",le=`/admin/${re}/listening`,{listContent:oe,createContent:ce,uploadAudio:de}=x(),[me,ue]=t.useState({title:"",instructions:"",audioFile:null,existingAudioUrl:null,csvFile:null,transcriptText:"",answerImageFile:null,referenceImageUrl:null,saved:!1}),[xe,pe]=t.useState(!1),[he,be]=t.useState(!1),[ge,fe]=t.useState(!1);t.useState(!1);const[je,ve]=t.useState({}),[Ne,we]=t.useState(!1),[ye,_e]=t.useState(!1),[qe,ke]=t.useState([]),[Ce,Te]=t.useState(1),[Fe,Ae]=t.useState(4),[Ie,Ee]=t.useState(()=>{const e={};for(let s=1;s<=4;s++)e[s]={...X,questionCount:10};return e}),Se=Object.fromEntries(Object.entries(Ie).map(([e,s])=>[e,s.questionCount])),[Ue,Oe]=t.useState(null),[Me,Pe]=t.useState(null),Le=()=>Array.from({length:Fe},(e,s)=>Se[s+1]||5),$e=e=>{const s=Le();let t=0;for(let a=0;a<s.length;a++)if(t+=s[a],e<t)return a+1;return Fe},Re=e=>{const s=Le();let t=0;for(let a=0;a<s.length;a++){const n=t+s[a];if(e<n)return e-t+1;t=n}return e-s.slice(0,s.length-1).reduce((e,s)=>e+s,0)+1},Qe=e=>Le().slice(0,e-1).reduce((e,s)=>e+s,0)+1,ze=(e,s)=>{Ee(t=>({...t,[e]:{...t[e]||X,...s}}))},De=qe.map((e,s)=>{const t=e.part_number||$e(s),a=e.question_number_in_part||Re(s),n=Qe(t)+a-1;return{...e,globalNumber:n,part:t,questionInPart:a,originalIndex:s}}).reduce((e,s)=>(e[s.part]=e[s.part]?[...e[s.part],s]:[s],e),{}),Be=(e,s)=>{Oe({...e}),Pe(s)};t.useEffect(()=>{ie||ne||se("/admin/login")},[ne,ie,se]),t.useEffect(()=>{Ve()},[te,ae]);const Ve=async()=>{const s=te||"IELTS";if(console.log("ðŸ”„ loadExistingData called with testType:",s,"testId:",ae),ae)try{const{supabase:s}=await e(async()=>{const{supabase:e}=await import("./supabase-DWL4C3fA.js").then(e=>e.b);return{supabase:e}},[]),{data:t}=await s.from("tests").select("*").eq("id",ae).maybeSingle();if(!t)return void console.log("âš ï¸ No existing test found for testId:",ae);console.log("ðŸ“‹ Found existing test:",t.test_name);const{data:a}=await s.from("questions").select("*").eq("test_id",t.id).order("question_number_in_part",{ascending:!0});console.log("ðŸ“Š Found",(null==a?void 0:a.length)||0,"questions for this test");const n=t.audio_url||(a&&a.length>0?a[0].audio_url:null),i=t.reference_image_url||null;if(a&&a.length>0){const e=a[0],s=a.map((e,s)=>{const t=e.part_number||$e(s),a=e.question_number_in_part||Re(s);return{question_number:e.question_number_in_part||s+1,question_text:e.question_text,question_type:e.question_type||"fill_blank",options:e.choices?e.choices.includes(";")?e.choices.split(";"):[e.choices]:void 0,correct_answer:e.correct_answer,explanation:e.explanation,section_header:e.section_header||void 0,section_label:e.section_label||void 0,part_number:t,question_number_in_part:a}});ke(s);const r=JSON.stringify(s),l=new File([r],"existing-questions.json",{type:"application/json"});ue({title:t.test_name,instructions:e.passage_text||"",audioFile:null,existingAudioUrl:n||null,csvFile:l,transcriptText:e.transcription||"",answerImageFile:null,referenceImageUrl:i,saved:!0}),n&&c.success(`Existing audio loaded: ${n.split("/").pop()}`)}else ue(e=>({...e,title:t.test_name,existingAudioUrl:n||null,referenceImageUrl:i,saved:!0})),n&&c.success(`Existing audio loaded: ${n.split("/").pop()}`)}catch(t){console.error("Error loading existing data:",t),c.error("Failed to load existing data")}else console.log("âš ï¸ Skipping loadExistingData - missing testId")},Ge=(e,s)=>{ue(t=>({...t,[e]:s,saved:!1}))},He=e=>{const s=e.globalNumber||e.questionInPart,t=e.question_type||"fill_blank";if("multiple_choice_matching"===t||e.options&&e.options.length>0&&"multiple_choice"!==t)return a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-red-600 font-bold",children:["(",s,")"]}),a.jsx("span",{className:"text-[#1a1a1a] font-medium",children:e.question_text}),a.jsx("span",{className:"flex-1 border-b-2 border-dotted border-red-500 min-w-[60px]"})]})},`q-${s}`);if("multiple_choice"===t)return a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[a.jsxs("span",{className:"text-red-600 font-bold text-lg",children:["(",s,")"]}),a.jsx("span",{className:"text-[#1a1a1a] font-medium",children:e.question_text})]}),a.jsx("div",{className:"pl-8 space-y-1",children:(e.options||[]).map((e,s)=>a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("span",{className:"text-blue-600 font-semibold",children:["(",String.fromCharCode(65+s),")"]}),a.jsx("span",{className:"text-blue-600",children:e})]},s))})]},`q-${s}`);if("table_completion"===t)return a.jsxs("div",{className:"flex items-center gap-2 mb-2 pl-4",children:[a.jsx("span",{className:"text-[#1a1a1a] font-medium min-w-[120px]",children:e.question_text}),a.jsxs("span",{className:"text-red-600 font-bold",children:["(",s,")"]}),a.jsx("span",{className:"flex-1 border-b-2 border-dotted border-red-500 min-w-[80px]"})]},`q-${s}`);if("map_labeling"===t||"plan_labeling"===t)return a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsxs("span",{className:"text-red-600 font-bold",children:["(",s,")"]}),a.jsx("span",{className:"flex-1 border-b-2 border-dotted border-red-500 min-w-[100px]"}),e.question_text&&a.jsx("span",{className:"text-[#1a1a1a] text-sm",children:e.question_text})]},`q-${s}`);if("flowchart_completion"===t)return a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsxs("span",{className:"text-[#1a1a1a] font-medium",children:["* ",e.question_text||""]}),a.jsxs("span",{className:"text-red-600 font-bold",children:["(",s,")"]}),a.jsx("span",{className:"flex-1 border-b-2 border-dotted border-red-500 min-w-[60px]"})]},`q-${s}`);if("sentence_completion"===t){const t=e.question_text||"";if(t.includes("___")||t.includes("...")){const e=t.split(/___|\.\.\./);return a.jsx("div",{className:"mb-3",children:a.jsxs("span",{className:"text-[#1a1a1a] font-medium",children:[e[0],a.jsxs("span",{className:"text-red-600 font-bold mx-1",children:["(",s,")"]}),a.jsx("span",{className:"inline-block border-b-2 border-dotted border-red-500 min-w-[80px] mx-1"}),e[1]||""]})},`q-${s}`)}}return a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("span",{className:"text-[#1a1a1a] font-medium flex-shrink-0",children:e.question_text||`Question ${s}`}),a.jsxs("span",{className:"text-red-600 font-bold",children:["(",s,")"]}),a.jsx("span",{className:"flex-1 border-b-2 border-dotted border-red-500 min-w-[80px]"})]},`q-${s}`)};return ie?a.jsx("div",{className:"min-h-screen bg-[#fdfaf3] flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-sm text-[#5a4a3f]",children:"Loading Listening Management..."})]})}):ne?a.jsxs(M,{title:`${re.toUpperCase()} Test ${ae} - Listening Management`,showBackButton:!0,backPath:le,onBackClick:()=>se(le),children:[a.jsxs("div",{className:"space-y-6 bg-[#fdfaf3] min-h-screen p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-[#2f241f]",children:[re.toUpperCase()," Test ",ae," - Listening Management"]}),a.jsx("p",{className:"text-sm text-[#5a4a3f] mt-1",children:"Note theme: warm paper, per-part review with student preview"})]}),a.jsxs(p,{variant:"secondary",className:"text-sm bg-amber-100 text-amber-900 border-amber-200",children:["Test ",ae]})]}),a.jsxs(n,{className:"border border-[#e0d6c7] bg-[#fdfaf3] shadow-sm",children:[a.jsx(i,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(r,{className:"flex items-center gap-2 text-[#2f241f]",children:[me.saved?a.jsx(h,{className:"w-5 h-5 text-green-600"}):a.jsx(b,{className:"w-5 h-5 text-[#a89a8c]"}),"Listening Test - ",Fe," Part",Fe>1?"s":""," (",Le().reduce((e,s)=>e+s,0)," Questions)"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(o,{variant:"outline",size:"sm",onClick:()=>{if(Fe<=1)return void c.error("Minimum 1 part required");const e=qe.filter(e=>(e.part_number||$e(qe.indexOf(e)))===Fe);if(e.length>0&&!confirm(`Part ${Fe} has ${e.length} question(s). Remove anyway?`))return;const s={...Ie};delete s[Fe],Ee(s),Ae(Fe-1),Ce>Fe-1&&Te(Fe-1),c.success(`Part ${Fe} removed`)},disabled:Fe<=1,className:"h-8 w-8 p-0 border-amber-200",children:a.jsx(g,{className:"w-4 h-4"})}),a.jsxs("span",{className:"text-sm font-medium text-[#2f241f] min-w-[60px] text-center",children:[Fe," Parts"]}),a.jsx(o,{variant:"outline",size:"sm",onClick:()=>{if(Fe>=20)return void c.error("Maximum 20 parts allowed");const e=Fe+1;Ae(e),Ee(s=>({...s,[e]:{...X}})),c.success(`Part ${e} added`)},disabled:Fe>=20,className:"h-8 w-8 p-0 border-amber-200",children:a.jsx(f,{className:"w-4 h-4"})})]}),a.jsx(p,{variant:me.saved?"default":"outline",className:me.saved?"bg-green-100 text-green-800 border-green-200":"border-[#e0d6c7]",children:me.saved?"Saved":"Not Saved"})]})]})}),a.jsxs(l,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Test Name *"}),a.jsx(j,{placeholder:`IELTS Listening Test ${ae}`,value:me.title,onChange:e=>Ge("title",e.target.value),className:"max-w-md bg-white border-[#e0d6c7] focus:border-amber-400 focus:ring-amber-200 text-[#2f241f]"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Audio File (All Parts) *"}),a.jsxs("div",{className:"border-2 border-dashed border-[#e0d6c7] bg-white rounded-lg p-6 hover:bg-amber-50/50 transition-colors",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(v,{className:"w-12 h-12 mx-auto mb-3 text-amber-600"}),a.jsx("p",{className:"text-sm text-[#5a4a3f] mb-3",children:"Upload MP3 or WAV (30-40 minutes)"}),a.jsx("input",{type:"file",accept:"audio/*",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&(e=>{ue(s=>({...s,audioFile:e})),ue(e=>({...e,audioTrimStart:void 0,audioTrimEnd:void 0})),we(!0),c.success(`Audio file uploaded: ${e.name}`)})(t)},className:"hidden",id:"audio-upload"}),a.jsxs(o,{variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("audio-upload"))?void 0:e.click()},className:"bg-amber-50 border-amber-200 text-amber-900 hover:bg-amber-100",children:[a.jsx($,{className:"w-4 h-4 mr-2"}),"Choose Audio File"]})]})}),me.audioFile&&a.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-green-800",children:["âœ“ Audio file ready: ",me.audioFile.name]}),a.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Size: ",(me.audioFile.size/1024/1024).toFixed(2)," MB"]})]}),a.jsxs(o,{variant:"outline",size:"sm",onClick:()=>we(!0),className:"border-green-200 text-green-800",children:[a.jsx(H,{className:"w-3 h-3 mr-2"}),"Trim"]})]}),a.jsx("audio",{controls:!0,src:URL.createObjectURL(me.audioFile),className:"w-full mt-3 h-8"})]}),!me.audioFile&&me.existingAudioUrl&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-blue-800",children:"âœ“ Audio file already uploaded"}),a.jsx("audio",{controls:!0,className:"mt-2 w-full max-w-md",children:a.jsx("source",{src:me.existingAudioUrl,type:"audio/mpeg"})})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsxs(o,{variant:"outline",size:"sm",onClick:async()=>{if(me.existingAudioUrl)try{const e=c.loading("Loading audio for editing..."),s=await fetch(me.existingAudioUrl),t=await s.blob(),a=me.existingAudioUrl.split("/").pop()||"existing-audio.mp3",n=new File([t],a,{type:t.type});ue(e=>({...e,audioFile:n})),we(!0),c.dismiss(e),c.success("Audio loaded for editing")}catch(e){console.error("Error loading audio:",e),c.dismiss(),c.error("Failed to load audio for editing")}},className:"border-blue-200 text-blue-800",children:[a.jsx(H,{className:"w-3 h-3 mr-2"}),"Trim"]}),a.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this audio?")&&(ue(e=>({...e,existingAudioUrl:null,audioFile:null})),c.success("Audio deleted"))},className:"border-red-200 text-red-600",children:[a.jsx(R,{className:"w-3 h-3 mr-2"}),"Delete"]})]})]})})]})]}),Ne&&me.audioFile&&a.jsx(W,{audioFile:me.audioFile,onTrimComplete:(e,s,t)=>{Ge("audioFile",e),Ge("audioTrimStart",s),Ge("audioTrimEnd",t),we(!1),c.success(`Trim applied: ${s.toFixed(1)}s to ${t.toFixed(1)}s`)}}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Reference Image (Optional)"}),a.jsx("p",{className:"text-xs text-[#5a4a3f]",children:"Upload the original test image for reference in student preview"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&(async e=>{if(e.type.startsWith("image/")){_e(!0);try{const s=await de(e);ue(e=>({...e,referenceImageUrl:s.url})),c.success("Reference image uploaded")}catch(s){c.error("Failed to upload reference image: "+s.message)}finally{_e(!1)}}else c.error("Please upload an image file")})(t)},className:"hidden",id:"reference-image-upload"}),a.jsx(o,{variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("reference-image-upload"))?void 0:e.click()},disabled:ye,className:"bg-white border-[#e0d6c7] text-[#2f241f] hover:bg-amber-50",children:ye?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-amber-600 mr-2"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Q,{className:"w-4 h-4 mr-2"}),"Upload Reference Image"]})}),me.referenceImageUrl&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(h,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-700",children:"Reference image uploaded"}),a.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Ge("referenceImageUrl",null),className:"text-red-500 h-6",children:a.jsx(N,{className:"w-3 h-3"})})]})]}),me.referenceImageUrl&&a.jsx("img",{src:me.referenceImageUrl,alt:"Reference",className:"max-w-md rounded-lg border border-[#e0d6c7] mt-2"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Transcript Text (Optional)"}),a.jsx(w,{placeholder:"Paste the full transcript text here...",value:me.transcriptText,onChange:e=>Ge("transcriptText",e.target.value),rows:6,className:"font-mono text-sm bg-white border-[#e0d6c7] text-[#2f241f]"}),me.transcriptText&&a.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:a.jsxs("p",{className:"text-xs text-amber-900 flex items-center gap-2",children:[a.jsx(y,{className:"w-3 h-3"}),"Timestamps will be auto-generated when you save."]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Extract Questions from Image *"}),a.jsx(P,{testId:ae||"",testType:re,initialImageFile:me.answerImageFile,onImageSelected:e=>Ge("answerImageFile",e),onQuestionsExtracted:e=>{console.log("âœ¨ AI extracted questions:",e);const s=JSON.stringify(e),t=new File([s],"ai-extracted-questions.json",{type:"application/json"});ke(e),Ge("csvFile",t),c.success(`Ready to save ${e.length} AI-extracted questions!`)}})]}),qe.length>0&&a.jsxs("div",{className:"space-y-6 border-t border-[#e0d6c7] pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-[#2f241f] flex items-center gap-2",children:[a.jsx(_,{className:"w-5 h-5"}),"Review & Student Preview"]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:Array.from({length:Fe},(e,s)=>s+1).map(e=>{var s;const t=De[e]||[],n=Ie[e]||X,i=(null==(s=K[n.questionType])?void 0:s.icon)||q;return a.jsxs(o,{variant:Ce===e?"default":"outline",size:"sm",className:Ce===e?"bg-amber-500 hover:bg-amber-600 text-white":"bg-white border-[#e0d6c7] text-[#2f241f] hover:bg-amber-50",onClick:()=>Te(e),children:[a.jsx(i,{className:"w-3 h-3 mr-1"}),"Part ",e," (",t.length,")"]},e)})})]}),a.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm font-semibold text-amber-900",children:["Part ",Ce," Settings"]}),a.jsxs("span",{className:"text-xs text-amber-700 font-medium",children:["Questions ",Qe(Ce)," â€“ ",Qe(Ce)+((null==(s=Ie[Ce])?void 0:s.questionCount)||5)-1]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-amber-800 font-medium",children:"Questions in Part"}),a.jsx("input",{type:"number",min:1,max:20,value:(null==(D=Ie[Ce])?void 0:D.questionCount)||5,onChange:e=>ze(Ce,{questionCount:Math.max(1,Math.min(20,Number(e.target.value)||1))}),className:"w-full px-3 py-2 rounded border border-amber-200 bg-white text-[#2f241f] text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-amber-800 font-medium",children:"Question Type"}),a.jsxs(k,{value:(null==(B=Ie[Ce])?void 0:B.questionType)||"note_completion",onValueChange:e=>ze(Ce,{questionType:e}),children:[a.jsx(C,{className:"bg-white border-amber-200",children:a.jsx(T,{})}),a.jsx(F,{children:Object.entries(K).map(([e,s])=>{const t=s.icon;return a.jsx(A,{value:e,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(t,{className:"w-4 h-4"}),s.label]})},e)})})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs text-amber-800 font-medium",children:"Instruction Text"}),a.jsx(j,{value:(null==(V=Ie[Ce])?void 0:V.instruction)||X.instruction,onChange:e=>ze(Ce,{instruction:e.target.value}),placeholder:"Write NO MORE THAN...",className:"bg-white border-amber-200 text-sm"})]})]}),a.jsx("div",{className:"flex items-center gap-2 text-xs text-amber-700 bg-amber-100/50 rounded px-2 py-1",children:(()=>{var e;const s=K[null==(e=Ie[Ce])?void 0:e.questionType]||K.note_completion,t=s.icon;return a.jsxs(a.Fragment,{children:[a.jsx(t,{className:"w-4 h-4"}),a.jsx("span",{children:s.description})]})})()})]}),a.jsxs(n,{className:"bg-white border-2 border-[#e0d6c7] shadow-md overflow-hidden",children:[a.jsxs("div",{className:"bg-[#ffd500] px-4 py-3",children:[a.jsxs("div",{className:"text-black font-bold text-lg",children:["Part - ",Ce," Â Â  Questions ",Qe(Ce)," - ",Qe(Ce)+((null==(G=Ie[Ce])?void 0:G.questionCount)||5)-1,"Â Â ",a.jsx("span",{className:"text-sm font-normal",children:(null==(Y=K[null==(J=Ie[Ce])?void 0:J.questionType])?void 0:Y.label)||"Complete the notes below."})]}),a.jsx("div",{className:"text-black text-sm font-semibold mt-1",children:(null==(Z=Ie[Ce])?void 0:Z.instruction)||X.instruction})]}),me.referenceImageUrl&&a.jsxs("div",{className:"p-4 bg-gray-50 border-b border-[#e0d6c7]",children:[a.jsx("p",{className:"text-xs text-[#5a4a3f] mb-2 font-medium",children:"ðŸ“· Reference Image:"}),a.jsx("img",{src:me.referenceImageUrl,alt:"Reference",className:"max-w-full rounded-lg border border-[#e0d6c7]"})]}),a.jsx(l,{className:"p-6",children:0===(De[Ce]||[]).length?a.jsx("p",{className:"text-[#5a4a3f] text-center py-8",children:"No questions for this part yet. Extract questions from an image above."}):a.jsx("div",{className:"space-y-1",children:(()=>{const e=[...De[Ce]||[]].sort((e,s)=>(e.questionInPart||0)-(s.questionInPart||0));let s="";return e.map((e,t)=>{const n=e.section_label&&e.section_label!==s;return n&&(s=e.section_label),a.jsxs("div",{children:[n&&a.jsx("div",{className:"inline-block bg-black text-white px-3 py-1 font-bold text-sm mt-4 mb-2",children:e.section_label}),a.jsxs("div",{className:"group relative",children:[He(e),a.jsxs(o,{variant:"ghost",size:"sm",className:"absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition-opacity h-6 text-amber-600 hover:text-amber-800 hover:bg-amber-50",onClick:()=>Be(e,e.originalIndex),children:[a.jsx(L,{className:"w-3 h-3 mr-1"}),"Edit"]})]})]},`preview-${e.globalNumber}`)})})()})})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:Fe},(e,s)=>s+1).map(e=>{var s,t;const c=De[e]||[],d=Ie[e]||X,m=d.questionCount,u=Qe(e),x=u+m-1,h=(null==(s=K[d.questionType])?void 0:s.icon)||q;return a.jsxs(n,{className:"bg-white border "+(Ce===e?"border-amber-400 ring-2 ring-amber-200":"border-[#e0d6c7]"),children:[a.jsxs(i,{className:"pb-2 bg-amber-50/50",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(r,{className:"text-sm font-semibold text-[#2f241f] flex items-center gap-1",children:[a.jsx(h,{className:"w-3 h-3 text-amber-600"}),"Part ",e," â€¢ Q",u,"â€“",x]}),a.jsxs(p,{variant:"outline",className:"bg-white border-amber-200 text-amber-800 text-xs",children:[c.length,"/",m]})]}),a.jsx("p",{className:"text-xs text-[#5a4a3f] truncate",children:null==(t=K[d.questionType])?void 0:t.label})]}),a.jsx(l,{className:"space-y-2 max-h-[250px] overflow-y-auto p-3",children:0===c.length?a.jsx("p",{className:"text-xs text-[#5a4a3f] text-center py-4",children:"No questions yet"}):[...c].sort((e,s)=>(e.questionInPart||0)-(s.questionInPart||0)).map(e=>{var s;return a.jsx("div",{className:"p-2 rounded border border-[#e0d6c7] bg-[#fdfaf3] group",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(p,{variant:"outline",className:"bg-white border-amber-200 text-amber-800 text-xs shrink-0",children:["Q",e.globalNumber]}),a.jsxs("span",{className:"text-xs text-[#5a4a3f] truncate",children:[null==(s=e.question_text)?void 0:s.slice(0,35),"..."]})]}),a.jsxs("p",{className:"text-xs text-green-700 mt-1 truncate",children:["Answer: ",e.correct_answer]})]}),a.jsx(o,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 h-6 text-amber-600 shrink-0",onClick:()=>Be(e,e.originalIndex),children:a.jsx(L,{className:"w-3 h-3"})})]})},`list-${e.globalNumber}`)})})]},e)})}),a.jsx("div",{className:"flex justify-end",children:a.jsx(o,{variant:"outline",onClick:async()=>{if(0!==qe.length)if(me.transcriptText){fe(!0);try{console.log("ðŸ¤– Generating AI explanations with Gemini 3.0 Pro (via Edge Function)...");const{supabase:s}=await e(async()=>{const{supabase:e}=await import("./supabase-DWL4C3fA.js").then(e=>e.b);return{supabase:e}},[]),{data:t,error:a}=await s.functions.invoke("generate-listening-explanations",{body:{questions:qe,transcriptText:me.transcriptText,transcriptJson:null}});if(a)throw a;if(!t.success)throw new Error(t.error||"Failed to generate explanations");const n=qe.map((e,s)=>{const a=t.explanations.find(e=>e.questionIndex===s+1);return{...e,explanation:a?a.explanation:e.explanation}});ke(n);const i=JSON.stringify(n),r=new File([i],"questions-with-explanations.json",{type:"application/json"});Ge("csvFile",r),c.success(`Generated explanations for ${t.explanations.length} questions!`)}catch(s){console.error("Error generating explanations:",s),c.error(`Failed to generate explanations: ${s.message}`)}finally{fe(!1)}}else c.error("Please provide a transcript first");else c.error("Please upload questions first")},disabled:ge||!me.transcriptText,className:"border-amber-200 text-amber-900 hover:bg-amber-50",children:ge?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-amber-500 mr-2"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(y,{className:"w-4 h-4 mr-2"}),"Generate AI Explanations"]})})})]}),a.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[a.jsx("h4",{className:"text-sm font-semibold text-amber-900 mb-2",children:"ðŸ’¡ Tips:"}),a.jsxs("ul",{className:"text-xs text-amber-800 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Upload audio file containing all parts"}),a.jsx("li",{children:"Use AI to extract questions from test images"}),a.jsxs("li",{children:[a.jsx("strong",{children:"Add/remove parts"})," using the +/- buttons (up to ",20," parts)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Question types:"})," Note completion, Table, Map labeling, Multiple choice, Sentence completion, Flowchart, Plan labeling"]}),a.jsx("li",{children:"Each part has its own question count and instruction text"}),a.jsx("li",{children:"Edit questions directly - changes reflect in preview instantly"})]})]}),a.jsx("div",{className:"flex gap-3 justify-end pt-4 border-t border-[#e0d6c7]",children:a.jsx(o,{onClick:()=>(async()=>{const s=me.audioFile;if(s||me.existingAudioUrl||0!==qe.length){pe(!0);try{let a=me.existingAudioUrl;if(console.log("ðŸ’¾ Starting save with existingAudioUrl:",a),s){console.log("ðŸ“¤ Uploading audio to Cloudflare R2...");const e=await de(s);a=e.url,console.log("âœ… Audio uploaded successfully:",a)}let n=null;if(me.transcriptText.trim()&&a){be(!0);try{console.log("ðŸŽ™ï¸ Generating timestamps for transcript...");const{supabase:s}=await e(async()=>{const{supabase:e}=await import("./supabase-DWL4C3fA.js").then(e=>e.b);return{supabase:e}},[]),{data:t,error:i}=await s.functions.invoke("generate-transcript-timestamps",{body:{audioUrl:a,transcript:me.transcriptText}});if(i)throw i;if(!t.success)throw new Error(t.error||"Failed to generate timestamps");n=t.timestamps,console.log("âœ… Timestamps generated successfully"),c.success("Transcript timestamps generated!")}catch(t){console.error("Error generating timestamps:",t),c.error("Failed to generate timestamps, but saving test anyway.")}finally{be(!1)}}let i=null;me.answerImageFile&&(console.log("ðŸ“¤ Uploading answer image..."),i=(await de(me.answerImageFile)).url,console.log("âœ… Answer image uploaded:",i));const r=qe.length>0?qe:[],{supabase:l}=await e(async()=>{const{supabase:e}=await import("./supabase-DWL4C3fA.js").then(e=>e.b);return{supabase:e}},[]),o={testId:ae,testData:{title:me.title||`IELTS Listening Test ${ae}`,instructions:me.instructions,audioUrl:a,transcriptText:me.transcriptText,transcriptJson:n,answerImageUrl:i,referenceImageUrl:me.referenceImageUrl,totalParts:Fe,partConfigs:Ie,partQuestionCounts:Se},questions:r.map((e,s)=>{const t=e.part_number||$e(s),a=e.question_number_in_part||Re(s),n=1===a,i=Ie[t]||X;return{...e,part_number:t,question_number_in_part:a,question_type:e.question_type||i.questionType,explanation:je[s]||e.explanation||"",passage_text:n?i.instruction:null,section_instruction:n?i.instruction:null}})};console.log("ðŸ’¾ Saving test via Edge Function with audioUrl:",a);const{data:d,error:m}=await l.functions.invoke("save-listening-test",{body:o});if(m)throw console.error("Edge Function error:",m),new Error(`Edge Function failed: ${m.message||JSON.stringify(m)}`);if(!d||!d.success){const e=(null==d?void 0:d.error)||"Failed to save test";throw console.error("Edge Function returned error:",e),new Error(e)}console.log("âœ… Test saved successfully!"),c.success("Test saved successfully!"),ue(e=>({...e,saved:!0,existingAudioUrl:a||e.existingAudioUrl,audioFile:null})),pe(!1)}catch(a){console.error("Error saving test:",a),c.error(`Failed to save test: ${a.message}`),pe(!1)}}else c.error("Please upload either an audio file or add questions first")})(),disabled:xe||!me.audioFile&&!me.existingAudioUrl&&0===qe.length,className:"bg-amber-600 hover:bg-amber-700 text-white px-8",size:"lg",children:xe?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(z,{className:"w-4 h-4 mr-2"}),"Save Complete Listening Test"]})})})]})]})]}),a.jsx(I,{open:null!==Ue,onOpenChange:e=>!e&&Oe(null),children:a.jsxs(E,{className:"max-w-lg bg-[#fdfaf3] border-[#e0d6c7] max-h-[90vh] overflow-y-auto",children:[a.jsx(S,{children:a.jsxs(U,{className:"text-[#2f241f]",children:["Edit Question ",null==Ue?void 0:Ue.question_number]})}),Ue&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Question Type"}),a.jsxs(k,{value:Ue.question_type||"note_completion",onValueChange:e=>Oe({...Ue,question_type:e}),children:[a.jsx(C,{className:"mt-1 bg-white border-[#e0d6c7]",children:a.jsx(T,{})}),a.jsx(F,{children:Object.entries(K).map(([e,s])=>{const t=s.icon;return a.jsx(A,{value:e,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(t,{className:"w-4 h-4"}),s.label]})},e)})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Section Header"}),a.jsx(j,{value:Ue.section_header||"",onChange:e=>Oe({...Ue,section_header:e.target.value}),placeholder:"Questions 6-10...",className:"mt-1 bg-white border-[#e0d6c7] text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Section Label"}),a.jsx(j,{value:Ue.section_label||"",onChange:e=>Oe({...Ue,section_label:e.target.value}),placeholder:"e.g., Henry, Extras",className:"mt-1 bg-white border-[#e0d6c7] text-sm"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Question Text *"}),a.jsx(w,{value:Ue.question_text||"",onChange:e=>Oe({...Ue,question_text:e.target.value}),rows:3,className:"mt-1 bg-white border-[#e0d6c7]"}),a.jsx("p",{className:"text-xs text-[#5a4a3f] mt-1",children:"Use ___ or ... to indicate blank positions in sentence completion"})]}),("multiple_choice"===Ue.question_type||"multiple_choice_matching"===Ue.question_type||Ue.options&&Ue.options.length>0)&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Options (one per line)"}),a.jsx(w,{value:(Ue.options||[]).join("\n"),onChange:e=>Oe({...Ue,options:e.target.value.split("\n").filter(e=>e.trim())}),rows:4,placeholder:"Option A\nOption B\nOption C",className:"mt-1 bg-white border-[#e0d6c7]"}),a.jsx("p",{className:"text-xs text-[#5a4a3f] mt-1",children:"Letters (A, B, C...) will be added automatically"})]}),!(null==(ee=Ue.options)?void 0:ee.length)&&"multiple_choice"!==Ue.question_type&&"multiple_choice_matching"!==Ue.question_type&&a.jsxs(o,{variant:"outline",size:"sm",onClick:()=>Oe({...Ue,options:[""]}),className:"border-[#e0d6c7] text-[#5a4a3f]",children:[a.jsx(f,{className:"w-3 h-3 mr-1"}),"Add Options (for matching)"]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Correct Answer *"}),a.jsx(j,{value:Ue.correct_answer||"",onChange:e=>Oe({...Ue,correct_answer:e.target.value}),className:"mt-1 bg-white border-[#e0d6c7]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-[#2f241f]",children:"Explanation (Optional)"}),a.jsx(w,{value:Ue.explanation||"",onChange:e=>Oe({...Ue,explanation:e.target.value}),rows:2,className:"mt-1 bg-white border-[#e0d6c7]"})]})]}),a.jsxs(O,{children:[a.jsx(o,{variant:"outline",onClick:()=>Oe(null),className:"border-[#e0d6c7]",children:"Cancel"}),a.jsxs(o,{onClick:()=>{if(null!==Me&&Ue){const e=[...qe];e[Me]={...e[Me],question_text:Ue.question_text,question_type:Ue.question_type,correct_answer:Ue.correct_answer,options:Ue.options,section_header:Ue.section_header,section_label:Ue.section_label,section_instruction:Ue.section_instruction,explanation:Ue.explanation},ke(e),Oe(null),Pe(null),c.success("Question updated")}},className:"bg-amber-600 hover:bg-amber-700 text-white",children:[a.jsx(z,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})})]}):null};export{Y as default};
