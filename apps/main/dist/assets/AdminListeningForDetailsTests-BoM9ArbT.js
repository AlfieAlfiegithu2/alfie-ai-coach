import{r as e,u as s,j as t}from"./vendor-react-JN_hy__U.js";import{A as i}from"./AdminLayout-D3lPYw5Y.js";import{d as a,C as r,b as n,c as l,a as o,I as d,B as c,s as m}from"./index-DXpPY1B7.js";import{S as u}from"./separator-Bv0Pudil.js";import"./vendor-react-dom-Cb-iy8Oc.js";import"./vendor-animation-ClPlB6zo.js";import"./vendor-ui-DG51EGkO.js";import"./vendor-i18n-DlHrixAm.js";import"./vendor-utils-D5HPTFR9.js";import"./vendor-supabase-D7XYLCUu.js";import"./vendor-charts-BpOKEG9Z.js";import"./vendor-date-DT7Rq6D9.js";const j=()=>{const[j,g]=e.useState([]),[h,p]=e.useState(""),[x,f]=e.useState(!1),v=s(),{toast:k}=a(),b=async()=>{const{data:e,error:s}=await m.from("skill_tests").select("id,title,created_at").eq("skill_slug","listening-for-details").order("created_at",{ascending:!1});s||g(e??[])};e.useEffect(()=>{document.title="Listening for Details Tests | Admin";const e=document.querySelector('link[rel="canonical"]')||document.createElement("link");e.setAttribute("rel","canonical"),e.setAttribute("href",window.location.origin+"/admin/skills/listening-for-details"),document.head.contains(e)||document.head.appendChild(e),b()},[]);return t.jsx(i,{title:"Listening for Details Tests",showBackButton:!0,children:t.jsxs("section",{className:"space-y-4",children:[t.jsxs(r,{children:[t.jsx(n,{children:t.jsx(l,{className:"text-base",children:"+ Add New Listening Test"})}),t.jsxs(o,{className:"flex gap-2 items-center",children:[t.jsx(d,{placeholder:"Test title (e.g., Set 1)",value:h,onChange:e=>p(e.target.value)}),t.jsx(c,{onClick:async()=>{if(!h.trim())return;f(!0);const{data:e,error:s}=await m.from("skill_tests").insert({skill_slug:"listening-for-details",title:h.trim()}).select("id").maybeSingle();f(!1),s?k({title:"Failed to create test",description:s.message,variant:"destructive"}):(p(""),await b(),(null==e?void 0:e.id)&&v(`/admin/skills/listening-for-details/${e.id}`))},disabled:x,children:x?"Adding...":"Add"})]})]}),t.jsx(u,{}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[j.map(e=>t.jsxs(r,{className:"hover:shadow-lg transition-shadow",children:[t.jsx(n,{className:"pb-2",children:t.jsx(l,{className:"text-sm",children:e.title})}),t.jsx(o,{children:t.jsx(c,{size:"sm",variant:"secondary",onClick:()=>v(`/admin/skills/listening-for-details/${e.id}`),children:"Manage Test"})})]},e.id)),0===j.length&&t.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{j as default};
