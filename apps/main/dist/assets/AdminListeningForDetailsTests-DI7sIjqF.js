import{r as e,u as s,h as t,j as i,C as a,b as l,d as n,a as r,I as d,B as o}from"./index-Bv-rKY26.js";import{A as c}from"./AdminLayout-De2odo0u.js";import{S as m}from"./separator-BLD2IHoV.js";import{s as g}from"./supabase-DWL4C3fA.js";const u=()=>{const[u,h]=e.useState([]),[x,f]=e.useState(""),[j,p]=e.useState(!1),k=s(),{toast:N}=t(),b=async()=>{const{data:e,error:s}=await g.from("skill_tests").select("id,title,created_at").eq("skill_slug","listening-for-details").order("created_at",{ascending:!1});s||h(e??[])};e.useEffect(()=>{document.title="Listening for Details Tests | Admin";const e=document.querySelector('link[rel="canonical"]')||document.createElement("link");e.setAttribute("rel","canonical"),e.setAttribute("href",window.location.origin+"/admin/skills/listening-for-details"),document.head.contains(e)||document.head.appendChild(e),b()},[]);return i.jsx(c,{title:"Listening for Details Tests",showBackButton:!0,children:i.jsxs("section",{className:"space-y-4",children:[i.jsxs(a,{children:[i.jsx(l,{children:i.jsx(n,{className:"text-base",children:"+ Add New Listening Test"})}),i.jsxs(r,{className:"flex gap-2 items-center",children:[i.jsx(d,{placeholder:"Test title (e.g., Set 1)",value:x,onChange:e=>f(e.target.value)}),i.jsx(o,{onClick:async()=>{if(!x.trim())return;p(!0);const{data:e,error:s}=await g.from("skill_tests").insert({skill_slug:"listening-for-details",title:x.trim()}).select("id").maybeSingle();p(!1),s?N({title:"Failed to create test",description:s.message,variant:"destructive"}):(f(""),await b(),(null==e?void 0:e.id)&&k(`/admin/skills/listening-for-details/${e.id}`))},disabled:j,children:j?"Adding...":"Add"})]})]}),i.jsx(m,{}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[u.map(e=>i.jsxs(a,{className:"hover:shadow-lg transition-shadow",children:[i.jsx(l,{className:"pb-2",children:i.jsx(n,{className:"text-sm",children:e.title})}),i.jsx(r,{children:i.jsx(o,{size:"sm",variant:"secondary",onClick:()=>k(`/admin/skills/listening-for-details/${e.id}`),children:"Manage Test"})})]},e.id)),0===u.length&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{u as default};
