import{u as e,r as s,j as t}from"./vendor-react-rLLBBC7n.js";import{n as a,s as i,e as r,C as n,b as l,c,a as d,I as o,B as m,J as x}from"./index-BDl0jLJK.js";import{T as g,a as h,b as u,c as p}from"./tabs-CFW1rRMF.js";import{S as j}from"./separator-C0bogF69.js";import{A as b}from"./AdminLayout-DwaN-V0p.js";import{ap as f,aO as N,ao as k,aJ as v,av as w,aS as y,aV as A,aw as _,as as I,aZ as S,ax as T,a$ as L,b0 as F,b1 as E,b2 as C,b3 as P,b4 as W}from"./vendor-ui-BGi_EvHx.js";import"./vendor-react-dom-CgqbTh6h.js";import"./vendor-charts-0DeywwxG.js";import"./vendor-i18n-gE2_DBDv.js";import"./vendor-utils-Cn4gX4Gv.js";import"./vendor-supabase-DcWtwiPX.js";import"./vendor-animation-DlplP_f6.js";import"./vendor-date-DT7Rq6D9.js";const R=[{id:"read_aloud",name:"Read Aloud",description:"Read a text aloud with correct pronunciation and intonation",icon:_,skill:"speaking_writing",timeLimit:40,hasAIFeedback:!0,feedbackNote:"AI evaluates pronunciation, fluency, and content"},{id:"repeat_sentence",name:"Repeat Sentence",description:"Listen and repeat the sentence exactly",icon:I,skill:"speaking_writing",timeLimit:15,hasAIFeedback:!0,feedbackNote:"AI evaluates accuracy and pronunciation"},{id:"describe_image",name:"Describe Image",description:"Describe an image in detail",icon:y,skill:"speaking_writing",timeLimit:40,hasAIFeedback:!0,feedbackNote:"AI evaluates content, fluency, and vocabulary"},{id:"retell_lecture",name:"Retell Lecture",description:"Listen to a lecture and retell it in your own words",icon:N,skill:"speaking_writing",timeLimit:40,hasAIFeedback:!0,feedbackNote:"AI evaluates content accuracy, fluency, and pronunciation"},{id:"answer_short_question",name:"Answer Short Question",description:"Answer a question with one or a few words",icon:I,skill:"speaking_writing",timeLimit:10,hasAIFeedback:!0,feedbackNote:"AI checks answer correctness"},{id:"summarize_group_discussion",name:"Summarize Group Discussion",description:"Summarize the main points of a group discussion",icon:S,skill:"speaking_writing",timeLimit:70,hasAIFeedback:!0,feedbackNote:"AI evaluates content coverage and speaking skills"},{id:"respond_to_situation",name:"Respond to a Situation",description:"Respond appropriately to a given situation",icon:I,skill:"speaking_writing",timeLimit:40,hasAIFeedback:!0,feedbackNote:"AI evaluates appropriateness and fluency"},{id:"summarize_written_text",name:"Summarize Written Text",description:"Write a one-sentence summary of a passage",icon:f,skill:"speaking_writing",timeLimit:600,wordLimit:75,hasAIFeedback:!0,feedbackNote:"AI evaluates grammar, vocabulary, and content"},{id:"write_essay",name:"Write Essay",description:"Write a 200-300 word argumentative essay",icon:T,skill:"speaking_writing",timeLimit:1200,wordLimit:300,hasAIFeedback:!0,feedbackNote:"AI evaluates structure, grammar, vocabulary, and content"}],q=[{id:"fill_blanks_dropdown",name:"Fill in the Blanks (Dropdown)",description:"Select the correct word from dropdown options",icon:L,skill:"reading",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct answers"},{id:"mcq_multiple_answers",name:"Multiple Choice, Multiple Answers",description:"Select all correct answers from the options",icon:F,skill:"reading",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct answers"},{id:"reorder_paragraph",name:"Reorder Paragraph",description:"Arrange text boxes in the correct order",icon:E,skill:"reading",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct order"},{id:"fill_blanks_drag_drop",name:"Fill in the Blanks (Drag and Drop)",description:"Drag words to fill in the blanks",icon:C,skill:"reading",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct answers"},{id:"mcq_single_answer",name:"Multiple Choice, Single Answer",description:"Select the single correct answer",icon:F,skill:"reading",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct answer"}],D=[{id:"summarize_spoken_text",name:"Summarize Spoken Text",description:"Write a 50-70 word summary of what you heard",icon:f,skill:"listening",timeLimit:600,hasAIFeedback:!0,feedbackNote:"AI evaluates content, grammar, and vocabulary"},{id:"listening_mcq_multiple",name:"Multiple Choice, Multiple Answers",description:"Select all correct answers based on the audio",icon:F,skill:"listening",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct answers"},{id:"fill_blanks_type_in",name:"Fill in the Blanks (Type In)",description:"Type the missing words you hear",icon:C,skill:"listening",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct words"},{id:"highlight_correct_summary",name:"Highlight Correct Summary",description:"Select the paragraph that best summarizes the audio",icon:P,skill:"listening",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct selection"},{id:"listening_mcq_single",name:"Multiple Choice, Single Answer",description:"Select the single correct answer based on the audio",icon:F,skill:"listening",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct answer"},{id:"select_missing_word",name:"Select Missing Word",description:"Select the word that completes the recording",icon:W,skill:"listening",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct selection"},{id:"highlight_incorrect_words",name:"Highlight Incorrect Words",description:"Click on words that differ from the transcript",icon:P,skill:"listening",hasAIFeedback:!1,feedbackNote:"Auto-scored based on correct highlights"},{id:"write_from_dictation",name:"Write from Dictation",description:"Type the sentence you hear",icon:T,skill:"listening",hasAIFeedback:!1,feedbackNote:"Auto-scored based on accuracy"}],z=()=>{const _=e(),{admin:I,loading:S}=a(),[T,L]=s.useState("speaking-writing"),[F,E]=s.useState({}),[C,P]=s.useState([]),[W,z]=s.useState(""),[M,$]=s.useState(!1),[B,Q]=s.useState({totalItems:0,speakingWritingItems:0,readingItems:0,listeningTests:0});s.useEffect(()=>{S||I?I&&(U(),G()):_("/admin/login")},[I,S,_]);const U=async()=>{try{const{data:e,error:s}=await i.from("pte_items").select("pte_section_type");if(s)throw s;const t={};null==e||e.forEach(e=>{t[e.pte_section_type]=(t[e.pte_section_type]||0)+1}),E(t);let a=0,r=0;R.forEach(e=>{a+=t[e.id]||0}),q.forEach(e=>{r+=t[e.id]||0}),Q(e=>({...e,totalItems:a+r,speakingWritingItems:a,readingItems:r}))}catch(e){console.error("Error loading item counts:",e)}},G=async()=>{try{const{data:e,error:s}=await i.from("pte_listening_tests").select("*").order("created_at",{ascending:!1});if(s)throw s;P(e||[]),Q(s=>({...s,listeningTests:(null==e?void 0:e.length)||0}))}catch(e){console.error("Error loading listening tests:",e)}},H=async()=>{if(W.trim()){$(!0);try{const{data:e,error:s}=await i.from("pte_listening_tests").insert({test_name:W}).select().single();if(s)throw s;x.success("Listening test created"),z(""),G(),e&&_(`/admin/pte/listening/${e.id}`)}catch(e){console.error("Error creating listening test:",e),x.error("Failed to create listening test")}finally{$(!1)}}else x.error("Please enter a test name")};if(S)return t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading PTE Admin..."})]})});if(!I)return null;const J=({type:e,count:s})=>{const a=e.icon;return t.jsxs(n,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-l-4 border-l-violet-500 hover:scale-[1.02]",onClick:()=>{"listening"===e.skill?_("/admin/pte/listening"):_(`/admin/pte/${e.skill}/${e.id}`)},children:[t.jsx(l,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-violet-100 dark:bg-violet-900/30 rounded-lg",children:t.jsx(a,{className:"w-5 h-5 text-violet-600 dark:text-violet-400"})}),t.jsx("div",{children:t.jsx(c,{className:"text-base",children:e.name})})]}),s>0?t.jsxs(r,{variant:"secondary",className:"bg-violet-100 text-violet-700 dark:bg-violet-900/50 dark:text-violet-300",children:[s," items"]}):t.jsx(r,{variant:"outline",className:"text-muted-foreground border-dashed",children:"No items"})]})}),t.jsxs(d,{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),t.jsx("div",{className:"flex items-center gap-2",children:e.hasAIFeedback?t.jsx(r,{className:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300 text-xs",children:"✨ AI Feedback (Gemini)"}):t.jsx(r,{variant:"outline",className:"text-xs",children:"Auto-scored"})}),e.feedbackNote&&t.jsx("p",{className:"text-xs text-muted-foreground italic",children:e.feedbackNote}),e.timeLimit&&t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Time: ",e.timeLimit>=60?`${Math.floor(e.timeLimit/60)} min`:`${e.timeLimit} sec`,e.wordLimit&&` | Words: ${e.wordLimit}`]}),0===s&&t.jsxs(m,{variant:"outline",size:"sm",className:"w-full mt-2 border-dashed hover:bg-violet-50 dark:hover:bg-violet-900/20",children:[t.jsx(w,{className:"w-3 h-3 mr-1"}),"Add First ",e.name," Item"]})]})]})};return t.jsx(b,{title:"PTE Administration",showBackButton:!0,backPath:"/admin",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-violet-500 to-purple-500 bg-clip-text text-transparent",children:"PTE Admin Portal"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage PTE Academic content by question type"})]}),t.jsx(r,{variant:"secondary",className:"text-sm bg-violet-100 text-violet-700 dark:bg-violet-900/50 dark:text-violet-300",children:"PTE Academic"})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs(n,{className:"border-l-4 border-l-violet-500",children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Total Items"}),t.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(d,{children:[t.jsx("div",{className:"text-2xl font-bold",children:B.totalItems}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Practice items created"})]})]}),t.jsxs(n,{className:"border-l-4 border-l-pink-500",children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Speaking & Writing"}),t.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(d,{children:[t.jsx("div",{className:"text-2xl font-bold",children:B.speakingWritingItems}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"9 question types"})]})]}),t.jsxs(n,{className:"border-l-4 border-l-blue-500",children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Reading"}),t.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(d,{children:[t.jsx("div",{className:"text-2xl font-bold",children:B.readingItems}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"5 question types"})]})]}),t.jsxs(n,{className:"border-l-4 border-l-green-500",children:[t.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(c,{className:"text-sm font-medium",children:"Listening Tests"}),t.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(d,{children:[t.jsx("div",{className:"text-2xl font-bold",children:B.listeningTests}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"8 question types per test"})]})]})]}),t.jsxs(n,{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 border-green-200 dark:border-green-800",children:[t.jsx(l,{className:"pb-2",children:t.jsx(c,{className:"text-green-700 dark:text-green-400 flex items-center gap-2 text-lg",children:"✨ AI-Powered Feedback (Gemini 2.5 Flash)"})}),t.jsx(d,{children:t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-400 mb-2",children:"Speaking Tasks with AI Feedback:"}),t.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[t.jsx("li",{children:"• Read Aloud - pronunciation, fluency, content"}),t.jsx("li",{children:"• Repeat Sentence - accuracy, pronunciation"}),t.jsx("li",{children:"• Describe Image - content, fluency, vocabulary"}),t.jsx("li",{children:"• Retell Lecture - accuracy, fluency, pronunciation"}),t.jsx("li",{children:"• Answer Short Question - correctness"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-400 mb-2",children:"Writing Tasks with AI Feedback:"}),t.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[t.jsx("li",{children:"• Summarize Written Text - grammar, vocabulary, content"}),t.jsx("li",{children:"• Write Essay - structure, grammar, vocabulary, content"}),t.jsx("li",{children:"• Summarize Spoken Text - content, grammar, vocabulary"})]}),t.jsx("p",{className:"mt-2 text-xs italic",children:"Reading & MCQ tasks are auto-scored based on correct answers."})]})]})})]}),t.jsxs(n,{className:"bg-gradient-to-r from-violet-50 to-purple-50 dark:from-violet-950/20 dark:to-purple-950/20",children:[t.jsx(l,{children:t.jsx(c,{className:"text-violet-700 dark:text-violet-400",children:"PTE Academic Test Structure"})}),t.jsx(d,{children:t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[t.jsx(N,{className:"w-4 h-4 text-pink-500"}),"Speaking & Writing (77-93 min)"]}),t.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground",children:R.map(e=>t.jsx("li",{className:"flex justify-between",children:t.jsx("span",{children:e.name})},e.id))})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[t.jsx(k,{className:"w-4 h-4 text-blue-500"}),"Reading (32-41 min)"]}),t.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground",children:q.map(e=>t.jsx("li",{children:e.name},e.id))})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-3",children:[t.jsx(v,{className:"w-4 h-4 text-green-500"}),"Listening (45-57 min)"]}),t.jsx("ul",{className:"space-y-1 text-sm text-muted-foreground",children:D.map(e=>t.jsx("li",{children:e.name},e.id))})]})]})})]}),t.jsx(j,{}),t.jsxs(g,{value:T,onValueChange:L,className:"space-y-4",children:[t.jsxs(h,{className:"grid w-full grid-cols-3",children:[t.jsxs(u,{value:"speaking-writing",className:"flex items-center gap-2",children:[t.jsx(N,{className:"w-4 h-4"}),"Speaking & Writing"]}),t.jsxs(u,{value:"reading",className:"flex items-center gap-2",children:[t.jsx(k,{className:"w-4 h-4"}),"Reading"]}),t.jsxs(u,{value:"listening",className:"flex items-center gap-2",children:[t.jsx(v,{className:"w-4 h-4"}),"Listening"]})]}),t.jsxs(p,{value:"speaking-writing",className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold",children:"Speaking & Writing Question Types"}),t.jsx("p",{className:"text-muted-foreground",children:"Click on a type to manage its content"})]})}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:R.map(e=>t.jsx(J,{type:e,count:F[e.id]||0},e.id))})]}),t.jsxs(p,{value:"reading",className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold",children:"Reading Question Types"}),t.jsx("p",{className:"text-muted-foreground",children:"Upload screenshots or enter content manually"})]})}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:q.map(e=>t.jsx(J,{type:e,count:F[e.id]||0},e.id))})]}),t.jsxs(p,{value:"listening",className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold",children:"PTE Listening Tests"}),t.jsx("p",{className:"text-muted-foreground",children:"Upload audio and add questions for each type"})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(o,{placeholder:"Test name (e.g., PTE Listening Test 1)",value:W,onChange:e=>z(e.target.value),onKeyPress:e=>"Enter"===e.key&&H(),className:"max-w-xs"}),t.jsxs(m,{onClick:H,disabled:M,className:"bg-violet-600 hover:bg-violet-700",children:[t.jsx(w,{className:"w-4 h-4 mr-2"}),M?"Creating...":"Create Test"]})]})]}),t.jsxs(n,{className:"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",children:[t.jsx(l,{className:"pb-2",children:t.jsx(c,{className:"text-base text-green-700 dark:text-green-400",children:"Listening Question Types (8)"})}),t.jsx(d,{children:t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:D.map(e=>{const s=e.icon;return t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(s,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),t.jsx("span",{className:"text-muted-foreground",children:e.name})]},e.id)})})})]}),C.length>0?t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:C.map(e=>t.jsxs(n,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-l-4 border-l-green-500",onClick:()=>_(`/admin/pte/listening/${e.id}`),children:[t.jsx(l,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:t.jsx(v,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),t.jsx(c,{className:"text-base",children:e.test_name})]}),e.audio_url&&t.jsx(r,{variant:"secondary",className:"bg-green-100 text-green-700",children:"Audio ✓"})]})}),t.jsx(d,{children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})})]},e.id))}):t.jsx(n,{className:"border-dashed",children:t.jsxs(d,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(v,{className:"w-12 h-12 text-muted-foreground mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Listening Tests Yet"}),t.jsx("p",{className:"text-muted-foreground mb-4 text-center max-w-md",children:"Create your first PTE Listening test. Each test includes all 8 question types with audio upload support and mixed AI/auto-scoring."}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsx(o,{placeholder:"e.g., PTE Listening Test 1",value:W,onChange:e=>z(e.target.value),onKeyPress:e=>"Enter"===e.key&&H(),className:"max-w-xs"}),t.jsxs(m,{onClick:H,disabled:M,className:"bg-green-600 hover:bg-green-700",children:[t.jsx(w,{className:"w-4 h-4 mr-2"}),M?"Creating...":"Create First Listening Test"]})]})]})})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-6",children:[t.jsxs(n,{className:"border-2 border-dashed hover:border-violet-300 transition-colors",children:[t.jsx(l,{children:t.jsxs(c,{className:"flex items-center gap-2 text-lg",children:[t.jsx(y,{className:"w-5 h-5 text-violet-500"}),"AI Screenshot Parsing"]})}),t.jsx(d,{children:t.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload screenshots of PTE tests and let AI extract questions automatically. Supports all reading and listening question types."})})]}),t.jsxs(n,{className:"border-2 border-dashed hover:border-violet-300 transition-colors",children:[t.jsx(l,{children:t.jsxs(c,{className:"flex items-center gap-2 text-lg",children:[t.jsx(A,{className:"w-5 h-5 text-violet-500"}),"Media Upload"]})}),t.jsx(d,{children:t.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload images for Describe Image tasks, audio for listening sections, and manage all content types in one place."})})]})]})]})})};export{z as default};
