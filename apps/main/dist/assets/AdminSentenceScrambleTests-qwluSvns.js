import{r as e,u as s,g as t,j as a,C as r,b as i,c as n,a as l,I as c,B as d}from"./index-D2Tta13M.js";import{A as o}from"./AdminLayout-qO64IdFY.js";import{S as m}from"./separator-B3WrqZkr.js";import{s as u}from"./supabase-DUkWVuqu.js";const h=()=>{const[h,x]=e.useState([]),[g,j]=e.useState(""),[b,p]=e.useState(!1),f=s(),{toast:S}=t(),k=async()=>{const{data:e,error:s}=await u.from("skill_tests").select("id,title,created_at").eq("skill_slug","sentence-structure-scramble").order("created_at",{ascending:!1});s||x(e??[])};e.useEffect(()=>{document.title="Sentence Scramble Tests | Admin";const e=document.querySelector('link[rel="canonical"]')||document.createElement("link");e.setAttribute("rel","canonical"),e.setAttribute("href",window.location.origin+"/admin/skills/sentence-scramble"),document.head.contains(e)||document.head.appendChild(e),k()},[]);return a.jsx(o,{title:"Sentence Structure Scramble Tests",showBackButton:!0,children:a.jsxs("section",{className:"space-y-4",children:[a.jsxs(r,{children:[a.jsx(i,{children:a.jsx(n,{className:"text-base",children:"+ Add New Sentence Scramble Test"})}),a.jsxs(l,{className:"flex gap-2 items-center",children:[a.jsx(c,{placeholder:"Test title (e.g., Set 1)",value:g,onChange:e=>j(e.target.value)}),a.jsx(d,{onClick:async()=>{if(!g.trim())return;p(!0);const{data:e,error:s}=await u.from("skill_tests").insert({skill_slug:"sentence-structure-scramble",title:g.trim()}).select("id").maybeSingle();p(!1),s?S({title:"Failed to create test",description:s.message,variant:"destructive"}):(j(""),await k(),(null==e?void 0:e.id)&&f(`/admin/skills/sentence-scramble/${e.id}`))},disabled:b,children:b?"Adding...":"Add"})]})]}),a.jsx(m,{}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[h.map(e=>a.jsxs(r,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(i,{className:"pb-2",children:a.jsx(n,{className:"text-sm",children:e.title})}),a.jsx(l,{children:a.jsx(d,{size:"sm",variant:"secondary",onClick:()=>f(`/admin/skills/sentence-scramble/${e.id}`),children:"Manage Test"})})]},e.id)),0===h.length&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{h as default};
