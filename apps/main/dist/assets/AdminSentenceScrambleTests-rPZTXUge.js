import{r as e,u as s,h as t,j as a,A as n,C as i,b as l,c,a as r,I as d,B as o,_ as m}from"./index-BoGAy6B9.js";import{s as u}from"./supabase-Bqkrifq5.js";const h=()=>{const[h,x]=e.useState([]),[g,j]=e.useState(""),[b,p]=e.useState(!1),S=s(),{toast:f}=t(),k=async()=>{const{data:e,error:s}=await u.from("skill_tests").select("id,title,created_at").eq("skill_slug","sentence-structure-scramble").order("created_at",{ascending:!1});s||x(e??[])};e.useEffect(()=>{document.title="Sentence Scramble Tests | Admin";const e=document.querySelector('link[rel="canonical"]')||document.createElement("link");e.setAttribute("rel","canonical"),e.setAttribute("href",window.location.origin+"/admin/skills/sentence-scramble"),document.head.contains(e)||document.head.appendChild(e),k()},[]);return a.jsx(n,{title:"Sentence Structure Scramble Tests",showBackButton:!0,children:a.jsxs("section",{className:"space-y-4",children:[a.jsxs(i,{children:[a.jsx(l,{children:a.jsx(c,{className:"text-base",children:"+ Add New Sentence Scramble Test"})}),a.jsxs(r,{className:"flex gap-2 items-center",children:[a.jsx(d,{placeholder:"Test title (e.g., Set 1)",value:g,onChange:e=>j(e.target.value)}),a.jsx(o,{onClick:async()=>{if(!g.trim())return;p(!0);const{data:e,error:s}=await u.from("skill_tests").insert({skill_slug:"sentence-structure-scramble",title:g.trim()}).select("id").maybeSingle();p(!1),s?f({title:"Failed to create test",description:s.message,variant:"destructive"}):(j(""),await k(),(null==e?void 0:e.id)&&S(`/admin/skills/sentence-scramble/${e.id}`))},disabled:b,children:b?"Adding...":"Add"})]})]}),a.jsx(m,{}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[h.map(e=>a.jsxs(i,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(l,{className:"pb-2",children:a.jsx(c,{className:"text-sm",children:e.title})}),a.jsx(r,{children:a.jsx(o,{size:"sm",variant:"secondary",onClick:()=>S(`/admin/skills/sentence-scramble/${e.id}`),children:"Manage Test"})})]},e.id)),0===h.length&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{h as default};
