import{u as e,G as s,w as t,r as a,J as r,j as n,l as i,C as o,a as l,x as c,B as d,K as m,b as x,d as h,U as u,L as g,R as p,T as b,S as j,p as w,q as v,s as N,t as _,N as f,E as q,P as E,O as y,Q as A,k as B,I as C,e as D}from"./index-LuDcpbqT.js";import{T as P,a as S,b as k,c as F}from"./tabs-C3ZQeo97.js";import{A as I}from"./AdminLayout-jDRUXbY8.js";import{I as Q}from"./ImageQuestionExtractor-B8wctYPO.js";import{s as T}from"./supabase-DWL4C3fA.js";import{C as U}from"./circle-alert-RkNxHP-U.js";import{S as $}from"./save-PX-3dNF4.js";import{I as z}from"./image-7Eds706D.js";import{W as O}from"./wand-sparkles-CNYFgDQf.js";import{T as R}from"./trash-2-Bk2uREXG.js";import{U as M}from"./upload-Bikc0NSu.js";import{L}from"./list-ziTwugfZ.js";import{L as J}from"./layout-grid-DtSSZZrS.js";const K={Part5:{number:5,name:"Incomplete Sentences",questions:30,questionRange:"101-130",description:"Choose the word or phrase that best completes the sentence",hasPassages:!1},Part6:{number:6,name:"Text Completion",questions:16,questionRange:"131-146",description:"Complete passages with missing words or sentences (4 passages × 4 questions)",hasPassages:!0},Part7:{number:7,name:"Reading Comprehension",questions:54,questionRange:"147-200",description:"Read passages and answer questions about them",hasPassages:!0}},V=()=>{var V,G,W,H;const X=e(),{testId:Y}=s(),{admin:Z,loading:ee}=t(),[se,te]=a.useState(""),[ae,re]=a.useState("Part5"),[ne,ie]=a.useState("paste"),[oe,le]=a.useState(!1),[ce,de]=a.useState(!1),[me,xe]=a.useState(!1),[he,ue]=a.useState(!1),[ge,pe]=a.useState(0),[be,je]=a.useState("list"),[we,ve]=a.useState(3),[Ne,_e]=a.useState(""),[fe,qe]=a.useState(""),[Ee,ye]=a.useState(!1),[Ae,Be]=a.useState([]),[Ce,De]=a.useState([]),[Pe,Se]=a.useState(!1),ke=K[ae];a.useEffect(()=>{ee||Z||X("/admin/login")},[Z,ee,X]),a.useEffect(()=>{Y&&Fe()},[Y]);const Fe=async()=>{if(Y)try{const{data:e,error:s}=await T.from("tests").select("*").eq("id",Y).single();if(s)throw s;te(e.test_name),e.test_subtype&&["Part5","Part6","Part7"].includes(e.test_subtype)&&re(e.test_subtype);const{data:t,error:a}=await T.from("questions").select("*").eq("test_id",Y).order("question_number_in_part",{ascending:!0});if(a)throw a;const r=(t||[]).map(e=>({id:e.id,question_number:e.question_number_in_part,question_text:e.question_text,question_type:e.question_type,options:e.choices?JSON.parse(e.choices):null,correct_answer:e.correct_answer,explanation:e.explanation||"",ai_explanation:e.ai_explanation,toeic_part:e.toeic_part||5,passage_context:e.passage_context,related_passage_id:e.related_passage_id}));Be(r);const{data:n}=await T.from("toeic_passages").select("*").eq("test_id",Y).order("question_range_start",{ascending:!0});n&&De(n.map(e=>({id:e.id,title:e.passage_title,content:e.passage_content,type:e.passage_type,imageUrl:e.passage_image_url,questionStart:e.question_range_start,questionEnd:e.question_range_end})))}catch(e){console.error("Error loading test data:",e),r.error("Failed to load test data")}},Ie=(e,s,t)=>{Be(a=>{const r=[...a];return r[e]={...r[e],[s]:t},r}),Se(!1)},Qe=e=>{Be(s=>s.filter((s,t)=>t!==e)),Se(!1),ge>=Ae.length-1&&pe(Math.max(0,ge-1))},Te=(()=>{const e=ke.questions,s=Ae.length;return{current:s,expected:e,answered:Ae.filter(e=>e.correct_answer).length,percentage:e>0?s/e*100:0}})();return ee?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n.jsx(I,{title:`TOEIC ${ke.name}`,showBackButton:!0,backPath:"/admin/toeic",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[#5D4E37]",children:se||`TOEIC ${ke.name}`}),n.jsxs("p",{className:"text-[#8B6914]",children:[ke.description," • Questions ",ke.questionRange]})]}),n.jsxs(i,{variant:"outline",className:"bg-[#FEF9E7] text-[#8B6914] border-[#E8D5A3] text-lg px-4 py-2",children:["Part ",ke.number]})]}),n.jsx(o,{className:"bg-[#FEF9E7] border-[#E8D5A3]",children:n.jsxs(l,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{className:"text-[#5D4E37] font-medium",children:"Questions Added:"}),n.jsxs(i,{className:"bg-[#A68B5B] text-white text-lg px-3",children:[Te.current," / ",Te.expected]}),Te.answered>0&&n.jsxs(i,{variant:"outline",className:"border-green-500 text-green-600",children:[n.jsx(c,{className:"w-3 h-3 mr-1"}),Te.answered," answered"]}),Te.current>0&&Te.current-Te.answered>0&&n.jsxs(i,{variant:"outline",className:"border-amber-500 text-amber-600",children:[n.jsx(U,{className:"w-3 h-3 mr-1"}),Te.current-Te.answered," missing answers"]})]}),n.jsxs(d,{onClick:async()=>{if(Y){le(!0);try{const{data:e,error:s}=await T.functions.invoke("save-reading-test",{body:{mode:"toeic",testId:Y,part:ke.number,questions:Ae.map((e,s)=>({question_number:e.question_number,question_text:e.question_text,question_type:e.question_type,options:e.options,correct_answer:e.correct_answer,explanation:e.explanation,ai_explanation:e.ai_explanation,passage_context:e.passage_context,related_passage_id:e.related_passage_id})),passages:Ce.map(e=>({type:e.type,title:e.title,content:e.content,imageUrl:e.imageUrl,questionStart:e.questionStart,questionEnd:e.questionEnd}))}});if(s)throw s;if(!(null==e?void 0:e.success))throw new Error((null==e?void 0:e.error)||"Failed to save questions");Se(!0),r.success(`Saved ${e.questionsCount} questions!`)}catch(e){console.error("Error saving questions:",e),r.error("Failed to save questions")}finally{le(!1)}}},disabled:oe||Pe||0===Ae.length,className:"bg-[#A68B5B] hover:bg-[#8B6914] text-white",children:[n.jsx($,{className:"w-4 h-4 mr-2"}),oe?"Saving...":Pe?"Saved ✓":"Save All Questions"]})]}),n.jsx(m,{value:Te.percentage,className:"h-3 bg-[#E8D5A3]"})]})}),n.jsxs(o,{className:"bg-[#FEF9E7] border-[#E8D5A3]",children:[n.jsx(x,{children:n.jsx(h,{className:"text-lg text-[#5D4E37]",children:"Add Questions"})}),n.jsx(l,{children:n.jsxs(P,{value:ne,onValueChange:e=>ie(e),children:[n.jsxs(S,{className:"grid w-full mb-4 bg-[#E8D5A3]/20 border border-[#E8D5A3] "+(ke.hasPassages?"grid-cols-4":"grid-cols-3"),children:[ke.hasPassages&&n.jsxs(k,{value:"passage",className:"data-[state=active]:bg-[#FEF9E7] data-[state=active]:text-[#5D4E37] text-[#8B6914]",children:[n.jsx(z,{className:"w-4 h-4 mr-2"}),"Upload Passage"]}),n.jsxs(k,{value:"paste",className:"data-[state=active]:bg-[#FEF9E7] data-[state=active]:text-[#5D4E37] text-[#8B6914]",children:[n.jsx(u,{className:"w-4 h-4 mr-2"}),"Paste Questions"]}),n.jsxs(k,{value:"image",className:"data-[state=active]:bg-[#FEF9E7] data-[state=active]:text-[#5D4E37] text-[#8B6914]",children:[n.jsx(O,{className:"w-4 h-4 mr-2"}),"Extract from Image"]}),n.jsxs(k,{value:"answers",className:"data-[state=active]:bg-[#FEF9E7] data-[state=active]:text-[#5D4E37] text-[#8B6914]",children:[n.jsx(g,{className:"w-4 h-4 mr-2"}),"Answer Key"]})]}),ke.hasPassages&&n.jsx(F,{value:"passage",className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(p,{className:"text-[#5D4E37]",children:"Upload Passage Image"}),n.jsx("p",{className:"text-sm text-[#8B6914] mb-3",children:"Upload the passage image (letter, email, notice, etc.) - students will see this exact image"}),Ce.length>0&&n.jsx("div",{className:"mb-4 space-y-3",children:Ce.map((e,s)=>n.jsxs("div",{className:"border border-[#E8D5A3] rounded-lg p-3 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs(i,{className:"bg-[#A68B5B] text-white",children:["Passage ",s+1,": Q",e.questionStart,"-",e.questionEnd]}),n.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{De(e=>e.filter((e,t)=>t!==s)),Se(!1)},className:"text-red-500 hover:text-red-700",children:n.jsx(R,{className:"w-4 h-4"})})]}),e.imageUrl&&n.jsx("img",{src:e.imageUrl,alt:`Passage ${s+1}`,className:"max-h-40 rounded border"})]},s))}),n.jsxs("label",{className:"cursor-pointer inline-block",children:[n.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(t){ye(!0);try{const e=new FileReader;e.onloadend=()=>{const s={title:"",content:"",type:"single",imageUrl:e.result,questionStart:Ce.length>0?Ce[Ce.length-1].questionEnd+1:"Part6"===ae?131:147,questionEnd:Ce.length>0?Ce[Ce.length-1].questionEnd+4:"Part6"===ae?134:150};De(e=>[...e,s]),Se(!1),r.success("Passage image uploaded! Set the question range and add questions.")},e.readAsDataURL(t)}catch(a){console.error("Error uploading image:",a),r.error("Failed to upload image")}finally{ye(!1)}}},disabled:Ee}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[#A68B5B] hover:bg-[#8B6914] text-white rounded-lg transition-colors",children:[n.jsx(M,{className:"w-4 h-4"}),Ee?"Uploading...":"Add Passage Image"]})]})]})}),n.jsxs(F,{value:"paste",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(p,{className:"text-[#5D4E37]",children:"Paste TOEIC Questions"}),n.jsx("p",{className:"text-sm text-[#8B6914] mb-2",children:"Paste all questions with their options. Format: 101. question text (A) opt (B) opt (C) opt (D) opt"}),n.jsx(b,{value:Ne,onChange:e=>_e(e.target.value),placeholder:"101. The new employee was asked to ------- all documents before submitting them to the supervisor.\n(A) review\n(B) reviews\n(C) reviewing\n(D) reviewed\n\n102. Ms. Johnson's presentation was ------- received by the board members.\n(A) favorable\n(B) favorably\n(C) favor\n(D) favoring",rows:14,className:"font-mono text-sm bg-white border-[#E8D5A3] focus:border-[#8B6914] focus:ring-[#8B6914] text-[#5D4E37]"})]}),n.jsxs(d,{onClick:()=>{if(Ne.trim()){de(!0);try{const e=Ne.trim(),s=[],t=e.split(/(?=\b1[0-4]\d\b\.)/);for(const a of t){const e=a.trim();if(!e)continue;const t=e.match(/^(\d{3})\.\s*/);if(!t)continue;const r=parseInt(t[1]),n=e.slice(t[0].length),i=n.match(/\(A\)\s*([^(]+)\s*\(B\)\s*([^(]+)\s*\(C\)\s*([^(]+)\s*\(D\)\s*([^(]*?)(?=\d{3}\.|$)/s);if(!i){console.log(`Q${r}: Could not find all options`);continue}const o=n.indexOf("(A)"),l=n.slice(0,o).replace(/\s+/g," ").trim(),[,c,d,m,x]=i,h=e=>e.replace(/\s+/g," ").trim().replace(/\d{3}\.$/,"").trim();l&&s.push({question_number:r,question_text:l,question_type:"incomplete_sentence",options:[h(c),h(d),h(m),h(x)],correct_answer:"",explanation:"",toeic_part:ke.number})}s.length>0?(Be(e=>[...e,...s]),Se(!1),_e(""),r.success(`${s.length} questions parsed successfully!`)):r.error("No questions could be parsed. Check format: 101. question text (A) opt (B) opt (C) opt (D) opt")}catch(e){console.error("Error parsing questions:",e),r.error("Failed to parse questions")}finally{de(!1)}}else r.error("Please enter question text to parse")},disabled:ce||!Ne.trim(),className:"bg-[#A68B5B] hover:bg-[#8B6914] text-white",children:[n.jsx(O,{className:"w-4 h-4 mr-2"}),ce?"Parsing...":"Parse Questions"]})]}),n.jsx(F,{value:"image",children:n.jsx(Q,{testId:Y||"",testType:"TOEIC",onQuestionsExtracted:e=>{const s=e.map((e,s)=>({question_number:e.question_number||Ae.length+s+101,question_text:e.question_text,question_type:e.question_type||"incomplete_sentence",options:e.options,correct_answer:e.correct_answer||"",explanation:e.explanation||"",toeic_part:ke.number,passage_context:e.passage_context}));Be(e=>[...e,...s]),Se(!1),r.success(`${s.length} questions extracted!`)}})}),n.jsxs(F,{value:"answers",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(p,{className:"text-[#5D4E37]",children:"Paste Answer Key"}),n.jsx("p",{className:"text-sm text-[#8B6914] mb-2",children:'Paste answer key in format: "101. (A) 102. (B) 103. (C)..."'}),n.jsx(b,{value:fe,onChange:e=>qe(e.target.value),placeholder:"101. (A) 102. (B) 103. (C) 104. (D) 105. (A) 106. (B) 107. (C) 108. (D) 109. (A) 110. (B)",rows:6,className:"font-mono text-sm bg-white border-[#E8D5A3]"})]}),n.jsxs(d,{onClick:()=>{if(fe.trim()){de(!0);try{const e=/(\d{3})[\.\s\-]*\(?([A-D])\)?/g,s={};let t;for(;null!==(t=e.exec(fe));){const e=parseInt(t[1]),a=t[2];s[e]=a}const a=Object.keys(s).length;a>0?(Be(e=>e.map(e=>s[e.question_number]?{...e,correct_answer:s[e.question_number]}:e)),Se(!1),qe(""),r.success(`${a} answers matched!`)):r.error("No answers could be parsed. Format: 101. (A) 102. (B) ...")}catch(e){console.error("Error parsing answers:",e),r.error("Failed to parse answer key")}finally{de(!1)}}else r.error("Please enter answer key text")},disabled:ce||!fe.trim()||0===Ae.length,className:"bg-[#A68B5B] hover:bg-[#8B6914] text-white",children:[n.jsx(g,{className:"w-4 h-4 mr-2"}),ce?"Matching...":"Match Answers"]}),0===Ae.length&&n.jsx("p",{className:"text-sm text-amber-600",children:"Add questions first before matching answers."})]})]})})]}),n.jsxs(o,{className:"bg-[#FEF9E7] border-[#E8D5A3]",children:[n.jsx(x,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(h,{className:"text-[#5D4E37]",children:"Questions"}),n.jsx(i,{className:"bg-[#A68B5B] text-white",children:Ae.length})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-[#E8D5A3] rounded-lg overflow-hidden",children:[n.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{je("list"),ue(!1)},className:"rounded-none px-3 "+("list"!==be||he?"text-[#5D4E37]":"bg-[#A68B5B] text-white"),children:n.jsx(L,{className:"w-4 h-4"})}),n.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{je("grid"),ue(!1)},className:"rounded-none px-3 "+("grid"!==be||he?"text-[#5D4E37]":"bg-[#A68B5B] text-white"),children:n.jsx(J,{className:"w-4 h-4"})})]}),"grid"===be&&!he&&n.jsxs(j,{value:String(we),onValueChange:e=>ve(Number(e)),children:[n.jsx(w,{className:"w-24 h-8 bg-white border-[#E8D5A3]",children:n.jsx(v,{})}),n.jsxs(N,{children:[n.jsx(_,{value:"2",children:"2 cols"}),n.jsx(_,{value:"3",children:"3 cols"}),n.jsx(_,{value:"4",children:"4 cols"}),n.jsx(_,{value:"5",children:"5 cols"}),n.jsx(_,{value:"6",children:"6 cols"})]})]}),n.jsxs(d,{variant:"outline",size:"sm",onClick:()=>{ue(!he),pe(0)},className:"border-[#E8D5A3] "+(he?"bg-[#A68B5B] text-white":"text-[#5D4E37]"),disabled:0===Ae.length,children:[he?n.jsx(f,{className:"w-4 h-4 mr-1"}):n.jsx(q,{className:"w-4 h-4 mr-1"}),he?"Exit Preview":"Preview"]}),n.jsxs(d,{variant:"outline",size:"sm",onClick:()=>{const e="Part5"===ae?101:"Part6"===ae?131:147,s=Ae.length>0?Math.max(...Ae.map(e=>e.question_number))+1:e,t={question_number:s,question_text:"",question_type:"Part5"===ae?"incomplete_sentence":"text_completion",options:["","","",""],correct_answer:"",explanation:"",toeic_part:ke.number};Be(e=>[...e,t]),Se(!1),pe(Ae.length),ue(!0),r.success(`Question ${s} added - ready to edit!`)},className:"border-[#E8D5A3] text-[#5D4E37]",children:[n.jsx(E,{className:"w-4 h-4 mr-1"}),"Add"]}),n.jsxs(d,{variant:"outline",size:"sm",onClick:async()=>{xe(!0);try{const{data:e,error:s}=await T.functions.invoke("toeic-generate-explanations",{body:{questions:Ae.map(e=>({question_number:e.question_number,question_text:e.question_text,options:e.options,correct_answer:e.correct_answer,passage_context:e.passage_context,part:ke.number})),testType:"TOEIC Reading",part:ke.number}});if(s)throw s;e.explanations&&(Be(s=>s.map((s,t)=>({...s,ai_explanation:e.explanations[t]||s.ai_explanation}))),Se(!1),r.success("AI explanations generated!"))}catch(e){console.error("Error generating explanations:",e),r.error("Failed to generate AI explanations")}finally{xe(!1)}},disabled:me||0===Ae.length,className:"border-[#E8D5A3] text-[#5D4E37]",children:[n.jsx(y,{className:"w-4 h-4 mr-1"}),me?"Generating...":"AI Explain"]})]})]})}),n.jsx(l,{children:Ae.length>0?he?n.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-[#E8D5A3] overflow-hidden",children:[n.jsxs("div",{className:"bg-[#5D4E37] px-6 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(d,{variant:"ghost",size:"icon",onClick:()=>pe(Math.max(0,ge-1)),disabled:0===ge,className:"text-white/80 hover:text-white hover:bg-white/20 disabled:opacity-30",children:n.jsx(A,{className:"w-5 h-5"})}),n.jsxs(i,{className:"bg-[#A68B5B] text-white px-4 py-1.5 font-semibold",children:["Q",null==(V=Ae[ge])?void 0:V.question_number]}),n.jsxs("span",{className:"text-white/80 text-sm",children:[ge+1," of ",Ae.length]}),n.jsx(d,{variant:"ghost",size:"icon",onClick:()=>pe(Math.min(Ae.length-1,ge+1)),disabled:ge>=Ae.length-1,className:"text-white/80 hover:text-white hover:bg-white/20 disabled:opacity-30",children:n.jsx(B,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>{Qe(ge)},className:"text-red-300 hover:text-red-100 hover:bg-red-500/20",children:[n.jsx(R,{className:"w-4 h-4 mr-1"}),"Delete"]})})]}),n.jsxs("div",{className:"p-6 bg-[#FEF9E7]",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx(p,{className:"text-xs text-[#8B6914] uppercase tracking-wide mb-2 block",children:"Question Text"}),n.jsx(b,{value:(null==(G=Ae[ge])?void 0:G.question_text)||"",onChange:e=>Ie(ge,"question_text",e.target.value),className:"text-lg text-[#5D4E37] bg-white border border-[#E8D5A3] min-h-[80px] placeholder:text-gray-400",placeholder:"Enter question text..."})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsx(p,{className:"text-xs text-[#8B6914] uppercase tracking-wide",children:"Options (click to set correct)"}),((null==(W=Ae[ge])?void 0:W.options)||["","","",""]).map((e,s)=>{var t;const a=String.fromCharCode(65+s),r=(null==(t=Ae[ge])?void 0:t.correct_answer)===a;return n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border-2 "+(r?"border-green-400 bg-green-50":"border-gray-200 bg-white"),children:[n.jsx("button",{onClick:()=>Ie(ge,"correct_answer",a),className:"w-10 h-10 rounded-full font-bold transition-all "+(r?"bg-green-500 text-white scale-110":"bg-gray-100 text-[#5D4E37] hover:bg-[#A68B5B] hover:text-white"),children:a}),n.jsx(C,{value:e,onChange:e=>{var t;const a=[...(null==(t=Ae[ge])?void 0:t.options)||["","","",""]];a[s]=e.target.value,Ie(ge,"options",a)},className:"flex-1 border border-gray-200 bg-white text-[#5D4E37] placeholder:text-gray-400",placeholder:`Option ${a}...`}),r&&n.jsx(g,{className:"w-5 h-5 text-green-500"})]},s)})]}),!(null==(H=Ae[ge])?void 0:H.correct_answer)&&n.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-amber-700 text-sm flex items-center gap-2",children:[n.jsx(U,{className:"w-4 h-4"}),"Click a letter to set the correct answer"]})]}),n.jsxs("div",{className:"bg-[#FEF9E7] px-6 py-3 border-t border-[#E8D5A3] flex items-center justify-center gap-2",children:[n.jsx("span",{className:"text-sm text-[#8B6914]",children:"Jump to:"}),n.jsxs(j,{value:String(ge),onValueChange:e=>pe(Number(e)),children:[n.jsx(w,{className:"w-32 h-8 bg-white border-[#E8D5A3]",children:n.jsx(v,{})}),n.jsx(N,{children:Ae.map((e,s)=>n.jsxs(_,{value:String(s),children:["Q",e.question_number," ",e.correct_answer?"✓":"?"]},s))})]})]})]}):"grid"===be?n.jsx("div",{className:"grid gap-3 max-h-[600px] overflow-y-auto",style:{gridTemplateColumns:`repeat(${we}, minmax(0, 1fr))`},children:Ae.map((e,s)=>n.jsxs("div",{onClick:()=>{pe(s),ue(!0)},className:"p-3 rounded-lg border-2 cursor-pointer hover:shadow-md transition-all "+(e.correct_answer?"border-green-300 bg-green-50":"border-amber-300 bg-amber-50"),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs(i,{className:(e.correct_answer?"bg-green-500":"bg-amber-500")+" text-white text-xs",children:["Q",e.question_number]}),e.correct_answer?n.jsx(i,{className:"bg-green-600 text-white text-xs",children:e.correct_answer}):n.jsx(i,{variant:"outline",className:"border-amber-400 text-amber-600 text-xs",children:"?"})]}),n.jsx("p",{className:"text-xs text-gray-700 line-clamp-2",children:e.question_text||"No text"})]},s))}):n.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:Ae.map((e,s)=>n.jsx(o,{className:"border border-[#E8D5A3] bg-white",children:n.jsxs(l,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(i,{variant:"outline",className:"border-[#E8D5A3]",children:["Q",e.question_number]}),e.correct_answer?n.jsxs(i,{className:"bg-green-500 text-white",children:["Answer: ",e.correct_answer]}):n.jsx(i,{variant:"outline",className:"border-amber-400 text-amber-600",children:"No answer"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{pe(s),ue(!0)},children:n.jsx(q,{className:"w-4 h-4 text-[#8B6914]"})}),n.jsx(d,{variant:"ghost",size:"sm",onClick:()=>Qe(s),children:n.jsx(R,{className:"w-4 h-4 text-red-500"})})]})]}),n.jsx("p",{className:"text-sm text-[#5D4E37] line-clamp-2",children:e.question_text||"No question text"}),e.options&&n.jsx("div",{className:"flex gap-2 mt-2",children:e.options.map((s,t)=>n.jsxs("span",{className:"text-xs px-2 py-1 rounded "+(e.correct_answer===String.fromCharCode(65+t)?"bg-green-100 text-green-700":"bg-gray-100"),children:["(",String.fromCharCode(65+t),") ",s.slice(0,20),s.length>20?"...":""]},t))})]})},s))}):n.jsxs("div",{className:"text-center py-12 text-[#8B6914]",children:[n.jsx(D,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No questions added yet."}),n.jsx("p",{className:"text-sm",children:"Use the methods above to add questions."})]})})]})]})})};export{V as default};
