import{r as e,u as s,h as a,j as t,C as l,b as i,d as r,a as d,B as n,I as c}from"./index-Dj8G7xJc.js";import{A as o}from"./AdminLayout-BlHiMJZJ.js";import{S as m}from"./separator-DdG-r4jJ.js";import{s as u}from"./supabase-DWL4C3fA.js";const h=()=>{const[h,x]=e.useState([]),[j,b]=e.useState(""),[p,g]=e.useState(!1),y=s(),{toast:v}=a(),f=async()=>{const{data:e,error:s}=await u.from("skill_tests").select("id,title,created_at").eq("skill_slug","vocabulary-builder").order("created_at",{ascending:!1});s||x(e??[])};e.useEffect(()=>{document.title="Vocabulary Tests | Admin";const e=document.querySelector('link[rel="canonical"]')||document.createElement("link");e.setAttribute("rel","canonical"),e.setAttribute("href",window.location.origin+"/admin/skills/vocabulary/tests"),document.head.contains(e)||document.head.appendChild(e),f()},[]);return t.jsx(o,{title:"Vocabulary Builder Tests",showBackButton:!0,children:t.jsxs("section",{className:"space-y-4",children:[t.jsxs(l,{children:[t.jsx(i,{children:t.jsx(r,{className:"text-base",children:"Download Sample CSV (Vocabulary Book)"})}),t.jsx(d,{children:t.jsx(n,{variant:"secondary",asChild:!0,children:t.jsx("a",{href:"/examples/vocabulary-sample.csv",download:!0,children:"Download Example CSV"})})})]}),t.jsxs(l,{children:[t.jsx(i,{children:t.jsx(r,{className:"text-base",children:"+ Add New Vocabulary Test"})}),t.jsxs(d,{className:"flex gap-2 items-center",children:[t.jsx(c,{placeholder:"Test title (e.g., Set 1)",value:j,onChange:e=>b(e.target.value)}),t.jsx(n,{onClick:async()=>{if(!j.trim())return;g(!0);const{data:e,error:s}=await u.from("skill_tests").insert({skill_slug:"vocabulary-builder",title:j.trim()}).select("id").maybeSingle();g(!1),s?v({title:"Failed to create test",description:s.message,variant:"destructive"}):(b(""),await f(),(null==e?void 0:e.id)&&y(`/admin/skills/vocabulary/tests/${e.id}`))},disabled:p,children:p?"Adding...":"Add"})]})]}),t.jsx(m,{}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[h.map(e=>t.jsxs(l,{className:"hover:shadow-lg transition-shadow",children:[t.jsx(i,{className:"pb-2",children:t.jsx(r,{className:"text-sm",children:e.title})}),t.jsx(d,{children:t.jsx(n,{size:"sm",variant:"secondary",onClick:()=>y(`/admin/skills/vocabulary/tests/${e.id}`),children:"Manage Test"})})]},e.id)),0===h.length&&t.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{h as default};
