import{r as e,u as s,h as a,j as t,A as l,C as i,b as r,c,a as n,B as d,I as o,_ as m}from"./index-MBXDaDUn.js";import{s as u}from"./supabase-Bqkrifq5.js";const h=()=>{const[h,x]=e.useState([]),[j,b]=e.useState(""),[g,y]=e.useState(!1),p=s(),{toast:v}=a(),f=async()=>{const{data:e,error:s}=await u.from("skill_tests").select("id,title,created_at").eq("skill_slug","vocabulary-builder").order("created_at",{ascending:!1});s||x(e??[])};e.useEffect(()=>{document.title="Vocabulary Tests | Admin";const e=document.querySelector('link[rel="canonical"]')||document.createElement("link");e.setAttribute("rel","canonical"),e.setAttribute("href",window.location.origin+"/admin/skills/vocabulary/tests"),document.head.contains(e)||document.head.appendChild(e),f()},[]);return t.jsx(l,{title:"Vocabulary Builder Tests",showBackButton:!0,children:t.jsxs("section",{className:"space-y-4",children:[t.jsxs(i,{children:[t.jsx(r,{children:t.jsx(c,{className:"text-base",children:"Download Sample CSV (Vocabulary Book)"})}),t.jsx(n,{children:t.jsx(d,{variant:"secondary",asChild:!0,children:t.jsx("a",{href:"/examples/vocabulary-sample.csv",download:!0,children:"Download Example CSV"})})})]}),t.jsxs(i,{children:[t.jsx(r,{children:t.jsx(c,{className:"text-base",children:"+ Add New Vocabulary Test"})}),t.jsxs(n,{className:"flex gap-2 items-center",children:[t.jsx(o,{placeholder:"Test title (e.g., Set 1)",value:j,onChange:e=>b(e.target.value)}),t.jsx(d,{onClick:async()=>{if(!j.trim())return;y(!0);const{data:e,error:s}=await u.from("skill_tests").insert({skill_slug:"vocabulary-builder",title:j.trim()}).select("id").maybeSingle();y(!1),s?v({title:"Failed to create test",description:s.message,variant:"destructive"}):(b(""),await f(),(null==e?void 0:e.id)&&p(`/admin/skills/vocabulary/tests/${e.id}`))},disabled:g,children:g?"Adding...":"Add"})]})]}),t.jsx(m,{}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[h.map(e=>t.jsxs(i,{className:"hover:shadow-lg transition-shadow",children:[t.jsx(r,{className:"pb-2",children:t.jsx(c,{className:"text-sm",children:e.title})}),t.jsx(n,{children:t.jsx(d,{size:"sm",variant:"secondary",onClick:()=>p(`/admin/skills/vocabulary/tests/${e.id}`),children:"Manage Test"})})]},e.id)),0===h.length&&t.jsx("p",{className:"text-sm text-muted-foreground",children:"No tests yet. Create your first one above."})]})]})})};export{h as default};
