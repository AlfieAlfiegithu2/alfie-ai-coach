import{r as e,j as r}from"./vendor-react-rLLBBC7n.js";import{C as t,b as a,c as s,B as n,a as o,e as c}from"./index-KxDfHqNJ.js";import{T as d,a as l,b as i,c as x}from"./tabs-BVz_B7Kx.js";import{aM as m,aN as h,b4 as p,at as g}from"./vendor-ui-BGi_EvHx.js";const u=({taskTitle:u,originalText:j,annotatedOriginal:b,annotatedCorrected:f,corrections:v=[],icon:N,colorScheme:y})=>{const[_,w]=e.useState(!1),C=(()=>{if(!v.length)return{original:j,corrected:j};let e=j,r=j;const t=[...v].sort((e,r)=>r.start_index-e.start_index);for(const a of t){const{original_text:t,corrected_text:s,start_index:n,end_index:o,error_type:c,explanation:d}=a,l=`<span class="error-text" data-type="${c}" data-explanation="${d}" title="${d}">${t}</span>`;e=e.substring(0,n)+l+e.substring(o);const i=`<span class="correction-text" data-type="${c}" title="Corrected: ${d}">${s}</span>`;r=r.substring(0,n)+i+r.substring(o)}return{original:e,corrected:r}})(),$=b||C.original,k=f||C.corrected,S=v.length>0||b||f;return r.jsxs(t,{className:"card-modern",children:[r.jsx(a,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(s,{className:`flex items-center gap-2 ${y}`,children:[r.jsx("div",{className:"p-2 rounded-xl bg-current/10",children:r.jsx(N,{className:"w-4 h-4"})}),u]}),S&&r.jsx(n,{variant:"outline",size:"sm",onClick:()=>w(!_),className:"gap-2",children:_?r.jsxs(r.Fragment,{children:[r.jsx(m,{className:"w-4 h-4"}),"Hide Corrections"]}):r.jsxs(r.Fragment,{children:[r.jsx(h,{className:"w-4 h-4"}),"Show Corrections"]})})]})}),r.jsx(o,{children:S?r.jsxs(d,{value:_?"corrected":"original",onValueChange:e=>w("corrected"===e),children:[r.jsxs(l,{className:"grid w-full grid-cols-2 mb-4",children:[r.jsxs(i,{value:"original",className:"flex items-center gap-2",children:[r.jsx(p,{className:"w-4 h-4"}),"Original (with errors)"]}),r.jsxs(i,{value:"corrected",className:"flex items-center gap-2",children:[r.jsx(g,{className:"w-4 h-4"}),"Corrected"]})]}),r.jsxs(x,{value:"original",children:[r.jsx("div",{className:"bg-surface-3 p-4 rounded-2xl text-base max-h-80 overflow-y-auto text-text-secondary leading-relaxed",children:r.jsx("div",{dangerouslySetInnerHTML:{__html:$.replace(/\n/g,"<br>")},className:"annotated-text"})}),v.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("h4",{className:"text-sm font-semibold mb-2 text-text-primary",children:["Corrections Found (",v.length,")"]}),r.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[v.slice(0,5).map((e,t)=>r.jsxs("div",{className:"flex items-start gap-2 p-2 bg-surface-2 rounded-lg text-xs",children:[r.jsx(c,{variant:"outline",className:"text-red-600 border-red-200 bg-red-50",children:e.error_type}),r.jsxs("div",{children:[r.jsx("div",{className:"text-red-600 line-through",children:e.original_text}),r.jsx("div",{className:"text-green-600 font-medium",children:e.corrected_text}),r.jsx("div",{className:"text-text-secondary mt-1",children:e.explanation})]})]},t)),v.length>5&&r.jsxs("div",{className:"text-xs text-text-secondary text-center",children:["+",v.length-5," more corrections"]})]})]})]}),r.jsx(x,{value:"corrected",children:r.jsx("div",{className:"bg-surface-3 p-4 rounded-2xl text-base max-h-80 overflow-y-auto text-text-secondary leading-relaxed",children:r.jsx("div",{dangerouslySetInnerHTML:{__html:k.replace(/\n/g,"<br>")},className:"annotated-text"})})})]}):r.jsx("div",{className:"bg-surface-3 p-4 rounded-2xl text-base max-h-60 overflow-y-auto text-text-secondary leading-relaxed",children:j})}),r.jsx("style",{children:"\n        .annotated-text .error-text {\n          background-color: #fee2e2;\n          color: #dc2626;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #dc2626;\n        }\n        \n        .annotated-text .correction-text {\n          background-color: #dcfce7;\n          color: #16a34a;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #16a34a;\n        }\n        \n        .annotated-text error[data-type] {\n          background-color: #fee2e2;\n          color: #dc2626;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #dc2626;\n        }\n        \n        .annotated-text correction[data-type] {\n          background-color: #dcfce7;\n          color: #16a34a;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #16a34a;\n        }\n      "})]})};export{u as A};
