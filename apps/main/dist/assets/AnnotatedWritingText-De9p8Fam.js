import{c as e,r,j as t,C as a,b as s,d as n,B as c,N as o,E as l,a as d,L as i,l as x}from"./index-BHP5ddKT.js";import{T as m,a as h,b as g,c as p}from"./tabs-Dqv5dvms.js";import{C as u}from"./circle-alert-BMPdzBmN.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=e("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),b=({taskTitle:e,originalText:j,annotatedOriginal:b,annotatedCorrected:y,corrections:N=[],icon:f,colorScheme:v})=>{const[w,_]=r.useState(!1),k=(()=>{if(!N.length)return{original:j,corrected:j};let e=j,r=j;const t=[...N].sort((e,r)=>r.start_index-e.start_index);for(const a of t){const{original_text:t,corrected_text:s,start_index:n,end_index:c,error_type:o,explanation:l}=a,d=`<span class="error-text" data-type="${o}" data-explanation="${l}" title="${l}">${t}</span>`;e=e.substring(0,n)+d+e.substring(c);const i=`<span class="correction-text" data-type="${o}" title="Corrected: ${l}">${s}</span>`;r=r.substring(0,n)+i+r.substring(c)}return{original:e,corrected:r}})(),C=b||k.original,$=y||k.corrected,S=N.length>0||b||y;return t.jsxs(a,{className:"card-modern",children:[t.jsx(s,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(n,{className:`flex items-center gap-2 ${v}`,children:[t.jsx("div",{className:"p-2 rounded-xl bg-current/10",children:t.jsx(f,{className:"w-4 h-4"})}),e]}),S&&t.jsx(c,{variant:"outline",size:"sm",onClick:()=>_(!w),className:"gap-2",children:w?t.jsxs(t.Fragment,{children:[t.jsx(o,{className:"w-4 h-4"}),"Hide Corrections"]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"w-4 h-4"}),"Show Corrections"]})})]})}),t.jsx(d,{children:S?t.jsxs(m,{value:w?"corrected":"original",onValueChange:e=>_("corrected"===e),children:[t.jsxs(h,{className:"grid w-full grid-cols-2 mb-4",children:[t.jsxs(g,{value:"original",className:"flex items-center gap-2",children:[t.jsx(u,{className:"w-4 h-4"}),"Original (with errors)"]}),t.jsxs(g,{value:"corrected",className:"flex items-center gap-2",children:[t.jsx(i,{className:"w-4 h-4"}),"Corrected"]})]}),t.jsxs(p,{value:"original",children:[t.jsx("div",{className:"bg-surface-3 p-4 rounded-2xl text-base max-h-80 overflow-y-auto text-text-secondary leading-relaxed",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:C.replace(/\n/g,"<br>")},className:"annotated-text"})}),N.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("h4",{className:"text-sm font-semibold mb-2 text-text-primary",children:["Corrections Found (",N.length,")"]}),t.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[N.slice(0,5).map((e,r)=>t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-surface-2 rounded-lg text-xs",children:[t.jsx(x,{variant:"outline",className:"text-red-600 border-red-200 bg-red-50",children:e.error_type}),t.jsxs("div",{children:[t.jsx("div",{className:"text-red-600 line-through",children:e.original_text}),t.jsx("div",{className:"text-green-600 font-medium",children:e.corrected_text}),t.jsx("div",{className:"text-text-secondary mt-1",children:e.explanation})]})]},r)),N.length>5&&t.jsxs("div",{className:"text-xs text-text-secondary text-center",children:["+",N.length-5," more corrections"]})]})]})]}),t.jsx(p,{value:"corrected",children:t.jsx("div",{className:"bg-surface-3 p-4 rounded-2xl text-base max-h-80 overflow-y-auto text-text-secondary leading-relaxed",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:$.replace(/\n/g,"<br>")},className:"annotated-text"})})})]}):t.jsx("div",{className:"bg-surface-3 p-4 rounded-2xl text-base max-h-60 overflow-y-auto text-text-secondary leading-relaxed",children:j})}),t.jsx("style",{children:"\n        .annotated-text .error-text {\n          background-color: #fee2e2;\n          color: #dc2626;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #dc2626;\n        }\n        \n        .annotated-text .correction-text {\n          background-color: #dcfce7;\n          color: #16a34a;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #16a34a;\n        }\n        \n        .annotated-text error[data-type] {\n          background-color: #fee2e2;\n          color: #dc2626;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #dc2626;\n        }\n        \n        .annotated-text correction[data-type] {\n          background-color: #dcfce7;\n          color: #16a34a;\n          padding: 2px 4px;\n          border-radius: 4px;\n          cursor: help;\n          border-bottom: 2px solid #16a34a;\n        }\n      "})]})};export{b as A,j as S};
