import{ae as e,u as s,r as t,j as n,ar as r,N as o,E as l,at as a}from"./index-CueKeSri.js";import"./supabase-DWL4C3fA.js";const d=()=>n.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 48 48","aria-hidden":"true",children:[n.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.72 1.22 9.23 3.6l6.9-6.9C36.89 2.4 30.89 0 24 0 14.62 0 6.51 5.38 2.56 13.2l8.03 6.23C12.23 13.2 17.64 9.5 24 9.5z"}),n.jsx("path",{fill:"#4285F4",d:"M46.5 24c0-1.64-.15-3.21-.43-4.74H24v9.01h12.7c-.55 2.96-2.25 5.47-4.81 7.17l7.39 5.73C43.91 37.34 46.5 31.22 46.5 24z"}),n.jsx("path",{fill:"#FBBC05",d:"M10.59 19.43l-8.03-6.23C.93 16.12 0 19.94 0 24c0 3.99.93 7.78 2.56 11.13l8.03-6.23C9.9 26.52 9.5 25.3 9.5 24s.4-2.52 1.09-4.57z"}),n.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.91-5.83l-7.39-5.73c-2.05 1.38-4.69 2.21-8.52 2.21-6.36 0-11.77-3.7-13.4-8.93l-8.03 6.23C6.51 42.62 14.62 48 24 48z"})]}),i=()=>{const{user:i,signIn:c,signInWithGoogle:m,resetPassword:u,loading:f}=e(),x=s(),[h,b]=t.useState(""),[p,g]=t.useState(""),[w,j]=t.useState(!1),[v,N]=t.useState(null),[y,k]=t.useState(!1),[C,S]=t.useState(!1);if(t.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("error");e&&(N(decodeURIComponent(e)),window.history.replaceState({},document.title,window.location.pathname))},[]),t.useEffect(()=>{i&&w&&j(!1)},[i,w]),console.log("üîç Auth component render:",{user:null==i?void 0:i.email,loading:f,submitting:w,error:v}),t.useEffect(()=>{!f&&i&&(console.log("üîÑ Auth component redirecting to dashboard"),x("/dashboard",{replace:!0}))},[f,i,x]),f)return console.log("‚è≥ Auth component showing loading screen"),n.jsx("div",{className:"min-h-screen w-full font-sans flex flex-col items-center justify-center bg-[#f5f2e8]",children:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx("div",{className:"relative w-20 h-20",children:n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-[#e6e0d4] border-t-[#2d2d2d] animate-spin"})}),n.jsx("div",{className:"text-xl font-serif font-medium text-[#2d2d2d]",children:"Loading‚Ä¶"}),n.jsx("div",{className:"text-sm text-[#666666] font-sans",children:"Setting up your account"})]})});if(i)return n.jsx("div",{className:"min-h-screen w-full font-sans flex flex-col items-center justify-center bg-[#f5f2e8]",children:n.jsx("div",{className:"text-xl font-serif font-medium text-[#2d2d2d]",children:"Redirecting..."})});return n.jsx("div",{className:"min-h-screen w-full font-sans bg-[#f5f2e8] text-[#3c3c3c]",children:n.jsxs("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center justify-center px-4 py-10",children:[n.jsxs("button",{type:"button",onClick:()=>x(-1),className:"absolute top-4 left-4 inline-flex items-center gap-2 text-sm text-[#3c3c3c] hover:text-black bg-white/80 backdrop-blur px-3 py-2 rounded-xl border border-[#e6e0d4] font-medium","aria-label":"Go back",children:[n.jsx(r,{className:"w-4 h-4"}),"Back"]}),n.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden shadow-sm bg-white border-2 border-[#d97757]/20 mx-auto",children:n.jsxs("div",{className:"p-8 md:p-10 bg-white",children:[n.jsx("h3",{className:"text-2xl font-serif font-medium text-[#d97757] text-center mb-6",children:"Are we ready?"}),y?n.jsxs("form",{onSubmit:async e=>{e.preventDefault(),j(!0),N(null);const{error:s}=await u(h);s?N(s):k(!1),j(!1)},className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-[#3c3c3c] mb-2 font-sans",children:"Email address"}),n.jsx("input",{id:"reset-email",type:"email",required:!0,value:h,onChange:e=>b(e.target.value),className:"w-full p-3 rounded-xl border border-[#d97757]/20 bg-[#faf8f6] text-[#2d2d2d] shadow-sm focus:outline-none focus:ring-2 focus:ring-[#d97757]/20 focus:border-[#d97757] transition-all font-sans",placeholder:"operator@domain.com"})]}),v&&n.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:v}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>k(!1),className:"flex-1 py-3 bg-white border border-[#d97757]/30 rounded-xl hover:bg-[#fffaf8] text-[#2d2d2d] font-medium font-sans",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"flex-1 py-3 px-4 bg-[#d97757] text-white font-medium rounded-xl hover:bg-[#c56a4b] font-sans",children:w?"Sending‚Ä¶":"Send reset link"})]})]}):n.jsxs("form",{onSubmit:async e=>{e.preventDefault(),console.log("üìù Sign in form submitted:",h),j(!0),N(null);const{error:s}=await c(h,p);s?(console.error("‚ùå Sign in failed:",s),s.toLowerCase().includes("invalid")||s.toLowerCase().includes("credentials")?N("Invalid email or password. If you just signed up, please check your email for a verification link."):s.toLowerCase().includes("email")&&s.toLowerCase().includes("confirm")?N("Please verify your email address before signing in. Check your inbox for a verification email."):N(s),j(!1)):(console.log("‚úÖ Sign in successful, waiting for auth state change"),await new Promise(e=>setTimeout(e,100)))},className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[#3c3c3c] mb-2 font-sans",children:"Email address"}),n.jsx("input",{id:"email",type:"email",required:!0,value:h,onChange:e=>b(e.target.value),className:"w-full p-3 rounded-xl border border-[#d97757]/20 bg-[#faf8f6] text-[#2d2d2d] shadow-sm focus:outline-none focus:ring-2 focus:ring-[#d97757]/20 focus:border-[#d97757] transition-all font-sans placeholder-[#666666]/50",placeholder:""})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#3c3c3c] mb-2 font-sans",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"password",type:C?"text":"password",required:!0,value:p,onChange:e=>g(e.target.value),className:"w-full p-3 rounded-xl border border-[#d97757]/20 bg-[#faf8f6] text-[#2d2d2d] shadow-sm focus:outline-none focus:ring-2 focus:ring-[#d97757]/20 focus:border-[#d97757] transition-all pr-12 font-sans placeholder-[#666666]/50",placeholder:C?"It's just better":""}),n.jsx("button",{type:"button","aria-label":C?"Hide password":"Show password",onClick:()=>S(e=>!e),className:"absolute inset-y-0 right-0 px-3 text-[#666666] hover:text-[#2d2d2d]",children:C?n.jsx(o,{className:"w-5 h-5"}):n.jsx(l,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm font-sans",children:[n.jsxs("label",{className:"flex items-center text-[#666666] cursor-pointer",children:[n.jsxs("div",{className:"relative flex items-center",children:[n.jsx("input",{type:"checkbox",className:"peer appearance-none w-4 h-4 rounded border border-[#d97757] bg-white checked:bg-[#d97757] checked:border-[#d97757] focus:ring-2 focus:ring-[#d97757]/20 focus:outline-none transition-colors cursor-pointer mr-2"}),n.jsx("svg",{className:"absolute w-3 h-3 pointer-events-none hidden peer-checked:block text-white left-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("polyline",{points:"20 6 9 17 4 12"})})]}),"Remember me"]}),n.jsx("button",{type:"button",className:"text-[#2d2d2d] font-medium hover:underline",onClick:()=>x("/reset-password"),children:"Forgot password?"})]}),v&&n.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:v}),n.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 px-4 bg-[#d97757] text-white font-medium rounded-xl shadow-md hover:bg-[#c56a4b] transform hover:-translate-y-0.5 transition-all font-sans",children:w?"Signing in‚Ä¶":"I am born ready!"}),n.jsxs("div",{className:"relative flex items-center my-4",children:[n.jsx("div",{className:"flex-1 border-t border-[#e6e0d4]"}),n.jsx("span",{className:"px-3 text-xs text-[#666666] font-sans",children:"or"}),n.jsx("div",{className:"flex-1 border-t border-[#e6e0d4]"})]}),n.jsxs("button",{type:"button",onClick:async()=>{console.log("üì± Google sign in initiated"),j(!0),N(null);const{error:e}=await m();e?(console.error("‚ùå Google sign in failed:",e),N(e),j(!1)):console.log("‚úÖ Google sign in successful, waiting for auth state change")},disabled:w,className:"w-full py-3 px-4 bg-white border border-[#d97757]/30 rounded-xl text-[#2d2d2d] font-medium hover:bg-[#fffaf8] transition-all flex items-center justify-center gap-2 font-sans shadow-sm",children:[n.jsx(d,{})," Continue with Google"]}),n.jsx("div",{className:"text-center text-sm text-[#666666] mt-4 font-sans",children:n.jsx(a,{className:"text-[#2d2d2d] font-medium hover:underline",to:"/signup",children:"Create account"})})]})]})})]})})};export{i as default};
