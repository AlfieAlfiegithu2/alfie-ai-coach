import{A as e,u as s,r as t,j as l,_ as a,a1 as r,E as i,a2 as n}from"./index-C8eGhmvu.js";import"./supabase-Bqkrifq5.js";const o=()=>l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 48 48","aria-hidden":"true",children:[l.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.72 1.22 9.23 3.6l6.9-6.9C36.89 2.4 30.89 0 24 0 14.62 0 6.51 5.38 2.56 13.2l8.03 6.23C12.23 13.2 17.64 9.5 24 9.5z"}),l.jsx("path",{fill:"#4285F4",d:"M46.5 24c0-1.64-.15-3.21-.43-4.74H24v9.01h12.7c-.55 2.96-2.25 5.47-4.81 7.17l7.39 5.73C43.91 37.34 46.5 31.22 46.5 24z"}),l.jsx("path",{fill:"#FBBC05",d:"M10.59 19.43l-8.03-6.23C.93 16.12 0 19.94 0 24c0 3.99.93 7.78 2.56 11.13l8.03-6.23C9.9 26.52 9.5 25.3 9.5 24s.4-2.52 1.09-4.57z"}),l.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.91-5.83l-7.39-5.73c-2.05 1.38-4.69 2.21-8.52 2.21-6.36 0-11.77-3.7-13.4-8.93l-8.03 6.23C6.51 42.62 14.62 48 24 48z"})]}),c=()=>{const{user:c,signIn:d,signInWithGoogle:u,resetPassword:m,loading:x}=e(),b=s(),[h,g]=t.useState(""),[f,p]=t.useState(""),[w,j]=t.useState(!1),[y,v]=t.useState(null),[N,k]=t.useState(!1),[C,S]=t.useState(!1);if(t.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("error");e&&(v(decodeURIComponent(e)),window.history.replaceState({},document.title,window.location.pathname))},[]),t.useEffect(()=>{c&&w&&j(!1)},[c,w]),console.log("üîç Auth component render:",{user:null==c?void 0:c.email,loading:x,submitting:w,error:y}),t.useEffect(()=>{!x&&c&&(console.log("üîÑ Auth component redirecting to dashboard"),b("/dashboard",{replace:!0}))},[x,c,b]),x)return console.log("‚è≥ Auth component showing loading screen"),l.jsxs("div",{className:"min-h-screen w-full font-sans flex flex-col items-center justify-center bg-white",children:[l.jsx("div",{className:"fixed inset-0 bg-white -z-10"}),l.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[l.jsx("div",{className:"relative w-20 h-20",children:l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200 border-t-blue-600 animate-spin"})}),l.jsx("div",{className:"text-xl font-semibold text-black",children:"Loading‚Ä¶"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Setting up your account"})]})]});if(c)return l.jsx("div",{className:"min-h-screen w-full font-sans flex flex-col items-center justify-center bg-white",children:l.jsx("div",{className:"text-xl font-semibold text-black",children:"Redirecting..."})});return l.jsxs("div",{className:"min-h-screen w-full font-sans bg-white",children:[l.jsx("div",{className:"fixed inset-0 bg-white -z-10"}),l.jsxs("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center justify-center px-4 py-10",children:[l.jsxs("button",{type:"button",onClick:()=>b(-1),className:"absolute top-4 left-4 inline-flex items-center gap-2 text-sm text-gray-800 hover:text-black bg-white/80 backdrop-blur px-3 py-2 rounded-xl border border-gray-300","aria-label":"Go back",children:[l.jsx(a,{className:"w-4 h-4"}),"Back"]}),l.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden shadow-xl bg-white border border-gray-200 mx-auto",children:l.jsxs("div",{className:"p-6 md:p-8 bg-white",children:[l.jsx("h3",{className:"text-xl font-semibold text-black text-center mb-4",children:"Are we ready?"}),N?l.jsxs("form",{onSubmit:async e=>{e.preventDefault(),j(!0),v(null);const{error:s}=await m(h);s?v(s):k(!1),j(!1)},className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),l.jsx("input",{id:"reset-email",type:"email",required:!0,value:h,onChange:e=>g(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all",placeholder:"operator@domain.com"})]}),y&&l.jsx("div",{className:"text-sm text-red-500",children:y}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>k(!1),className:"flex-1 py-3 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 text-black",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:w,className:"flex-1 py-3 px-4 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700",children:w?"Sending‚Ä¶":"Send reset link"})]})]}):l.jsxs("form",{onSubmit:async e=>{e.preventDefault(),console.log("üìù Sign in form submitted:",h),j(!0),v(null);const{error:s}=await d(h,f);s?(console.error("‚ùå Sign in failed:",s),s.toLowerCase().includes("invalid")||s.toLowerCase().includes("credentials")?v("Invalid email or password. If you just signed up, please check your email for a verification link."):s.toLowerCase().includes("email")&&s.toLowerCase().includes("confirm")?v("Please verify your email address before signing in. Check your inbox for a verification email."):v(s),j(!1)):(console.log("‚úÖ Sign in successful, waiting for auth state change"),await new Promise(e=>setTimeout(e,100)))},className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),l.jsx("input",{id:"email",type:"email",required:!0,value:h,onChange:e=>g(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all",placeholder:"continuewith@google.com"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:"password",type:C?"text":"password",required:!0,value:f,onChange:e=>p(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all pr-12",placeholder:C?"It's just better":""}),l.jsx("button",{type:"button","aria-label":C?"Hide password":"Show password",onClick:()=>S(e=>!e),className:"absolute inset-y-0 right-0 px-3 text-gray-600 hover:text-black",children:C?l.jsx(r,{className:"w-5 h-5"}):l.jsx(i,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("label",{className:"flex items-center text-gray-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded mr-2 border-gray-300 text-blue-600 focus:ring-blue-500/30"}),"Remember me"]}),l.jsx("button",{type:"button",className:"text-blue-600 font-medium hover:underline",onClick:()=>b("/reset-password"),children:"Forgot password?"})]}),y&&l.jsx("div",{className:"text-sm text-red-500",children:y}),l.jsx("button",{type:"submit",disabled:w,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-xl shadow-sm hover:bg-blue-700 transform hover:-translate-y-0.5 transition-all",children:w?"Signing in‚Ä¶":"I am born ready!"}),l.jsxs("div",{className:"relative flex items-center my-2",children:[l.jsx("div",{className:"flex-1 border-t border-gray-300"}),l.jsx("span",{className:"px-3 text-xs text-gray-500",children:"or"}),l.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),l.jsxs("button",{type:"button",onClick:async()=>{console.log("üì± Google sign in initiated"),j(!0),v(null);const{error:e}=await u();e?(console.error("‚ùå Google sign in failed:",e),v(e),j(!1)):console.log("‚úÖ Google sign in successful, waiting for auth state change")},disabled:w,className:"w-full py-3 px-4 bg-white border border-gray-300 rounded-xl text-black font-medium hover:bg-gray-50 transition-all flex items-center justify-center gap-2",children:[l.jsx(o,{})," Continue with Google"]}),l.jsx("div",{className:"text-center text-sm text-gray-600 mt-2",children:l.jsx(n,{className:"text-blue-600 font-medium hover:underline",to:"/signup",children:"Create account"})})]})]})})]})]})};export{c as default};
