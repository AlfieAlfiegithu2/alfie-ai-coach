import{u as e,c as r,r as a,j as s}from"./vendor-react-JN_hy__U.js";import{z as t,s as o,C as l,a as n,B as i,U as c}from"./index-DXpPY1B7.js";import{u as d,a as m,b as x,c as u,g}from"./blogUtils-DAXgFpPF.js";import{u as p}from"./vendor-i18n-DlHrixAm.js";import{az as b,G as h,h as f}from"./vendor-ui-DG51EGkO.js";import"./vendor-react-dom-Cb-iy8Oc.js";import"./vendor-animation-ClPlB6zo.js";import"./vendor-utils-D5HPTFR9.js";import"./vendor-supabase-D7XYLCUu.js";import"./vendor-charts-BpOKEG9Z.js";import"./vendor-date-DT7Rq6D9.js";const y=()=>{const y=e(),j=r();p();const v=d(),[N,k]=a.useState(null),[w,_]=a.useState(!0),[C,P]=a.useState(!1),S=t.note.colors;a.useEffect(()=>{j.slug&&B()},[j.slug,v]);const B=async()=>{try{_(!0);const{data:e,error:r}=await o.from("blog_posts").select("id, slug, featured_image_url, published_at, created_at, updated_at").eq("slug",j.slug).eq("status","published").single();if(r||!e)return console.error("Error loading blog post:",r),void _(!1);const{data:a,error:s}=await o.from("blog_post_translations").select("title, content, excerpt, meta_description, meta_keywords, language_code").eq("blog_post_id",e.id);if(s)return console.error("Error loading translations:",s),void _(!1);const t=(null==a?void 0:a.find(e=>e.language_code===v))||(null==a?void 0:a.find(e=>"en"===e.language_code))||(null==a?void 0:a[0]),l=(null==a?void 0:a.map(e=>e.language_code))||[];k({...e,translation:t||null,availableLanguages:l})}catch(e){console.error("Error loading blog post:",e)}finally{_(!1)}},L=(null==N?void 0:N.availableLanguages)?m(j.slug||"",N.availableLanguages):[];return w?s.jsx("div",{className:"min-h-screen font-serif",style:{backgroundColor:S.background},children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:S.textPrimary}}),s.jsx("p",{className:"mt-4 font-serif",style:{color:S.textSecondary},children:"Loading article..."})]})})}):N&&N.translation?s.jsxs("div",{className:"min-h-screen font-serif",style:{backgroundColor:S.background},children:[s.jsx(c,{title:N.translation.title,description:N.translation.meta_description||N.translation.excerpt||"",keywords:N.translation.meta_keywords||"",image:N.featured_image_url||void 0,type:"article",lang:v,url:x(N.slug,v),published:N.published_at||void 0,modified:N.updated_at||void 0,hreflang:L,schemaType:"article"}),s.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:[s.jsxs(i,{variant:"ghost",onClick:()=>y(`/${v}/blog`),className:"mb-6 hover:bg-transparent pl-0",style:{color:S.textPrimary},children:[s.jsx(b,{className:"mr-2 w-4 h-4"}),"Back to Blog"]}),N.availableLanguages.length>1&&s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative inline-block",children:[s.jsxs(i,{variant:"outline",onClick:()=>P(!C),className:"flex items-center gap-2 font-serif",style:{backgroundColor:"transparent",borderColor:S.border,color:S.textPrimary},children:[s.jsx(h,{className:"w-4 h-4"}),s.jsxs("span",{children:[u(v)," ",g(v)]}),s.jsx(f,{className:"w-4 h-4 transition-transform "+(C?"rotate-180":"")})]}),C&&s.jsx("div",{className:"absolute top-full left-0 mt-2 rounded-lg shadow-lg z-50 min-w-[200px] max-h-64 overflow-y-auto",style:{backgroundColor:S.cardBackground,border:`1px solid ${S.border}`},children:N.availableLanguages.map(e=>s.jsxs("button",{onClick:()=>(e=>{j.slug&&(y(`/${e}/blog/${j.slug}`),P(!1))})(e),className:"w-full text-left px-4 py-2 transition-colors flex items-center gap-2 font-serif",style:{backgroundColor:e===v?S.border:"transparent",color:S.textPrimary},children:[s.jsx("span",{children:u(e)}),s.jsx("span",{children:g(e)})]},e))})]})}),s.jsxs("article",{className:"rounded-lg shadow-sm overflow-hidden",style:{backgroundColor:S.cardBackground,border:`1px solid ${S.border}`},children:[N.featured_image_url&&s.jsx("div",{className:"aspect-video w-full overflow-hidden",style:{backgroundColor:S.border},children:s.jsx("img",{src:N.featured_image_url,alt:N.translation.title,className:"w-full h-full object-cover"})}),s.jsxs(n,{className:"p-8",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm mb-6 font-serif",style:{color:S.textSecondary},children:[s.jsx("span",{children:(e=>{if(!e)return"";return new Date(e).toLocaleDateString(v,{year:"numeric",month:"long",day:"numeric"})})(N.published_at||N.created_at)}),s.jsx("span",{children:"Â·"}),s.jsxs("span",{children:[Math.ceil(N.translation.content.split(" ").length/200)," min read"]})]}),s.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-6 font-serif",style:{color:S.textPrimary},children:N.translation.title}),N.translation.excerpt&&s.jsx("p",{className:"text-xl mb-8 leading-relaxed font-serif italic",style:{color:S.textSecondary},children:N.translation.excerpt}),s.jsx("div",{className:"prose prose-lg max-w-none prose-stone font-serif",style:{"--tw-prose-body":S.textPrimary,"--tw-prose-headings":S.textPrimary,"--tw-prose-links":S.buttonPrimary,"--tw-prose-bold":S.textPrimary,"--tw-prose-bullets":S.textSecondary,"--tw-prose-quotes":S.textSecondary,color:S.textPrimary},dangerouslySetInnerHTML:{__html:N.translation.content}})]})]}),s.jsx(l,{className:"mt-8 shadow-sm",style:{backgroundColor:S.cardBackground,border:`1px solid ${S.border}`},children:s.jsxs(n,{className:"p-8 text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-3 font-serif",style:{color:S.textPrimary},children:"Ready to Improve Your English?"}),s.jsx("p",{className:"mb-6 font-serif text-lg",style:{color:S.textSecondary},children:"Start practicing with our AI-powered learning platform"}),s.jsx(i,{onClick:()=>y("/ielts-portal"),size:"lg",className:"font-serif px-8",style:{backgroundColor:S.textPrimary,color:S.cardBackground},children:"Start Learning Now"})]})})]})]}):s.jsx("div",{className:"min-h-screen font-serif",style:{backgroundColor:S.background},children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:s.jsx(l,{style:{backgroundColor:S.cardBackground,border:`1px solid ${S.border}`},children:s.jsxs(n,{className:"p-12 text-center",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4 font-serif",style:{color:S.textPrimary},children:"Article Not Found"}),s.jsx("p",{className:"mb-6 font-serif",style:{color:S.textSecondary},children:"The article you're looking for doesn't exist or isn't available in your selected language."}),s.jsxs(i,{onClick:()=>y(`/${v}/blog`),style:{backgroundColor:S.textPrimary,color:S.cardBackground},children:[s.jsx(b,{className:"mr-2 w-4 h-4"}),"Back to Blog"]})]})})})})};export{y as default};
