import{u as e,ak as a,a4 as s,r as l,j as t,C as r,a as n,B as i,_ as o,ab as c,G as d,h as m,R as x,$ as g}from"./index-BIX8qkRl.js";import{s as u}from"./supabase-Bqkrifq5.js";import{u as h,a as p,b,c as j,g as f}from"./blogUtils-Bne36L-e.js";import{H as v}from"./Header-CkXvVfTm.js";import"./dropdown-menu-Dg6hsP04.js";const N=()=>{const N=e(),w=a();s();const _=h(),[y,k]=l.useState(null),[L,S]=l.useState(!0),[C,E]=l.useState(!1);l.useEffect(()=>{w.slug&&B()},[w.slug,_]);const B=async()=>{try{S(!0);const{data:e,error:a}=await u.from("blog_posts").select("id, slug, featured_image_url, published_at, created_at, updated_at").eq("slug",w.slug).eq("status","published").single();if(a||!e)return console.error("Error loading blog post:",a),void S(!1);const{data:s,error:l}=await u.from("blog_post_translations").select("title, content, excerpt, meta_description, meta_keywords, language_code").eq("blog_post_id",e.id);if(l)return console.error("Error loading translations:",l),void S(!1);const t=(null==s?void 0:s.find(e=>e.language_code===_))||(null==s?void 0:s.find(e=>"en"===e.language_code))||(null==s?void 0:s[0]),r=(null==s?void 0:s.map(e=>e.language_code))||[];k({...e,translation:t||null,availableLanguages:r})}catch(e){console.error("Error loading blog post:",e)}finally{S(!1)}},$=(null==y?void 0:y.availableLanguages)?p(w.slug||"",y.availableLanguages):[];return L?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[t.jsx(v,{}),t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading article..."})]})})]}):y&&y.translation?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[t.jsx(v,{}),t.jsx(c,{title:y.translation.title,description:y.translation.meta_description||y.translation.excerpt||"",keywords:y.translation.meta_keywords||"",image:y.featured_image_url||void 0,type:"article",lang:_,url:b(y.slug,_),published:y.published_at||void 0,modified:y.updated_at||void 0,hreflang:$,schemaType:"article"}),t.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:[t.jsxs(i,{variant:"ghost",onClick:()=>N(`/${_}/blog`),className:"mb-6",children:[t.jsx(o,{className:"mr-2 w-4 h-4"}),"Back to Blog"]}),y.availableLanguages.length>1&&t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"relative inline-block",children:[t.jsxs(i,{variant:"outline",onClick:()=>E(!C),className:"flex items-center gap-2",children:[t.jsx(d,{className:"w-4 h-4"}),t.jsxs("span",{children:[j(_)," ",f(_)]}),t.jsx(m,{className:"w-4 h-4 transition-transform "+(C?"rotate-180":"")})]}),C&&t.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[200px] max-h-64 overflow-y-auto",children:y.availableLanguages.map(e=>t.jsxs("button",{onClick:()=>(e=>{w.slug&&(N(`/${e}/blog/${w.slug}`),E(!1))})(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center gap-2 "+(e===_?"bg-blue-50":""),children:[t.jsx("span",{children:j(e)}),t.jsx("span",{children:f(e)})]},e))})]})}),t.jsxs("article",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[y.featured_image_url&&t.jsx("div",{className:"aspect-video w-full overflow-hidden bg-gray-200",children:t.jsx("img",{src:y.featured_image_url,alt:y.translation.title,className:"w-full h-full object-cover"})}),t.jsxs(n,{className:"p-8",children:[t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(x,{className:"w-4 h-4"}),t.jsx("span",{children:(e=>{if(!e)return"";return new Date(e).toLocaleDateString(_,{year:"numeric",month:"long",day:"numeric"})})(y.published_at||y.created_at)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4"}),t.jsxs("span",{children:[Math.ceil(y.translation.content.split(" ").length/200)," min read"]})]})]}),t.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900 mb-4",children:y.translation.title}),y.translation.excerpt&&t.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:y.translation.excerpt}),t.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:y.translation.content}})]})]}),t.jsx(r,{className:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:t.jsxs(n,{className:"p-6 text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ready to Improve Your English?"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Start practicing with our AI-powered IELTS preparation platform"}),t.jsx(i,{onClick:()=>N("/ielts-portal"),className:"bg-blue-600 hover:bg-blue-700",children:"Start Learning Now"})]})})]})]}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[t.jsx(v,{}),t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:t.jsx(r,{children:t.jsxs(n,{className:"p-12 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Article Not Found"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"The article you're looking for doesn't exist or isn't available in your selected language."}),t.jsxs(i,{onClick:()=>N(`/${_}/blog`),children:[t.jsx(o,{className:"mr-2 w-4 h-4"}),"Back to Blog"]})]})})})]})};export{N as default};
