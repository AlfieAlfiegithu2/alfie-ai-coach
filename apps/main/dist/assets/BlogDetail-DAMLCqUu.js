import{u as e,ar as a,a5 as s,r as l,j as t,C as r,a as n,B as i,$ as o,ah as c,G as d,h as m,W as x,a0 as g}from"./index-DjOmKDEq.js";import{s as u}from"./supabase-DUkWVuqu.js";import{u as h,a as p,b,c as j,g as f}from"./blogUtils-RcrYLCJV.js";import{H as v}from"./Header-BMsmvo8l.js";import"./dropdown-menu-LmfHDEvE.js";import"./shield-DnR8beeD.js";const N=()=>{const N=e(),w=a();s();const y=h(),[_,k]=l.useState(null),[L,S]=l.useState(!0),[C,E]=l.useState(!1);l.useEffect(()=>{w.slug&&B()},[w.slug,y]);const B=async()=>{try{S(!0);const{data:e,error:a}=await u.from("blog_posts").select("id, slug, featured_image_url, published_at, created_at, updated_at").eq("slug",w.slug).eq("status","published").single();if(a||!e)return console.error("Error loading blog post:",a),void S(!1);const{data:s,error:l}=await u.from("blog_post_translations").select("title, content, excerpt, meta_description, meta_keywords, language_code").eq("blog_post_id",e.id);if(l)return console.error("Error loading translations:",l),void S(!1);const t=(null==s?void 0:s.find(e=>e.language_code===y))||(null==s?void 0:s.find(e=>"en"===e.language_code))||(null==s?void 0:s[0]),r=(null==s?void 0:s.map(e=>e.language_code))||[];k({...e,translation:t||null,availableLanguages:r})}catch(e){console.error("Error loading blog post:",e)}finally{S(!1)}},T=(null==_?void 0:_.availableLanguages)?p(w.slug||"",_.availableLanguages):[];return L?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[t.jsx(v,{}),t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading article..."})]})})]}):_&&_.translation?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[t.jsx(v,{}),t.jsx(c,{title:_.translation.title,description:_.translation.meta_description||_.translation.excerpt||"",keywords:_.translation.meta_keywords||"",image:_.featured_image_url||void 0,type:"article",lang:y,url:b(_.slug,y),published:_.published_at||void 0,modified:_.updated_at||void 0,hreflang:T,schemaType:"article"}),t.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:[t.jsxs(i,{variant:"ghost",onClick:()=>N(`/${y}/blog`),className:"mb-6",children:[t.jsx(o,{className:"mr-2 w-4 h-4"}),"Back to Blog"]}),_.availableLanguages.length>1&&t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"relative inline-block",children:[t.jsxs(i,{variant:"outline",onClick:()=>E(!C),className:"flex items-center gap-2",children:[t.jsx(d,{className:"w-4 h-4"}),t.jsxs("span",{children:[j(y)," ",f(y)]}),t.jsx(m,{className:"w-4 h-4 transition-transform "+(C?"rotate-180":"")})]}),C&&t.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[200px] max-h-64 overflow-y-auto",children:_.availableLanguages.map(e=>t.jsxs("button",{onClick:()=>(e=>{w.slug&&(N(`/${e}/blog/${w.slug}`),E(!1))})(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center gap-2 "+(e===y?"bg-blue-50":""),children:[t.jsx("span",{children:j(e)}),t.jsx("span",{children:f(e)})]},e))})]})}),t.jsxs("article",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[_.featured_image_url&&t.jsx("div",{className:"aspect-video w-full overflow-hidden bg-gray-200",children:t.jsx("img",{src:_.featured_image_url,alt:_.translation.title,className:"w-full h-full object-cover"})}),t.jsxs(n,{className:"p-8",children:[t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(x,{className:"w-4 h-4"}),t.jsx("span",{children:(e=>{if(!e)return"";return new Date(e).toLocaleDateString(y,{year:"numeric",month:"long",day:"numeric"})})(_.published_at||_.created_at)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4"}),t.jsxs("span",{children:[Math.ceil(_.translation.content.split(" ").length/200)," min read"]})]})]}),t.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900 mb-4",children:_.translation.title}),_.translation.excerpt&&t.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:_.translation.excerpt}),t.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:_.translation.content}})]})]}),t.jsx(r,{className:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:t.jsxs(n,{className:"p-6 text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ready to Improve Your English?"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Start practicing with our AI-powered IELTS preparation platform"}),t.jsx(i,{onClick:()=>N("/ielts-portal"),className:"bg-blue-600 hover:bg-blue-700",children:"Start Learning Now"})]})})]})]}):t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[t.jsx(v,{}),t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:t.jsx(r,{children:t.jsxs(n,{className:"p-12 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Article Not Found"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"The article you're looking for doesn't exist or isn't available in your selected language."}),t.jsxs(i,{onClick:()=>N(`/${y}/blog`),children:[t.jsx(o,{className:"mr-2 w-4 h-4"}),"Back to Blog"]})]})})})]})};export{N as default};
