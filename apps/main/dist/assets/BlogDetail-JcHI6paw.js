import{u as e,G as a,an as s,r,bj as t,a1 as l,j as o,C as n,a as i,B as d,ai as c,bh as m,a9 as x,i as g,ag as u,R as h}from"./index-BcRn0esQ.js";import{s as p}from"./supabase-DWL4C3fA.js";import{u as b,a as y,b as f,c as j,g as v}from"./blogUtils-DMeIFU2p.js";import{H as N}from"./Header-DjUzp7lg.js";import"./dropdown-menu-DrmFSAB3.js";import"./shield-zyDra3Nq.js";const w=()=>{const w=e(),k=a();s();const _=b(),[C,P]=r.useState(null),[S,B]=r.useState(!0),[L,$]=r.useState(!1),{theme:E}=t(),q=l(),F="note"===E;r.useEffect(()=>{k.slug&&H()},[k.slug,_]);const H=async()=>{try{B(!0);const{data:e,error:a}=await p.from("blog_posts").select("id, slug, featured_image_url, published_at, created_at, updated_at").eq("slug",k.slug).eq("status","published").single();if(a||!e)return console.error("Error loading blog post:",a),void B(!1);const{data:s,error:r}=await p.from("blog_post_translations").select("title, content, excerpt, meta_description, meta_keywords, language_code").eq("blog_post_id",e.id);if(r)return console.error("Error loading translations:",r),void B(!1);const t=(null==s?void 0:s.find(e=>e.language_code===_))||(null==s?void 0:s.find(e=>"en"===e.language_code))||(null==s?void 0:s[0]),l=(null==s?void 0:s.map(e=>e.language_code))||[];P({...e,translation:t||null,availableLanguages:l})}catch(e){console.error("Error loading blog post:",e)}finally{B(!1)}},I=e=>{if(!e)return"";return new Date(e).toLocaleDateString(_,{year:"numeric",month:"long",day:"numeric"})},M=(null==C?void 0:C.availableLanguages)?y(k.slug||"",C.availableLanguages):[];return S?o.jsxs("div",{className:"min-h-screen "+(F?"font-serif":"bg-gradient-to-br from-slate-50 to-blue-50/30"),style:{backgroundColor:F?q.theme.colors.background:void 0},children:[o.jsx(N,{}),o.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:F?q.textPrimary:"#2563eb"}}),o.jsx("p",{className:"mt-4",style:{color:q.textSecondary},children:"Loading article..."})]})})]}):C&&C.translation?o.jsxs("div",{className:"min-h-screen "+(F?"font-serif":"bg-gradient-to-br from-slate-50 to-blue-50/30"),style:{backgroundColor:F?q.theme.colors.background:void 0},children:[o.jsx(N,{}),o.jsx(m,{title:C.translation.title,description:C.translation.meta_description||C.translation.excerpt||"",keywords:C.translation.meta_keywords||"",image:C.featured_image_url||void 0,type:"article",lang:_,url:f(C.slug,_),published:C.published_at||void 0,modified:C.updated_at||void 0,hreflang:M,schemaType:"article"}),o.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:[o.jsxs(d,{variant:"ghost",onClick:()=>w(`/${_}/blog`),className:"mb-6",style:F?{color:q.textPrimary}:void 0,children:[o.jsx(c,{className:"mr-2 w-4 h-4"}),"Back to Blog"]}),C.availableLanguages.length>1&&o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative inline-block",children:[o.jsxs(d,{variant:"outline",onClick:()=>$(!L),className:"flex items-center gap-2",style:F?{borderColor:q.border,color:q.textPrimary}:void 0,children:[o.jsx(x,{className:"w-4 h-4"}),o.jsxs("span",{children:[j(_)," ",v(_)]}),o.jsx(g,{className:"w-4 h-4 transition-transform "+(L?"rotate-180":"")})]}),L&&o.jsx("div",{className:"absolute top-full left-0 mt-2 rounded-lg shadow-lg z-50 min-w-[200px] max-h-64 overflow-y-auto",style:{backgroundColor:F?q.cardBackground:"white",borderColor:q.border,border:`1px solid ${q.border}`},children:C.availableLanguages.map(e=>o.jsxs("button",{onClick:()=>(e=>{k.slug&&(w(`/${e}/blog/${k.slug}`),$(!1))})(e),className:"w-full text-left px-4 py-2 transition-colors flex items-center gap-2",style:{backgroundColor:e===_?F?q.hoverBg:"#eff6ff":"transparent",color:q.textPrimary},children:[o.jsx("span",{children:j(e)}),o.jsx("span",{children:v(e)})]},e))})]})}),o.jsxs("article",{className:"rounded-lg shadow-sm overflow-hidden",style:{backgroundColor:F?q.cardBackground:"white",border:F?`1px solid ${q.border}`:void 0},children:[C.featured_image_url&&o.jsx("div",{className:"aspect-video w-full overflow-hidden",style:{backgroundColor:q.border},children:o.jsx("img",{src:C.featured_image_url,alt:C.translation.title,className:"w-full h-full object-cover"})}),o.jsxs(i,{className:"p-8",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm mb-6 "+(F?"":"text-gray-500"),style:F?{color:q.textSecondary}:void 0,children:[!F&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{className:"w-4 h-4"}),o.jsx("span",{children:I(C.published_at||C.created_at)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(h,{className:"w-4 h-4"}),o.jsxs("span",{children:[Math.ceil(C.translation.content.split(" ").length/200)," min read"]})]})]}),F&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:I(C.published_at||C.created_at)}),o.jsx("span",{children:"Â·"}),o.jsxs("span",{children:[Math.ceil(C.translation.content.split(" ").length/200)," min read"]})]})]}),o.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 "+(F?"font-serif":"text-gray-900"),style:F?{color:q.textPrimary}:void 0,children:C.translation.title}),C.translation.excerpt&&o.jsx("p",{className:"text-xl mb-8 leading-relaxed "+(F?"font-serif italic":"text-gray-600"),style:F?{color:q.textSecondary}:void 0,children:C.translation.excerpt}),o.jsx("div",{className:"prose prose-lg max-w-none "+(F?"prose-stone font-serif":""),style:F?{"--tw-prose-body":q.textPrimary,"--tw-prose-headings":q.textPrimary,"--tw-prose-links":q.textPrimary,"--tw-prose-bold":q.textPrimary,"--tw-prose-bullets":q.textSecondary,"--tw-prose-quotes":q.textSecondary,color:q.textPrimary}:void 0,dangerouslySetInnerHTML:{__html:C.translation.content}})]})]}),o.jsx(n,{className:"mt-8",style:F?{backgroundColor:q.cardBackground,borderColor:q.border}:void 0,children:o.jsxs(i,{className:"p-6 text-center",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2 "+(F?"font-serif":"text-gray-900"),style:F?{color:q.textPrimary}:void 0,children:"Ready to Improve Your English?"}),o.jsx("p",{className:"mb-4 "+(F?"":"text-gray-600"),style:F?{color:q.textSecondary}:void 0,children:"Start practicing with our AI-powered learning platform"}),o.jsx(d,{onClick:()=>w("/ielts-portal"),style:F?{backgroundColor:q.textPrimary,color:q.cardBackground}:void 0,className:F?"":"bg-blue-600 hover:bg-blue-700",children:"Start Learning Now"})]})})]})]}):o.jsxs("div",{className:"min-h-screen "+(F?"font-serif":"bg-gradient-to-br from-slate-50 to-blue-50/30"),style:{backgroundColor:F?q.theme.colors.background:void 0},children:[o.jsx(N,{}),o.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl",children:o.jsx(n,{style:F?{backgroundColor:q.cardBackground,borderColor:q.border}:void 0,children:o.jsxs(i,{className:"p-12 text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4 "+(F?"font-serif":""),style:{color:q.textPrimary},children:"Article Not Found"}),o.jsx("p",{className:"mb-6",style:{color:q.textSecondary},children:"The article you're looking for doesn't exist or isn't available in your selected language."}),o.jsxs(d,{onClick:()=>w(`/${_}/blog`),style:F?{backgroundColor:q.textPrimary,color:q.cardBackground}:void 0,children:[o.jsx(c,{className:"mr-2 w-4 h-4"}),"Back to Blog"]})]})})})]})};export{w as default};
