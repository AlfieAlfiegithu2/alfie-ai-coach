import{u as e,ar as s,a5 as a,r as t,j as r,ah as l,C as n,a as i,W as o,B as c,bU as d,G as g,c2 as m}from"./index-BEYDIuQu.js";import{s as u}from"./supabase-DUkWVuqu.js";import{u as p,g as x}from"./blogUtils-DvFOJ2fz.js";import{H as h}from"./Header-BsnaJE-g.js";import{S as b}from"./search-CzqD9_Dd.js";import"./dropdown-menu-CIY7UAAx.js";const j=()=>{const j=e();s(),a();const f=p(),[v,y]=t.useState([]),[N,_]=t.useState(!0),[w,E]=t.useState("");t.useEffect(()=>{L()},[f]);const L=async()=>{try{_(!0);const{data:e,error:s}=await u.from("blog_posts").select("\n          id,\n          slug,\n          featured_image_url,\n          published_at,\n          created_at,\n          blog_post_translations!inner (\n            title,\n            excerpt,\n            language_code\n          )\n        ").eq("status","published").eq("blog_post_translations.language_code",f).order("published_at",{ascending:!1}).limit(20);if(s)return void console.error("Error loading blog posts:",s);const a=(e||[]).map(e=>({id:e.id,slug:e.slug,featured_image_url:e.featured_image_url,published_at:e.published_at,created_at:e.created_at,translation:Array.isArray(e.blog_post_translations)?e.blog_post_translations[0]:e.blog_post_translations}));y(a)}catch(e){console.error("Error loading blog posts:",e)}finally{_(!1)}},S=v.filter(e=>{var s,a,t;if(!w)return!0;const r=w.toLowerCase();return(null==(s=e.translation)?void 0:s.title.toLowerCase().includes(r))||(null==(t=null==(a=e.translation)?void 0:a.excerpt)?void 0:t.toLowerCase().includes(r))}),C=e=>{if(!e)return"";return new Date(e).toLocaleDateString(f,{year:"numeric",month:"long",day:"numeric"})};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30",children:[r.jsx(h,{}),r.jsx(l,{title:"Blog - English Learning Tips & IELTS Preparation",description:"Discover expert tips, strategies, and insights for IELTS preparation and English learning. AI-powered guidance to help you achieve your language goals.",keywords:"IELTS blog, English learning tips, IELTS preparation, language learning blog",type:"website",lang:f,url:`https://englishaidol.com/${f}/blog`}),r.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-7xl",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900 mb-4",children:"English Learning Blog"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Expert tips, strategies, and insights for IELTS preparation and English mastery"})]}),r.jsx("div",{className:"mb-8 max-w-2xl mx-auto",children:r.jsxs("div",{className:"relative",children:[r.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search articles...",value:w,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),N&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading articles..."})]}),!N&&0===S.length&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-600 text-lg",children:w?"No articles found matching your search.":"No blog posts available yet. Check back soon!"})}),!N&&S.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:S.map(e=>{var s,a,t;return r.jsxs(n,{className:"hover:shadow-lg transition-shadow cursor-pointer overflow-hidden group",onClick:()=>j(`/${f}/blog/${e.slug}`),children:[e.featured_image_url&&r.jsx("div",{className:"aspect-video w-full overflow-hidden bg-gray-200",children:r.jsx("img",{src:e.featured_image_url,alt:(null==(s=e.translation)?void 0:s.title)||"Blog post",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),r.jsxs(i,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-3",children:[r.jsx(o,{className:"w-4 h-4"}),r.jsx("span",{children:C(e.published_at||e.created_at)})]}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:(null==(a=e.translation)?void 0:a.title)||"Untitled"}),(null==(t=e.translation)?void 0:t.excerpt)&&r.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e.translation.excerpt}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs(c,{variant:"ghost",size:"sm",className:"group-hover:text-blue-600",onClick:s=>{s.stopPropagation(),j(`/${f}/blog/${e.slug}`)},children:["Read More",r.jsx(d,{className:"ml-2 w-4 h-4"})]})})]})]},e.id)})}),r.jsx("div",{className:"mt-12 text-center",children:r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx(g,{className:"w-4 h-4 text-gray-500"}),r.jsxs("span",{className:"text-sm text-gray-600",children:["Viewing articles in ",x(f)]}),r.jsx(m,{})]})})]})]})};export{j as default};
