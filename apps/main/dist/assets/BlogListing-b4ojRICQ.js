import{u as e,c as r,r as a,j as s}from"./vendor-react-rLLBBC7n.js";import{z as t,s as o,U as l,B as n,C as i,a as c,a9 as d}from"./index-KxDfHqNJ.js";import{u as m,g}from"./blogUtils-CwYOHMsN.js";import{u}from"./vendor-i18n-gE2_DBDv.js";import{Y as p,aW as x,G as h}from"./vendor-ui-BGi_EvHx.js";import"./vendor-react-dom-CgqbTh6h.js";import"./vendor-charts-0DeywwxG.js";import"./vendor-utils-Cn4gX4Gv.js";import"./vendor-supabase-DcWtwiPX.js";import"./vendor-animation-DlplP_f6.js";import"./vendor-date-DT7Rq6D9.js";const b=()=>{const b=e();r(),u();const f=m(),[y,j]=a.useState([]),[v,_]=a.useState([]),[N,w]=a.useState("all"),[S,C]=a.useState(!0),[k,E]=a.useState(""),L=t.note.colors;a.useEffect(()=>{B()},[f]);const B=async()=>{try{C(!0);const{data:e}=await o.from("blog_categories").select("\n          id,\n          slug,\n          blog_category_translations (\n            name,\n            language_code\n          )\n        "),r=(e||[]).map(e=>{const r=e.blog_category_translations.find(e=>e.language_code===f)||e.blog_category_translations.find(e=>"en"===e.language_code)||e.blog_category_translations[0];return{id:e.id,slug:e.slug,name:(null==r?void 0:r.name)||e.slug}}).sort((e,r)=>e.name.localeCompare(r.name));_(r);const{data:a,error:s}=await o.from("blog_posts").select("\n          id,\n          slug,\n          featured_image_url,\n          published_at,\n          created_at,\n          blog_post_translations!inner (\n            title,\n            excerpt,\n            language_code\n          ),\n          blog_post_categories (\n            blog_categories (\n              slug\n            )\n          )\n        ").eq("status","published").lte("published_at",(new Date).toISOString()).eq("blog_post_translations.language_code",f).order("published_at",{ascending:!1});if(s)throw s;const t=(a||[]).map(e=>({id:e.id,slug:e.slug,featured_image_url:e.featured_image_url,published_at:e.published_at,created_at:e.created_at,translation:Array.isArray(e.blog_post_translations)?e.blog_post_translations[0]:e.blog_post_translations,categories:e.blog_post_categories.map(e=>{var r;return null==(r=e.blog_categories)?void 0:r.slug}).filter(Boolean)}));j(t)}catch(e){console.error("Error loading content:",e)}finally{C(!1)}},P=y.filter(e=>{var r,a,s;if(k){const t=k.toLowerCase();if(!((null==(r=e.translation)?void 0:r.title.toLowerCase().includes(t))||(null==(s=null==(a=e.translation)?void 0:a.excerpt)?void 0:s.toLowerCase().includes(t))))return!1}return"all"===N||e.categories.includes(N)}),$=e=>{if(!e)return"";return new Date(e).toLocaleDateString(f,{year:"numeric",month:"long",day:"numeric"})};return s.jsxs("div",{className:"min-h-screen font-serif",style:{backgroundColor:L.background},children:[s.jsx(l,{title:"Blog - English Learning Tips & IELTS Preparation",description:"Discover expert tips, strategies, and insights for IELTS preparation and English learning.",keywords:"IELTS blog, English learning tips, IELTS preparation",type:"website",lang:f,url:`https://englishaidol.com/${f}/blog`}),s.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-7xl",children:[s.jsx("div",{className:"mb-8",children:s.jsxs(n,{variant:"ghost",onClick:()=>b("/"),className:"pl-0 hover:bg-transparent font-serif",style:{color:L.textSecondary},children:[s.jsx(p,{className:"w-4 h-4 mr-2 rotate-180"}),"Back to Home"]})}),s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 font-serif",style:{color:L.textPrimary},children:"English Learning Blog"}),s.jsx("p",{className:"text-xl max-w-2xl mx-auto font-serif",style:{color:L.textSecondary},children:"Expert tips, strategies, and insights for IELTS preparation and English mastery"})]}),s.jsxs("div",{className:"mb-12 space-y-6",children:[s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search articles...",value:k,onChange:e=>E(e.target.value),className:"w-full pl-4 pr-4 py-3 rounded-lg focus:ring-2 focus:outline-none font-serif shadow-sm",style:{backgroundColor:L.cardBackground,borderColor:L.border,border:`1px solid ${L.border}`,color:L.textPrimary,placeholderColor:L.textSecondary}}),s.jsx(x,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 opacity-50",style:{color:L.textSecondary}})]})}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[s.jsx(n,{variant:"ghost",onClick:()=>w("all"),className:"rounded-full px-6 transition-all "+("all"===N?"shadow-md scale-105":""),style:{backgroundColor:"all"===N?L.buttonPrimary:"transparent",color:"all"===N?L.cardBackground:L.textSecondary,border:`1px solid ${"all"===N?L.buttonPrimary:L.border}`},children:"All"}),v.map(e=>s.jsx(n,{variant:"ghost",onClick:()=>w(e.slug),className:"rounded-full px-6 transition-all "+(N===e.slug?"shadow-md scale-105":""),style:{backgroundColor:N===e.slug?L.buttonPrimary:"transparent",color:N===e.slug?L.cardBackground:L.textSecondary,border:`1px solid ${N===e.slug?L.buttonPrimary:L.border}`},children:e.name},e.id))]})]}),S&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:L.textPrimary}}),s.jsx("p",{className:"mt-4 font-serif",style:{color:L.textSecondary},children:"Loading articles..."})]}),!S&&0===P.length&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-lg font-serif",style:{color:L.textSecondary},children:k||"all"!==N?"No articles found matching your criteria.":"No blog posts available yet. Check back soon!"})}),!S&&P.length>0&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:P.map(e=>{var r,a,t;return s.jsxs(i,{className:"hover:shadow-lg transition-shadow cursor-pointer overflow-hidden group border-0 shadow-sm",onClick:()=>b(`/${f}/blog/${e.slug}`),style:{backgroundColor:L.cardBackground,border:`1px solid ${L.border}`},children:[e.featured_image_url&&s.jsx("div",{className:"aspect-video w-full overflow-hidden",style:{backgroundColor:L.border},children:s.jsx("img",{src:e.featured_image_url,alt:(null==(r=e.translation)?void 0:r.title)||"Blog post",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 opacity-90 group-hover:opacity-100"})}),s.jsxs(c,{className:"p-6",children:[s.jsx("div",{className:"flex items-center gap-2 text-sm mb-3 font-serif",style:{color:L.textSecondary},children:s.jsx("span",{children:$(e.published_at||e.created_at)})}),s.jsx("h2",{className:"text-xl font-bold mb-2 line-clamp-2 transition-colors font-serif",style:{color:L.textPrimary},children:(null==(a=e.translation)?void 0:a.title)||"Untitled"}),(null==(t=e.translation)?void 0:t.excerpt)&&s.jsx("p",{className:"mb-4 line-clamp-3 font-serif",style:{color:L.textSecondary},children:e.translation.excerpt}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",style:{borderColor:L.border},children:[s.jsx("span",{className:"text-sm font-medium font-serif group-hover:underline",style:{color:L.buttonPrimary},children:"Read Article"}),s.jsx(p,{className:"w-4 h-4 transition-transform group-hover:translate-x-1",style:{color:L.buttonPrimary}})]})]})]},e.id)})}),s.jsx("div",{className:"mt-12 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg shadow-sm",style:{backgroundColor:L.cardBackground,border:`1px solid ${L.border}`},children:[s.jsx(h,{className:"w-4 h-4",style:{color:L.textSecondary}}),s.jsxs("span",{className:"text-sm font-serif mr-2",style:{color:L.textSecondary},children:["Reading in ",g(f)]}),s.jsx(d,{})]})})]})]})};export{b as default};
