import{u as e,G as a,au as r,r as s,ac as t,j as l,bn as o,B as n,br as i,C as c,a as d,ah as g,cd as u}from"./index-Q8OEo_x_.js";import{s as m}from"./supabase-DWL4C3fA.js";import{u as x,g as p}from"./blogUtils-7L0RR6bN.js";import{S as h}from"./search-C40NUHq7.js";const b=()=>{const b=e();a(),r();const f=x(),[y,_]=s.useState([]),[j,v]=s.useState([]),[N,w]=s.useState("all"),[S,k]=s.useState(!0),[C,E]=s.useState(""),L=t.note.colors;s.useEffect(()=>{B()},[f]);const B=async()=>{try{k(!0);const{data:e}=await m.from("blog_categories").select("\n          id,\n          slug,\n          blog_category_translations (\n            name,\n            language_code\n          )\n        "),a=(e||[]).map(e=>{const a=e.blog_category_translations.find(e=>e.language_code===f)||e.blog_category_translations.find(e=>"en"===e.language_code)||e.blog_category_translations[0];return{id:e.id,slug:e.slug,name:(null==a?void 0:a.name)||e.slug}}).sort((e,a)=>e.name.localeCompare(a.name));v(a);const{data:r,error:s}=await m.from("blog_posts").select("\n          id,\n          slug,\n          featured_image_url,\n          published_at,\n          created_at,\n          blog_post_translations!inner (\n            title,\n            excerpt,\n            language_code\n          ),\n          blog_post_categories (\n            blog_categories (\n              slug\n            )\n          )\n        ").eq("status","published").lte("published_at",(new Date).toISOString()).eq("blog_post_translations.language_code",f).order("published_at",{ascending:!1});if(s)throw s;const t=(r||[]).map(e=>({id:e.id,slug:e.slug,featured_image_url:e.featured_image_url,published_at:e.published_at,created_at:e.created_at,translation:Array.isArray(e.blog_post_translations)?e.blog_post_translations[0]:e.blog_post_translations,categories:e.blog_post_categories.map(e=>{var a;return null==(a=e.blog_categories)?void 0:a.slug}).filter(Boolean)}));_(t)}catch(e){console.error("Error loading content:",e)}finally{k(!1)}},P=y.filter(e=>{var a,r,s;if(C){const t=C.toLowerCase();if(!((null==(a=e.translation)?void 0:a.title.toLowerCase().includes(t))||(null==(s=null==(r=e.translation)?void 0:r.excerpt)?void 0:s.toLowerCase().includes(t))))return!1}return"all"===N||e.categories.includes(N)}),$=e=>{if(!e)return"";return new Date(e).toLocaleDateString(f,{year:"numeric",month:"long",day:"numeric"})};return l.jsxs("div",{className:"min-h-screen font-serif",style:{backgroundColor:L.background},children:[l.jsx(o,{title:"Blog - English Learning Tips & IELTS Preparation",description:"Discover expert tips, strategies, and insights for IELTS preparation and English learning.",keywords:"IELTS blog, English learning tips, IELTS preparation",type:"website",lang:f,url:`https://englishaidol.com/${f}/blog`}),l.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-7xl",children:[l.jsx("div",{className:"mb-8",children:l.jsxs(n,{variant:"ghost",onClick:()=>b("/"),className:"pl-0 hover:bg-transparent font-serif",style:{color:L.textSecondary},children:[l.jsx(i,{className:"w-4 h-4 mr-2 rotate-180"}),"Back to Home"]})}),l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 font-serif",style:{color:L.textPrimary},children:"English Learning Blog"}),l.jsx("p",{className:"text-xl max-w-2xl mx-auto font-serif",style:{color:L.textSecondary},children:"Expert tips, strategies, and insights for IELTS preparation and English mastery"})]}),l.jsxs("div",{className:"mb-12 space-y-6",children:[l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"Search articles...",value:C,onChange:e=>E(e.target.value),className:"w-full pl-4 pr-4 py-3 rounded-lg focus:ring-2 focus:outline-none font-serif shadow-sm",style:{backgroundColor:L.cardBackground,borderColor:L.border,border:`1px solid ${L.border}`,color:L.textPrimary,placeholderColor:L.textSecondary}}),l.jsx(h,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 opacity-50",style:{color:L.textSecondary}})]})}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[l.jsx(n,{variant:"ghost",onClick:()=>w("all"),className:"rounded-full px-6 transition-all "+("all"===N?"shadow-md scale-105":""),style:{backgroundColor:"all"===N?L.buttonPrimary:"transparent",color:"all"===N?L.cardBackground:L.textSecondary,border:`1px solid ${"all"===N?L.buttonPrimary:L.border}`},children:"All"}),j.map(e=>l.jsx(n,{variant:"ghost",onClick:()=>w(e.slug),className:"rounded-full px-6 transition-all "+(N===e.slug?"shadow-md scale-105":""),style:{backgroundColor:N===e.slug?L.buttonPrimary:"transparent",color:N===e.slug?L.cardBackground:L.textSecondary,border:`1px solid ${N===e.slug?L.buttonPrimary:L.border}`},children:e.name},e.id))]})]}),S&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:L.textPrimary}}),l.jsx("p",{className:"mt-4 font-serif",style:{color:L.textSecondary},children:"Loading articles..."})]}),!S&&0===P.length&&l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-lg font-serif",style:{color:L.textSecondary},children:C||"all"!==N?"No articles found matching your criteria.":"No blog posts available yet. Check back soon!"})}),!S&&P.length>0&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:P.map(e=>{var a,r,s;return l.jsxs(c,{className:"hover:shadow-lg transition-shadow cursor-pointer overflow-hidden group border-0 shadow-sm",onClick:()=>b(`/${f}/blog/${e.slug}`),style:{backgroundColor:L.cardBackground,border:`1px solid ${L.border}`},children:[e.featured_image_url&&l.jsx("div",{className:"aspect-video w-full overflow-hidden",style:{backgroundColor:L.border},children:l.jsx("img",{src:e.featured_image_url,alt:(null==(a=e.translation)?void 0:a.title)||"Blog post",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 opacity-90 group-hover:opacity-100"})}),l.jsxs(d,{className:"p-6",children:[l.jsx("div",{className:"flex items-center gap-2 text-sm mb-3 font-serif",style:{color:L.textSecondary},children:l.jsx("span",{children:$(e.published_at||e.created_at)})}),l.jsx("h2",{className:"text-xl font-bold mb-2 line-clamp-2 transition-colors font-serif",style:{color:L.textPrimary},children:(null==(r=e.translation)?void 0:r.title)||"Untitled"}),(null==(s=e.translation)?void 0:s.excerpt)&&l.jsx("p",{className:"mb-4 line-clamp-3 font-serif",style:{color:L.textSecondary},children:e.translation.excerpt}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",style:{borderColor:L.border},children:[l.jsx("span",{className:"text-sm font-medium font-serif group-hover:underline",style:{color:L.buttonPrimary},children:"Read Article"}),l.jsx(i,{className:"w-4 h-4 transition-transform group-hover:translate-x-1",style:{color:L.buttonPrimary}})]})]})]},e.id)})}),l.jsx("div",{className:"mt-12 text-center",children:l.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg shadow-sm",style:{backgroundColor:L.cardBackground,border:`1px solid ${L.border}`},children:[l.jsx(g,{className:"w-4 h-4",style:{color:L.textSecondary}}),l.jsxs("span",{className:"text-sm font-serif mr-2",style:{color:L.textSecondary},children:["Reading in ",p(f)]}),l.jsx(u,{})]})})]})]})};export{b as default};
