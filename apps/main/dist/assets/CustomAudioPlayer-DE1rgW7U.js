import{r as e,j as r,av as a,B as t,W as s,Y as n}from"./index-Dbr7DlF4.js";import{R as o,T as l,a as c,b as i}from"./index-RwUy8ckN.js";const d=e.forwardRef(({className:e,duration:t,value:s,onScrub:n,onScrubStart:l,onScrubEnd:c,children:i,...d},u)=>r.jsx(o,{ref:u,className:a("relative flex w-full touch-none select-none items-center gap-2",e),min:0,max:t||100,value:"number"==typeof s?[s]:s,onValueChange:e=>null==n?void 0:n(e[0]),onValueCommit:c,onPointerDown:l,...d,children:i}));d.displayName="ScrubBarContainer";const u=e.forwardRef(({className:e,children:t,...s},n)=>r.jsx(l,{ref:n,className:a("relative h-1 w-full grow overflow-visible rounded-full bg-stone-200/80 dark:bg-stone-700",e),...s,children:t}));u.displayName="ScrubBarTrack";const m=e.forwardRef(({className:e,...t},s)=>r.jsx(c,{ref:s,className:a("absolute h-full bg-amber-600/60 dark:bg-amber-500/60 rounded-full transition-all duration-150 ease-out",e),...t}));m.displayName="ScrubBarProgress";const b=e.forwardRef(({className:e,"data-scrubbing":t,...s},n)=>r.jsx(i,{ref:n,className:a("block h-3 w-3 rounded-full border-2 border-amber-400/80 bg-white shadow-sm ring-offset-white transition-all duration-150 ease-out focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 dark:border-amber-500/80 dark:bg-stone-950","hover:scale-110",t&&"scale-110",e),...s}));b.displayName="ScrubBarThumb";const f=({time:e,className:t})=>r.jsx("span",{className:a("text-[10px] font-mono text-stone-500 tabular-nums",t),children:(e=>{if(isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`})(e)}),x=({src:a,className:o,style:l})=>{const c=e.useRef(null),[i,x]=e.useState(!1),[h,N]=e.useState(0),[p,v]=e.useState(0);e.useState(!1);const[w,g]=e.useState(!1),j=e.useRef(!1);e.useEffect(()=>{const e=c.current;if(!e)return;const r=()=>{v(e.duration),N(e.currentTime)},a=()=>{j.current||N(e.currentTime)},t=()=>x(!1);return e.addEventListener("loadeddata",r),e.addEventListener("timeupdate",a),e.addEventListener("ended",t),()=>{e.removeEventListener("loadeddata",r),e.removeEventListener("timeupdate",a),e.removeEventListener("ended",t)}},[]);return r.jsxs("div",{className:`bg-transparent rounded-xl p-2 pl-3 pr-3 flex items-center gap-3 ${o}`,style:l,children:[r.jsx("audio",{ref:c,src:a,preload:"metadata"}),r.jsx(t,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl bg-white hover:bg-stone-50 text-amber-800/80 transition-all duration-200 shrink-0 border border-stone-200/50 shadow-sm",onClick:()=>{c.current&&(i?c.current.pause():c.current.play(),x(!i))},children:i?r.jsx(s,{className:"h-4 w-4"}):r.jsx(n,{className:"h-4 w-4 ml-0.5"})}),r.jsxs(d,{value:h,duration:p||100,onScrub:e=>{N(e),c.current&&(c.current.currentTime=e)},onScrubStart:()=>{g(!0),j.current=!0},onScrubEnd:()=>{g(!1),j.current=!1,c.current&&(c.current.currentTime=h)},className:"flex-1",children:[r.jsx(f,{time:h,className:"w-8 text-center text-amber-800/60"}),r.jsxs(u,{className:"mx-2 flex items-center",children:[r.jsx(m,{}),r.jsx(b,{"data-scrubbing":w})]}),r.jsx(f,{time:p,className:"w-8 text-center text-amber-800/60"})]})]})};export{x as C};
