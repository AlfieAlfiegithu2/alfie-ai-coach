import{aW as e,av as n,r as t,aw as r,j as o,az as a,aB as s,aF as i,ay as l,bc as d,bb as u,bu as c,at as m,B as f,bt as p,ai as h}from"./index-HK7c_X_B.js";var v=["PageUp","PageDown"],b=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},x="Slider",[S,g,y]=e(x),[j,E]=n(x,[y]),[D,R]=j(x),N=t.forwardRef((e,n)=>{const{name:s,min:i=0,max:l=100,step:d=1,orientation:u="horizontal",disabled:m=!1,minStepsBetweenThumbs:f=0,defaultValue:p=[i],value:h,onValueChange:w=()=>{},onValueCommit:x=()=>{},inverted:g=!1,form:y,...j}=e,E=t.useRef(new Set),R=t.useRef(0),N="horizontal"===u?_:k,[P=[],M]=r({prop:h,defaultProp:p,onChange:e=>{var n;null==(n=[...E.current][R.current])||n.focus(),w(e)}}),C=t.useRef(P);function K(e,n,{commit:t}={commit:!1}){const r=function(e){return(String(e).split(".")[1]||"").length}(d),o=function(e,n){const t=Math.pow(10,n);return Math.round(e*t)/t}(Math.round((e-i)/d)*d+i,r),a=c(o,[i,l]);M((e=[])=>{const r=function(e=[],n,t){const r=[...e];return r[t]=n,r.sort((e,n)=>e-n)}(e,a,n);if(function(e,n){if(n>0){const t=function(e){return e.slice(0,-1).map((n,t)=>e[t+1]-n)}(e);return Math.min(...t)>=n}return!0}(r,f*d)){R.current=r.indexOf(a);const n=String(r)!==String(e);return n&&t&&x(r),n?r:e}return e})}return o.jsx(D,{scope:e.__scopeSlider,name:s,disabled:m,min:i,max:l,valueIndexToChangeRef:R,thumbs:E.current,values:P,orientation:u,form:y,children:o.jsx(S.Provider,{scope:e.__scopeSlider,children:o.jsx(S.Slot,{scope:e.__scopeSlider,children:o.jsx(N,{"aria-disabled":m,"data-disabled":m?"":void 0,...j,ref:n,onPointerDown:a(j.onPointerDown,()=>{m||(C.current=P)}),min:i,max:l,inverted:g,onSlideStart:m?void 0:function(e){const n=function(e,n){if(1===e.length)return 0;const t=e.map(e=>Math.abs(e-n)),r=Math.min(...t);return t.indexOf(r)}(P,e);K(e,n)},onSlideMove:m?void 0:function(e){K(e,R.current)},onSlideEnd:m?void 0:function(){const e=C.current[R.current];P[R.current]!==e&&x(P)},onHomeKeyDown:()=>!m&&K(i,0,{commit:!0}),onEndKeyDown:()=>!m&&K(l,P.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:n})=>{if(!m){const t=v.includes(e.key)||e.shiftKey&&b.includes(e.key)?10:1,r=R.current;K(P[r]+d*t*n,r,{commit:!0})}}})})})})});N.displayName=x;var[P,M]=j(x,{startEdge:"left",endEdge:"right",size:"width",direction:1}),_=t.forwardRef((e,n)=>{const{min:r,max:a,dir:l,inverted:d,onSlideStart:u,onSlideMove:c,onSlideEnd:m,onStepKeyDown:f,...p}=e,[h,v]=t.useState(null),b=s(n,e=>v(e)),x=t.useRef(),S=i(l),g="ltr"===S,y=g&&!d||!g&&d;function j(e){const n=x.current||h.getBoundingClientRect(),t=$([0,n.width],y?[r,a]:[a,r]);return x.current=n,t(e-n.left)}return o.jsx(P,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:o.jsx(C,{dir:S,"data-orientation":"horizontal",...p,ref:b,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const n=j(e.clientX);null==u||u(n)},onSlideMove:e=>{const n=j(e.clientX);null==c||c(n)},onSlideEnd:()=>{x.current=void 0,null==m||m()},onStepKeyDown:e=>{const n=w[y?"from-left":"from-right"].includes(e.key);null==f||f({event:e,direction:n?-1:1})}})})}),k=t.forwardRef((e,n)=>{const{min:r,max:a,inverted:i,onSlideStart:l,onSlideMove:d,onSlideEnd:u,onStepKeyDown:c,...m}=e,f=t.useRef(null),p=s(n,f),h=t.useRef(),v=!i;function b(e){const n=h.current||f.current.getBoundingClientRect(),t=$([0,n.height],v?[a,r]:[r,a]);return h.current=n,t(e-n.top)}return o.jsx(P,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:o.jsx(C,{"data-orientation":"vertical",...m,ref:p,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const n=b(e.clientY);null==l||l(n)},onSlideMove:e=>{const n=b(e.clientY);null==d||d(n)},onSlideEnd:()=>{h.current=void 0,null==u||u()},onStepKeyDown:e=>{const n=w[v?"from-bottom":"from-top"].includes(e.key);null==c||c({event:e,direction:n?-1:1})}})})}),C=t.forwardRef((e,n)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:d,onEndKeyDown:u,onStepKeyDown:c,...m}=e,f=R(x,t);return o.jsx(l.span,{...m,ref:n,onKeyDown:a(e.onKeyDown,e=>{"Home"===e.key?(d(e),e.preventDefault()):"End"===e.key?(u(e),e.preventDefault()):v.concat(b).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:a(e.onPointerDown,e=>{const n=e.target;n.setPointerCapture(e.pointerId),e.preventDefault(),f.thumbs.has(n)?n.focus():r(e)}),onPointerMove:a(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:a(e.onPointerUp,e=>{const n=e.target;n.hasPointerCapture(e.pointerId)&&(n.releasePointerCapture(e.pointerId),i(e))})})}),K="SliderTrack",T=t.forwardRef((e,n)=>{const{__scopeSlider:t,...r}=e,a=R(K,t);return o.jsx(l.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:n})});T.displayName=K;var A="SliderRange",L=t.forwardRef((e,n)=>{const{__scopeSlider:r,...a}=e,i=R(A,r),d=M(A,r),u=t.useRef(null),c=s(n,u),m=i.values.length,f=i.values.map(e=>V(e,i.min,i.max)),p=m>1?Math.min(...f):0,h=100-Math.max(...f);return o.jsx(l.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...a,ref:c,style:{...e.style,[d.startEdge]:p+"%",[d.endEdge]:h+"%"}})});L.displayName=A;var I="SliderThumb",z=t.forwardRef((e,n)=>{const r=g(e.__scopeSlider),[a,i]=t.useState(null),l=s(n,e=>i(e)),d=t.useMemo(()=>a?r().findIndex(e=>e.ref.current===a):-1,[r,a]);return o.jsx(B,{...e,ref:l,index:d})}),B=t.forwardRef((e,n)=>{const{__scopeSlider:r,index:i,name:u,...c}=e,m=R(I,r),f=M(I,r),[p,h]=t.useState(null),v=s(n,e=>h(e)),b=!p||(m.form||!!p.closest("form")),w=d(p),x=m.values[i],g=void 0===x?0:V(x,m.min,m.max),y=function(e,n){return n>2?`Value ${e+1} of ${n}`:2===n?["Minimum","Maximum"][e]:void 0}(i,m.values.length),j=null==w?void 0:w[f.size],E=j?function(e,n,t){const r=e/2,o=$([0,50],[0,r]);return(r-o(n)*t)*t}(j,g,f.direction):0;return t.useEffect(()=>{if(p)return m.thumbs.add(p),()=>{m.thumbs.delete(p)}},[p,m.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[f.startEdge]:`calc(${g}% + ${E}px)`},children:[o.jsx(S.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(l.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":m.min,"aria-valuenow":x,"aria-valuemax":m.max,"aria-orientation":m.orientation,"data-orientation":m.orientation,"data-disabled":m.disabled?"":void 0,tabIndex:m.disabled?void 0:0,...c,ref:v,style:void 0===x?{display:"none"}:e.style,onFocus:a(e.onFocus,()=>{m.valueIndexToChangeRef.current=i})})}),b&&o.jsx(H,{name:u??(m.name?m.name+(m.values.length>1?"[]":""):void 0),form:m.form,value:x},i)]})});z.displayName=I;var H=e=>{const{value:n,...r}=e,a=t.useRef(null),s=u(n);return t.useEffect(()=>{const e=a.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(s!==n&&r){const t=new Event("input",{bubbles:!0});r.call(e,n),e.dispatchEvent(t)}},[s,n]),o.jsx("input",{style:{display:"none"},...r,ref:a,defaultValue:n})};function V(e,n,t){return c(100/(t-n)*(e-n),[0,100])}function $(e,n){return t=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const r=(n[1]-n[0])/(e[1]-e[0]);return n[0]+r*(t-e[0])}}var U=N,O=T,F=L,X=z;const Y=t.forwardRef(({className:e,duration:n,value:t,onScrub:r,onScrubStart:a,onScrubEnd:s,children:i,...l},d)=>o.jsx(U,{ref:d,className:m("relative flex w-full touch-none select-none items-center gap-2",e),min:0,max:n||100,value:"number"==typeof t?[t]:t,onValueChange:e=>null==r?void 0:r(e[0]),onValueCommit:s,onPointerDown:a,...l,children:i}));Y.displayName="ScrubBarContainer";const W=t.forwardRef(({className:e,children:n,...t},r)=>o.jsx(O,{ref:r,className:m("relative h-1 w-full grow overflow-visible rounded-full bg-stone-200/80 dark:bg-stone-700",e),...t,children:n}));W.displayName="ScrubBarTrack";const q=t.forwardRef(({className:e,...n},t)=>o.jsx(F,{ref:t,className:m("absolute h-full bg-amber-600/60 dark:bg-amber-500/60 rounded-full transition-all duration-150 ease-out",e),...n}));q.displayName="ScrubBarProgress";const G=t.forwardRef(({className:e,"data-scrubbing":n,...t},r)=>o.jsx(X,{ref:r,className:m("block h-3 w-3 rounded-full border-2 border-amber-400/80 bg-white shadow-sm ring-offset-white transition-all duration-150 ease-out focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 dark:border-amber-500/80 dark:bg-stone-950","hover:scale-110",n&&"scale-110",e),...t}));G.displayName="ScrubBarThumb";const J=({time:e,className:n})=>o.jsx("span",{className:m("text-[10px] font-mono text-stone-500 tabular-nums",n),children:(e=>{if(isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`})(e)}),Q=({src:e,className:n,style:r})=>{const a=t.useRef(null),[s,i]=t.useState(!1),[l,d]=t.useState(0),[u,c]=t.useState(0);t.useState(!1);const[m,v]=t.useState(!1),b=t.useRef(!1);t.useEffect(()=>{const e=a.current;if(!e)return;const n=()=>{c(e.duration),d(e.currentTime)},t=()=>{b.current||d(e.currentTime)},r=()=>i(!1);return e.addEventListener("loadeddata",n),e.addEventListener("timeupdate",t),e.addEventListener("ended",r),()=>{e.removeEventListener("loadeddata",n),e.removeEventListener("timeupdate",t),e.removeEventListener("ended",r)}},[]);return o.jsxs("div",{className:`bg-transparent rounded-xl p-2 pl-3 pr-3 flex items-center gap-3 ${n}`,style:r,children:[o.jsx("audio",{ref:a,src:e,preload:"metadata"}),o.jsx(f,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl bg-white hover:bg-stone-50 text-amber-800/80 transition-all duration-200 shrink-0 border border-stone-200/50 shadow-sm",onClick:()=>{a.current&&(s?a.current.pause():a.current.play(),i(!s))},children:s?o.jsx(p,{className:"h-4 w-4"}):o.jsx(h,{className:"h-4 w-4 ml-0.5"})}),o.jsxs(Y,{value:l,duration:u||100,onScrub:e=>{d(e),a.current&&(a.current.currentTime=e)},onScrubStart:()=>{v(!0),b.current=!0},onScrubEnd:()=>{v(!1),b.current=!1,a.current&&(a.current.currentTime=l)},className:"flex-1",children:[o.jsx(J,{time:l,className:"w-8 text-center text-amber-800/60"}),o.jsxs(W,{className:"mx-2 flex items-center",children:[o.jsx(q,{}),o.jsx(G,{"data-scrubbing":m})]}),o.jsx(J,{time:u,className:"w-8 text-center text-amber-800/60"})]})]})};export{Q as C,U as R,O as T,F as a,X as b};
