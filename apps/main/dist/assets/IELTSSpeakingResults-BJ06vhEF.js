import{y as e,r as s,g as a,j as t,B as r,bs as l,bt as i,ai as n,a4 as o,u as d,$ as c,_ as x,k as m,C as u,a as h,ad as p,a1 as b,b as g,c as f,V as j,Q as v,M as N}from"./index-CKnaXPOD.js";import{S as w}from"./separator-Dq1Vm4gp.js";import{s as y}from"./supabase-DWL4C3fA.js";import{C as _}from"./CustomAudioPlayer-D1kz1XlA.js";import{A as k}from"./award-B2Oke_oF.js";import{C as I}from"./circle-alert-hfwXBz2n.js";import{F as S}from"./file-text-CjKYzIF5.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),A=({text:e,voiceId:o="9BWtsMINqrJLrRacOk9x",questionId:d,className:c="",autoPlay:x=!1,onPlayStart:m,onPlayEnd:u})=>{const[h,p]=s.useState(!1),[b,g]=s.useState(!1),[f,j]=s.useState(null),{toast:v}=a();s.useEffect(()=>{x&&e&&N()},[x,e]),s.useEffect(()=>()=>{f&&(f.pause(),f.removeAttribute("src"))},[f]);const N=async()=>{g(!0);try{const{data:s,error:a}=await y.functions.invoke("audio-cache",{body:{text:e,voice_id:o,question_id:d}});if(a)throw a;if(null==s?void 0:s.audio_url){const e=new Audio(s.audio_url);e.addEventListener("play",()=>{p(!0),null==m||m()}),e.addEventListener("ended",()=>{p(!1),null==u||u()}),e.addEventListener("error",()=>{v({title:"Audio Error",description:"Failed to play audio. Please try again.",variant:"destructive"}),p(!1),null==u||u()}),j(e),e.play(),p(!0),s.cached?console.log("âœ… Using cached audio"):console.log("ðŸŽµ Generated new audio")}}catch(s){console.error("Error generating audio:",s),v({title:"Audio Generation Failed",description:"Could not generate audio. Please try again.",variant:"destructive"})}finally{g(!1)}};return x?null:t.jsxs(r,{onClick:()=>{h&&f?(f.pause(),p(!1),null==u||u()):f?(f.play(),p(!0),null==m||m()):N()},disabled:b,variant:"outline",size:"sm",className:c,children:[b?t.jsx(l,{size:"sm",message:""}):h?t.jsx(i,{className:"w-4 h-4"}):t.jsx(n,{className:"w-4 h-4"}),b?"Loading...":h?"Pause":"Play Audio"]})},E=()=>{var e,i,n,E,$,q,T,L,C,F,R,B,M,z,G,Q,D,W;const O=o(),U=d(),{toast:Y}=a(),[H,K]=s.useState(null),[J,V]=s.useState([]),[X,Z]=s.useState(!0);s.useState(null);const[ee,se]=s.useState({}),ae=new URLSearchParams(O.search),te=ae.get("test_result_id")||ae.get("id"),re=(null==(e=O.state)?void 0:e.testResultId)||(null==(i=O.state)?void 0:i.test_result_id)||te||null;s.useEffect(()=>{(async()=>{try{if(!re)return void U("/ielts-portal");Z(!0);const{data:e,error:s}=await y.from("speaking_test_results").select("*").eq("test_result_id",re).order("part_number",{ascending:!0}).order("id",{ascending:!0});if(s)throw s;if(!e||0===e.length)return Y({title:"No Speaking Data",description:"We could not find your speaking responses for this attempt.",variant:"destructive"}),void U("/ielts-portal");const a=e.map((e,s)=>{const a=Number(e.part_number)||1;return{part:`part${a}_q${s}`,partNumber:a,questionIndex:s,questionText:e.question_text||`Part ${a} Question ${s+1}`,audio_url:e.audio_url||null}}),{data:t,error:r}=await y.functions.invoke("enhanced-speech-analysis",{body:{allRecordings:a,testData:null,analysisType:"comprehensive"}});if(r)throw r;if(!t)throw new Error("No response from analysis service");const l=Array.isArray(t.individualAnalyses)?t.individualAnalyses:Array.isArray(t.per_question)?t.per_question:[],i=l.map((e,s)=>{const t=a[s]||a[0];return{part:`Part ${e.partNumber||(null==t?void 0:t.partNumber)||1}`,partNumber:e.partNumber||(null==t?void 0:t.partNumber)||1,questionIndex:"number"==typeof e.questionIndex?e.questionIndex:(null==t?void 0:t.questionIndex)||0,questionText:e.questionText||(null==t?void 0:t.questionText)||`Question ${s+1}`,transcription:e.transcription||"",audio_url:e.audio_url||(null==t?void 0:t.audio_url)||"",feedback:e.feedback||"Keep developing your ideas with clearer structure and richer vocabulary."}});V(i);const n={};l.forEach((e,s)=>{if(e.original_spans&&e.suggested_spans){const a=i[s];if(a){const s=`${a.part}_${a.questionIndex}`;n[s]={original_spans:e.original_spans,suggested_spans:e.suggested_spans}}}}),se(n);const o=t.overall||t,d=o.criteria||t.criteria||{},c=(e,s)=>{if("number"!=typeof e)return s;if(e<0)return 0;if(e>9)return 9;const a=e-Math.floor(e);return 0===a||.5===a?e:.25===a?Math.floor(e)+.5:.75===a?Math.ceil(e):Math.round(2*e)/2},x=(e,s,a)=>{const t=d[e];return t&&"object"==typeof t&&void 0!==t.score?{score:c(t.score,s),feedback:t.feedback||t.feedbackText||a}:"number"==typeof t?{score:c(t,s),feedback:d[`${e}Feedback`]||d[`${e}_feedback`]||a}:{score:s,feedback:a}},m=c(o.overallBandScore||t.overallBandScore,5),u=Array.isArray(o.path_to_higher_score||t.path_to_higher_score)?o.path_to_higher_score||t.path_to_higher_score:["Speak for the full time and fully develop each answer.","Use a wider range of topic-specific vocabulary.","Reduce hesitations and self-corrections."];K({overall_band_score:m,fluency_coherence:x("fluency",5,"Fluency feedback not provided."),lexical_resource:x("lexical",5,"Lexical feedback not provided."),grammatical_range:x("grammar",5,"Grammar feedback not provided."),pronunciation:x("pronunciation",5,"Pronunciation feedback not provided."),path_to_higher_score:u,stress_patterns_to_improve:o.stress_patterns_to_improve||[],intonation_recommendations:o.intonation_recommendations||[],phonetic_focus_areas:o.phonetic_focus_areas||[],word_stress_issues:o.word_stress_issues||[]})}catch(e){console.error("Error loading analysis:",e),Y({title:"Analysis Error",description:e.message||"Failed to analyze your speaking test. Please try again later.",variant:"destructive"}),U("/ielts-portal")}finally{Z(!1)}})()},[re,U,Y]);const le=e=>e>=8?"text-green-700 bg-green-100 border-green-300":e>=6.5?"text-blue-700 bg-blue-100 border-blue-300":e>=5?"text-yellow-700 bg-yellow-100 border-yellow-300":"text-red-700 bg-red-100 border-red-300",ie=e=>e>=8?t.jsx(b,{className:"w-4 h-4"}):e>=6.5?t.jsx(v,{className:"w-4 h-4"}):t.jsx(S,{className:"w-4 h-4"});if(X)return t.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#eff6ff,_#f9fafb)] flex items-center justify-center",children:t.jsx(l,{size:"lg",message:"Analyzing your IELTS Speaking performance..."})});if(!H)return t.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#eff6ff,_#f9fafb)] flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-lg text-slate-600",children:"Unable to load your IELTS Speaking results."}),t.jsxs(r,{onClick:()=>U("/ielts-portal"),className:"mt-4 rounded-xl px-5 py-2.5 text-sm",children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"Back to IELTS Portal"]})]})});const ne=(e,s)=>{var a;const r=`${e.part}_${e.questionIndex}`,l=ee[r];return t.jsxs("div",{className:"border border-slate-200 rounded-2xl p-5 sm:p-6 space-y-4 bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"Part 2"===e.part?"Cue Card Response":`Question ${e.questionIndex+1}`}),t.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-white text-slate-500 border border-slate-200",children:"IELTS Speaking Practice"})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium text-xs text-blue-600 mb-2 uppercase tracking-wider flex items-center gap-1.5",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-600"}),"Part 2"===e.part?"Cue card":"Question"]}),t.jsx("div",{className:"p-4 sm:p-5 bg-white rounded-2xl text-sm sm:text-base border border-slate-200 shadow-sm text-slate-800 leading-relaxed font-medium",children:e.questionText||"Question text not available"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-1 space-y-3 border border-slate-100 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"px-4 pt-4 pb-2",children:t.jsxs("h4",{className:"font-medium flex items-center gap-2 text-xs text-slate-500 uppercase tracking-wider",children:[t.jsx(j,{className:"w-3.5 h-3.5"}),"Your Response"]})}),t.jsxs("div",{className:"px-4 pb-4",children:[e.audio_url?t.jsx("div",{className:"bg-[#FAFAFA] rounded-xl p-1 border border-stone-100",children:t.jsx(_,{src:e.audio_url})}):t.jsxs("div",{className:"text-xs text-slate-500 italic bg-slate-50 p-3 rounded-lg border border-slate-100 flex items-center gap-2",children:[t.jsx(I,{className:"w-3.5 h-3.5"}),"Audio recording not available"]}),e.transcription&&e.transcription.trim()?t.jsx("div",{className:"mt-4",children:t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-100 shadow-sm relative group",children:[t.jsx("div",{className:"absolute top-3 right-3 opacity-30 group-hover:opacity-100 transition-opacity",children:t.jsx(S,{className:"w-4 h-4 text-slate-400"})}),t.jsxs("p",{className:"text-sm text-slate-600 leading-7 italic",children:['"',e.transcription,'"']})]})}):t.jsxs("div",{className:"bg-orange-50/50 rounded-xl p-4 border border-orange-100 mt-4 flex items-start gap-3",children:[t.jsx(I,{className:"w-4 h-4 text-orange-500 mt-0.5 shrink-0"}),t.jsxs("p",{className:"text-sm text-orange-800 leading-relaxed",children:[t.jsx("span",{className:"font-semibold",children:"Recording unclear:"})," No audio was recorded or the speech could not be transcribed."]})]})]})]}),l&&l.original_spans&&l.suggested_spans&&t.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50/20 rounded-2xl p-5 mt-6 border border-slate-200 shadow-sm relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-100/20 rounded-full blur-2xl -mr-10 -mt-10"}),t.jsxs("h4",{className:"font-semibold mb-6 flex items-center gap-2.5 text-sm text-slate-900 relative z-10",children:[t.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:t.jsx(v,{className:"w-4 h-4 text-blue-600"})}),"Pronunciation Flow & Improvements"]}),t.jsxs("div",{className:"space-y-8 relative z-10",children:[t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute left-[3px] top-2 bottom-0 w-0.5 bg-slate-200 rounded-full group-hover:bg-slate-300 transition-colors"}),t.jsxs("div",{className:"pl-6 space-y-2",children:[t.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"}),"What you said"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:l.original_spans.map((e,s)=>t.jsx("span",{className:"px-2.5 py-1.5 rounded-lg text-sm transition-all duration-300 "+("suggestion"===e.status?"bg-red-50 text-red-700 border border-red-100 font-medium ring-1 ring-red-100/50":"bg-white text-slate-600 border border-slate-100 shadow-sm"),children:e.text},s))})]})]}),t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"absolute left-[3px] top-2 bottom-0 w-0.5 bg-blue-200 rounded-full group-hover:bg-blue-300 transition-colors"}),t.jsxs("div",{className:"pl-6 space-y-2",children:[t.jsxs("p",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-widest flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),"Better Flow"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:l.suggested_spans.map((e,s)=>t.jsx("span",{className:"px-2.5 py-1.5 rounded-lg text-sm transition-all duration-300 "+("enhancement"===e.status?"bg-blue-50 text-blue-700 border border-blue-100 font-semibold shadow-sm ring-1 ring-blue-100/50":"bg-white text-slate-600 border border-slate-100 shadow-sm"),children:e.text},s))})]})]})]}),t.jsx("div",{className:"mt-4 pt-3 border-t border-slate-100 flex justify-end",children:t.jsx(A,{text:(null==(a=l.suggested_spans)?void 0:a.map(e=>(null==e?void 0:e.text)||"").filter(Boolean).join(""))||"",className:"text-xs",questionId:`suggestion_${r}`})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:"/1000031289.png",alt:"Catie AI",className:"w-12 h-12 rounded-full border-2 border-white shadow-md object-cover ring-2 ring-blue-50"}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:t.jsx(p,{className:"w-2.5 h-2.5 text-white"})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-base text-slate-900",children:"Catie's Feedback"}),t.jsx("p",{className:"text-[11px] text-slate-500 font-medium bg-slate-100 inline-block px-2 py-0.5 rounded-full",children:"AI Speaking Coach"})]})]}),t.jsxs("div",{className:"rounded-2xl p-6 bg-gradient-to-br from-white to-blue-50/30 border border-blue-100 shadow-sm relative overflow-hidden group hover:shadow-md transition-all duration-300",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:t.jsx(p,{className:"w-24 h-24 text-blue-600 rotate-12"})}),t.jsx("p",{className:"text-sm sm:text-base leading-7 text-slate-700 whitespace-pre-wrap relative z-10 font-medium",children:e.feedback?e.feedback.replace(/\*\*/g,"").replace(/###/g,"").replace(/\*/g,""):"Feedback analysis in progress..."})]})]})]},`${e.part}-${s}`)};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-indigo-50",children:t.jsx(x,{title:"IELTS Speaking Results",showBackButton:!0,children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-10",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx(m,{variant:"outline",className:"mb-3 px-5 py-1.5 text-[11px] tracking-[0.2em] uppercase font-semibold text-blue-700 border-blue-200/60 bg-white/80 backdrop-blur-sm rounded-full shadow-sm",children:"IELTS SPEAKING â€¢ OFFICIAL-STYLE REPORT"}),t.jsx("h1",{className:"text-4xl sm:text-5xl font-bold tracking-tight bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 bg-clip-text text-transparent",children:"Speaking Test Results"}),t.jsx("p",{className:"text-base sm:text-lg text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"AI examiner-style evaluation aligned with official IELTS band descriptors for Fluency & Coherence, Lexical Resource, Grammatical Range & Accuracy, and Pronunciation."})]}),t.jsx(u,{className:"border-0 rounded-3xl bg-white shadow-xl shadow-blue-100/50",children:t.jsx(h,{className:"px-8 sm:px-12 py-10",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[t.jsxs("div",{className:`relative flex items-center justify-center w-32 h-32 rounded-3xl bg-gradient-to-br ${oe=H.overall_band_score,oe>=8?"from-green-500 to-green-600":oe>=6.5?"from-blue-500 to-blue-600":oe>=5?"from-yellow-500 to-yellow-600":"from-red-500 to-red-600"} text-white shadow-2xl shadow-blue-500/30`,children:[t.jsx("div",{className:"text-5xl font-bold",children:H.overall_band_score}),t.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg",children:t.jsx(k,{className:"w-5 h-5 text-blue-600"})})]}),t.jsxs("div",{className:"text-center sm:text-left space-y-2",children:[t.jsx("div",{className:"text-sm font-bold tracking-[0.18em] text-blue-600 uppercase",children:"Overall Speaking Band"}),t.jsx("div",{className:"text-base text-slate-700 max-w-md",children:H.overall_band_score>=8?"ðŸŒŸ Excellent: Ready for high-stakes academic/professional use":H.overall_band_score>=6.5?"âœ… Good: Functional command with some gaps":H.overall_band_score>=5?"ðŸ“š Modest: Partial command with noticeable limitations":"âš ï¸ Needs improvement: Focus on fundamentals"})]})]}),t.jsxs("div",{className:"flex flex-col items-start sm:items-end gap-3 text-sm text-slate-500",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-4 py-2 rounded-full",children:[t.jsx(p,{className:"w-4 h-4 text-blue-600"}),t.jsx("span",{className:"font-medium",children:"AI-Powered Analysis"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{className:"w-4 h-4 text-amber-500"}),t.jsx("span",{children:"Based on 4 official IELTS criteria"})]})]})]})})}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs(u,{className:"rounded-2xl border-0 bg-white shadow-lg hover:shadow-xl transition-shadow duration-300",children:[t.jsx(g,{className:"pb-3",children:t.jsxs(f,{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center gap-3 text-base font-bold text-slate-900",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-md",children:ie(H.fluency_coherence.score)}),"Fluency & Coherence"]}),t.jsxs(m,{className:`${le(H.fluency_coherence.score)} border-2 text-xs font-bold px-3 py-1 shadow-sm`,children:["Band ",H.fluency_coherence.score]})]})}),t.jsx(h,{className:"pt-2",children:t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:H.fluency_coherence.feedback})})]}),t.jsxs(u,{className:"rounded-2xl border-0 bg-white shadow-lg hover:shadow-xl transition-shadow duration-300",children:[t.jsx(g,{className:"pb-3",children:t.jsxs(f,{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center gap-3 text-base font-bold text-slate-900",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-md",children:ie(H.lexical_resource.score)}),"Lexical Resource"]}),t.jsxs(m,{className:`${le(H.lexical_resource.score)} border-2 text-xs font-bold px-3 py-1 shadow-sm`,children:["Band ",H.lexical_resource.score]})]})}),t.jsx(h,{className:"pt-2",children:t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:H.lexical_resource.feedback})})]}),t.jsxs(u,{className:"rounded-2xl border-0 bg-white shadow-lg hover:shadow-xl transition-shadow duration-300",children:[t.jsx(g,{className:"pb-3",children:t.jsxs(f,{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center gap-3 text-base font-bold text-slate-900",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-md",children:ie(H.grammatical_range.score)}),"Grammar & Accuracy"]}),t.jsxs(m,{className:`${le(H.grammatical_range.score)} border-2 text-xs font-bold px-3 py-1 shadow-sm`,children:["Band ",H.grammatical_range.score]})]})}),t.jsx(h,{className:"pt-2",children:t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:H.grammatical_range.feedback})})]}),t.jsxs(u,{className:"rounded-2xl border-0 bg-white shadow-lg hover:shadow-xl transition-shadow duration-300",children:[t.jsx(g,{className:"pb-3",children:t.jsxs(f,{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center gap-3 text-base font-bold text-slate-900",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-md",children:ie(H.pronunciation.score)}),"Pronunciation"]}),t.jsxs(m,{className:`${le(H.pronunciation.score)} border-2 text-xs font-bold px-3 py-1 shadow-sm`,children:["Band ",H.pronunciation.score]})]})}),t.jsx(h,{className:"pt-2",children:t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:H.pronunciation.feedback})})]})]}),((null==(n=H.stress_patterns_to_improve)?void 0:n.length)||(null==(E=H.intonation_recommendations)?void 0:E.length)||(null==($=H.phonetic_focus_areas)?void 0:$.length)||(null==(q=H.word_stress_issues)?void 0:q.length))&&t.jsxs(u,{className:"rounded-3xl border border-slate-200/80 bg-white overflow-hidden",children:[t.jsx(g,{className:"pb-4 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 border-b border-slate-100",children:t.jsxs(f,{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-2xl bg-white shadow-sm border border-blue-100",children:t.jsx(j,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Pronunciation Deep Dive"}),t.jsx("p",{className:"text-sm text-slate-500 font-normal",children:"AI-powered analysis of your speech patterns"})]})]})}),t.jsxs(h,{className:"p-6 space-y-8",children:[t.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[t.jsx(v,{className:"w-4 h-4 text-blue-500"}),"Intonation"]}),t.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.max(20,100-15*((null==(T=H.intonation_recommendations)?void 0:T.length)||0))}%`}})}),t.jsx("p",{className:"text-xs text-slate-500",children:(null==(L=H.intonation_recommendations)?void 0:L.length)?`${H.intonation_recommendations.length} areas to improve`:"Good variation detected"})]}),t.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[t.jsx(P,{className:"w-4 h-4 text-purple-500"}),"Stress & Rhythm"]}),t.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Math.max(20,100-10*(((null==(C=H.stress_patterns_to_improve)?void 0:C.length)||0)+((null==(F=H.word_stress_issues)?void 0:F.length)||0)))}%`}})}),t.jsx("p",{className:"text-xs text-slate-500",children:((null==(R=H.stress_patterns_to_improve)?void 0:R.length)||0)+((null==(B=H.word_stress_issues)?void 0:B.length)||0)>0?"Rhythm needs attention":"Natural rhythm detected"})]}),t.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100 space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[t.jsx(N,{className:"w-4 h-4 text-emerald-500"}),"Clarity"]}),t.jsx("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${Math.max(20,100-10*((null==(M=H.phonetic_focus_areas)?void 0:M.length)||0))}%`}})}),t.jsx("p",{className:"text-xs text-slate-500",children:(null==(z=H.phonetic_focus_areas)?void 0:z.length)?`${H.phonetic_focus_areas.length} sounds to practice`:"Clear pronunciation"})]})]}),t.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[(null==(G=H.stress_patterns_to_improve)?void 0:G.length)>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"font-medium text-sm text-slate-900 flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-blue-100 text-blue-600",children:t.jsx(P,{className:"w-3.5 h-3.5"})}),"Stress Patterns"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:H.stress_patterns_to_improve.map((e,s)=>t.jsx("div",{className:"text-xs text-slate-700 bg-white border border-slate-200 shadow-sm rounded-lg px-3 py-1.5 font-mono",children:e},s))})]}),(null==(Q=H.intonation_recommendations)?void 0:Q.length)>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"font-medium text-sm text-slate-900 flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-purple-100 text-purple-600",children:t.jsx(v,{className:"w-3.5 h-3.5"})}),"Intonation Tips"]}),t.jsx("div",{className:"space-y-2",children:H.intonation_recommendations.map((e,s)=>t.jsxs("div",{className:"text-xs text-slate-600 bg-purple-50/50 border border-purple-100 rounded-lg px-3 py-2 flex items-start gap-2",children:[t.jsx("span",{className:"mt-0.5 block w-1.5 h-1.5 rounded-full bg-purple-400 flex-shrink-0"}),e]},s))})]}),(null==(D=H.phonetic_focus_areas)?void 0:D.length)>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"font-medium text-sm text-slate-900 flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-emerald-100 text-emerald-600",children:t.jsx(N,{className:"w-3.5 h-3.5"})}),"Target Sounds"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:H.phonetic_focus_areas.map((e,s)=>t.jsxs("div",{className:"text-xs text-slate-700 bg-emerald-50 border border-emerald-100 rounded-lg px-3 py-1.5 font-mono font-medium",children:["/",e,"/"]},s))})]}),(null==(W=H.word_stress_issues)?void 0:W.length)>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h4",{className:"font-medium text-sm text-slate-900 flex items-center gap-2",children:[t.jsx("div",{className:"p-1.5 rounded-md bg-orange-100 text-orange-600",children:t.jsx(I,{className:"w-3.5 h-3.5"})}),"Word Stress Fixes"]}),t.jsx("div",{className:"space-y-2",children:H.word_stress_issues.map((e,s)=>t.jsx("div",{className:"text-xs text-slate-600 bg-orange-50/50 border border-orange-100 rounded-lg px-3 py-2",children:e},s))})]})]})]})]}),J.some(e=>"Part 1"===e.part)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Part 1 â€“ Introduction and Interview"}),J.filter(e=>"Part 1"===e.part).sort((e,s)=>e.questionIndex-s.questionIndex).map((e,s)=>ne(e,s))]}),J.some(e=>"Part 2"===e.part)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Part 2 â€“ Long Turn (Cue Card)"}),J.filter(e=>"Part 2"===e.part).map((e,s)=>ne(e,s))]}),J.some(e=>"Part 3"===e.part)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Part 3 â€“ Discussion"}),J.filter(e=>"Part 3"===e.part).sort((e,s)=>e.questionIndex-s.questionIndex).map((e,s)=>ne(e,s))]}),t.jsxs(u,{className:"rounded-3xl bg-gradient-to-br from-blue-50 via-slate-50 to-emerald-50 border border-blue-100",children:[t.jsxs(g,{children:[t.jsxs(f,{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[t.jsx(v,{className:"w-4 h-4 text-blue-600"}),"Your path to a higher band score"]}),t.jsx("p",{className:"text-xs text-slate-600",children:"Prioritized, examiner-aligned actions generated from your performance."})]}),t.jsxs(h,{children:[t.jsx("div",{className:"grid gap-3",children:H.path_to_higher_score.map((e,s)=>t.jsxs("div",{className:"flex items-start gap-3 p-3 sm:p-4 bg-white/95 rounded-2xl border border-blue-100/80 shadow-sm",children:[t.jsx("div",{className:"flex-shrink-0 w-7 h-7 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full text-[10px] font-semibold text-white flex items-center justify-center",children:s+1}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-800 leading-relaxed",children:e.replace(/\*\*/g,"").replace(/###/g,"").replace(/\*/g,"")})]},s))}),t.jsx(w,{className:"my-5"}),t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("p",{className:"text-xs sm:text-sm text-slate-600",children:"Ready to immediately apply this feedback in another IELTS Speaking simulation?"}),t.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[t.jsxs(r,{onClick:()=>U("/ielts-portal"),variant:"outline",className:"rounded-xl px-4 py-2 text-xs sm:text-sm border-slate-300",children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"Back to IELTS Portal"]}),t.jsx(r,{onClick:()=>U("/ielts-portal"),className:"rounded-xl px-5 py-2 text-xs sm:text-sm bg-blue-600 shadow-md",children:"Take Another Speaking Test"})]})]})]})]})]})})});var oe};export{E as default};
