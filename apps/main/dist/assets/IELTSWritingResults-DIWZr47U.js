import{d as e,u as a,r,j as s}from"./vendor-react-JN_hy__U.js";import{E as l,M as n,B as t,C as d,a as i,b as o,c,e as u,s as m}from"./index-DXpPY1B7.js";import{A as b}from"./AnnotatedWritingText-B6LuC5Sa.js";import{az as x,bo as p,c4 as h,at as v,be as g,K as j,a_ as N,as as k,c5 as f,F as S,ao as _}from"./vendor-ui-DG51EGkO.js";import"./vendor-react-dom-Cb-iy8Oc.js";import"./vendor-animation-ClPlB6zo.js";import"./vendor-i18n-DlHrixAm.js";import"./vendor-utils-D5HPTFR9.js";import"./vendor-supabase-D7XYLCUu.js";import"./vendor-charts-BpOKEG9Z.js";import"./vendor-date-DT7Rq6D9.js";import"./tabs-CUO_kQ2m.js";const y=()=>{var y,w,T,A,E,O,M,C,R,B,L,I,$,W,F,D,K,G,q,Y,z,P,V,H,Q,U,J,X,Z,ee,ae,re,se,le,ne,te,de,ie,oe,ce,ue,me,be,xe,pe,he,ve,ge,je,Ne,ke,fe,Se,_e;const ye=e(),we=a(),{user:Te}=l(),{testName:Ae,task1Answer:Ee,task2Answer:Oe,task1Skipped:Me,task2Skipped:Ce,feedback:Re,task1Data:Be,task2Data:Le,task1WordCount:Ie,task2WordCount:$e,structured:We,testId:Fe}=ye.state||{},[De,Ke]=r.useState({task1:null,task2:null});r.useEffect(()=>{(async()=>{var e,a;if(Fe)try{const{data:r,error:s}=await m.from("questions").select("part_number, transcription").eq("test_id",Fe).in("question_type",["Task 1","Task 2"]);if(s)return void console.error("Error fetching model answers:",s);const l=null==(e=null==r?void 0:r.find(e=>1===e.part_number))?void 0:e.transcription,n=null==(a=null==r?void 0:r.find(e=>2===e.part_number))?void 0:a.transcription;Ke({task1:l||null,task2:n||null})}catch(r){console.error("Error fetching model answers:",r)}})()},[Fe]);const[Ge,qe]=r.useState(null);r.useEffect(()=>{(async()=>{if(!Re&&Te)try{const{data:e}=await m.from("test_results").select("*").eq("user_id",Te.id).ilike("test_type","%writing%").order("created_at",{ascending:!1}).limit(1),a=null==e?void 0:e[0];if(!a)return;const{data:r}=await m.from("writing_test_results").select("*").eq("user_id",Te.id).eq("test_result_id",a.id).order("task_number"),s=null==r?void 0:r.find(e=>1===e.task_number),l=null==r?void 0:r.find(e=>2===e.task_number),n=e=>"number"==typeof e?e:Number(e),t=(e,a=6.5)=>Number.isFinite(n(e))?n(e):a,d=null==s?void 0:s.band_scores,i={task_achievement:{band:t(null==d?void 0:d.task_achievement)},coherence_and_cohesion:{band:t(null==d?void 0:d.coherence_and_cohesion)},lexical_resource:{band:t(null==d?void 0:d.lexical_resource)},grammatical_range_and_accuracy:{band:t(null==d?void 0:d.grammatical_range_and_accuracy)}},o=null==l?void 0:l.band_scores,c={task_response:{band:t(null==o?void 0:o.task_response)},coherence_and_cohesion:{band:t(null==o?void 0:o.coherence_and_cohesion)},lexical_resource:{band:t(null==o?void 0:o.lexical_resource)},grammatical_range_and_accuracy:{band:t(null==o?void 0:o.grammatical_range_and_accuracy)}},u=e=>e.reduce((e,a)=>e+a,0)/(e.length||1),b=Math.round(2*u(Object.values(i).map(e=>e.band)))/2,x=Math.round(2*u(Object.values(c).map(e=>e.band)))/2,p=!s,h=!l;let v;v=p&&h?0:p?x:h?b:Math.round((b+2*x)/3*2)/2;const g={task1:{criteria:i,overall_band:b},task2:{criteria:c,overall_band:x},overall:{band:v}},j=`TASK 1 ASSESSMENT\nBand Score: ${b}\n\n${(null==s?void 0:s.detailed_feedback)||""}\n\nTASK 2 ASSESSMENT\nBand Score: ${x}\n\n${(null==l?void 0:l.detailed_feedback)||""}\n\nOVERALL WRITING ASSESSMENT\nOverall Writing Band Score: ${v}`;qe({feedback:j,structured:g,task1Answer:(null==s?void 0:s.user_response)||"",task2Answer:(null==l?void 0:l.user_response)||"",task1Data:{title:"Task 1",instructions:(null==s?void 0:s.prompt_text)||""},task2Data:{title:"Task 2",instructions:(null==l?void 0:l.prompt_text)||""},testName:a.test_type||"IELTS Writing Test"})}catch(e){}})()},[Re,Te]);const Ye=Re||(null==Ge?void 0:Ge.feedback),ze=We||(null==Ge?void 0:Ge.structured),Pe=Ee||(null==Ge?void 0:Ge.task1Answer),Ve=Oe||(null==Ge?void 0:Ge.task2Answer);Be||null==Ge||Ge.task1Data,Le||null==Ge||Ge.task2Data,Ae||null==Ge||Ge.testName;const He=e=>Math.round(2*e)/2,Qe=(ze?(e=>{var a,r,s,l,n,t,d,i,o,c,u,m,b,x,p,h,v,g;try{const j=null==e?void 0:e.task1,N=null==e?void 0:e.task2,k=e=>"number"==typeof e?e:parseFloat(e),f=j?[k(null==(r=null==(a=j.criteria)?void 0:a.task_achievement)?void 0:r.band),k(null==(l=null==(s=j.criteria)?void 0:s.coherence_and_cohesion)?void 0:l.band),k(null==(t=null==(n=j.criteria)?void 0:n.lexical_resource)?void 0:t.band),k(null==(i=null==(d=j.criteria)?void 0:d.grammatical_range_and_accuracy)?void 0:i.band)].filter(e=>!isNaN(e)):[],S=N?[k(null==(c=null==(o=N.criteria)?void 0:o.task_response)?void 0:c.band),k(null==(m=null==(u=N.criteria)?void 0:u.coherence_and_cohesion)?void 0:m.band),k(null==(x=null==(b=N.criteria)?void 0:b.lexical_resource)?void 0:x.band),k(null==(h=null==(p=N.criteria)?void 0:p.grammatical_range_and_accuracy)?void 0:h.band)].filter(e=>!isNaN(e)):[],_=Me||!j||0===f.length,y=Ce||!N||0===S.length,w=!_&&f.length>0?k(null==j?void 0:j.overall_band)||He(f.reduce((e,a)=>e+a,0)/f.length):0,T=!y&&S.length>0?k(null==N?void 0:N.overall_band)||He(S.reduce((e,a)=>e+a,0)/S.length):0;let A;return A=void 0!==(null==(v=null==e?void 0:e.overall)?void 0:v.band)&&null!==(null==(g=null==e?void 0:e.overall)?void 0:g.band)?k(e.overall.band):_&&y?0:_?T:y?w:He((1*w+2*T)/3),{task1:f,task2:S,task1Overall:w,task2Overall:T,overall:A}}catch{return null}})(ze):null)||(e=>{if(!e)return{task1:[],task2:[],overall:7,task1Overall:7,task2Overall:7};let a=e.match(/TASK 1 ASSESSMENT([\s\S]*?)(?=TASK 2 ASSESSMENT)/),r=e.match(/TASK 2 ASSESSMENT([\s\S]*?)(?=OVERALL WRITING ASSESSMENT)/);if(a&&r||(a=e.match(/## TASK 1 ASSESSMENT([\s\S]*?)(?=## TASK 2 ASSESSMENT)/),r=e.match(/## TASK 2 ASSESSMENT([\s\S]*?)(?=## OVERALL WRITING ASSESSMENT)/)),!a||!r)return{task1:[],task2:[],overall:7,task1Overall:7,task2Overall:7};const s=e=>{const a=[];let r=e.match(/Band Score: (\d+(?:\.\d+)?)/g);return r||(r=e.match(/\*\*Band Score: (\d+(?:\.\d+)?)\*\*/g)),r&&a.push(...r.map(e=>{var a;return He(parseFloat((null==(a=e.match(/(\d+(?:\.\d+)?)/))?void 0:a[1])||"7"))})),a},l=s(a[1]),n=s(r[1]),t=a[1].match(/Task 1 Overall Band Score: (\d+(?:\.\d+)?)/),d=r[1].match(/Task 2 Overall Band Score: (\d+(?:\.\d+)?)/),i=t?He(parseFloat(t[1])):l.length>0?He(l.reduce((e,a)=>e+a,0)/l.length):7,o=d?He(parseFloat(d[1])):n.length>0?He(n.reduce((e,a)=>e+a,0)/n.length):7;let c=e.match(/Overall Writing Band Score: (\d+(?:\.\d+)?)/);c||(c=e.match(/\*\*Overall Writing Band Score: (\d+(?:\.\d+)?)\*\*/));const u=0===l.length||0===i,m=0===n.length||0===o;let b=7;if(c)b=He(parseFloat(c[1]));else if(u&&m)b=0;else if(u)b=He(o);else if(m)b=He(i);else{b=He((1*i+2*o)/3)}return{task1:l,task2:n,overall:b,task1Overall:i,task2Overall:o}})(Ye),Ue=Qe.overall;return s.jsxs("div",{className:"min-h-screen bg-surface-2 relative",children:[s.jsx(n,{raysOrigin:"top-center",raysColor:"#4F46E5",raysSpeed:.5,lightSpread:2,rayLength:1.5,pulsating:!1,fadeDistance:1.2,saturation:.8,followMouse:!0,mouseInfluence:.05,noiseAmount:.1,distortion:.2}),s.jsx("div",{className:"bg-surface-1 border-b border-border sticky top-0 z-10",children:s.jsx("div",{className:"container mx-auto px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(t,{variant:"ghost",onClick:()=>we("/dashboard"),className:"hover:bg-surface-3",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-heading-2",children:"Test Results"}),s.jsx("p",{className:"text-caption",children:(null==Ge?void 0:Ge.testName)||Ae})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(t,{variant:"outline",size:"sm",onClick:()=>{const e=document.createElement("a"),a=new Blob([Ye||"No feedback available"],{type:"text/plain"});e.href=URL.createObjectURL(a),e.download=`IELTS-Writing-Report-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Download Report"]}),s.jsxs(t,{variant:"outline",size:"sm",children:[s.jsx(h,{className:"w-4 h-4 mr-2"}),"Share Results"]})]})]})})}),s.jsxs("div",{className:"container mx-auto px-6 space-section",children:[s.jsx(d,{className:"mb-8 card-modern border-2 border-brand-green/20 bg-gradient-to-br from-brand-green/5 to-brand-green/10",children:s.jsx(i,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 rounded-2xl bg-brand-green/10",children:s.jsx(v,{className:"w-8 h-8 text-brand-green"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-heading-3 text-brand-green",children:"Test Completed Successfully!"}),s.jsx("p",{className:"text-body",children:"Your IELTS Writing test has been evaluated by our AI examiner."})]})]})})}),s.jsxs(d,{className:"bg-surface-1 rounded-3xl shadow-lg mb-6 overflow-hidden",children:[s.jsx(o,{className:"text-center bg-gradient-to-r from-brand-blue/10 to-brand-purple/10 py-3",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-blue/10",children:s.jsx(g,{className:"w-6 h-6 text-brand-blue"})}),s.jsx(c,{className:"text-heading-3",children:"Your IELTS Writing Band Score"})]})}),s.jsxs(i,{className:"text-center py-4",children:[s.jsx("div",{className:"text-6xl font-bold mb-4 bg-gradient-to-r from-brand-blue to-brand-purple bg-clip-text text-transparent",children:Ue.toFixed(1)}),s.jsxs(u,{variant:"outline",className:(Je=Ue,Je>=8.5?"text-green-600 bg-green-50 border-green-200":Je>=7?"text-blue-600 bg-blue-50 border-blue-200":Je>=6?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200")+" text-lg px-4 py-2 rounded-2xl mb-2",children:[(e=>e>=8.5?"Excellent":e>=7?"Good":e>=6?"Competent":e>=5?"Modest":"Limited")(Ue)," Performance"]}),s.jsx("p",{className:"text-caption",children:"Based on official IELTS assessment criteria"})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[s.jsxs(d,{className:"card-modern border-2 border-brand-blue/20 bg-gradient-to-br from-brand-blue/5 to-brand-blue/10",children:[s.jsx(o,{className:"text-center",children:s.jsxs(c,{className:"flex items-center justify-center gap-2 text-brand-blue",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-blue/10",children:s.jsx(j,{className:"w-5 h-5"})}),"Task 1 - Data Description"]})}),s.jsx(i,{className:"text-center",children:!Me&&Pe&&Pe.trim()?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-3xl font-bold mb-2 text-brand-blue",children:Qe.task1Overall?Qe.task1Overall.toFixed(1):"7.0"}),s.jsx("p",{className:"text-caption mb-2",children:"Overall Band Score"}),s.jsxs(u,{variant:"outline",className:"text-brand-blue border-brand-blue/30 rounded-full",children:[Ie||(null==Pe?void 0:Pe.trim().split(/\s+/).filter(e=>e.length>0).length)||0," words"]})]}):s.jsxs("div",{className:"py-4",children:[s.jsx(u,{variant:"outline",className:"text-amber-600 border-amber-300 bg-amber-50 rounded-full px-4 py-2",children:"Task Skipped"}),s.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"This task was not completed"})]})})]}),s.jsxs(d,{className:"card-modern border-2 border-brand-purple/20 bg-gradient-to-br from-brand-purple/5 to-brand-purple/10",children:[s.jsx(o,{className:"text-center",children:s.jsxs(c,{className:"flex items-center justify-center gap-2 text-brand-purple",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-purple/10",children:s.jsx(N,{className:"w-5 h-5"})}),"Task 2 - Essay Writing"]})}),s.jsx(i,{className:"text-center",children:!Ce&&Ve&&Ve.trim()?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-3xl font-bold mb-2 text-brand-purple",children:Qe.task2Overall?Qe.task2Overall.toFixed(1):"7.0"}),s.jsx("p",{className:"text-caption mb-2",children:"Overall Band Score"}),s.jsxs(u,{variant:"outline",className:"text-brand-purple border-brand-purple/30 rounded-full",children:[$e||(null==Ve?void 0:Ve.trim().split(/\s+/).filter(e=>e.length>0).length)||0," words"]})]}):s.jsxs("div",{className:"py-4",children:[s.jsx(u,{variant:"outline",className:"text-amber-600 border-amber-300 bg-amber-50 rounded-full px-4 py-2",children:"Task Skipped"}),s.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"This task was not completed"})]})})]})]}),!Me&&Pe&&Pe.trim()?s.jsxs(d,{className:"mb-6 card-elevated border-2 border-brand-blue/20",children:[s.jsx(o,{className:"bg-gradient-to-r from-brand-blue/10 to-brand-blue/5",children:s.jsxs(c,{className:"flex items-center gap-2 text-brand-blue",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-blue/10",children:s.jsx(j,{className:"w-5 h-5"})}),"Task 1 - Criteria Breakdown"]})}),s.jsx(i,{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Task Achievement",value:null==(T=null==(w=null==(y=null==ze?void 0:ze.task1)?void 0:y.criteria)?void 0:w.task_achievement)?void 0:T.band,just:null==(O=null==(E=null==(A=null==ze?void 0:ze.task1)?void 0:A.criteria)?void 0:E.task_achievement)?void 0:O.justification,icon:j,color:"brand-green"},{label:"Coherence & Cohesion",value:null==(R=null==(C=null==(M=null==ze?void 0:ze.task1)?void 0:M.criteria)?void 0:C.coherence_and_cohesion)?void 0:R.band,just:null==(I=null==(L=null==(B=null==ze?void 0:ze.task1)?void 0:B.criteria)?void 0:L.coherence_and_cohesion)?void 0:I.justification,icon:k,color:"brand-blue"},{label:"Lexical Resource",value:null==(F=null==(W=null==($=null==ze?void 0:ze.task1)?void 0:$.criteria)?void 0:W.lexical_resource)?void 0:F.band,just:null==(G=null==(K=null==(D=null==ze?void 0:ze.task1)?void 0:D.criteria)?void 0:K.lexical_resource)?void 0:G.justification,icon:f,color:"brand-purple"},{label:"Grammar Range & Accuracy",value:null==(z=null==(Y=null==(q=null==ze?void 0:ze.task1)?void 0:q.criteria)?void 0:Y.grammatical_range_and_accuracy)?void 0:z.band,just:null==(H=null==(V=null==(P=null==ze?void 0:ze.task1)?void 0:P.criteria)?void 0:V.grammatical_range_and_accuracy)?void 0:H.justification,icon:N,color:"brand-orange"}].map((e,a)=>{e.icon;const r="number"==typeof e.value?e.value:Qe.task1.length>a?Qe.task1[a]:7,l=!e.just||e.just.includes("Quote specific examples")||e.just.includes("Must be 2-3 sentences")?null:e.just;return s.jsxs("div",{className:"rounded-2xl p-4 bg-surface-3 border border-border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"font-medium text-text-primary",children:e.label}),s.jsx(u,{variant:"outline",className:"rounded-xl",children:"number"==typeof r?r.toFixed(1):"7.0"})]}),l&&s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"text-sm text-text-secondary bg-surface-2/50 rounded-lg p-3 border border-border/50",children:l})})]},e.label)})})})]}):s.jsxs(d,{className:"mb-6 card-elevated border-2 border-amber-200",children:[s.jsx(o,{className:"bg-gradient-to-r from-amber-50 to-amber-100",children:s.jsxs(c,{className:"flex items-center gap-2 text-amber-700",children:[s.jsx("div",{className:"p-2 rounded-xl bg-amber-200",children:s.jsx(j,{className:"w-5 h-5"})}),"Task 1 - Skipped"]})}),s.jsxs(i,{className:"p-6 text-center",children:[s.jsx(u,{variant:"outline",className:"text-amber-600 border-amber-300 bg-amber-50 rounded-full px-4 py-2 mb-2",children:"This task was skipped"}),s.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"No assessment available for this task"})]})]}),Le&&s.jsxs(d,{className:"mb-6 bg-surface-1 rounded-3xl shadow-lg border-2 border-brand-purple/20",children:[s.jsx(o,{className:"bg-gradient-to-r from-brand-purple/10 to-brand-purple/5",children:s.jsxs(c,{className:"flex items-center gap-2 text-brand-purple",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-purple/10",children:s.jsx(N,{className:"w-5 h-5"})}),"Task 2 Question"]})}),s.jsx(i,{className:"p-6",children:s.jsxs("div",{className:"bg-surface-1 rounded-xl p-6 border border-border",children:[s.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:Le.title}),s.jsx("div",{className:"text-text-secondary leading-relaxed whitespace-pre-wrap",children:Le.prompt_text||Le.instructions})]})})]}),!Ce&&Ve&&Ve.trim()?s.jsxs(d,{className:"mb-8 bg-surface-1 rounded-3xl shadow-lg border-2 border-brand-purple/20",children:[s.jsx(o,{className:"bg-gradient-to-r from-brand-purple/10 to-brand-purple/5",children:s.jsxs(c,{className:"flex items-center gap-2 text-brand-purple",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-purple/10",children:s.jsx(N,{className:"w-5 h-5"})}),"Task 2 - Criteria Breakdown"]})}),s.jsx(i,{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Task Response",value:null==(J=null==(U=null==(Q=null==ze?void 0:ze.task2)?void 0:Q.criteria)?void 0:U.task_response)?void 0:J.band,just:null==(ee=null==(Z=null==(X=null==ze?void 0:ze.task2)?void 0:X.criteria)?void 0:Z.task_response)?void 0:ee.justification,icon:j,color:"brand-green"},{label:"Coherence & Cohesion",value:null==(se=null==(re=null==(ae=null==ze?void 0:ze.task2)?void 0:ae.criteria)?void 0:re.coherence_and_cohesion)?void 0:se.band,just:null==(te=null==(ne=null==(le=null==ze?void 0:ze.task2)?void 0:le.criteria)?void 0:ne.coherence_and_cohesion)?void 0:te.justification,icon:k,color:"brand-blue"},{label:"Lexical Resource",value:null==(oe=null==(ie=null==(de=null==ze?void 0:ze.task2)?void 0:de.criteria)?void 0:ie.lexical_resource)?void 0:oe.band,just:null==(me=null==(ue=null==(ce=null==ze?void 0:ze.task2)?void 0:ce.criteria)?void 0:ue.lexical_resource)?void 0:me.justification,icon:f,color:"brand-purple"},{label:"Grammar Range & Accuracy",value:null==(pe=null==(xe=null==(be=null==ze?void 0:ze.task2)?void 0:be.criteria)?void 0:xe.grammatical_range_and_accuracy)?void 0:pe.band,just:null==(ge=null==(ve=null==(he=null==ze?void 0:ze.task2)?void 0:he.criteria)?void 0:ve.grammatical_range_and_accuracy)?void 0:ge.justification,icon:N,color:"brand-orange"}].map((e,a)=>{e.icon;const r="number"==typeof e.value?e.value:Qe.task2.length>a?Qe.task2[a]:7,l=!e.just||e.just.includes("Quote specific examples")||e.just.includes("Must be 2-3 sentences")?null:e.just;return s.jsxs("div",{className:"rounded-2xl p-4 bg-surface-3 border border-border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"font-medium text-text-primary",children:e.label}),s.jsx(u,{variant:"outline",className:"rounded-xl",children:"number"==typeof r?r.toFixed(1):"7.0"})]}),l&&s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"text-sm text-text-secondary bg-surface-2/50 rounded-lg p-3 border border-border/50",children:l})})]},e.label)})})})]}):s.jsxs(d,{className:"mb-8 bg-surface-1 rounded-3xl shadow-lg border-2 border-amber-200",children:[s.jsx(o,{className:"bg-gradient-to-r from-amber-50 to-amber-100",children:s.jsxs(c,{className:"flex items-center gap-2 text-amber-700",children:[s.jsx("div",{className:"p-2 rounded-xl bg-amber-200",children:s.jsx(N,{className:"w-5 h-5"})}),"Task 2 - Skipped"]})}),s.jsxs(i,{className:"p-6 text-center",children:[s.jsx(u,{variant:"outline",className:"text-amber-600 border-amber-300 bg-amber-50 rounded-full px-4 py-2 mb-2",children:"This task was skipped"}),s.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"No assessment available for this task"})]})]}),s.jsxs(d,{className:"mb-8 bg-surface-1 rounded-3xl shadow-lg border-2 border-brand-blue/20",children:[s.jsxs(o,{className:"bg-gradient-to-r from-brand-blue/10 to-brand-purple/10",children:[s.jsxs(c,{className:"flex items-center gap-2 text-brand-blue",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-blue/10",children:s.jsx(S,{className:"w-5 h-5"})}),"AI Examiner Report - Professional IELTS Assessment"]}),s.jsx("p",{className:"text-body",children:"Comprehensive analysis based on official IELTS band descriptors"})]}),s.jsx(i,{className:"p-6",children:s.jsx("div",{className:"prose prose-lg max-w-none text-text-primary",dangerouslySetInnerHTML:{__html:(Ye||"No feedback available").replace(/^(TASK [12] ASSESSMENT)$/gm,'<h2 class="text-2xl font-bold text-brand-blue mt-8 mb-6 border-b-2 border-brand-blue/20 pb-3">$1</h2>').replace(/^(OVERALL WRITING ASSESSMENT)$/gm,'<h2 class="text-2xl font-bold text-brand-purple mt-8 mb-6 border-b-2 border-brand-purple/20 pb-3">$1</h2>').replace(/^(Task Achievement|Task Response|Coherence and Cohesion|Lexical Resource|Grammatical Range and Accuracy|Your Path to a Higher Score)$/gm,'<h3 class="text-xl font-semibold text-text-primary mt-6 mb-4 bg-surface-3 p-3 rounded-xl">$1</h3>').replace(/^Band Score: (\d+(?:\.\d+)?)$/gm,'<div class="text-lg font-bold text-brand-green mb-3 bg-brand-green/10 p-2 rounded-lg inline-block">Band Score: $1</div>').replace(/^(Positive Feedback|Areas for Improvement):$/gm,'<h4 class="text-lg font-semibold text-text-primary mt-4 mb-2">$1:</h4>').replace(/^â€¢ (.*)$/gm,'<li class="mb-2 text-text-secondary">$1</li>').replace(/(<li>.*?<\/li>(?:\s*<li>.*?<\/li>)*)/gs,'<ul class="list-disc pl-6 mb-4 space-y-1">$1</ul>').replace(/^Overall Writing Band Score: (.*)$/gm,'<div class="text-2xl font-bold text-brand-purple mt-6 mb-4 bg-brand-purple/10 p-4 rounded-xl text-center">Overall Writing Band Score: $1</div>').replace(/\n/g,"<br>").replace(/---/g,'<hr class="my-8 border-border">')}})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[s.jsx(b,{taskTitle:"Your Task 1 Answer",originalText:Pe||"",annotatedOriginal:null==(je=null==ze?void 0:ze.task1)?void 0:je.annotated_original,annotatedCorrected:null==(Ne=null==ze?void 0:ze.task1)?void 0:Ne.annotated_corrected,corrections:null==(ke=null==ze?void 0:ze.task1)?void 0:ke.corrections,icon:j,colorScheme:"text-brand-blue"}),s.jsx(b,{taskTitle:"Your Task 2 Answer",originalText:Ve||"",annotatedOriginal:null==(fe=null==ze?void 0:ze.task2)?void 0:fe.annotated_original,annotatedCorrected:null==(Se=null==ze?void 0:ze.task2)?void 0:Se.annotated_corrected,corrections:null==(_e=null==ze?void 0:ze.task2)?void 0:_e.corrections,icon:N,colorScheme:"text-brand-purple"})]}),(De.task1||De.task2)&&s.jsx("div",{className:"mb-8",children:s.jsxs(d,{className:"border-2 border-brand-green/20 bg-surface-1 rounded-3xl shadow-lg",children:[s.jsxs(o,{className:"bg-gradient-to-r from-brand-green/10 to-brand-blue/10",children:[s.jsxs(c,{className:"flex items-center gap-2 text-brand-green",children:[s.jsx("div",{className:"p-2 rounded-xl bg-brand-green/10",children:s.jsx(_,{className:"w-5 h-5"})}),"High-Band Model Answers"]}),s.jsx("p",{className:"text-body",children:"Study these exemplar responses to understand what high-scoring answers look like"})]}),s.jsxs(i,{className:"p-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[De.task1&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold text-brand-blue mb-4 flex items-center gap-2",children:[s.jsx(j,{className:"w-5 h-5"}),"Task 1 Model Answer"]}),s.jsx("div",{className:"bg-surface-3 rounded-xl p-4 border-l-4 border-brand-blue",children:s.jsx("div",{className:"prose prose-sm max-w-none text-text-secondary whitespace-pre-wrap",children:De.task1})})]}),De.task2&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold text-brand-purple mb-4 flex items-center gap-2",children:[s.jsx(N,{className:"w-5 h-5"}),"Task 2 Model Answer"]}),s.jsx("div",{className:"bg-surface-3 rounded-xl p-4 border-l-4 border-brand-purple",children:s.jsx("div",{className:"prose prose-sm max-w-none text-text-secondary whitespace-pre-wrap",children:De.task2})})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-brand-green/5 rounded-xl border border-brand-green/20",children:s.jsxs("p",{className:"text-sm text-text-secondary",children:[s.jsx("strong",{children:"Study Tip:"})," Compare your answers with these model responses. Notice the structure, vocabulary choices, and how ideas are developed and connected. This will help you understand what examiners look for in high-band responses."]})})]})]})}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsx(t,{onClick:()=>we("/ielts-portal"),className:"btn-primary hover-lift",children:"Take Another Test"}),s.jsx(t,{variant:"outline",onClick:()=>we("/dashboard"),className:"hover-lift",children:"Return to Dashboard"})]})]})]});var Je};export{y as default};
