import{a1 as e,j as t,G as r,u as a,h as s,ae as n,a8 as i,r as o,bt as l,aa as d,bu as c,B as m,ad as h,a as u,C as p,W as g,T as f,D as x,v as b,e as y,m as v,n as w,o as k,aJ as j,bv as N,bw as C,bx as S,S as T,p as _,q as P,s as I,t as E,R as W,av as A,by as B,U as F,b as z,a0 as D}from"./index-CdTEz0eh.js";import{s as L}from"./supabase-DWL4C3fA.js";import{F as M}from"./languages-qPB6CivY.js";import{C as q,a as H,b as $,O as U,M as G,c as R,R as O,S as Y}from"./shimmering-text-D4Vbuj0B.js";const V=({feedback:r,improved:a})=>{const s=e();return r?t.jsxs("div",{className:"mt-4 space-y-4",children:[t.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"dark"===s.theme.name?"rgba(255,255,255,0.05)":"minimalist"===s.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:s.border},children:[t.jsx("h4",{className:"font-semibold mb-2",style:{color:s.textPrimary},children:"Grammar Feedback:"}),t.jsx("div",{className:"text-sm whitespace-pre-wrap",style:{color:s.textPrimary},children:r})]}),a&&t.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:"dark"===s.theme.name?"rgba(255,255,255,0.05)":"minimalist"===s.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:s.border},children:[t.jsx("h4",{className:"font-semibold mb-2",style:{color:s.textPrimary},children:"Improved Version:"}),t.jsx("div",{className:"text-sm whitespace-pre-wrap",style:{color:s.textPrimary},children:a})]})]}):null},X=()=>{var X,J,K,Q,Z;const{testId:ee}=r(),te=a(),{toast:re}=s(),{user:ae,profile:se}=n(),ne=e();i();const[ie,oe]=o.useState(null),[le,de]=o.useState(null),[ce,me]=o.useState(null),[he,ue]=o.useState(1),[pe,ge]=o.useState(""),[fe,xe]=o.useState(""),[be,ye]=o.useState([]),[ve,we]=o.useState(!1),[ke,je]=o.useState(!1),[Ne,Ce]=o.useState([{id:"1",type:"bot",content:"Hi! I'm Catie, your IELTS Writing tutor ðŸ“ I can see your Task 1 instructions above. Ask me anything specific about this task - like how to structure your response, what key features to highlight, or how to get started!",timestamp:new Date}]),[Se,Te]=o.useState([{id:"1",type:"bot",content:"Hi! I'm Catie, your IELTS Writing tutor ðŸ“ I can see your Task 2 essay topic above. Ask me about structuring your argument, developing your ideas for this specific topic, or how to present your opinion effectively!",timestamp:new Date}]),[_e,Pe]=o.useState(""),[Ie,Ee]=o.useState(!1),[We,Ae]=o.useState(!1);o.useState(!1),o.useState(!1);const[Be,Fe]=o.useState(!1),[ze,De]=o.useState(!1),[Le,Me]=o.useState(1),[qe,He]=o.useState("center"),[$e,Ue]=o.useState("en"),[Ge,Re]=o.useState("deepseek-v3.2"),[Oe]=l(),Ye=Oe.get("training"),[Ve,Xe]=o.useState([]),[Je,Ke]=o.useState(0),[Qe,Ze]=o.useState(!1),[et,tt]=o.useState(0),[rt,at]=o.useState(!1);o.useState(!1);const[st,nt]=o.useState(null),[it,ot]=o.useState(null),[lt,dt]=o.useState(null),[ct,mt]=o.useState(null),[ht,ut]=o.useState(!1),[pt,gt]=o.useState(!1),ft=o.useRef(null),[xt,bt]=o.useState(""),[yt,vt]=o.useState(""),[wt,kt]=o.useState(!1),[jt,Nt]=o.useState(""),[Ct,St]=o.useState(""),[Tt,_t]=o.useState(!1);o.useEffect(()=>{if(!ee)return;const e=`ielts-writing-draft-${ee}-task1`,t=`ielts-writing-draft-${ee}-task2`,r=localStorage.getItem(e),a=localStorage.getItem(t);r&&!pe&&ge(r),a&&!fe&&xe(a)},[ee]),o.useEffect(()=>{ee&&localStorage.setItem(`ielts-writing-draft-${ee}-task1`,pe)},[pe,ee]),o.useEffect(()=>{ee&&localStorage.setItem(`ielts-writing-draft-${ee}-task2`,fe)},[fe,ee]),o.useEffect(()=>{let e;return Qe&&Je>0&&(e=setInterval(()=>{Ke(e=>e<=1?(Ze(!1),0):e-1),tt(e=>e+1e3)},1e3)),()=>{e&&clearInterval(e)}},[Qe,Je]),o.useEffect(()=>{if(Ye&&be.length>0){const e=be.filter(e=>e.test_subtype===Ye||!e.test_subtype&&"Academic"===Ye);Xe(e)}else Xe(be)},[Ye,be]),o.useEffect(()=>{ee?Pt():It()},[ee]);const Pt=async()=>{je(!0);try{if(!ee)throw new Error("Test ID is required");const[e,t]=await Promise.all([L.from("tests").select("id, test_name, test_type, module, skill_category, test_subtype").eq("id",ee).maybeSingle(),L.from("questions").select("id, test_id, part_number, question_text, passage_text, image_url, explanation, transcription").eq("test_id",ee).in("part_number",[1,2]).order("part_number")]);if(e.error)throw e.error;if(t.error)throw t.error;const r=e.data;if(!r)throw new Error("Test not found");oe(r);const a=t.data||[],s=a.find(e=>1===e.part_number),n=a.find(e=>2===e.part_number);if(null==s?void 0:s.image_url){(new Image).src=s.image_url}const i=s?{id:s.id,title:s.question_text||"Task 1 - Data Description",instructions:s.passage_text||"",imageUrl:s.image_url||"",imageContext:s.explanation||"",modelAnswer:s.transcription||""}:{id:"default-task1",title:"Task 1 - Data Description",instructions:"Task 1 question not found. Please contact support.",imageUrl:"",imageContext:"",modelAnswer:""},o=n?{id:n.id,title:n.question_text||"Task 2 - Essay Writing",instructions:n.passage_text||"",modelAnswer:n.transcription||""}:{id:"default-task2",title:"Task 2 - Essay Writing",instructions:"Task 2 question not found. Please contact support.",modelAnswer:""};de(i),me(o)}catch(e){const t=(null==e?void 0:e.message)||"Failed to load test data. Please try again.";re({title:"Error",description:t,variant:"destructive"}),oe(null),de(null),me(null)}finally{je(!1)}},It=async()=>{we(!0);try{const{data:e,error:t}=await L.from("tests").select("id, test_name, test_type, module, skill_category, test_subtype, created_at").eq("test_type","IELTS").or("module.ilike.Writing,skill_category.ilike.Writing,test_name.ilike.%Writing%").order("created_at",{ascending:!1}).limit(50);if(t)throw t;const r=(e||[]).filter(e=>e&&e.id&&(e.test_name||e.module||e.skill_category));ye(r)}catch(e){re({title:"Error",description:"Failed to load available writing tests. Please try again.",variant:"destructive"}),ye([])}finally{we(!1)}},Et=()=>1===he?le:ce,Wt=e=>{var t;if(!e)return null;if(e.modelAnswer)return e.modelAnswer;const r=(null==(t=e.instructions)?void 0:t.toLowerCase())||"";return 1===he?r.includes("telephone calls")||r.includes("telephone call")?"The bar chart illustrates the total number of minutes (in billions) spent on local, national/international, and mobile telephone calls in Australia over an eight-year period from 2001 to 2008.\n\nOverall, local calls remained the most popular category throughout, despite some fluctuation. Meanwhile, both national/international and mobile calls showed consistent growth, with mobile usage experiencing the most dramatic increase.\n\nLooking at local calls first, these started at 72 billion minutes in 2001 and rose steadily each year, peaking at 90 billion minutes in 2005. After this, usage declined year on year, returning to exactly 72 billion minutes by 2008. National and international calls began at 38 billion minutes and increased every year without exception, reaching 61 billion by the end of the period.\n\nThe most striking trend was in mobile phone usage. Starting from just 2 billion minutes in 2001, mobile calls grew slowly at first, reaching only 12 billion by 2005. However, growth then accelerated sharply, with figures jumping to 23 billion in 2006, 39 billion in 2007, and finally 46 billion minutes in 2008. By the final year, mobile usage had overtaken national/international calls and was approaching two-thirds of local call volume.":r.includes("electrical appliances")||r.includes("housework")?"The chart illustrates changes in the ownership of three electrical appliances and time spent on housework in households in one country between 1920 and 2019.\n\nOverall, ownership of all three appliances increased dramatically over the century, while housework hours fell significantly. By 2019, washing machines and refrigerators had become almost universal.\n\nLooking at appliance ownership, washing machines were found in approximately 40% of homes in 1920. This figure rose steadily, reaching almost 100% by the 1980s and remaining stable after that. Refrigerator ownership started much lower at around 5% but increased even more rapidly, achieving near-universal adoption by 1980. Vacuum cleaners followed a similar upward trend, climbing from about 30% to approximately 95% over the period.\n\nThe time spent on housework shows an inverse relationship with appliance ownership. In 1920, households devoted roughly 50 hours per week to domestic tasks. As electrical appliances became more common, this figure dropped sharply to about 20 hours by 1960. The decline continued more gradually after this point, reaching approximately 10 hours per week by 2019.":null:2===he?r.includes("travelling")||r.includes("travel")?"It is true that international travel has become increasingly common in recent decades. This essay will explore the reasons behind this trend and the benefits it brings to travellers.\n\nSeveral factors explain why more people are travelling today than ever before. Firstly, air travel has become significantly more affordable. Budget airlines now offer flights for a fraction of what they cost thirty years ago, making destinations that were once only accessible to the wealthy now within reach of ordinary families. Secondly, rising incomes in developing countries, particularly in Asia, have created millions of new tourists who can now afford to explore the world. Finally, the internet has made it easier than ever to research destinations, compare prices, book accommodation, and navigate foreign countries without speaking the local language.\n\nTravelling offers substantial benefits to individuals. Exposure to different cultures broadens perspectives and increases tolerance. Someone who has experienced life in another country is likely to be more understanding of different viewpoints and customs. Travel also provides educational experiences that cannot be replicated in classroomsâ€”learning a language through immersion or understanding history by walking through ancient ruins is far more memorable than reading about them in textbooks. Furthermore, taking breaks from daily routines helps reduce stress and prevents burnout, leaving travellers feeling refreshed and more productive when they return.\n\nIn conclusion, cheaper transport, rising prosperity, and digital technology have made travel accessible to more people than ever, and the personal benefits of broadened horizons and improved wellbeing make it a worthwhile pursuit.":r.includes("teenage")||r.includes("adolescen")||r.includes("adult")&&r.includes("happi")?"It is often argued that the most fulfilling stage of a person's life is during adolescence, while others believe that adulthood, despite responsibilities like work and family, brings more happiness. This essay agrees with the former view. It will first discuss how adults face pressures that reduce happiness, and then explain why teenagers are generally more carefree.\n\nUpon reaching maturity, people are expected to fend for themselves, and this often leads to stress. Most adults have rent and bills to pay, as well as partners and children to support, which frequently forces them into jobs they don't particularly enjoy simply for the income. Many people would leave their current employment if they didn't have financial obligations like mortgages or school fees. The weight of responsibility for others clearly takes a significant toll on adult wellbeing, leaving little time for hobbies, friendships, or simply relaxing.\n\nOn the other hand, young people are largely free from these worries because they are supported financially and have fewer obligations. Most teenagers live with parents who cover all their basic needs, leaving them free to focus on friendships, hobbies, and studies. While teenagers often complain about school or restrictions from parents, they rarely appreciate the freedom they have from financial stress and major life decisions. It is only in hindsight, when burdened with adult responsibilities, that most people recognise how carefree their teenage years really were.\n\nIn conclusion, youth really is wasted on the young. While teenagers may not appreciate their freedom at the time, the pressures of adult responsibilityâ€”particularly around money and family obligationsâ€”make those carefree years the happiest in hindsight.":r.includes("university")&&(r.includes("study")||r.includes("subject"))?"It is often argued that university students should be free to study any subject they wish, while others believe they should focus only on practical fields like science and technology. This essay agrees with the former view. It will first discuss why restricting choices can be counterproductive, and then explain the benefits of academic freedom.\n\nThose who support restricting subject choices argue that education should prepare students for employment. It is true that graduates in engineering or computer science often find jobs more easily and earn higher starting salaries than those who studied arts or humanities. Governments invest heavily in higher education and naturally want graduates who can fill skills shortages in key industries. From this perspective, allowing students to study philosophy or ancient history may seem like a waste of resources.\n\nHowever, limiting choices often backfires. Students forced into subjects they dislike tend to underperform, lose motivation, and drop out at higher rates. A student who is passionate about literature but pushed into engineering will likely struggle to compete with peers who genuinely love the subject. Furthermore, the skills developed through humanitiesâ€”creativity, communication, and critical thinkingâ€”are increasingly valued by employers in all sectors. Many successful business leaders and entrepreneurs studied liberal arts, proving that there is no single path to career success.\n\nIn conclusion, while practical subjects have clear career benefits, forcing students into them is counterproductive. Universities should offer guidance rather than restrictions, allowing students to pursue their genuine interests and perform to their potential.":r.includes("crime")||r.includes("criminal")||r.includes("punish")?"It is often argued that criminals should face harsher punishments to deter crime, while others believe that education and rehabilitation are more effective. This essay agrees with the latter view. It will first acknowledge the arguments for tougher sentences, and then explain why rehabilitation produces better outcomes.\n\nSupporters of harsher punishments argue that the fear of severe consequences deters potential offenders. Countries that impose strict penalties, including lengthy prison terms, often point to their relatively low crime rates as evidence that tough approaches work. Victims of crime also often feel that justice requires proportionate punishmentâ€”a burglar receiving only community service may seem unfair to someone whose home and sense of security were violated. There is certainly a moral argument that wrongdoing deserves consequences.\n\nHowever, harsh punishment alone does not address why people commit crimes in the first place. Many offenders come from backgrounds of poverty, lack of education, or substance abuse. Simply locking them away teaches them nothing except how to become better criminals from other inmates. Countries that focus on rehabilitating prisoners through education, job training, and mental health support tend to see far fewer people returning to crime after release. Furthermore, keeping people in prison for longer is extremely expensive, draining taxpayer money that could be better spent on prevention.\n\nIn conclusion, while harsh punishments may satisfy a desire for justice, rehabilitation programmes produce better outcomes for society by addressing the root causes of crime and preparing offenders for productive lives after release.":r.includes("social media")||r.includes("technology")&&r.includes("communicat")?"It is often argued that smartphones and social media have damaged young people's face-to-face communication skills, while others believe technology has simply changed how we interact. This essay agrees with the former view. It will first discuss how technology reduces opportunities for in-person practice, and then explain why this matters.\n\nThose who defend technology point out that digital communication is still communication. Young people maintain many online friendships and develop skills in written expression and navigating complex social dynamics across platforms. Teenagers today are constantly messaging, commenting, and sharing, which suggests high levels of social engagement even if it looks different from previous generations.\n\nHowever, in-person skills do appear to be declining. Many young people now feel uncomfortable making phone calls, attending interviews, or having extended conversations without checking their devices. The ability to read facial expressions, interpret body language, and respond spontaneously in conversation can only be developed through practice, and screens provide fewer opportunities for this. Many employers now complain that young graduates struggle with basic professional interactions like phone calls, meetings, and presentations. The convenience of texting means fewer young people develop the verbal communication skills that success in both career and personal relationships requires.\n\nIn conclusion, while technology offers new ways to connect, it cannot fully replace face-to-face interaction. Parents and schools should ensure children have regular opportunities to develop in-person communication skills alongside their digital abilities.":r.includes("environment")||r.includes("protect")&&r.includes("government")?"It is often argued that individuals can do little to protect the environment and that governments and corporations must lead the way. This essay disagrees with this view. It will first acknowledge the scale of industrial pollution, and then explain why individual action still matters.\n\nThose who dismiss individual responsibility make valid points about scale. The vast majority of global emissions come from large corporations, not households. One person recycling or taking shorter showers makes almost no measurable difference to climate change. Governments have the power to regulate industries, ban harmful products, and invest in renewable energy at a scale that individuals simply cannot match. Without systemic change led by those in power, individual actions may feel pointless.\n\nHowever, individual action creates the conditions for systemic change. Consumer choices drive marketsâ€”when enough people demand sustainable products, companies respond by changing what they offer. The growth of organic food, electric cars, and plant-based meat all demonstrate that consumer demand can shift entire industries. Furthermore, people who make environmentally conscious choices in their own lives are more likely to support environmental policies and encourage others to do the same. Change has to start somewhere, and often it begins with individuals setting examples.\n\nIn conclusion, while governments and corporations must take the lead on major environmental challenges, individual action is neither pointless nor optional. Personal choices help build the public support and market demand that make systemic change possible.":"This topic presents two contrasting viewpoints that deserve careful examination. This essay will discuss both perspectives before offering a personal opinion.\n\nOn one hand, there are valid arguments supporting the first view. Proponents point to practical considerations and everyday observations that support their position. In many countries, this approach has proven effective, and there are clear benefits in terms of efficiency and outcomes. It is understandable why many people hold this view, particularly those who prioritise immediate, tangible results.\n\nOn the other hand, the opposing perspective also has considerable merit. Those who hold this view emphasise longer-term consequences and broader considerations that extend beyond immediate practicality. They argue that focusing solely on short-term gains overlooks important factors that affect individuals and communities over time. There are numerous examples of societies that have adopted this alternative approach with positive results.\n\nIn my opinion, the most effective solution often lies in finding a balance between these two positions. Rather than viewing this as an either-or choice, we should recognise that different situations may require different approaches. What works in one context may not be appropriate in another, and flexibility is essential when dealing with complex issues that affect diverse groups of people.\n\nIn conclusion, while both views have valid arguments, a balanced approach that considers specific circumstances is most likely to succeed in practice.":null},At=()=>1===he?pe:fe,Bt=e=>{1===he?ge(e):xe(e)},Ft=e=>e.trim().split(/\s+/).filter(e=>e.length>0).length,zt=()=>Ft(1===he?pe:fe),Dt=()=>1===he?150:250,Lt=()=>We||(ht||!pe.trim())&&(pt||!fe.trim())||!ht&&pe.trim()&&Ft(pe)<150||!pt&&fe.trim()&&Ft(fe)<250||!ht&&!pe.trim()||!pt&&!fe.trim(),Mt=()=>1===he?Ne:Se,qt=e=>{1===he?Ce(e):Te(e)},Ht=async e=>{var t;const r=_e.trim();if(!r||Ie)return;const a={id:Date.now().toString(),type:"user",content:r,timestamp:new Date};qt(e=>[...e,a]),Pe(""),Ee(!0);try{const e=Et();if(!e)throw new Error("No task data available");const t=At(),{data:a,error:s}=await L.functions.invoke("openai-chat",{body:{message:r,context:"catbot",imageContext:e.imageContext,taskType:1===he?"Task 1 - Data Description (charts, graphs, tables, diagrams)":"Task 2 - Essay Writing (arguments, opinions, examples)",taskInstructions:e.instructions,studentWriting:t,skipCache:!0}});if(s)throw s;const n={id:(Date.now()+1).toString(),type:"bot",content:a.response,timestamp:new Date};qt(e=>[...e,n])}catch(s){let e="Connection Issue",r="Failed to get response from Catie. Please try again.";(null==(t=null==s?void 0:s.message)?void 0:t.includes("service temporarily unavailable"))||503===(null==s?void 0:s.statusCode)?(e="Service Update",r="Catie is being updated! Please try again in a moment."):429===(null==s?void 0:s.statusCode)&&(e="High Traffic",r="Lots of students are getting help! Please wait a moment and try again."),re({title:e,description:r,variant:"destructive"})}finally{Ee(!1)}},$t=e=>{ue(e)};o.useEffect(()=>{var e;null==(e=ft.current)||e.scrollIntoView({behavior:"smooth"})},[Ne,Se,Ie,he]);const Ut=async()=>{var e,t,r,a,s,n,i,o,l,d,c,m,h,u,p,g,f,x,b,y,v,w,k,j,N,C,S,T,_,P,I,E,W,A;const B=!ht&&pe.trim(),F=!pt&&fe.trim();if(!B&&!F)return void re({title:"Please complete at least one task",description:"You need to complete at least Task 1 or Task 2 to submit (or skip one)",variant:"destructive"});const z=Ft(pe),D=Ft(fe);if(!ht){if(!pe.trim())return void re({title:"Task 1 is required",description:"Please complete Task 1 or skip it before submitting.",variant:"destructive"});if(z<150)return void re({title:"Task 1 word count too low",description:`Task 1 requires a minimum of 150 words. You currently have ${z} words.`,variant:"destructive"})}if(!pt){if(!fe.trim())return void re({title:"Task 2 is required",description:"Please complete Task 2 or skip it before submitting.",variant:"destructive"});if(D<250)return void re({title:"Task 2 word count too low",description:`Task 2 requires a minimum of 250 words. You currently have ${D} words.`,variant:"destructive"})}Ae(!0);try{const[B]=await Promise.all([L.functions.invoke("ielts-writing-examiner",{body:{task1Answer:!ht&&pe.trim()?pe.trim():null,task2Answer:!pt&&fe.trim()?fe.trim():null,task1Data:!ht&&pe.trim()?le:null,task2Data:!pt&&fe.trim()?ce:null,targetLanguage:"en"!==$e?$e:void 0,model:Ge}})]);if(B.error)throw B.error;const{structured:F,feedback:z,task1WordCount:D,task2WordCount:M}=B.data,q=!ht&&pe.trim()?D||Ft(pe):0,H=!pt&&fe.trim()?M||Ft(fe):0,{data:$,error:U}=await L.from("test_results").insert({user_id:null==ae?void 0:ae.id,test_type:"writing",score_percentage:Math.round(10*((null==(e=null==F?void 0:F.overall)?void 0:e.band)??(((null==(t=null==F?void 0:F.task1)?void 0:t.overall_band)??7)+2*((null==(r=null==F?void 0:F.task2)?void 0:r.overall_band)??7))/3)),time_taken:Math.floor(et/1e3),completed_at:(new Date).toISOString(),test_data:{task1Data:le?{id:le.id,title:le.title,instructions:le.instructions,imageUrl:le.imageUrl,imageContext:le.imageContext,modelAnswer:le.modelAnswer}:null,task2Data:ce?{id:ce.id,title:ce.title,instructions:ce.instructions,modelAnswer:ce.modelAnswer}:null,task1Answer:!ht&&pe.trim()?pe.trim():null,task2Answer:!pt&&fe.trim()?fe.trim():null,overall_band:(null==(a=null==F?void 0:F.overall)?void 0:a.band)||7}}).select().single();if(U)throw U;if(!ht&&pe.trim()){const{error:e}=await L.from("writing_test_results").insert({user_id:null==ae?void 0:ae.id,test_result_id:$.id,task_number:1,prompt_text:(null==le?void 0:le.instructions)||(null==le?void 0:le.title)||"",user_response:pe,word_count:q,band_scores:{task_achievement:(null==(i=null==(n=null==(s=null==F?void 0:F.task1)?void 0:s.criteria)?void 0:n.task_achievement)?void 0:i.band)??null,coherence_and_cohesion:(null==(d=null==(l=null==(o=null==F?void 0:F.task1)?void 0:o.criteria)?void 0:l.coherence_and_cohesion)?void 0:d.band)??null,lexical_resource:(null==(h=null==(m=null==(c=null==F?void 0:F.task1)?void 0:c.criteria)?void 0:m.lexical_resource)?void 0:h.band)??null,grammatical_range_and_accuracy:(null==(g=null==(p=null==(u=null==F?void 0:F.task1)?void 0:u.criteria)?void 0:p.grammatical_range_and_accuracy)?void 0:g.band)??null},detailed_feedback:(null==(f=null==F?void 0:F.task1)?void 0:f.feedback_markdown)||"",improvement_suggestions:(null==(b=null==(x=null==F?void 0:F.task1)?void 0:x.feedback)?void 0:b.improvements)||[]});if(e)throw e}if(!pt&&fe.trim()){const{error:e}=await L.from("writing_test_results").insert({user_id:null==ae?void 0:ae.id,test_result_id:$.id,task_number:2,prompt_text:(null==ce?void 0:ce.instructions)||(null==ce?void 0:ce.title)||"",user_response:fe,word_count:H,band_scores:{task_response:(null==(w=null==(v=null==(y=null==F?void 0:F.task2)?void 0:y.criteria)?void 0:v.task_response)?void 0:w.band)??null,coherence_and_cohesion:(null==(N=null==(j=null==(k=null==F?void 0:F.task2)?void 0:k.criteria)?void 0:j.coherence_and_cohesion)?void 0:N.band)??null,lexical_resource:(null==(T=null==(S=null==(C=null==F?void 0:F.task2)?void 0:C.criteria)?void 0:S.lexical_resource)?void 0:T.band)??null,grammatical_range_and_accuracy:(null==(I=null==(P=null==(_=null==F?void 0:F.task2)?void 0:_.criteria)?void 0:P.grammatical_range_and_accuracy)?void 0:I.band)??null},detailed_feedback:(null==(E=null==F?void 0:F.task2)?void 0:E.feedback_markdown)||"",improvement_suggestions:(null==(A=null==(W=null==F?void 0:F.task2)?void 0:W.feedback)?void 0:A.improvements)||[]});if(e)throw e}te("/ielts-writing-results-pro",{state:{testName:null==ie?void 0:ie.test_name,testId:ee,submissionId:$.id,task1Answer:!ht&&pe.trim()?pe.trim():null,task2Answer:!pt&&fe.trim()?fe.trim():null,task1Skipped:ht,task2Skipped:pt,feedback:z,structured:F,task1Data:le,task2Data:ce,task1WordCount:q,task2WordCount:H}})}catch(M){re({title:"Error",description:(null==M?void 0:M.message)||"Failed to submit test for evaluation",variant:"destructive"})}finally{Ae(!1)}};if(o.useEffect(()=>{Qe||(Ke(3600),Ze(!0))},[Qe]),!ee){if(ve)return t.jsx(d,{title:"Writing Tests",children:t.jsx("div",{className:"flex items-center justify-center min-h-96",children:t.jsx("div",{className:"text-center",children:t.jsx(c,{message:"Loading available writing tests...",subMessage:"Please wait",size:150})})})});if(Ve.length>0||be.length>0){const e=Ve.length>0?Ve:be;return t.jsxs("div",{className:"min-h-screen relative",children:[t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"note"===ne.theme.name||"minimalist"===ne.theme.name||"dark"===ne.theme.name?"none":"url('/1000031207.png')",backgroundColor:ne.backgroundImageColor}}),t.jsx("div",{className:"relative z-10",children:t.jsx(d,{title:"Available Writing Tests",transparentBackground:!0,children:t.jsx("div",{className:"min-h-screen py-12",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx(m,{variant:"outline",onClick:()=>te("/ielts-portal"),className:"mb-4 transition-all duration-200 hover:shadow-md",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.5)":"dark"===ne.theme.name?"rgba(255,255,255,0.1)":ne.cardBackground,color:ne.textPrimary,borderColor:ne.border},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=ne.hoverBg,e.currentTarget.style.color=ne.buttonPrimary,e.currentTarget.style.borderColor=ne.buttonPrimary},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="glassmorphism"===ne.theme.name?"rgba(255,255,255,0.5)":"dark"===ne.theme.name?"rgba(255,255,255,0.1)":ne.cardBackground,e.currentTarget.style.color=ne.textPrimary,e.currentTarget.style.borderColor=ne.border},children:"â† Back to IELTS Portal"}),t.jsxs("h1",{className:"text-4xl font-bold mb-2 text-center",style:{color:ne.textPrimary},children:["IELTS ",Ye||"Writing"," Tests"]})]}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>e&&e.id?t.jsx(h,{className:"cursor-pointer h-[140px] hover:scale-105 transition-all duration-300 hover:shadow-lg bg-white/80 flex items-center justify-center",onClick:()=>te(`/ielts-writing-test/${e.id}`),children:t.jsx(u,{className:"p-3 md:p-4 text-center flex items-center justify-center h-full",children:t.jsx("h3",{className:"font-semibold text-sm",children:e.test_name||"Untitled Test"})})},e.id):null)})]})})})})})]})}return t.jsx(d,{title:"Writing Tests",children:t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-primary/5 py-12",children:t.jsxs("div",{className:"container mx-auto px-4 text-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-foreground mb-4",children:"IELTS Writing Tests"}),t.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"No writing tests available yet"}),t.jsx(m,{onClick:()=>te("/ielts-portal"),variant:"outline",children:"Back to Portal"})]})})})}if(ke)return t.jsx(d,{title:"IELTS Writing Test",showBackButton:!0,children:t.jsx("div",{className:"flex items-center justify-center min-h-96",children:t.jsx("div",{className:"text-center",children:t.jsx(c,{message:"Loading IELTS Writing test...",subMessage:"Please wait while we fetch your test",size:150})})})});if(ee&&(!ie||!le||!ce))return t.jsx(d,{title:"IELTS Writing Test",showBackButton:!0,children:t.jsx("div",{className:"flex items-center justify-center min-h-96",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-lg text-foreground mb-4",children:"Unable to load test"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:ie?le&&ce?"Unknown error":"Test data is incomplete":"Test not found"}),t.jsx(m,{onClick:()=>te("/ielts-portal"),variant:"outline",children:"Back to Portal"})]})})});const Gt=Et();return Gt?t.jsxs("div",{className:"min-h-screen relative",style:{backgroundColor:"dark"===ne.theme.name?ne.theme.colors.background:"transparent"},children:[t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"note"===ne.theme.name||"minimalist"===ne.theme.name||"dark"===ne.theme.name?"none":"url('/1000031207.png')",backgroundColor:ne.backgroundImageColor}}),t.jsx("div",{className:"relative z-10 flex flex-col pb-24 sm:pb-6",style:{backgroundColor:"dark"===ne.theme.name?ne.theme.colors.background:"transparent",minHeight:"calc(100vh - 80px)"},children:t.jsx(d,{title:"IELTS Writing Test",showBackButton:!0,transparentBackground:!0,children:t.jsx("div",{className:"flex-1 flex justify-center py-6 sm:py-6 pb-4",children:t.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-4 px-4 sm:px-6 flex flex-col",children:[t.jsx(p,{className:"rounded-3xl mb-4 max-w-fit mx-auto px-4",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.9)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,backdropFilter:"glassmorphism"===ne.theme.name?"blur(12px)":"dark"===ne.theme.name?"blur(8px)":"none",boxShadow:"dark"===ne.theme.name?"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)":"note"===ne.theme.name?null==(X=ne.theme.styles.cardStyle)?void 0:X.boxShadow:"0 8px 32px rgba(15, 23, 42, 0.16), 0 0 0 1px rgba(148, 163, 253, 0.06)",...ne.cardStyle},children:t.jsx(u,{className:"p-2 sm:p-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(g,{className:"w-3.5 h-3.5",style:{color:ne.textPrimary}}),t.jsx("span",{className:"text-sm font-medium tabular-nums",style:{color:ne.textPrimary},children:(Rt=Je,`${Math.floor(Rt/60)}:${(Rt%60).toString().padStart(2,"0")}`)})]}),t.jsx(m,{size:"sm",onClick:()=>$t(1),className:"h-9 sm:h-8 px-4 sm:px-3 text-sm sm:text-sm font-medium min-w-[70px]",style:{backgroundColor:1===he?ne.buttonPrimary:"transparent",color:1===he?"#ffffff":ne.textPrimary,border:"none"},children:"Task 1"}),t.jsx(m,{size:"sm",onClick:()=>$t(2),className:"h-9 sm:h-8 px-4 sm:px-3 text-sm sm:text-sm font-medium min-w-[70px]",style:{backgroundColor:2===he?ne.buttonPrimary:"transparent",color:2===he?"#ffffff":ne.textPrimary,border:"none"},children:"Task 2"})]})})}),1===he?(null==Gt?void 0:Gt.imageUrl)?t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 flex-1",style:{minHeight:"400px"},children:[t.jsx("div",{className:"flex-1 lg:flex-[0_0_50%] min-h-0",children:t.jsx(p,{className:"rounded-3xl h-full",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.9)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,backdropFilter:"glassmorphism"===ne.theme.name?"blur(12px)":"dark"===ne.theme.name?"blur(8px)":"none",boxShadow:"dark"===ne.theme.name?"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)":"note"===ne.theme.name?null==(J=ne.theme.styles.cardStyle)?void 0:J.boxShadow:"0 8px 32px rgba(15, 23, 42, 0.16), 0 0 0 1px rgba(148, 163, 253, 0.06)",...ne.cardStyle,display:"flex",flexDirection:"column"},children:t.jsxs(u,{className:"p-4 flex-1 flex flex-col",style:{minHeight:0},children:[t.jsx("div",{className:"mb-4",children:(null==Gt?void 0:Gt.instructions)&&t.jsx("div",{children:t.jsx("div",{className:"whitespace-pre-wrap leading-relaxed p-3 rounded-lg text-sm sm:text-base",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary},children:Gt.instructions})})}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx("img",{src:Gt.imageUrl,alt:"Task 1 visual data",className:"w-full h-full object-contain cursor-pointer",loading:"eager",decoding:"async",onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width*100,a=(e.clientY-t.top)/t.height*100;He(`${r}% ${a}%`),Me(1===Le?1.5:1)},style:{transform:`scale(${Le})`,transformOrigin:qe,transition:"transform 0.2s ease-out"}})})]})})}),t.jsx("div",{className:"flex-1 lg:flex-[0_0_50%] min-h-0",children:t.jsx(p,{className:"rounded-3xl h-full",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.9)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,backdropFilter:"glassmorphism"===ne.theme.name?"blur(12px)":"dark"===ne.theme.name?"blur(8px)":"none",boxShadow:"dark"===ne.theme.name?"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)":"note"===ne.theme.name?null==(K=ne.theme.styles.cardStyle)?void 0:K.boxShadow:"0 8px 32px rgba(15, 23, 42, 0.16), 0 0 0 1px rgba(148, 163, 253, 0.06)",...ne.cardStyle,display:"flex",flexDirection:"column"},children:t.jsxs(u,{className:"flex-1 p-4 flex flex-col",style:{minHeight:0},children:[t.jsx("div",{className:"flex-1 flex flex-col",style:{minHeight:0},children:t.jsx(f,{value:At(),onChange:e=>Bt(e.target.value),className:"flex-1 min-h-[300px] w-full text-base leading-relaxed resize-none rounded-2xl focus:outline-none focus:ring-0",placeholder:ht?"Task 1 is skipped":"General"===(null==ie?void 0:ie.test_subtype)||"General"===Ye?"Write your letter here...":"Write your Task 1 response here...",spellCheck:rt,disabled:ht,style:{backgroundColor:ht?"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.05)":"dark"===ne.theme.name?"rgba(255,255,255,0.02)":"minimalist"===ne.theme.name?"#f3f4f6":"rgba(255,255,255,0.3)":"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:ne.border,color:ht?ne.textSecondary:ne.textPrimary,outline:"none",boxShadow:"none",cursor:ht?"not-allowed":"text",opacity:ht?.6:1}})}),t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t flex-shrink-0",style:{borderColor:ne.border},children:[t.jsxs("div",{className:"text-xs font-medium",style:{color:ne.textSecondary},children:[t.jsx("span",{className:zt()<Dt()?"text-red-500":"text-green-600",children:zt()})," / ",Dt()]}),t.jsxs("div",{className:"flex items-center gap-3",children:[Wt(Gt)&&t.jsxs(x,{children:[t.jsx(b,{asChild:!0,children:t.jsxs(m,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs font-medium",style:{color:ne.textPrimary},children:[t.jsx(y,{className:"w-4 h-4 mr-1"}),"Model Answer"]})}),t.jsxs(v,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",style:{backgroundColor:ne.cardBackground,color:ne.textPrimary,borderColor:ne.border},children:[t.jsx(w,{children:t.jsxs(k,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Model Answer"}),t.jsxs("span",{className:"text-sm font-normal opacity-70",children:[Ft(Wt(Gt)||"")," words"]})]})}),t.jsx("div",{className:"mt-4 whitespace-pre-wrap leading-relaxed text-base",style:{fontFamily:"Georgia, serif"},children:Wt(Gt)})]})]}),t.jsx(m,{size:"sm",variant:"ghost",onClick:()=>{ut(!ht),ht||$t(2)},className:"h-7 px-2 text-xs font-medium hover:bg-transparent",style:{backgroundColor:ht?ne.buttonPrimary:"transparent",color:ht?"#ffffff":ne.textPrimary,border:"none",boxShadow:"none"},children:ht?"Unskip":"Skip"}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:ne.textPrimary},children:"Spell Check"}),t.jsx(j,{children:t.jsxs(N,{children:[t.jsx(C,{asChild:!0,children:t.jsx("div",{onClick:()=>at(!rt),className:"relative inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none",style:{backgroundColor:rt?ne.buttonPrimary:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.2)":"dark"===ne.theme.name?"rgba(255,255,255,0.1)":"minimalist"===ne.theme.name?"#e5e7eb":ne.border},"data-state":rt?"checked":"unchecked",children:t.jsx("div",{className:"pointer-events-none flex h-4 w-4 rounded-full shadow-lg ring-0 transition-transform",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.95)":"dark"===ne.theme.name?"rgba(255,255,255,0.9)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,transform:rt?"translateX(16px)":"translateX(0px)"}})})}),t.jsx(S,{children:t.jsx("p",{children:rt?"Hide spell check":"Show spell check"})})]})})]})]})]})]})})})]}):t.jsx(p,{className:"rounded-3xl max-w-3xl w-full mx-auto",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.9)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,backdropFilter:"glassmorphism"===ne.theme.name?"blur(12px)":"dark"===ne.theme.name?"blur(8px)":"none",boxShadow:"dark"===ne.theme.name?"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)":"note"===ne.theme.name?null==(Q=ne.theme.styles.cardStyle)?void 0:Q.boxShadow:"0 8px 32px rgba(15, 23, 42, 0.16), 0 0 0 1px rgba(148, 163, 253, 0.06)",...ne.cardStyle,minHeight:("dark"===ne.theme.name?500:"minimalist"===ne.theme.name?550:"note"===ne.theme.name?580:600)+"px"},children:t.jsxs(u,{className:"p-4 flex flex-col flex-1",children:[(null==Gt?void 0:Gt.instructions)&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"whitespace-pre-wrap leading-relaxed p-3 rounded-lg text-sm",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary},children:Gt.instructions})}),t.jsx(f,{value:At(),onChange:e=>Bt(e.target.value),placeholder:ht?"Task 1 is skipped":"General"===(null==ie?void 0:ie.test_subtype)||"General"===Ye?"Write your letter here...":"Write your Task 1 response here...",className:"flex-1 min-h-[500px] text-base leading-relaxed resize-none rounded-2xl focus:outline-none focus:ring-0",spellCheck:rt,disabled:ht,style:{backgroundColor:ht?"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.05)":"dark"===ne.theme.name?"rgba(255,255,255,0.02)":"minimalist"===ne.theme.name?"#f3f4f6":"rgba(255,255,255,0.3)":"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:ne.border,color:ht?ne.textSecondary:ne.textPrimary,outline:"none",boxShadow:"none",cursor:ht?"not-allowed":"text",opacity:ht?.6:1,height:"100%"}}),t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t",style:{borderColor:ne.border},children:[t.jsxs("div",{className:"text-xs font-medium",style:{color:ne.textSecondary},children:[t.jsx("span",{className:zt()<Dt()?"text-red-500":"text-green-600",children:zt()})," / ",Dt()]}),t.jsxs("div",{className:"flex items-center gap-3",children:[Wt(Gt)&&t.jsxs(x,{children:[t.jsx(b,{asChild:!0,children:t.jsxs(m,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs font-medium",style:{color:ne.textPrimary},children:[t.jsx(y,{className:"w-4 h-4 mr-1"}),"Model Answer"]})}),t.jsxs(v,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",style:{backgroundColor:ne.cardBackground,color:ne.textPrimary,borderColor:ne.border},children:[t.jsx(w,{children:t.jsxs(k,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Model Answer"}),t.jsxs("span",{className:"text-sm font-normal opacity-70",children:[Ft(Wt(Gt)||"")," words"]})]})}),t.jsx("div",{className:"mt-4 whitespace-pre-wrap leading-relaxed text-base",style:{fontFamily:"Georgia, serif"},children:Wt(Gt)})]})]}),t.jsx(m,{size:"sm",variant:"ghost",onClick:()=>{ut(!ht),ht||$t(2)},className:"h-7 px-2 text-xs font-medium hover:bg-transparent",style:{backgroundColor:ht?ne.buttonPrimary:"transparent",color:ht?"#ffffff":ne.textPrimary,border:"none",boxShadow:"none"},children:ht?"Unskip":"Skip"}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:ne.textPrimary},children:"Spell Check"}),t.jsx(j,{children:t.jsxs(N,{children:[t.jsx(C,{asChild:!0,children:t.jsx("div",{onClick:()=>at(!rt),className:"relative inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none",style:{backgroundColor:rt?ne.buttonPrimary:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.2)":"dark"===ne.theme.name?"rgba(255,255,255,0.1)":"minimalist"===ne.theme.name?"#e5e7eb":ne.border},"data-state":rt?"checked":"unchecked",children:t.jsx("div",{className:"pointer-events-none flex h-4 w-4 rounded-full shadow-lg ring-0 transition-transform",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.95)":"dark"===ne.theme.name?"rgba(255,255,255,0.9)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,transform:rt?"translateX(16px)":"translateX(0px)"}})})}),t.jsx(S,{children:t.jsx("p",{children:rt?"Hide spell check":"Show spell check"})})]})})]}),t.jsx(m,{onClick:Ut,disabled:Lt(),variant:"default",className:"h-7 px-3 text-xs",style:{backgroundColor:ne.buttonPrimary,color:"#ffffff"},children:We?"Submitting...":"Submit Test"})]})]})]})}):t.jsx(p,{className:"rounded-3xl h-full max-w-3xl w-full mx-auto",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.9)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,backdropFilter:"glassmorphism"===ne.theme.name?"blur(12px)":"dark"===ne.theme.name?"blur(8px)":"none",boxShadow:"dark"===ne.theme.name?"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)":"note"===ne.theme.name?null==(Z=ne.theme.styles.cardStyle)?void 0:Z.boxShadow:"0 8px 32px rgba(15, 23, 42, 0.16), 0 0 0 1px rgba(148, 163, 253, 0.06)",...ne.cardStyle,minHeight:("dark"===ne.theme.name?500:"minimalist"===ne.theme.name?550:"note"===ne.theme.name?580:600)+"px"},children:t.jsxs(u,{className:"p-4 flex flex-col h-full",children:[(null==Gt?void 0:Gt.instructions)&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"whitespace-pre-wrap leading-relaxed p-3 rounded-lg text-sm",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary},children:Gt.instructions})}),t.jsx(f,{value:At(),onChange:e=>Bt(e.target.value),placeholder:pt?"Task 2 is skipped":"Write your Task 2 essay here...",className:"flex-1 min-h-[500px] text-base leading-relaxed resize-none rounded-2xl focus:outline-none focus:ring-0",spellCheck:rt,disabled:pt,style:{backgroundColor:pt?"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.05)":"dark"===ne.theme.name?"rgba(255,255,255,0.02)":"minimalist"===ne.theme.name?"#f3f4f6":"rgba(255,255,255,0.3)":"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:ne.border,color:pt?ne.textSecondary:ne.textPrimary,outline:"none",boxShadow:"none",cursor:pt?"not-allowed":"text",opacity:pt?.6:1,height:"100%"}}),t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t",style:{borderColor:ne.border},children:[t.jsxs("div",{className:"text-xs font-medium",style:{color:ne.textSecondary},children:[t.jsx("span",{className:zt()<Dt()?"text-red-500":"text-green-600",children:zt()})," / ",Dt()]}),t.jsxs("div",{className:"flex items-center gap-3",children:[Wt(Gt)&&t.jsxs(x,{children:[t.jsx(b,{asChild:!0,children:t.jsxs(m,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs font-medium",style:{color:ne.textPrimary},children:[t.jsx(y,{className:"w-4 h-4 mr-1"}),"Model Answer"]})}),t.jsxs(v,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",style:{backgroundColor:ne.cardBackground,color:ne.textPrimary,borderColor:ne.border},children:[t.jsx(w,{children:t.jsxs(k,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Model Answer"}),t.jsxs("span",{className:"text-sm font-normal opacity-70",children:[Ft(Wt(Gt)||"")," words"]})]})}),t.jsx("div",{className:"mt-4 whitespace-pre-wrap leading-relaxed text-base",style:{fontFamily:"Georgia, serif"},children:Wt(Gt)})]})]}),t.jsx(m,{size:"sm",variant:"ghost",onClick:()=>{gt(!pt)},className:"h-7 px-2 text-xs font-medium hover:bg-transparent",style:{backgroundColor:pt?ne.buttonPrimary:"transparent",color:pt?"#ffffff":ne.textPrimary,border:"none",boxShadow:"none"},children:pt?"Unskip":"Skip"}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:ne.textPrimary},children:"Spell Check"}),t.jsx(j,{children:t.jsxs(N,{children:[t.jsx(C,{asChild:!0,children:t.jsx("div",{onClick:()=>at(!rt),className:"relative inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none",style:{backgroundColor:rt?ne.buttonPrimary:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.2)":"dark"===ne.theme.name?"rgba(255,255,255,0.1)":"minimalist"===ne.theme.name?"#e5e7eb":ne.border},"data-state":rt?"checked":"unchecked",children:t.jsx("div",{className:"pointer-events-none flex h-4 w-4 rounded-full shadow-lg ring-0 transition-transform",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.95)":"dark"===ne.theme.name?"rgba(255,255,255,0.9)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,transform:rt?"translateX(16px)":"translateX(0px)"}})})}),t.jsx(S,{children:t.jsx("p",{children:rt?"Hide spell check":"Show spell check"})})]})})]}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:ne.textPrimary},children:"Language"}),t.jsxs(T,{value:$e,onValueChange:Ue,children:[t.jsx(_,{className:"w-[130px] h-7 text-xs rounded-lg px-2 border shadow-sm focus:ring-2 focus:ring-offset-0",style:{color:ne.textPrimary,backgroundColor:"dark"===ne.theme.name?"rgba(255,255,255,0.1)":"note"===ne.theme.name?"rgba(255,255,255,0.5)":"#ffffff",borderColor:ne.border,"--tw-ring-color":ne.buttonPrimary},children:t.jsx(P,{children:(()=>{const e=M.find(e=>e.value===$e);return e?`${e.flag} ${e.nativeName}`:"Language"})()})}),t.jsx(I,{className:"max-h-80",style:{backgroundColor:"note"===ne.theme.name?"#fffaf1":"dark"===ne.theme.name?"#1e293b":"#ffffff",borderColor:"note"===ne.theme.name?"#e6cda4":ne.border},children:M.map(e=>t.jsx(E,{value:e.value,className:"note"===ne.theme.name?"focus:bg-[#f5e6d3] focus:text-[#5c4a32] data-[state=checked]:bg-[#f5e6d3]":"",style:{color:ne.textPrimary},children:t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e.flag}),t.jsx("span",{children:e.nativeName})]})},e.value))})]})]}),t.jsx(m,{onClick:Ut,disabled:Lt(),variant:"default",className:"h-7 px-3 text-xs",style:{backgroundColor:ne.buttonPrimary,color:"#ffffff"},children:We?"Submitting...":"Submit Test"})]})]}),t.jsx("div",{className:"mt-3 pt-2 border-t",style:{borderColor:ne.border},children:t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsx(W,{htmlFor:"ai-model-selector",className:"text-sm font-medium whitespace-nowrap",style:{color:ne.textPrimary},children:"AI Model:"}),t.jsxs(T,{value:Ge,onValueChange:Re,children:[t.jsx(_,{id:"ai-model-selector",className:"w-[200px] h-9 text-sm border transition-colors rounded-lg",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.9)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,color:ne.textPrimary,backdropFilter:"glassmorphism"===ne.theme.name?"blur(12px)":"none"},children:t.jsx(P,{placeholder:"Select AI Model"})}),t.jsxs(I,{children:[t.jsx(E,{value:"deepseek-v3.2",children:"DeepSeek V3.2"}),t.jsx(E,{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"})]})]})]})})]})}),t.jsx("div",{className:"mt-6 max-w-3xl mx-auto w-full","data-improve-section":!0,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("span",{className:"text-sm font-semibold",style:{color:"note"===ne.theme.name?"#8b7355":ne.textSecondary},children:"Grammar Improve"})}),t.jsx(f,{value:xt,onChange:e=>bt(e.target.value),placeholder:"Paste your text here to improve...",className:"min-h-[120px] text-sm leading-relaxed resize-none rounded-xl focus-visible:ring-0 focus:ring-0 focus-visible:outline-none",style:{backgroundColor:"note"===ne.theme.name?"#fffaf1":"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.5)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:"note"===ne.theme.name?"#e6cda4":ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary,boxShadow:"none",outline:"none"}})]}),t.jsx("div",{className:"flex flex-col items-center justify-center pt-6",children:t.jsx(j,{children:t.jsxs(N,{children:[t.jsx(C,{asChild:!0,children:t.jsx("button",{onClick:async()=>{if(!xt||xt.trim().length<10)re({title:"Insufficient content",description:"Please paste at least 10 characters in the 'Before' box.",variant:"destructive"});else{kt(!0);try{const e=Et();console.log("âœ¨ Requesting improvement for pasted text");const{data:t,error:r}=await L.functions.invoke("grammar-feedback",{body:{writing:xt,taskType:1===he?"Task 1 - Data Description":"Task 2 - Essay Writing",taskNumber:he,targetLanguage:"en"!==$e?$e:void 0,taskInstructions:(null==e?void 0:e.instructions)||"",mode:"improve"}});if(r)throw console.error("âŒ Improvement error:",r),r;if(!t)throw new Error("No response data received from improvement service");if(!t.success||!t.improved){const e=t.error||t.details||"Failed to improve writing";throw console.error("âŒ Improvement failed:",e),new Error(e)}vt(t.improved),re({title:"Improved! âœ¨",description:"Your improved text is ready in the 'After' box."})}catch(e){console.error("âŒ Improvement catch error:",e);let t="Failed to improve writing. Please try again.";(null==e?void 0:e.message)&&(t=e.message),re({title:"Error",description:t,variant:"destructive",duration:5e3})}finally{kt(!1)}}},disabled:wt||!xt.trim(),className:"px-2 py-1 transition-all hover:translate-x-0.5 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:translate-x-0 focus:outline-none focus:ring-0",style:{backgroundColor:"transparent",color:"note"===ne.theme.name?"#8b7355":ne.textPrimary,border:"none",boxShadow:"none",outline:"none"},children:wt?t.jsx(A,{className:"w-5 h-5 animate-spin"}):t.jsx(B,{className:"w-5 h-5"})})}),t.jsx(S,{children:t.jsx("p",{children:"Improve text"})})]})})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-semibold invisible",children:"Placeholder"}),yt.trim()&&t.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(yt),re({title:"Copied",description:"Improved text copied to clipboard."})}catch(e){re({title:"Copy failed",description:"Please copy manually.",variant:"destructive"})}},className:"text-xs flex items-center gap-1 px-2 py-1 rounded-md transition-colors hover:bg-black/5",style:{color:"note"===ne.theme.name?"#8b7355":ne.textSecondary},children:[t.jsx(F,{className:"w-3 h-3"}),"Copy"]})]}),t.jsx(f,{value:yt,readOnly:!0,placeholder:"Improved text will appear here...",className:"min-h-[120px] text-sm leading-relaxed resize-none rounded-xl focus-visible:ring-0 focus:ring-0 focus-visible:outline-none",style:{backgroundColor:"note"===ne.theme.name?"#fffaf1":"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.5)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:"note"===ne.theme.name?"#e6cda4":ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary,boxShadow:"none",outline:"none"}})]})]})}),t.jsx("div",{className:"mt-4 max-w-3xl mx-auto w-full",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("span",{className:"text-sm font-semibold",style:{color:"note"===ne.theme.name?"#8b7355":ne.textSecondary},children:"Answer Improve"})}),t.jsx(f,{value:jt,onChange:e=>Nt(e.target.value),placeholder:"Paste your answer here for full enhancement...",className:"min-h-[120px] text-sm leading-relaxed resize-none rounded-xl focus-visible:ring-0 focus:ring-0 focus-visible:outline-none",style:{backgroundColor:"note"===ne.theme.name?"#fffaf1":"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.5)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:"note"===ne.theme.name?"#e6cda4":ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary,boxShadow:"none",outline:"none"}})]}),t.jsx("div",{className:"flex flex-col items-center justify-center pt-6",children:t.jsx(j,{children:t.jsxs(N,{children:[t.jsx(C,{asChild:!0,children:t.jsx("button",{onClick:async()=>{if(!jt||jt.trim().length<10)re({title:"Insufficient content",description:"Please paste at least 10 characters in the box.",variant:"destructive"});else{_t(!0);try{const e=Et();console.log("âœ¨ Requesting full answer improvement for pasted text");const{data:t,error:r}=await L.functions.invoke("grammar-feedback",{body:{writing:jt,taskType:1===he?"Task 1 - Data Description":"Task 2 - Essay Writing",taskNumber:he,targetLanguage:"en"!==$e?$e:void 0,taskInstructions:(null==e?void 0:e.instructions)||"",mode:"full-improve"}});if(r)throw console.error("âŒ Answer improvement error:",r),r;if(!t)throw new Error("No response data received from improvement service");if(!t.success||!t.improved){const e=t.error||t.details||"Failed to improve answer";throw console.error("âŒ Answer improvement failed:",e),new Error(e)}St(t.improved),re({title:"Answer Enhanced! âœ¨",description:"Your improved answer is ready."})}catch(e){console.error("âŒ Answer improvement catch error:",e);let t="Failed to improve answer. Please try again.";(null==e?void 0:e.message)&&(t=e.message),re({title:"Error",description:t,variant:"destructive",duration:5e3})}finally{_t(!1)}}},disabled:Tt||!jt.trim(),className:"px-2 py-1 transition-all hover:translate-x-0.5 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:translate-x-0 focus:outline-none focus:ring-0",style:{backgroundColor:"transparent",color:"note"===ne.theme.name?"#8b7355":ne.textPrimary,border:"none",boxShadow:"none",outline:"none"},children:Tt?t.jsx(A,{className:"w-5 h-5 animate-spin"}):t.jsx(B,{className:"w-5 h-5"})})}),t.jsx(S,{children:t.jsx("p",{children:"Enhance answer (vocab, grammar, structure)"})})]})})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-semibold invisible",children:"Placeholder"}),Ct.trim()&&t.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(Ct),re({title:"Copied",description:"Enhanced answer copied to clipboard."})}catch(e){re({title:"Copy failed",description:"Please copy manually.",variant:"destructive"})}},className:"text-xs flex items-center gap-1 px-2 py-1 rounded-md transition-colors hover:bg-black/5",style:{color:"note"===ne.theme.name?"#8b7355":ne.textSecondary},children:[t.jsx(F,{className:"w-3 h-3"}),"Copy"]})]}),t.jsx(f,{value:Ct,readOnly:!0,placeholder:"Enhanced answer will appear here...",className:"min-h-[120px] text-sm leading-relaxed resize-none rounded-xl focus-visible:ring-0 focus:ring-0 focus-visible:outline-none",style:{backgroundColor:"note"===ne.theme.name?"#fffaf1":"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.5)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:"note"===ne.theme.name?"#e6cda4":ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary,boxShadow:"none",outline:"none"}})]})]})}),t.jsx("div",{className:"mt-6",children:(1===he&&st||2===he&&lt)&&t.jsx(V,{feedback:1===he?st:lt,improved:1===he?it:ct})}),t.jsx(m,{variant:"outline",size:"sm",onClick:()=>te("/ielts/writing"),className:"fixed bottom-6 left-6 z-50 rounded-xl",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.9)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,color:ne.textPrimary},children:"Exit"}),t.jsxs("div",{className:"fixed bottom-6 right-3 sm:bottom-6 sm:right-6 z-50",children:[Be&&t.jsxs(p,{className:"backdrop-blur-md rounded-3xl w-[260px] h-[360px] sm:w-96 sm:h-[500px] shadow-2xl flex flex-col transform-gpu origin-bottom-right transition-all duration-260 ease-in-out "+(ze?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-8"),style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.95)":"dark"===ne.theme.name?"rgba(30, 41, 59, 0.95)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,backdropFilter:"glassmorphism"===ne.theme.name?"blur(12px)":"dark"===ne.theme.name?"blur(8px)":"none",...ne.cardStyle},children:[t.jsx(z,{className:"pb-1 sm:pb-2 rounded-t-3xl relative",children:t.jsx("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2",children:t.jsx(m,{variant:"ghost",size:"icon",onClick:()=>{De(!1),setTimeout(()=>Fe(!1),260)},className:"h-7 w-7 sm:h-8 sm:w-8 p-0",style:{color:ne.textPrimary},children:"âœ•"})})}),t.jsxs(u,{className:"flex-1 flex flex-col px-2.5 py-2 sm:p-4 overflow-hidden",children:[t.jsx(q,{className:"flex-1 min-h-0",children:t.jsx(H,{className:"flex-1 min-h-0",children:0!==Mt().length||Ie?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"rounded-lg p-3 mb-4",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.6)",borderColor:ne.border,borderWidth:"1px",borderStyle:"solid"},children:t.jsx("div",{className:"text-[10px] sm:text-sm whitespace-pre-wrap",style:{color:ne.textSecondary},children:(null==Gt?void 0:Gt.title)||(1===he?"Letter Writing":"Essay Writing")})}),Mt().map(e=>t.jsxs(G,{from:"user"===e.type?"user":"assistant",children:["bot"===e.type&&t.jsx("div",{style:{borderRadius:"50%",overflow:"hidden",width:"52px",height:"52px",flexShrink:0},children:t.jsx("img",{src:"/1000031289.png",alt:"Catie",style:{width:"100%",height:"100%",objectFit:"cover"}})}),t.jsx(R,{children:t.jsx("div",{className:"px-3 py-2 rounded-xl text-sm",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.5)",borderColor:ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary},children:t.jsx(O,{dangerouslySetInnerHTML:{__html:e.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^â€¢ (.*)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>").replace(/\n/g,"<br>")}})})}),"user"===e.type&&(null==se?void 0:se.avatar_url)&&t.jsx("div",{style:{borderRadius:"50%",overflow:"hidden",width:"52px",height:"52px",flexShrink:0},children:t.jsx("img",{src:se.avatar_url,alt:"Your avatar",style:{width:"100%",height:"100%",objectFit:"cover"}})})]},e.id)),Ie&&t.jsxs(G,{from:"assistant",children:[t.jsx(R,{children:t.jsx("div",{className:"px-3 py-2 rounded-xl text-sm",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#f9fafb":"rgba(255,255,255,0.5)",borderColor:ne.border,borderWidth:"1px",borderStyle:"solid"},children:t.jsx(Y,{text:"Thinking..."})})}),t.jsx("div",{style:{borderRadius:"50%",overflow:"hidden",width:"52px",height:"52px"},children:t.jsx("img",{src:"/1000031289.png",alt:"Catie",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),t.jsx("div",{ref:ft})]}):t.jsx($,{icon:t.jsx(U,{className:"size-9 sm:size-12",style:{color:ne.textSecondary}}),title:"Start a conversation",description:"Ask for help with your IELTS writing practice"})})}),t.jsx("div",{className:"flex-shrink-0 mt-2.5 sm:mt-4",children:t.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[t.jsx("input",{type:"text",value:_e,onChange:e=>Pe(e.target.value),onKeyPress:e=>"Enter"===e.key&&!Ie&&_e.trim()&&Ht(),placeholder:"Ask for writing help...",className:"flex-1 px-2.5 py-1.5 sm:px-3 sm:py-2 rounded-lg text-[10px] sm:text-sm focus:outline-none focus:ring-0 resize-none",style:{backgroundColor:"glassmorphism"===ne.theme.name?"rgba(255,255,255,0.1)":"dark"===ne.theme.name?"rgba(255,255,255,0.05)":"minimalist"===ne.theme.name?"#ffffff":ne.theme.colors.cardBackground,borderColor:ne.border,borderWidth:"1px",borderStyle:"solid",color:ne.textPrimary},disabled:Ie}),t.jsx("style",{dangerouslySetInnerHTML:{__html:`\n                      input[placeholder="Ask for writing help..."]::placeholder {\n                        color: ${ne.textSecondary};\n                      }\n                    `}}),t.jsx(m,{onClick:()=>Ht(),disabled:Ie||!_e.trim(),variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8 p-0",style:{color:ne.textPrimary},children:Ie?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:ne.textPrimary}}):t.jsx(D,{className:"w-4 h-4"})})]})})]})]}),!Be&&t.jsx("div",{style:{borderRadius:"50%",overflow:"hidden",width:"64px",height:"64px",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.18)",transition:"transform 0.22s ease-out, box-shadow 0.22s ease-out"},onClick:()=>{Fe(!0),requestAnimationFrame(()=>De(!0))},onMouseEnter:e=>{const t=e.currentTarget;t.style.transform="scale(1.06) translateY(-2px)",t.style.boxShadow="0 14px 30px rgba(0,0,0,0.24)"},onMouseLeave:e=>{const t=e.currentTarget;t.style.transform="scale(1.0) translateY(0px)",t.style.boxShadow="0 10px 25px rgba(0,0,0,0.15)"},children:t.jsx("img",{src:"/1000031289.png",alt:"Catie",style:{width:"100%",height:"100%",objectFit:"cover"}})})]}),We&&t.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",children:t.jsx("div",{className:"bg-card p-8 rounded-3xl shadow-xl border border-border",children:t.jsx(c,{message:"Analyzing your writing with AI examiner...",subMessage:"Please wait while we evaluate your IELTS writing",size:200})})})]})})})}),rt&&t.jsx("style",{children:'\n          /* Prominent underline for spell check errors */\n          textarea[spellcheck="true"]::spelling-error {\n            text-decoration: wavy underline rgba(239, 68, 68, 0.8) 2px !important;\n            text-decoration-skip-ink: none !important;\n          }\n\n          textarea[spellcheck="true"]:focus::spelling-error {\n            text-decoration: wavy underline rgba(239, 68, 68, 0.9) 2px !important;\n          }\n        '})]}):t.jsx(d,{title:"IELTS Writing Test",showBackButton:!0,children:t.jsx("div",{className:"flex items-center justify-center min-h-96",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-lg text-foreground mb-4",children:"Task data not available"}),t.jsx(m,{onClick:()=>te("/ielts-portal"),variant:"outline",children:"Back to Portal"})]})})});var Rt};export{X as default};
