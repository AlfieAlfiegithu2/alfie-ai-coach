import{c as e,r as s,h as t,a1 as a,j as r,C as n,O as i,B as l,ch as o,X as c,a as d,al as x,I as h,a0 as m,bo as u,u as g,G as p,ae as b,a9 as f,aa as j,bn as N,b as w,c4 as v,d as y,e as k,l as C,W as S,K as q,ax as A,a6 as _,bq as T,Q as E,k as $,D as B,m as D,n as P,o as I,bp as L,bs as X}from"./index-L9iD6gfi.js";import{C as z}from"./checkbox-C6glCJ6q.js";import{A as R,a as M}from"./alert-xkqI0VcP.js";import{S as U}from"./scroll-area-CUxQyKEL.js";import{s as K}from"./supabase-DWL4C3fA.js";import{S as O}from"./stethoscope-C-j5-zGy.js";import{C as Y}from"./circle-help-BwcJBQm4.js";import{C as Q}from"./circle-alert-M3cqCOfV.js";import{T as W}from"./trophy-DLzPUXqj.js";import{F}from"./flag-DvVprk-b.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=e("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),G=({isOpen:e,onClose:g,questionText:p,questionType:b,options:f,rationale:j,isReviewMode:N=!1})=>{const[w,v]=s.useState([]),[y,k]=s.useState(""),[C,S]=s.useState(!1),[q,A]=s.useState(!1),_=s.useRef(null),{toast:T}=t(),E=a();s.useEffect(()=>{if(e){v([{id:"welcome",text:`Hello! I'm Catie, your NCLEX study companion. ðŸ©º I'm here to help you understand this ${"SATA"===b?"Select All That Apply":"multiple choice"} question. What would you like help with?`,isUser:!1,timestamp:new Date}]),A(!1)}},[e,p]);s.useEffect(()=>{var e;null==(e=_.current)||e.scrollIntoView({behavior:"smooth"})},[w]);const $=[{id:"explain",label:"Explain this question",icon:Y,description:"Break down what the question is asking"},{id:"nursing",label:"Nursing concepts",icon:O,description:"Key nursing knowledge for this topic"},{id:"strategy",label:"NCLEX strategy tips",icon:u,description:"Test-taking strategies"}],B=async(e,s)=>{if(!e.trim()&&!s)return;let t=e;if(s){t={explain:"Explain this question",nursing:"Nursing concepts",strategy:"NCLEX strategy tips"}[s]||e}if(t){const e={id:Date.now().toString(),text:t,isUser:!0,timestamp:new Date};v(s=>[...s,e])}S(!0),k("");try{const t=((e,s)=>{const t=`\nNCLEX Question (${b}):\n"${p}"\n\nOptions:\n${f.map((e,s)=>`${s+1}. ${e}`).join("\n")}\n${j?`\nRationale: ${j}`:""}\n`;if(s)return`You are Catie, a friendly and knowledgeable NCLEX tutor. The student is working on this question:\n\n${t}\n\nThe student asked: "${s}"\n\nProvide helpful, clear, and encouraging guidance. Use nursing terminology appropriately but explain concepts clearly. Keep responses concise but thorough.`;switch(e){case"explain":return`You are Catie, a friendly NCLEX tutor. The student clicked "Explain this question" for:\n\n${t}\n\nBreak down what this question is asking in simple terms. Identify:\n1. The clinical scenario\n2. What the question is really asking\n3. Key words to focus on\n${"SATA"===b?"4. Remind them this is SATA - they need to evaluate EACH option independently":""}\n\nBe encouraging and conversational. End with "Would you like me to explain the nursing concepts behind this?"`;case"nursing":return`You are Catie, a friendly NCLEX tutor. The student clicked "Nursing concepts" for:\n\n${t}\n\nExplain the key nursing concepts and knowledge needed for this question:\n1. Relevant pathophysiology or nursing theory\n2. Priority nursing interventions\n3. Assessment findings to look for\n4. Any medication considerations if applicable\n\nBe educational but accessible. Use clinical examples. End with "Do you have any specific questions about these concepts?"`;case"strategy":return`You are Catie, a friendly NCLEX tutor. The student clicked "NCLEX strategy tips" for:\n\n${t}\n\nShare test-taking strategies specific to this question:\n1. How to approach ${"SATA"===b?"SATA questions (evaluate each option as true/false)":"this type of question"}\n2. Key words to identify\n3. Common pitfalls to avoid\n4. Prioritization tips if applicable (Maslow's, ABCs, nursing process)\n\nBe practical and encouraging. End with "Would you like to walk through the options together?"`;default:return`You are Catie, a friendly NCLEX tutor helping with:\n\n${t}\n\nThe student asked: "${s}"\n\nProvide helpful, specific guidance in a conversational way.`}})(s||"custom",s?void 0:e),{data:a,error:r}=await K.functions.invoke("openai-chat",{body:{message:t,context:"nclex_tutor"}});if(r)throw r;const n={id:(Date.now()+1).toString(),text:a.response||"I'm having trouble right now. Please try again!",isUser:!1,timestamp:new Date};v(e=>[...e,n])}catch(a){console.error("Error getting AI assistance:",a),T({title:"Catie is taking a break",description:"Please try again in a moment.",variant:"destructive"});const e={id:(Date.now()+1).toString(),text:"Oops! I had a little hiccup. Please try asking again! ðŸ’ª",isUser:!1,timestamp:new Date};v(s=>[...s,e])}finally{S(!1)}},D=()=>{y.trim()&&B(y)};return e?r.jsx("div",{className:"fixed bottom-24 right-6 z-50 transition-all duration-300 ease-out "+(q?"w-80":"w-[420px]"),style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:r.jsxs(n,{className:"overflow-hidden border-2",style:{backgroundColor:E.theme.colors.cardBackground,borderColor:"rgb(20, 184, 166)"},children:[r.jsxs("div",{className:"p-4 flex items-center justify-between",style:{background:"linear-gradient(to right, rgb(20, 184, 166), rgb(6, 182, 212))"},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:"/1000031289.png",alt:"Catie AI",className:"w-12 h-12 rounded-full shadow-lg object-cover ring-2 ring-white/50"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-white rounded-full flex items-center justify-center shadow-sm",children:r.jsx(i,{className:"w-3 h-3 text-teal-500"})})]}),r.jsxs("div",{className:"text-white",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Ask Catie"}),r.jsx("p",{className:"text-xs text-white/80",children:"Your NCLEX Study Buddy"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(l,{variant:"ghost",size:"icon",onClick:()=>A(!q),className:"text-white hover:bg-white/20 h-8 w-8",children:q?r.jsx(H,{className:"h-4 w-4"}):r.jsx(o,{className:"h-4 w-4"})}),r.jsx(l,{variant:"ghost",size:"icon",onClick:g,className:"text-white hover:bg-white/20 h-8 w-8",children:r.jsx(c,{className:"h-4 w-4"})})]})]}),!q&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:E.border},children:r.jsx(n,{className:"bg-teal-50 dark:bg-teal-900/20 border-teal-200 dark:border-teal-800",children:r.jsx(d,{className:"p-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(O,{className:"h-4 w-4 text-teal-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs font-medium text-teal-700 dark:text-teal-400 mb-1",children:["Current Question (",b,")"]}),r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:p})]})]})})})}),r.jsx(U,{className:"h-[280px] px-4 py-3",children:r.jsxs("div",{className:"space-y-4",children:[w.map(e=>r.jsxs("div",{className:"flex gap-2 "+(e.isUser?"justify-end":"justify-start"),children:[!e.isUser&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:"/1000031289.png",alt:"Catie",className:"w-8 h-8 rounded-full object-cover"})}),r.jsx("div",{className:"max-w-[80%] p-3 rounded-2xl text-sm "+(e.isUser?"bg-gradient-to-r from-teal-500 to-cyan-500 text-white rounded-br-sm":"bg-muted rounded-bl-sm"),children:r.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:e.text})}),e.isUser&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:r.jsx(x,{className:"h-4 w-4 text-muted-foreground"})})})]},e.id)),C&&r.jsxs("div",{className:"flex gap-2 justify-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:"/1000031289.png",alt:"Catie",className:"w-8 h-8 rounded-full object-cover"})}),r.jsx("div",{className:"bg-muted p-3 rounded-2xl rounded-bl-sm",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),r.jsx("div",{ref:_})]})}),r.jsxs("div",{className:"px-4 py-2 border-t",style:{borderColor:E.border},children:[r.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-3",children:$.map(e=>{const s=e.icon;return r.jsxs(l,{onClick:()=>B("",e.id),variant:"outline",size:"sm",className:"rounded-full text-teal-600 border-teal-200 hover:bg-teal-50 hover:border-teal-300 dark:border-teal-800 dark:hover:bg-teal-900/30",disabled:C,children:[r.jsx(s,{className:"w-3 h-3 mr-1.5"}),e.label]},e.id)})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(h,{value:y,onChange:e=>k(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Ask Catie anything...",className:"flex-1 text-sm",disabled:C}),r.jsx(l,{onClick:D,disabled:C||!y.trim(),className:"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white",size:"icon",children:r.jsx(m,{className:"h-4 w-4"})})]})]})]}),q&&r.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:"Click to expand chat with Catie"})]})}):null},V=()=>{const e=g(),{testId:o}=p(),{user:c}=b(),{toast:x}=t(),h=a(),[m,u]=s.useState(!0),[U,O]=s.useState(null),[Y,H]=s.useState([]),[V,J]=s.useState(0),[Z,ee]=s.useState({}),[se,te]=s.useState(new Set),[ae,re]=s.useState(null),[ne,ie]=s.useState(Date.now()),[le,oe]=s.useState(Date.now()),[ce,de]=s.useState(!1),[xe,he]=s.useState(!1),[me,ue]=s.useState(null),[ge,pe]=s.useState(!1),[be,fe]=s.useState(!1),[je,Ne]=s.useState(!1);s.useEffect(()=>{if(!c)return x({title:"Sign in required",description:"Please sign in to take NCLEX practice tests",variant:"destructive"}),void e("/auth");o&&we()},[o,c]),s.useEffect(()=>{if(!ae||ce||xe)return;const e=setInterval(()=>{re(s=>s&&s<=1?(clearInterval(e),Ce(),0):s?s-1:null)},1e3);return()=>clearInterval(e)},[ae,ce,xe]);const we=async()=>{try{const{data:s,error:t}=await K.from("nclex_tests").select("id, title, description, category, time_limit_minutes, question_count").eq("id",o).single();if(t||!s)return x({title:"Test not found",description:"The requested test could not be found",variant:"destructive"}),void e("/nclex");O(s),re(60*s.time_limit_minutes);const{data:a,error:r}=await K.from("nclex_questions").select("id, question_number, question_text, question_type, options, correct_answers, rationale").eq("test_id",o).order("question_number",{ascending:!0});if(r)return void console.error("Error loading questions:",r);H(a||[]),ie(Date.now()),oe(Date.now())}catch(s){console.error("Error:",s)}finally{u(!1)}},ve=Y[V],ye=e=>{J(e),oe(Date.now())},ke=s.useCallback(()=>{const e=Y.map(e=>{const s=Z[e.id]||[],t=e.correct_answers,a="SATA"===e.question_type?t.length===s.length&&t.every(e=>s.includes(e)):1===s.length&&t.includes(s[0]);return{question_id:e.id,selected_answers:s,is_correct:a,time_spent:0}}),s=e.filter(e=>e.is_correct).length;return{score:s/Y.length*100,correct:s,total:Y.length,answers:e}},[Y,Z]),Ce=async()=>{fe(!1);const e=ke();if(ue(e),he(!0),c&&U)try{await K.from("nclex_test_results").insert({user_id:c.id,test_id:U.id,score:e.score,correct_count:e.correct,total_questions:e.total,answers_data:e.answers,time_taken_seconds:Math.round((Date.now()-ne)/1e3)})}catch(s){console.error("Error saving results:",s)}},Se=()=>{he(!1),de(!0),J(0)},qe=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,Ae=()=>Object.keys(Z).filter(e=>Z[e].length>0).length;if(m)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:h.theme.colors.background},children:r.jsx(f,{})});if(!U||0===Y.length)return r.jsx(j,{title:"NCLEX Test",showBackButton:!0,children:r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh]",children:[r.jsx(Q,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"No questions available for this test"}),r.jsx(l,{onClick:()=>e("/nclex"),className:"mt-4",children:"Back to NCLEX Portal"})]})});if(xe&&me){const s=me.score>=75;return r.jsxs("div",{className:"min-h-screen relative",style:{backgroundColor:h.theme.colors.background},children:[r.jsx(N,{title:`Results - ${U.title}`}),r.jsx(j,{title:"Test Results",showBackButton:!0,children:r.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:r.jsxs(n,{className:"border-2",style:{backgroundColor:h.theme.colors.cardBackground,borderColor:s?"rgb(34, 197, 94)":"rgb(239, 68, 68)"},children:[r.jsxs(w,{className:"text-center pb-2",children:[r.jsx("div",{className:"mx-auto w-20 h-20 rounded-full flex items-center justify-center mb-4 "+(s?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-orange-500"),children:s?r.jsx(W,{className:"h-10 w-10 text-white"}):r.jsx(v,{className:"h-10 w-10 text-white"})}),r.jsx(y,{className:"text-3xl",style:{color:h.textPrimary},children:s?"Congratulations!":"Keep Practicing!"})]}),r.jsxs(d,{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-6xl font-bold mb-2 "+(s?"text-green-500":"text-red-500"),children:[Math.round(me.score),"%"]}),r.jsxs("p",{className:"text-muted-foreground",children:[me.correct," out of ",me.total," correct"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center py-4 border-y border-border",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-500",children:me.correct}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Correct"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-red-500",children:me.total-me.correct}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Incorrect"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold",style:{color:h.textPrimary},children:qe(Math.round((Date.now()-ne)/1e3))}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Time Taken"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs(l,{onClick:Se,variant:"outline",className:"flex-1",children:[r.jsx(k,{className:"h-4 w-4 mr-2"}),"Review Answers"]}),r.jsx(l,{onClick:()=>e("/nclex"),className:"flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white",children:"Back to NCLEX Portal"})]}),r.jsx("div",{className:"mt-6 p-4 rounded-xl bg-gradient-to-r from-teal-50 to-cyan-50 dark:from-teal-900/20 dark:to-cyan-900/20 border border-teal-200 dark:border-teal-800",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:"/1000031289.png",alt:"Catie",className:"w-12 h-12 rounded-full object-cover ring-2 ring-white shadow-md"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-teal-500 rounded-full flex items-center justify-center border-2 border-white",children:r.jsx(i,{className:"w-2.5 h-2.5 text-white"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-teal-700 dark:text-teal-400",children:"Need help understanding your answers?"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Review Answers" and I\'ll help explain each question!'})]})]})})]})]})})})]})}return r.jsxs("div",{className:"min-h-screen relative",style:{backgroundColor:h.theme.colors.background},children:[r.jsx(N,{title:`${U.title} - NCLEX Practice`}),r.jsxs(j,{title:U.title,showBackButton:!0,children:[r.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[r.jsxs("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur py-4 mb-6 border-b border-border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(C,{variant:"outline",className:"text-sm",children:U.category}),ce&&r.jsx(C,{className:"bg-blue-500 text-white",children:"Review Mode"})]}),!ce&&null!==ae&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full "+(ae<300?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-muted"),children:[r.jsx(S,{className:"h-4 w-4"}),r.jsx("span",{className:"font-mono font-semibold",children:qe(ae)})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(q,{value:(V+1)/Y.length*100,className:"flex-1 h-2"}),r.jsxs("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[V+1," / ",Y.length]})]})]}),r.jsxs(n,{className:"mb-6",style:{backgroundColor:h.theme.colors.cardBackground,borderColor:h.border},children:[r.jsx(w,{className:"pb-2",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Question ",ve.question_number]}),r.jsx(C,{variant:"SATA"===ve.question_type?"default":"secondary",className:"SATA"===ve.question_type?"bg-purple-500":"",children:"SATA"===ve.question_type?"Select All That Apply":"Multiple Choice"})]}),!ce&&r.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{const e=ve.id,s=new Set(se);s.has(e)?s.delete(e):s.add(e),te(s)},className:se.has(ve.id)?"text-amber-500":"",children:r.jsx(F,{className:"h-4 w-4"})})]})}),r.jsxs(d,{children:[r.jsx("p",{className:"text-lg mb-6 leading-relaxed",style:{color:h.textPrimary},children:ve.question_text}),r.jsx("div",{className:"space-y-3",children:ve.options.map((e,s)=>{const t=(Z[ve.id]||[]).includes(s),a=ve.correct_answers.includes(s);let n="";return ce?a?n="border-green-500 bg-green-50 dark:bg-green-900/20":t&&!a&&(n="border-red-500 bg-red-50 dark:bg-red-900/20"):t&&(n="border-teal-500 bg-teal-50 dark:bg-teal-900/20"),r.jsxs("div",{onClick:()=>(e=>{if(ce||xe)return;const s=ve.id,t=Z[s]||[];"SATA"===ve.question_type?t.includes(e)?ee({...Z,[s]:t.filter(s=>s!==e)}):ee({...Z,[s]:[...t,e]}):ee({...Z,[s]:[e]})})(s),className:`flex items-start gap-3 p-4 rounded-lg border-2 transition-all cursor-pointer hover:border-teal-400 ${n||"border-border"}`,children:["SATA"===ve.question_type?r.jsx(z,{checked:t,disabled:ce,className:"mt-0.5"}):r.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center mt-0.5 "+(t?"border-teal-500 bg-teal-500":"border-muted-foreground"),children:t&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),r.jsx("span",{className:"flex-1",style:{color:h.textPrimary},children:e}),ce&&a&&r.jsx(A,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),ce&&t&&!a&&r.jsx(_,{className:"h-5 w-5 text-red-500 flex-shrink-0"})]},s)})}),ce&&r.jsxs("div",{className:"mt-6 space-y-4",children:[ve.rationale&&r.jsxs(R,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20",children:[r.jsx(T,{className:"h-4 w-4 text-blue-500"}),r.jsxs(M,{className:"text-sm",children:[r.jsx("strong",{className:"block mb-1",children:"Rationale:"}),ve.rationale]})]}),r.jsxs("div",{onClick:()=>Ne(!0),className:"flex items-center gap-3 p-4 rounded-xl bg-gradient-to-r from-teal-50 to-cyan-50 dark:from-teal-900/20 dark:to-cyan-900/20 border border-teal-200 dark:border-teal-800 cursor-pointer hover:shadow-md transition-all group",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:"/1000031289.png",alt:"Catie",className:"w-10 h-10 rounded-full object-cover ring-2 ring-white shadow-sm group-hover:scale-105 transition-transform"}),r.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-teal-500 rounded-full flex items-center justify-center border-2 border-white",children:r.jsx(i,{className:"w-2 h-2 text-white"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-teal-700 dark:text-teal-400 text-sm",children:"Still confused? Ask Catie! ðŸ©º"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"I can explain the nursing concepts behind this question"})]}),r.jsx(l,{size:"sm",className:"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white",children:"Ask Catie"})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs(l,{variant:"outline",onClick:()=>{V>0&&ye(V-1)},disabled:0===V,children:[r.jsx(E,{className:"h-4 w-4 mr-1"}),"Previous"]}),ce?r.jsx(l,{onClick:()=>e("/nclex"),className:"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white",children:"Finish Review"}):V===Y.length-1?r.jsx(l,{onClick:()=>fe(!0),className:"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white",children:"Submit Test"}):r.jsxs(l,{onClick:()=>{V<Y.length-1&&ye(V+1)},children:["Next",r.jsx($,{className:"h-4 w-4 ml-1"})]})]}),r.jsxs(n,{className:"mb-6",style:{backgroundColor:h.theme.colors.cardBackground,borderColor:h.border},children:[r.jsx(w,{className:"pb-2",children:r.jsx(y,{className:"text-sm",children:"Question Navigator"})}),r.jsxs(d,{children:[r.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map((e,s)=>{const t=(Z[e.id]||[]).length>0,a=s===V,n=se.has(e.id);let i="";if(ce&&me){const s=me.answers.find(s=>s.question_id===e.id);i=(null==s?void 0:s.is_correct)?"bg-green-500 text-white":"bg-red-500 text-white"}else a?i="bg-teal-500 text-white":t&&(i="bg-teal-100 dark:bg-teal-900/50");return r.jsxs("button",{onClick:()=>ye(s),className:`w-10 h-10 rounded-lg text-sm font-medium transition-all relative ${i||"bg-muted hover:bg-muted/80"} ${a?"ring-2 ring-teal-500 ring-offset-2":""}`,children:[s+1,n&&r.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-500 rounded-full"})]},e.id)})}),r.jsxs("div",{className:"flex items-center gap-4 mt-4 text-xs text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-teal-100 dark:bg-teal-900/50"})," Answered"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-muted"})," Not answered"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-amber-500"})," Flagged"]})]})]})]}),!ce&&r.jsxs("div",{className:"text-center text-sm text-muted-foreground mb-8",children:[Ae()," of ",Y.length," questions answered",se.size>0&&` â€¢ ${se.size} flagged`]})]}),r.jsx(B,{open:be,onOpenChange:fe,children:r.jsxs(D,{children:[r.jsxs(P,{children:[r.jsx(I,{children:"Submit Test?"}),r.jsxs(L,{children:["You have answered ",Ae()," out of ",Y.length," questions.",Y.length-Ae()>0&&r.jsxs("span",{className:"text-amber-500 block mt-2",children:["Warning: ",Y.length-Ae()," questions are unanswered."]})]})]}),r.jsxs(X,{className:"flex gap-2",children:[r.jsx(l,{variant:"outline",onClick:()=>fe(!1),children:"Continue Test"}),r.jsx(l,{onClick:Ce,className:"bg-gradient-to-r from-teal-500 to-cyan-500 text-white",children:"Submit Test"})]})]})}),r.jsx(B,{open:ge,onOpenChange:pe,children:r.jsxs(D,{children:[r.jsxs(P,{children:[r.jsx(I,{children:"Exit Test?"}),r.jsx(L,{children:"Are you sure you want to exit? Your progress will not be saved."})]}),r.jsxs(X,{className:"flex gap-2",children:[r.jsx(l,{variant:"outline",onClick:()=>pe(!1),children:"Continue Test"}),r.jsx(l,{variant:"destructive",onClick:()=>e("/nclex"),children:"Exit Test"})]})]})}),r.jsx(G,{isOpen:je,onClose:()=>Ne(!1),questionText:(null==ve?void 0:ve.question_text)||"",questionType:(null==ve?void 0:ve.question_type)||"MCQ",options:(null==ve?void 0:ve.options)||[],rationale:null==ve?void 0:ve.rationale,isReviewMode:ce}),!je&&r.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:r.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>Ne(!0),children:[r.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-teal-500 to-cyan-500 animate-ping opacity-20"}),r.jsx("div",{className:"relative w-16 h-16 rounded-full overflow-hidden shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl ring-4 ring-white dark:ring-gray-800",style:{boxShadow:"0 8px 25px rgba(20, 184, 166, 0.4)"},children:r.jsx("img",{src:"/1000031289.png",alt:"Ask Catie",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full flex items-center justify-center shadow-md border-2 border-white dark:border-gray-800",children:r.jsx(i,{className:"w-3 h-3 text-white"})}),r.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1.5 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:["Ask Catie for help! ðŸ©º",r.jsx("div",{className:"absolute top-full right-4 w-2 h-2 bg-gray-900 rotate-45 -mt-1"})]})]})})]})]})};export{V as default};
