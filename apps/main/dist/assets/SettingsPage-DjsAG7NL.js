import{y as e,u as s,g as a,A as n,r as t,j as l,C as i,c as r,Z as d,b as c,U as m,a as o,a8 as x,I as h,Q as u,S as j,o as g,p,q as v,s as f,G as N,a9 as y,B,K as b}from"./index-R5Se49EE.js";import{S}from"./switch-BJr6eUaz.js";import{S as w}from"./separator-CEU1iMxj.js";import{s as _}from"./supabase-Bqkrifq5.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),T=()=>{s();const{toast:e}=a(),{user:T}=n(),[F,D]=t.useState(!0),[L,k]=t.useState({name:"",email:"",targetBand:"7.5",testDate:"",translationLanguage:"English",notifications:!0,emailUpdates:!1,reminderTime:"09:00",studyGoal:"30"});t.useEffect(()=>{(async()=>{var e;if(T)try{const{data:s}=await _.from("profiles").select("full_name, native_language").eq("id",T.id).single(),{data:a}=await _.from("user_preferences").select("*").eq("user_id",T.id).single();k({name:(null==s?void 0:s.full_name)||T.email||"",email:T.email||"",targetBand:(null==(e=null==a?void 0:a.target_score)?void 0:e.toString())||"7.5",testDate:(null==a?void 0:a.target_deadline)||"",translationLanguage:(null==s?void 0:s.native_language)||"English",notifications:!0,emailUpdates:!1,reminderTime:"09:00",studyGoal:"30"})}catch(s){console.error("Error loading settings:",s)}finally{D(!1)}else D(!1)})()},[T]);return F?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(i,{className:"p-8 text-center",children:l.jsx(r,{className:"text-2xl mb-4",children:"Loading Settings..."})})}):l.jsx(d,{title:"Settings",showBackButton:!0,children:l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs(i,{className:"card-modern",children:[l.jsx(c,{children:l.jsxs(r,{className:"flex items-center gap-2",children:[l.jsx(m,{className:"w-5 h-5 text-brand-blue"}),"Profile Information"]})}),l.jsx(o,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(x,{htmlFor:"name",children:"Full Name"}),l.jsx(h,{id:"name",value:L.name,onChange:e=>k({...L,name:e.target.value}),className:"input-modern"})]}),l.jsxs("div",{children:[l.jsx(x,{htmlFor:"email",children:"Email Address"}),l.jsx(h,{id:"email",type:"email",value:L.email,onChange:e=>k({...L,email:e.target.value}),className:"input-modern"})]})]})})]}),l.jsxs(i,{className:"card-modern",children:[l.jsx(c,{children:l.jsxs(r,{className:"flex items-center gap-2",children:[l.jsx(u,{className:"w-5 h-5 text-brand-green"}),"Study Goals"]})}),l.jsxs(o,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(x,{htmlFor:"targetBand",children:"Target IELTS Band"}),l.jsxs(j,{value:L.targetBand,onValueChange:e=>k({...L,targetBand:e}),children:[l.jsx(g,{className:"glass-button",children:l.jsx(p,{})}),l.jsxs(v,{children:[l.jsx(f,{value:"6.0",children:"Band 6.0"}),l.jsx(f,{value:"6.5",children:"Band 6.5"}),l.jsx(f,{value:"7.0",children:"Band 7.0"}),l.jsx(f,{value:"7.5",children:"Band 7.5"}),l.jsx(f,{value:"8.0",children:"Band 8.0"}),l.jsx(f,{value:"8.5",children:"Band 8.5"}),l.jsx(f,{value:"9.0",children:"Band 9.0"})]})]})]}),l.jsxs("div",{children:[l.jsx(x,{htmlFor:"testDate",children:"Target Test Date"}),l.jsx(h,{id:"testDate",type:"date",value:L.testDate,onChange:e=>k({...L,testDate:e.target.value}),className:"input-modern"})]})]}),l.jsxs("div",{children:[l.jsx(x,{htmlFor:"studyGoal",children:"Daily Study Goal (minutes)"}),l.jsxs(j,{value:L.studyGoal,onValueChange:e=>k({...L,studyGoal:e}),children:[l.jsx(g,{className:"glass-button",children:l.jsx(p,{})}),l.jsxs(v,{children:[l.jsx(f,{value:"15",children:"15 minutes"}),l.jsx(f,{value:"30",children:"30 minutes"}),l.jsx(f,{value:"45",children:"45 minutes"}),l.jsx(f,{value:"60",children:"1 hour"}),l.jsx(f,{value:"90",children:"1.5 hours"}),l.jsx(f,{value:"120",children:"2 hours"})]})]})]})]})]}),l.jsxs(i,{className:"card-modern",children:[l.jsx(c,{children:l.jsxs(r,{className:"flex items-center gap-2",children:[l.jsx(N,{className:"w-5 h-5 text-brand-purple"}),"Language & Translation"]})}),l.jsx(o,{className:"space-y-4",children:l.jsxs("div",{children:[l.jsx(x,{htmlFor:"translationLanguage",children:"Translation Language"}),l.jsxs(j,{value:L.translationLanguage,onValueChange:e=>k({...L,translationLanguage:e}),children:[l.jsx(g,{className:"glass-button",children:l.jsx(p,{})}),l.jsx(v,{children:y().map(e=>l.jsx(f,{value:e.value,children:e.label},e.value))})]}),l.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Choose your preferred language for word translations during reading practice"})]})})]}),l.jsxs(i,{className:"card-modern",children:[l.jsx(c,{children:l.jsxs(r,{className:"flex items-center gap-2",children:[l.jsx(C,{className:"w-5 h-5 text-brand-orange"}),"Notifications & Reminders"]})}),l.jsxs(o,{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(x,{htmlFor:"notifications",children:"Push Notifications"}),l.jsx("p",{className:"text-sm text-text-secondary",children:"Receive study reminders and progress updates"})]}),l.jsx(S,{id:"notifications",checked:L.notifications,onCheckedChange:e=>k({...L,notifications:e})})]}),l.jsx(w,{}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(x,{htmlFor:"emailUpdates",children:"Email Updates"}),l.jsx("p",{className:"text-sm text-text-secondary",children:"Weekly progress reports and study tips"})]}),l.jsx(S,{id:"emailUpdates",checked:L.emailUpdates,onCheckedChange:e=>k({...L,emailUpdates:e})})]}),l.jsxs("div",{children:[l.jsx(x,{htmlFor:"reminderTime",children:"Daily Reminder Time"}),l.jsx(h,{id:"reminderTime",type:"time",value:L.reminderTime,onChange:e=>k({...L,reminderTime:e.target.value}),className:"input-modern"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsxs(B,{onClick:async()=>{if(T)try{await _.from("profiles").update({full_name:L.name,native_language:L.translationLanguage}).eq("id",T.id),await _.from("user_preferences").upsert({user_id:T.id,target_score:parseFloat(L.targetBand),target_deadline:L.testDate||null,preferred_name:L.name}),e({title:"Settings Saved",description:"Your preferences have been updated successfully."})}catch(s){console.error("Error saving settings:",s),e({title:"Error",description:"Failed to save settings. Please try again."})}},className:"btn-primary",children:[l.jsx(b,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})})};export{T as default};
