import{A as e,u as s,r as t,j as a,N as r,_ as l,a2 as n}from"./index-COfpB8ju.js";import{s as i}from"./supabase-Bqkrifq5.js";const o=()=>{const{user:o,signUp:d,loading:c}=e(),u=s(),[m,x]=t.useState(""),[b,h]=t.useState(""),[f,g]=t.useState(""),[p,j]=t.useState(""),[w,v]=t.useState(""),[y,N]=t.useState("signup"),[k,C]=t.useState(!1),[S,F]=t.useState(null);return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:a.jsx("div",{className:"text-black font-mono",children:"Loading…"})}):!c&&o?a.jsx(r,{to:"/dashboard",replace:!0}):a.jsxs("div",{className:"min-h-screen w-full font-sans bg-white",children:[a.jsx("div",{className:"fixed inset-0 bg-white -z-10"}),a.jsxs("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center justify-center px-4 py-10",children:[a.jsxs("button",{type:"button",onClick:()=>"verify"===y?N("signup"):u(-1),className:"absolute top-4 left-4 inline-flex items-center gap-2 text-sm text-gray-800 hover:text-black bg-white/80 backdrop-blur px-3 py-2 rounded-xl border border-gray-300","aria-label":"Go back",children:[a.jsx(l,{className:"w-4 h-4"}),"Back"]}),a.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden shadow-xl bg-white border border-gray-200 mx-auto",children:a.jsxs("div",{className:"p-6 md:p-8 bg-white",children:[a.jsx("h3",{className:"text-2xl font-semibold text-black text-center mb-4",children:"signup"===y?"Create account":"Verify Email"}),a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),F(null),"signup"===y){if(f!==p)return void F("Passwords do not match");C(!0);const{error:e}=await d(b,f,m);C(!1),e?F(e):N("verify")}else{C(!0);const{error:e}=await i.auth.verifyOtp({email:b,token:w,type:"signup"});C(!1),e?F(e.message):u("/dashboard")}},className:"space-y-5",children:["signup"===y?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your nickname"}),a.jsx("input",{id:"name",type:"text",required:!0,value:m,onChange:e=>x(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all",placeholder:"Your name"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",required:!0,value:b,onChange:e=>h(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all",placeholder:""})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{id:"password",type:"password",required:!0,value:f,onChange:e=>g(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all",placeholder:"••••••••"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirm",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm password"}),a.jsx("input",{id:"confirm",type:"password",required:!0,value:p,onChange:e=>j(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all",placeholder:"••••••••"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center text-sm text-gray-600",children:["We sent a verification code to ",a.jsx("strong",{children:b}),".",a.jsx("br",{}),"Please enter it below to verify your account."]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),a.jsx("input",{id:"otp",type:"text",required:!0,value:w,onChange:e=>v(e.target.value),className:"w-full p-3 rounded-xl border border-gray-300 bg-white text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all text-center tracking-widest text-xl",placeholder:"123456"})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:async()=>{const{error:e}=await d(b,f,m);e||alert("Verification code resent!")},className:"text-sm text-blue-600 hover:underline",children:"Resend Code"})})]}),S&&a.jsx("div",{className:"text-sm text-red-500",children:S}),a.jsx("button",{type:"submit",disabled:k,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-xl shadow-sm hover:bg-blue-700 transform hover:-translate-y-0.5 transition-all",children:k?"Processing…":"signup"===y?"Create account":"Verify Email"}),"signup"===y&&a.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Already have an account? ",a.jsx(n,{className:"text-blue-600 font-medium hover:underline",to:"/auth",children:"Sign in"})]})]})]})})]})]})};export{o as default};
