import{A as e,u as s,r as t,j as a,N as l,_ as r,U as n,a1 as d,E as o,a2 as i,J as c}from"./index-C29BzD67.js";import{s as m}from"./supabase-DUkWVuqu.js";import{M as u}from"./mail-C_1Chqg2.js";import{L as x}from"./lock-D6f7hudH.js";const f=()=>{const{user:f,loading:h}=e(),b=s(),[p,j]=t.useState(""),[v,g]=t.useState(""),[w,N]=t.useState(""),[y,k]=t.useState(""),[C,S]=t.useState(!1),[P,A]=t.useState(null),[E,q]=t.useState(!1),[T,z]=t.useState(!1),[D,F]=t.useState(!1);return h?a.jsx("div",{className:"min-h-screen w-full font-sans flex flex-col items-center justify-center bg-[#f5f2e8]",children:a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[a.jsx("div",{className:"relative w-20 h-20",children:a.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-[#e6e0d4] border-t-[#d97757] animate-spin"})}),a.jsx("div",{className:"text-xl font-serif font-medium text-[#2d2d2d]",children:"Loading…"})]})}):!h&&f?a.jsx(l,{to:"/dashboard",replace:!0}):D?a.jsx("div",{className:"min-h-screen w-full font-sans bg-[#f5f2e8] text-[#3c3c3c]",children:a.jsx("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center justify-center px-4 py-10",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsxs("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm bg-white border-2 border-[#d97757]/20 p-8 md:p-10 text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(u,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-2xl font-serif font-medium text-[#d97757] mb-2",children:"Check Your Email"}),a.jsxs("p",{className:"text-[#666666] text-sm mb-6 font-sans",children:["We've sent a verification link to ",a.jsx("strong",{className:"text-[#2d2d2d]",children:v}),". Please click the link to verify your account."]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>b("/auth"),className:"w-full py-3 px-4 bg-[#d97757] text-white font-medium rounded-xl shadow-md hover:bg-[#c56a4b] transition-all font-sans",children:"Go to Sign In"}),a.jsx("button",{onClick:()=>F(!1),className:"w-full py-3 px-4 bg-white border border-[#d97757]/30 text-[#2d2d2d] font-medium rounded-xl hover:bg-[#fffaf8] transition-all font-sans",children:"Try Different Email"})]})]})})})}):a.jsx("div",{className:"min-h-screen w-full font-sans bg-[#f5f2e8] text-[#3c3c3c]",children:a.jsx("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center justify-center px-4 py-10",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("button",{type:"button",onClick:()=>b("/"),className:"mb-6 inline-flex items-center gap-2 text-sm text-[#666666] hover:text-[#d97757] font-medium transition-colors px-2 py-1 rounded-lg hover:bg-[#d97757]/5","aria-label":"Go back",children:[a.jsx(r,{className:"w-4 h-4"}),"Back to Home"]}),a.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm bg-white border-2 border-[#d97757]/20",children:a.jsxs("div",{className:"p-8 md:p-10 bg-white",children:[a.jsx("h3",{className:"text-2xl font-serif font-medium text-[#d97757] text-center mb-2",children:"Create Account"}),a.jsx("p",{className:"text-center text-[#666666] text-sm mb-8 font-sans",children:"Start your English mastery journey today"}),a.jsxs("form",{onSubmit:async e=>{var s,t;if(e.preventDefault(),A(null),p.trim())if(v)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v))if(w)if(w.length<6)A("Password must be at least 6 characters");else if(w===y){S(!0);try{const{data:e,error:s}=await m.auth.signUp({email:v,password:w,options:{data:{full_name:p.trim()}}});if(s)throw s;e.user&&!e.session?(F(!0),c.success("Account created! Please check your email to verify.")):e.session&&(c.success("Account created successfully!"),b("/dashboard"))}catch(a){console.error("Signup error:",a),(null==(s=a.message)?void 0:s.includes("already registered"))?A("This email is already registered. Try signing in instead."):(null==(t=a.message)?void 0:t.includes("invalid"))?A("Please check your email format and try again."):A(a.message||"Failed to create account. Please try again.")}finally{S(!1)}}else A("Passwords do not match");else A("Please set a password");else A("Please enter a valid email address");else A("Please enter your email address");else A("Please enter your nickname")},className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3c3c3c] mb-2 font-sans",children:"Nickname"}),a.jsxs("div",{className:"relative",children:[a.jsx(n,{className:"absolute left-3 top-3.5 h-5 w-5 text-[#d97757]/50"}),a.jsx("input",{type:"text",required:!0,value:p,onChange:e=>j(e.target.value),className:"w-full pl-10 p-3 rounded-xl border border-[#d97757]/20 bg-[#faf8f6] text-[#2d2d2d] shadow-sm focus:outline-none focus:ring-2 focus:ring-[#d97757]/20 focus:border-[#d97757] transition-all font-sans placeholder-[#666666]/50",placeholder:"Johnny"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3c3c3c] mb-2 font-sans",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(u,{className:"absolute left-3 top-3.5 h-5 w-5 text-[#d97757]/50"}),a.jsx("input",{type:"email",required:!0,value:v,onChange:e=>g(e.target.value),className:"w-full pl-10 p-3 rounded-xl border border-[#d97757]/20 bg-[#faf8f6] text-[#2d2d2d] shadow-sm focus:outline-none focus:ring-2 focus:ring-[#d97757]/20 focus:border-[#d97757] transition-all font-sans placeholder-[#666666]/50",placeholder:"john@example.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3c3c3c] mb-2 font-sans",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(x,{className:"absolute left-3 top-3.5 h-5 w-5 text-[#d97757]/50"}),a.jsx("input",{type:E?"text":"password",required:!0,value:w,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-12 p-3 rounded-xl border border-[#d97757]/20 bg-[#faf8f6] text-[#2d2d2d] shadow-sm focus:outline-none focus:ring-2 focus:ring-[#d97757]/20 focus:border-[#d97757] transition-all font-sans placeholder-[#666666]/50",placeholder:"••••••••"}),a.jsx("button",{type:"button",onClick:()=>q(!E),className:"absolute right-3 top-3.5 text-[#666666] hover:text-[#d97757] transition-colors",children:E?a.jsx(d,{className:"h-5 w-5"}):a.jsx(o,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-[#3c3c3c] mb-2 font-sans",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(x,{className:"absolute left-3 top-3.5 h-5 w-5 text-[#d97757]/50"}),a.jsx("input",{type:T?"text":"password",required:!0,value:y,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-12 p-3 rounded-xl border border-[#d97757]/20 bg-[#faf8f6] text-[#2d2d2d] shadow-sm focus:outline-none focus:ring-2 focus:ring-[#d97757]/20 focus:border-[#d97757] transition-all font-sans placeholder-[#666666]/50",placeholder:"••••••••"}),a.jsx("button",{type:"button",onClick:()=>z(!T),className:"absolute right-3 top-3.5 text-[#666666] hover:text-[#d97757] transition-colors",children:T?a.jsx(d,{className:"h-5 w-5"}):a.jsx(o,{className:"h-5 w-5"})})]})]}),P&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 rounded-lg text-sm text-red-600 flex items-start gap-2 animate-in fade-in slide-in-from-top-1",children:[a.jsx("div",{className:"mt-0.5",children:"⚠️"}),a.jsx("div",{children:P})]}),a.jsx("button",{type:"submit",disabled:C,className:"w-full py-4 px-6 font-medium rounded-xl shadow-md transform transition-all font-sans flex items-center justify-center gap-2 bg-[#d97757] text-white hover:bg-[#c56a4b] hover:-translate-y-0.5 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:transform-none",children:C?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-white/30 border-t-white animate-spin"}),"Creating Account..."]}):"Create Account"}),a.jsxs("div",{className:"text-center text-sm text-[#666666] font-sans mt-6",children:["Already have an account? ",a.jsx(i,{className:"text-[#d97757] font-medium hover:underline",to:"/auth",children:"Sign in"})]})]})]})})]})})})};export{f as default};
