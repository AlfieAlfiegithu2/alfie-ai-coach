import{u as e,a5 as s,a1 as r,r as a,j as t,B as l,i as d,k as n,L as o,a6 as i,F as x,a7 as c}from"./index-snkdXCMk.js";import{S as m}from"./scroll-area-CRi7CPPc.js";import{C as p,a as b,b as h}from"./collapsible-Cx3fRUws.js";import"./supabase-DWL4C3fA.js";const g=()=>{const g=e(),u=s().state,f="note"===r().theme.name,[j,N]=a.useState([5,6,7]);if(!u)return t.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No results found"}),t.jsx(l,{onClick:()=>g("/toeic"),children:"Back to TOEIC Portal"})]});const{score:v,totalQuestions:w,answers:E,groupedParts:_,testName:y}=u;return t.jsx("div",{className:"min-h-screen py-8 "+(f?"bg-[#FEF9E7]":"bg-gradient-to-br from-green-50 via-white to-emerald-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950"),children:t.jsxs("div",{className:"container px-4 max-w-4xl mx-auto",children:[t.jsxs("div",{className:"relative mb-8 p-8 rounded-xl overflow-hidden shadow-sm "+(f?"bg-[#FEF9E7] border-2 border-[#E8D5A3] shadow-[4px_4px_0px_0px_rgba(232,213,163,1)]":"bg-white/80 backdrop-blur border border-white/20"),children:[f&&t.jsx("div",{className:"absolute top-0 left-0 w-full h-8 bg-gradient-to-b from-[#E8D5A3]/20 to-transparent"}),t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8 relative z-10",children:[t.jsxs("div",{className:"text-center md:text-left",children:[t.jsx("h1",{className:"text-3xl font-bold mb-2 "+(f?"text-[#5D4E37]":""),children:y||"TOEIC Reading Test"}),t.jsx("p",{className:"font-medium "+(f?"text-[#8B6914]":"text-muted-foreground"),children:"Error Log & Performance Review"})]}),t.jsx("div",{className:"flex items-center gap-8",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-4xl font-bold mb-1 "+(f?"text-[#5D4E37]":""),children:[v,"/",w]}),t.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider "+(f?"text-[#8B6914]":"text-muted-foreground"),children:"Correct"})]})})]})]}),t.jsx("div",{className:"space-y-6",children:_.map(e=>t.jsxs(p,{open:j.includes(e.partNumber),onOpenChange:()=>{return s=e.partNumber,void N(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"rounded-xl overflow-hidden transition-all duration-200 "+(f?"bg-white border-2 border-[#E8D5A3] shadow-[4px_4px_0px_0px_rgba(232,213,163,0.5)]":"bg-white shadow-sm border border-slate-100"),children:[t.jsx(b,{className:"w-full",children:t.jsx("div",{className:`flex items-center justify-between p-4 ${f?"bg-[#FEF9E7]/50":"bg-slate-50/50"} hover:bg-opacity-80 transition-colors`,children:t.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 "+(f?"text-[#5D4E37]":""),children:[j.includes(e.partNumber)?t.jsx(d,{className:"w-5 h-5"}):t.jsx(n,{className:"w-5 h-5"}),"Part ",e.partNumber]})})}),t.jsx(h,{children:t.jsx("div",{className:"p-4 space-y-4",children:e.questions.map(s=>{var r;const a=E[s.question_number],l=a===s.correct_answer,d=((e,s)=>s.passages.find(s=>e.question_number>=s.questionStart&&e.question_number<=s.questionEnd))(s,e);return t.jsxs("div",{className:"group relative rounded-xl border-2 transition-all duration-300 "+(f?"bg-[#FEF9E7] border-[#E8D5A3] shadow-[2px_2px_0px_0px_rgba(232,213,163,0.5)] hover:shadow-[4px_4px_0px_0px_rgba(232,213,163,0.8)] hover:-translate-y-0.5":"bg-white border-transparent shadow-sm hover:shadow-md ring-1 ring-slate-100 hover:ring-slate-200"),children:[t.jsx("div",{className:"absolute top-0 right-0 px-3 py-1 rounded-bl-xl rounded-tr-lg text-xs font-bold tracking-wider border-b border-l "+(l?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"),children:l?"CORRECT":"INCORRECT"}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("span",{className:"text-lg font-bold "+(f?"text-[#5D4E37]":"text-slate-700"),children:[s.question_number,"."]})}),t.jsx("p",{className:"text-lg font-medium leading-relaxed "+(f?"text-[#5D4E37]":"text-slate-800"),children:s.question_text}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[t.jsx("div",{className:"space-y-3",children:null==(r=s.options)?void 0:r.map((e,r)=>{const l=String.fromCharCode(65+r),d=a===l,n=s.correct_answer===l;let x="flex items-center gap-3 p-3 rounded-lg text-sm transition-all border ";return x+=n?"bg-emerald-50/40 border-emerald-100 text-emerald-800":d&&!n?"bg-rose-50/40 border-rose-100 text-rose-800":"bg-transparent border-transparent hover:bg-black/5 text-muted-foreground",t.jsxs("div",{className:x,children:[t.jsxs("span",{className:"font-bold w-6 text-sm "+(n?"text-emerald-700":d&&!n?"text-rose-700":"text-muted-foreground"),children:[l,"."]}),t.jsx("span",{className:"flex-1 font-medium",children:e}),n&&t.jsx(o,{className:"w-5 h-5 text-emerald-500/70 flex-shrink-0"}),d&&!n&&t.jsx(i,{className:"w-5 h-5 text-rose-500/70 flex-shrink-0"})]},r)})}),t.jsxs("div",{className:"space-y-4",children:[(d||s.passage_context)&&t.jsxs("div",{className:"text-sm p-4 rounded-xl border transition-colors "+(f?"bg-white border-[#E8D5A3]/50 text-[#5D4E37]/90":"bg-slate-50/50 border-slate-100 text-slate-600"),children:[t.jsxs("div",{className:"font-bold mb-2 flex items-center gap-2 opacity-70 text-xs uppercase tracking-wider",children:[t.jsx(x,{className:"w-4 h-4"}),(null==d?void 0:d.title)||"Context Reference"]}),t.jsx(m,{className:"h-[120px] pr-4",children:t.jsx("div",{className:"whitespace-pre-wrap leading-relaxed opacity-90 text-xs",children:(null==d?void 0:d.content)||s.passage_context})})]}),s.ai_explanation&&t.jsxs("div",{className:"p-4 rounded-xl text-sm "+(f?"bg-[#A68B5B]/10 text-[#5D4E37]":"bg-blue-50/50 text-blue-900"),children:[t.jsxs("span",{className:"font-bold text-xs uppercase tracking-wider opacity-70 mb-2 block flex items-center gap-2",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full "+(f?"bg-[#A68B5B]":"bg-blue-400")}),"Explanation"]}),t.jsx("p",{className:"leading-relaxed opacity-90",children:s.ai_explanation})]})]})]})]})})]},s.id)})})})]},e.partNumber))}),t.jsx("div",{className:"flex justify-center mt-12 pb-12",children:t.jsxs(l,{onClick:()=>g("/toeic"),size:"lg",className:"shadow-lg px-8 rounded-full "+(f?"bg-[#A68B5B] hover:bg-[#8B6914] text-white":""),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"Back to TOEIC Portal"]})})]})})};export{g as default};
