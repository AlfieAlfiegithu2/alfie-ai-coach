import{u as e,r,j as a}from"./vendor-react-JN_hy__U.js";import{q as s,s as t,y as l,U as o,I as i,S as n,i as c,j as d,k as m,l as x,C as g,a9 as u,a as p,B as h,e as b,D as y,f as v,g as j,h as f,W as w}from"./index-DXpPY1B7.js";import{aS as N,aW as k,cs as C,cg as S,az as P,bo as T}from"./vendor-ui-DG51EGkO.js";import"./vendor-react-dom-Cb-iy8Oc.js";import"./vendor-animation-ClPlB6zo.js";import"./vendor-i18n-DlHrixAm.js";import"./vendor-utils-D5HPTFR9.js";import"./vendor-supabase-D7XYLCUu.js";import"./vendor-charts-BpOKEG9Z.js";import"./vendor-date-DT7Rq6D9.js";const _=[{value:"all",label:"All Templates"},{value:"writing-task1",label:"Writing Task 1"},{value:"writing-task2",label:"Writing Task 2"},{value:"speaking",label:"Speaking"},{value:"reading",label:"Reading"},{value:"listening",label:"Listening"},{value:"general",label:"General"}],L=()=>{const L=e(),B=s(),E="note"===B.theme.name,[$,W]=r.useState([]),[I,A]=r.useState(!0),[F,q]=r.useState(""),[z,D]=r.useState("all"),[G,O]=r.useState(null);r.useEffect(()=>{R()},[]);const R=async()=>{A(!0);try{const{data:e,error:r}=await t.from("templates").select("id, title, description, category, image_url, tags, view_count").eq("is_published",!0).order("created_at",{ascending:!1});if(r)throw r;W(e||[])}catch(e){console.error("Error loading templates:",e)}finally{A(!1)}},U=e=>{O(e),(async e=>{try{await t.rpc("increment_template_view",{template_id:e})}catch(r){console.error("Error incrementing view count:",r)}})(e.id)},V=e=>{var r;return(null==(r=_.find(r=>r.value===e))?void 0:r.label)||e},H=e=>{switch(e){case"writing-task1":return"bg-blue-500/10 text-blue-600 border-blue-500/20";case"writing-task2":return"bg-purple-500/10 text-purple-600 border-purple-500/20";case"speaking":return"bg-green-500/10 text-green-600 border-green-500/20";case"reading":return"bg-orange-500/10 text-orange-600 border-orange-500/20";case"listening":return"bg-pink-500/10 text-pink-600 border-pink-500/20";default:return"bg-gray-500/10 text-gray-600 border-gray-500/20"}},J=$.filter(e=>{var r;const a=e.title.toLowerCase().includes(F.toLowerCase())||(null==(r=e.description)?void 0:r.toLowerCase().includes(F.toLowerCase()))||e.tags.some(e=>e.includes(F.toLowerCase())),s="all"===z||e.category===z;return a&&s});return a.jsxs(l,{children:[a.jsx(o,{title:"Templates | English AIdol",description:"Browse template images for IELTS Writing Task 1, Speaking, and more practice"}),a.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-8 space-y-8 "+(E?"font-serif":""),style:E?{backgroundColor:B.theme.colors.background}:void 0,children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[!E&&a.jsx(N,{className:"w-10 h-10 text-primary"}),a.jsx("h1",{className:"text-4xl font-bold "+(E?"":"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"),style:{color:B.textPrimary},children:"Templates"})]}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",style:{color:E?B.textSecondary:void 0},children:"Browse our collection of charts, graphs, diagrams, and visual templates to practice your IELTS Writing Task 1 and Speaking skills."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"relative flex-1",children:[!E&&a.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),a.jsx(i,{placeholder:"Search templates...",value:F,onChange:e=>q(e.target.value),className:E?"":"pl-10",style:E?{borderColor:B.border,color:B.textPrimary}:void 0})]}),a.jsxs(n,{value:z,onValueChange:D,children:[a.jsxs(c,{className:"w-full sm:w-[180px]",style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:[!E&&a.jsx(C,{className:"w-4 h-4 mr-2"}),a.jsx(d,{placeholder:"Category"})]}),a.jsx(m,{children:_.map(e=>a.jsx(x,{value:e.value,children:e.label},e.value))})]})]}),a.jsx("div",{className:"flex items-center justify-center gap-6 text-sm text-muted-foreground",children:a.jsxs("span",{style:{color:E?B.textSecondary:void 0},children:[J.length," templates found"]})}),I?a.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(8)].map((e,r)=>a.jsxs(g,{className:"overflow-hidden",style:E?{backgroundColor:B.theme.colors.cardBackground,borderColor:B.border}:void 0,children:[a.jsx(u,{className:"h-48 w-full"}),a.jsxs(p,{className:"p-4",children:[a.jsx(u,{className:"h-5 w-3/4 mb-2"}),a.jsx(u,{className:"h-4 w-1/2"})]})]},r))}):0===J.length?a.jsxs("div",{className:"text-center py-16",children:[!E&&a.jsx(N,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/50"}),F||"all"!==z?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:B.textPrimary},children:"No templates found"}),a.jsx("p",{className:"text-muted-foreground mb-4",style:{color:E?B.textSecondary:void 0},children:"Try adjusting your search or filters"}),a.jsx(h,{variant:"outline",onClick:()=>{q(""),D("all")},style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:"Clear filters"})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:B.textPrimary},children:"No templates available yet"}),a.jsx("p",{className:"text-muted-foreground",style:{color:E?B.textSecondary:void 0},children:"Check back soon for new practice materials!"})]})]}):a.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:J.map(e=>a.jsxs(g,{className:`overflow-hidden cursor-pointer transition-all duration-300 ${E?"":"hover:shadow-xl hover:-translate-y-1"} group`,onClick:()=>U(e),style:E?{backgroundColor:B.theme.colors.cardBackground,borderColor:B.border}:void 0,children:[a.jsxs("div",{className:"h-48 relative overflow-hidden "+(E?"":"bg-muted"),style:E?{backgroundColor:"transparent",borderBottom:`1px solid ${B.border}`}:void 0,children:[a.jsx("img",{src:e.image_url,alt:e.title,className:`w-full h-full object-contain ${E?"":"group-hover:scale-105"} transition-transform duration-300`,loading:"lazy"}),!E&&a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:a.jsx(S,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-lg"})}),a.jsx(b,{className:`absolute top-2 right-2 ${E?"":H(e.category)}`,style:E?{backgroundColor:"transparent",border:`1px solid ${B.border}`,color:B.textSecondary}:void 0,children:V(e.category)})]}),a.jsxs(p,{className:"p-4 space-y-2",children:[a.jsx("h3",{className:`font-semibold line-clamp-1 ${E?"":"group-hover:text-primary"} transition-colors`,style:{color:B.textPrimary},children:e.title}),e.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",style:{color:E?B.textSecondary:void 0},children:e.description}),e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:e.tags.slice(0,3).map(e=>a.jsx(b,{variant:"outline",className:"text-xs",style:E?{borderColor:B.border,color:B.textSecondary}:void 0,children:e},e))})]})]},e.id))}),a.jsx("div",{className:"text-center pt-8",children:a.jsxs(h,{variant:"outline",onClick:()=>L("/ielts"),style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:[!E&&a.jsx(P,{className:"w-4 h-4 mr-2"}),E?"← ":"","Back to IELTS Portal"]})}),a.jsx(y,{open:!!G,onOpenChange:()=>O(null),children:a.jsx(v,{className:"sm:max-w-4xl max-h-[90vh]",style:E?{backgroundColor:B.theme.colors.cardBackground,borderColor:B.border}:void 0,children:G&&a.jsxs(a.Fragment,{children:[a.jsxs(j,{children:[a.jsx(f,{style:{color:B.textPrimary},children:G.title}),a.jsxs(w,{className:"flex items-center gap-2",style:{color:E?B.textSecondary:void 0},children:[a.jsx(b,{className:E?"":H(G.category),style:E?{backgroundColor:"transparent",border:`1px solid ${B.border}`,color:B.textSecondary}:void 0,children:V(G.category)}),G.description&&a.jsxs("span",{children:["• ",G.description]})]})]}),a.jsx("div",{className:"py-4 flex justify-center",children:a.jsx("img",{src:G.image_url,alt:G.title,className:"max-w-full max-h-[60vh] object-contain rounded-lg"})}),a.jsxs("div",{className:"flex items-center justify-between",children:[G.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:G.tags.map(e=>a.jsx(b,{variant:"secondary",style:E?{backgroundColor:"transparent",border:`1px solid ${B.border}`,color:B.textSecondary}:void 0,children:e},e))}),a.jsxs(h,{variant:"outline",onClick:()=>{const e=document.createElement("a");e.href=G.image_url,e.download=G.title,e.target="_blank",e.click()},style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:[!E&&a.jsx(T,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})})})]})]})};export{L as default};
