import{u as e,a0 as r,r as a,j as s,a4 as t,bg as l,I as o,S as i,p as n,q as c,s as d,t as m,C as x,cc as g,a as u,B as p,l as h,ah as b,D as y,m as j,n as v,o as f,bm as w}from"./index-C6RqRRNF.js";import{s as N}from"./supabase-DWL4C3fA.js";import{I as k}from"./image-CTBRX_Ar.js";import{S as C}from"./search-mdWPSZ9l.js";import{F as S}from"./filter-rVdSvw4J.js";import{Z as T}from"./zoom-in-CbQ94faA.js";import{D as P}from"./download-C_G6SiOG.js";const _=[{value:"all",label:"All Templates"},{value:"writing-task1",label:"Writing Task 1"},{value:"writing-task2",label:"Writing Task 2"},{value:"speaking",label:"Speaking"},{value:"reading",label:"Reading"},{value:"listening",label:"Listening"},{value:"general",label:"General"}],L=()=>{const L=e(),B=r(),E="note"===B.theme.name,[$,I]=a.useState([]),[F,W]=a.useState(!0),[A,D]=a.useState(""),[q,z]=a.useState("all"),[G,O]=a.useState(null);a.useEffect(()=>{R()},[]);const R=async()=>{W(!0);try{const{data:e,error:r}=await N.from("templates").select("id, title, description, category, image_url, tags, view_count").eq("is_published",!0).order("created_at",{ascending:!1});if(r)throw r;I(e||[])}catch(e){console.error("Error loading templates:",e)}finally{W(!1)}},V=e=>{O(e),(async e=>{try{await N.rpc("increment_template_view",{template_id:e})}catch(r){console.error("Error incrementing view count:",r)}})(e.id)},Z=e=>{var r;return(null==(r=_.find(r=>r.value===e))?void 0:r.label)||e},H=e=>{switch(e){case"writing-task1":return"bg-blue-500/10 text-blue-600 border-blue-500/20";case"writing-task2":return"bg-purple-500/10 text-purple-600 border-purple-500/20";case"speaking":return"bg-green-500/10 text-green-600 border-green-500/20";case"reading":return"bg-orange-500/10 text-orange-600 border-orange-500/20";case"listening":return"bg-pink-500/10 text-pink-600 border-pink-500/20";default:return"bg-gray-500/10 text-gray-600 border-gray-500/20"}},J=$.filter(e=>{var r;const a=e.title.toLowerCase().includes(A.toLowerCase())||(null==(r=e.description)?void 0:r.toLowerCase().includes(A.toLowerCase()))||e.tags.some(e=>e.includes(A.toLowerCase())),s="all"===q||e.category===q;return a&&s});return s.jsxs(t,{children:[s.jsx(l,{title:"Templates | English AIdol",description:"Browse template images for IELTS Writing Task 1, Speaking, and more practice"}),s.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-8 space-y-8 "+(E?"font-serif":""),style:E?{backgroundColor:B.theme.colors.background}:void 0,children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[!E&&s.jsx(k,{className:"w-10 h-10 text-primary"}),s.jsx("h1",{className:"text-4xl font-bold "+(E?"":"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"),style:{color:B.textPrimary},children:"Templates"})]}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",style:{color:E?B.textSecondary:void 0},children:"Browse our collection of charts, graphs, diagrams, and visual templates to practice your IELTS Writing Task 1 and Speaking skills."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"relative flex-1",children:[!E&&s.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(o,{placeholder:"Search templates...",value:A,onChange:e=>D(e.target.value),className:E?"":"pl-10",style:E?{borderColor:B.border,color:B.textPrimary}:void 0})]}),s.jsxs(i,{value:q,onValueChange:z,children:[s.jsxs(n,{className:"w-full sm:w-[180px]",style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:[!E&&s.jsx(S,{className:"w-4 h-4 mr-2"}),s.jsx(c,{placeholder:"Category"})]}),s.jsx(d,{children:_.map(e=>s.jsx(m,{value:e.value,children:e.label},e.value))})]})]}),s.jsx("div",{className:"flex items-center justify-center gap-6 text-sm text-muted-foreground",children:s.jsxs("span",{style:{color:E?B.textSecondary:void 0},children:[J.length," templates found"]})}),F?s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(8)].map((e,r)=>s.jsxs(x,{className:"overflow-hidden",style:E?{backgroundColor:B.theme.colors.cardBackground,borderColor:B.border}:void 0,children:[s.jsx(g,{className:"h-48 w-full"}),s.jsxs(u,{className:"p-4",children:[s.jsx(g,{className:"h-5 w-3/4 mb-2"}),s.jsx(g,{className:"h-4 w-1/2"})]})]},r))}):0===J.length?s.jsxs("div",{className:"text-center py-16",children:[!E&&s.jsx(k,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/50"}),A||"all"!==q?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:B.textPrimary},children:"No templates found"}),s.jsx("p",{className:"text-muted-foreground mb-4",style:{color:E?B.textSecondary:void 0},children:"Try adjusting your search or filters"}),s.jsx(p,{variant:"outline",onClick:()=>{D(""),z("all")},style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:"Clear filters"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:B.textPrimary},children:"No templates available yet"}),s.jsx("p",{className:"text-muted-foreground",style:{color:E?B.textSecondary:void 0},children:"Check back soon for new practice materials!"})]})]}):s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:J.map(e=>s.jsxs(x,{className:`overflow-hidden cursor-pointer transition-all duration-300 ${E?"":"hover:shadow-xl hover:-translate-y-1"} group`,onClick:()=>V(e),style:E?{backgroundColor:B.theme.colors.cardBackground,borderColor:B.border}:void 0,children:[s.jsxs("div",{className:"h-48 relative overflow-hidden "+(E?"":"bg-muted"),style:E?{backgroundColor:"transparent",borderBottom:`1px solid ${B.border}`}:void 0,children:[s.jsx("img",{src:e.image_url,alt:e.title,className:`w-full h-full object-contain ${E?"":"group-hover:scale-105"} transition-transform duration-300`,loading:"lazy"}),!E&&s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:s.jsx(T,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-lg"})}),s.jsx(h,{className:`absolute top-2 right-2 ${E?"":H(e.category)}`,style:E?{backgroundColor:"transparent",border:`1px solid ${B.border}`,color:B.textSecondary}:void 0,children:Z(e.category)})]}),s.jsxs(u,{className:"p-4 space-y-2",children:[s.jsx("h3",{className:`font-semibold line-clamp-1 ${E?"":"group-hover:text-primary"} transition-colors`,style:{color:B.textPrimary},children:e.title}),e.description&&s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",style:{color:E?B.textSecondary:void 0},children:e.description}),e.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:e.tags.slice(0,3).map(e=>s.jsx(h,{variant:"outline",className:"text-xs",style:E?{borderColor:B.border,color:B.textSecondary}:void 0,children:e},e))})]})]},e.id))}),s.jsx("div",{className:"text-center pt-8",children:s.jsxs(p,{variant:"outline",onClick:()=>L("/ielts"),style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:[!E&&s.jsx(b,{className:"w-4 h-4 mr-2"}),E?"← ":"","Back to IELTS Portal"]})}),s.jsx(y,{open:!!G,onOpenChange:()=>O(null),children:s.jsx(j,{className:"sm:max-w-4xl max-h-[90vh]",style:E?{backgroundColor:B.theme.colors.cardBackground,borderColor:B.border}:void 0,children:G&&s.jsxs(s.Fragment,{children:[s.jsxs(v,{children:[s.jsx(f,{style:{color:B.textPrimary},children:G.title}),s.jsxs(w,{className:"flex items-center gap-2",style:{color:E?B.textSecondary:void 0},children:[s.jsx(h,{className:E?"":H(G.category),style:E?{backgroundColor:"transparent",border:`1px solid ${B.border}`,color:B.textSecondary}:void 0,children:Z(G.category)}),G.description&&s.jsxs("span",{children:["• ",G.description]})]})]}),s.jsx("div",{className:"py-4 flex justify-center",children:s.jsx("img",{src:G.image_url,alt:G.title,className:"max-w-full max-h-[60vh] object-contain rounded-lg"})}),s.jsxs("div",{className:"flex items-center justify-between",children:[G.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:G.tags.map(e=>s.jsx(h,{variant:"secondary",style:E?{backgroundColor:"transparent",border:`1px solid ${B.border}`,color:B.textSecondary}:void 0,children:e},e))}),s.jsxs(p,{variant:"outline",onClick:()=>{const e=document.createElement("a");e.href=G.image_url,e.download=G.title,e.target="_blank",e.click()},style:E?{borderColor:B.border,color:B.textPrimary}:void 0,children:[!E&&s.jsx(P,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})})})]})]})};export{L as default};
