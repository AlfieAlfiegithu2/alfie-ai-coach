import{ak as e,r as s,j as a,Z as t,B as n,C as i,a as c,a2 as d}from"./index-BQ19MijR.js";import{C as l}from"./checkbox-Dn1xFjxl.js";import{s as r}from"./supabase-DUkWVuqu.js";function o(){const{deckId:o}=e(),[m,x]=s.useState("Deck"),[h,u]=s.useState([]),[f,j]=s.useState(()=>{const e=localStorage.getItem("vocab-deck-shuffle-enabled");return!!e&&JSON.parse(e)});s.useEffect(()=>{(async()=>{if(!o)return;const{data:e}=await r.from("vocab_decks").select("name").eq("id",o).maybeSingle();x((null==e?void 0:e.name)||"Deck");const{data:s}=await r.from("vocab_cards").select("id, term, translation, pos, examples_json, is_known").eq("deck_id",o).order("created_at",{ascending:!0}).limit(50);let a=s||[];f&&(a=a.sort(()=>Math.random()-.5)),u(a)})()},[o,f]);return a.jsx(t,{title:m,showBackButton:!0,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsxs(n,{variant:f?"default":"outline",size:"sm",onClick:()=>{const e=!f;j(e),localStorage.setItem("vocab-deck-shuffle-enabled",JSON.stringify(e))},children:["ðŸ”€ ",f?"Shuffled":"Shuffle"]})}),a.jsx(i,{children:a.jsxs(c,{className:"p-0 divide-y",children:[h.map(e=>a.jsxs("div",{className:"p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[e.term," ",e.pos?a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",e.pos,")"]}):null]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:e.translation}),Array.isArray(e.examples_json)&&e.examples_json[0]&&a.jsxs("div",{className:"text-xs text-muted-foreground italic",children:["â€œ",e.examples_json[0],"â€"]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(l,{checked:!!e.is_known,onCheckedChange:()=>(async e=>{const s=!e.is_known;await r.from("vocab_cards").update({is_known:s}).eq("id",e.id),u(a=>a.map(a=>a.id===e.id?{...a,is_known:s}:a))})(e)})," ",a.jsx("span",{className:"text-xs",children:"Known"})]})})]},e.id)),0===h.length&&a.jsx("div",{className:"p-6 text-sm text-muted-foreground",children:"No cards in this deck yet."})]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(n,{asChild:!0,children:a.jsx(d,{to:`/vocabulary/test/${o}`,children:"Start Test"})}),a.jsx(n,{variant:"outline",asChild:!0,children:a.jsx(d,{to:"/vocabulary",children:"All Decks"})})]})]})})}export{o as default};
