import{r as e,j as s,L as a}from"./vendor-react-JN_hy__U.js";import{E as r,y as i,C as l,a as t,e as n,B as d,s as c}from"./index-DXpPY1B7.js";import{T as o,a as m,b as j}from"./tabs-CUO_kQ2m.js";import"./vendor-react-dom-Cb-iy8Oc.js";import"./vendor-animation-ClPlB6zo.js";import"./vendor-i18n-DlHrixAm.js";import"./vendor-ui-DG51EGkO.js";import"./vendor-utils-D5HPTFR9.js";import"./vendor-supabase-D7XYLCUu.js";import"./vendor-charts-BpOKEG9Z.js";import"./vendor-date-DT7Rq6D9.js";function u(){const{user:u}=r(),[v,x]=e.useState("all"),[h,p]=e.useState([]);e.useEffect(()=>{(async()=>{if(!u)return void p([]);const{data:e}=await c.from("vocab_decks").select("id, name, level").order("created_at",{ascending:!1}).limit(200),s=e||[],a=await Promise.all(s.map(async e=>{const{count:s}=await c.from("vocab_cards").select("id",{count:"exact",head:!0}).eq("deck_id",e.id);return{id:e.id,name:e.name,level:e.level??null,count:s||0}}));p(a)})()},[u]);const f=e.useMemo(()=>"all"===v?h:h.filter(e=>(e.level??0)===Number(v)),[h,v]);return s.jsx(i,{title:"Vocabulary Book",showBackButton:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(l,{children:s.jsx(t,{className:"p-3",children:s.jsx(o,{value:v,onValueChange:x,children:s.jsxs(m,{children:[s.jsx(j,{value:"all",children:"All"}),[1,2,3,4].map(e=>s.jsxs(j,{value:String(e),children:["L",e]},e))]})})})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.map(e=>s.jsx(l,{children:s.jsxs(t,{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.level?`Level ${e.level}`:"No level"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(n,{variant:"secondary",children:[e.count,"/20"]}),s.jsx(d,{size:"sm",asChild:!0,children:s.jsx(a,{to:`/vocabulary/deck/${e.id}`,children:"Open"})})]})]})},e.id)),0===f.length&&s.jsx("div",{className:"text-sm text-muted-foreground p-4",children:"No decks yet. They will appear here after generation."})]})]})})}export{u as default};
