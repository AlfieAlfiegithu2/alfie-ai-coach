import{ae as e,r as s,j as a,aa as l,C as i,a as t,l as r,B as c,at as d}from"./index-BG8T8mQJ.js";import{T as n,a as o,b as m}from"./tabs-DbAY-qfG.js";import{s as u}from"./supabase-DLB9cOux.js";function x(){const{user:x}=e(),[h,j]=s.useState("all"),[v,f]=s.useState([]);s.useEffect(()=>{(async()=>{if(!x)return void f([]);const{data:e}=await u.from("vocab_decks").select("id, name, level").order("created_at",{ascending:!1}).limit(200),s=e||[],a=await Promise.all(s.map(async e=>{const{count:s}=await u.from("vocab_cards").select("id",{count:"exact",head:!0}).eq("deck_id",e.id);return{id:e.id,name:e.name,level:e.level??null,count:s||0}}));f(a)})()},[x]);const p=s.useMemo(()=>"all"===h?v:v.filter(e=>(e.level??0)===Number(h)),[v,h]);return a.jsx(l,{title:"Vocabulary Book",showBackButton:!0,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(i,{children:a.jsx(t,{className:"p-3",children:a.jsx(n,{value:h,onValueChange:j,children:a.jsxs(o,{children:[a.jsx(m,{value:"all",children:"All"}),[1,2,3,4].map(e=>a.jsxs(m,{value:String(e),children:["L",e]},e))]})})})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.map(e=>a.jsx(i,{children:a.jsxs(t,{className:"p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:e.name}),a.jsx("div",{className:"text-xs text-muted-foreground",children:e.level?`Level ${e.level}`:"No level"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(r,{variant:"secondary",children:[e.count,"/20"]}),a.jsx(c,{size:"sm",asChild:!0,children:a.jsx(d,{to:`/vocabulary/deck/${e.id}`,children:"Open"})})]})]})},e.id)),0===p.length&&a.jsx("div",{className:"text-sm text-muted-foreground p-4",children:"No decks yet. They will appear here after generation."})]})]})})}export{x as default};
