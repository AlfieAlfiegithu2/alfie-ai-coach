import{c as e,a3 as a,u as s,a1 as l,r,j as n,bC as t,a5 as o,B as c,ai as i,S as d,p as m,a9 as h,q as f,s as u,t as x,bm as g,a as p,e as v,a7 as j}from"./index-DqajxfSZ.js";import{s as b}from"./supabase-DWL4C3fA.js";import{f as y}from"./d1Client-DqYBN1dB.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=e("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]),k=e("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]),w=[1,2,3,4],E=[{code:"ko",name:"í•œêµ­ì–´",flag:"ðŸ‡°ðŸ‡·"},{code:"ja",name:"æ—¥æœ¬èªž",flag:"ðŸ‡¯ðŸ‡µ"},{code:"zh",name:"ä¸­æ–‡",flag:"ðŸ‡¨ðŸ‡³"},{code:"vi",name:"Tiáº¿ng Viá»‡t",flag:"ðŸ‡»ðŸ‡³"},{code:"es",name:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸"},{code:"fr",name:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},{code:"de",name:"Deutsch",flag:"ðŸ‡©ðŸ‡ª"},{code:"pt",name:"PortuguÃªs",flag:"ðŸ‡§ðŸ‡·"},{code:"ru",name:"Ð ÑƒÑÑÐºÐ¸Ð¹",flag:"ðŸ‡·ðŸ‡º"},{code:"ar",name:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",flag:"ðŸ‡¸ðŸ‡¦"},{code:"hi",name:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",flag:"ðŸ‡®ðŸ‡³"},{code:"id",name:"Bahasa Indonesia",flag:"ðŸ‡®ðŸ‡©"}],B={1:{name:"Level 1",band:"Foundation",Icon:k},2:{name:"Level 2",band:"Elementary",Icon:N},3:{name:"Level 3",band:"Intermediate",Icon:v},4:{name:"Level 4",band:"Advanced",Icon:j}};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function C(){const{user:e,loading:v}=a(),j=s();l();const[N,k]=r.useState(1),[C,D]=r.useState([]),[M,A]=r.useState(!0),[L,F]=r.useState({}),[I,z]=r.useState("ko");r.useEffect(()=>{(async()=>{if(e)try{const{data:a}=await b.from("profiles").select("native_language").eq("id",e.id).single();(null==a?void 0:a.native_language)&&z(a.native_language)}catch(a){console.error("Error loading user preferences:",a)}})()},[e]);r.useEffect(()=>{(async()=>{A(!0);try{const e=await y({limit:1e4});console.log("VocabLevels: Loaded",e.length,"cards from D1");const a=Math.ceil(e.length/4),s=e.map((e,s)=>{let l=e.level||1;return(l>4||l<1)&&(l=Math.floor(s/a)+1,l>4&&(l=4)),{id:e.id,term:e.term,level:l}});D(s);const l={};s.forEach(e=>{const a=e.level;l[a]=(l[a]||0)+1}),F(l)}catch(e){console.error("VocabLevels: Error loading cards from D1:",e)}finally{A(!1)}})()},[e]);const S=r.useMemo(()=>{const e=C.filter(e=>e.level===N),a=[],s=Math.ceil(e.length/20);for(let l=0;l<e.length;l+=20){const r=e.slice(l,l+20),n=Math.floor(l/20)+1;a.push({id:`${N}-${n}`,name:`Test ${n}`,wordCount:r.length,level:N,testNumber:n,totalTestsInLevel:s})}return a},[C,N]);return v?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#FEF9E7]",children:n.jsx(t,{})}):n.jsx("div",{className:"min-h-screen relative bg-[#FEF9E7]",children:n.jsx("div",{className:"relative z-10",children:n.jsx(o,{title:"Vocabulary Tests",showBackButton:!1,transparentBackground:!0,children:n.jsx("div",{className:"min-h-screen py-8",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[n.jsx("div",{className:"flex items-center mb-4",children:n.jsxs(c,{variant:"ghost",onClick:()=>j("/vocabulary-book"),className:"hover:bg-[#A68B5B] hover:text-white transition-colors rounded-full px-4",style:{color:"#5D4E37"},children:[n.jsx(i,{className:"w-4 h-4 mr-2"}),"Back to Vocabulary"]})}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 bg-white/50 backdrop-blur-sm p-4 rounded-xl border border-[#E8D5A3] shadow-sm",children:[n.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:w.map(e=>{const a=N===e,s=B[e];return n.jsxs(c,{variant:a?"default":"outline",onClick:()=>k(e),className:"flex items-center gap-2 "+(a?"":"hover:bg-[#A68B5B]/10"),style:a?{backgroundColor:"#A68B5B",color:"#fff"}:{color:"#5D4E37",borderColor:"#E8D5A3",backgroundColor:"transparent"},children:[n.jsx(s.Icon,{className:"w-4 h-4"}),n.jsx("span",{children:s.name})]},e)})}),n.jsxs(d,{value:I,onValueChange:async a=>{if(z(a),e)try{await b.from("profiles").update({native_language:a}).eq("id",e.id)}catch(s){console.error("Error saving language preference:",s)}},children:[n.jsxs(m,{className:"w-[180px]",style:{backgroundColor:"rgba(255,255,255,0.8)",color:"#5D4E37",borderColor:"#E8D5A3"},children:[n.jsx(h,{className:"w-4 h-4 mr-2 opacity-70"}),n.jsx(f,{})]}),n.jsx(u,{children:E.map(e=>n.jsx(x,{value:e.code,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:e.flag}),n.jsx("span",{children:e.name})]})},e.code))})]})]}),M?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(t,{})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#5D4E37"},children:[B[N].name," - ",B[N].band]}),n.jsxs("p",{className:"text-[#8B6914]/80",children:[L[N]||0," words available"]})]}),n.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:S.map(e=>n.jsx(g,{className:"cursor-pointer h-[120px] hover:scale-105 transition-all duration-300 hover:shadow-lg flex items-center justify-center group",onClick:()=>j(`/vocabulary/test/${e.id}?lang=${I}`),style:{backgroundColor:"rgba(255,255,255,0.8)",borderColor:"#E8D5A3"},children:n.jsx(p,{className:"p-3 text-center flex flex-col items-center justify-center h-full w-full",children:n.jsx("h3",{className:"font-semibold text-base group-hover:text-[#A68B5B] transition-colors",style:{color:"#5D4E37"},children:e.name})})},e.id))})]})]})})})})})})}export{C as default};
