import{r as e,j as s,_ as a,C as t,a as i,k as d,B as c,a3 as r}from"./index-C-1CDflk.js";import{T as l,a as n,b as o}from"./tabs-CddMwXBf.js";import{s as u}from"./supabase-DUkWVuqu.js";function m(){const[m,x]=e.useState("1"),[h,v]=e.useState([]),[j,f]=e.useState(!1);return e.useEffect(()=>{(async e=>{var s;f(!0);const{data:a}=await u.auth.getUser(),t=null==(s=null==a?void 0:a.user)?void 0:s.id,{data:i,error:d}=await u.from("vocab_cards").select("deck_id, vocab_decks!inner(id,name)",{count:"exact",head:!1}).eq("level",e).or(`user_id.eq.${t||"null"},is_public.eq.true`).limit(1e3);if(d)return v([]),void f(!1);const c={};i.forEach(e=>{const s=e.vocab_decks;(null==s?void 0:s.id)&&(c[s.id]||(c[s.id]={id:s.id,name:s.name,count:0}),c[s.id].count+=1)});const r=Object.values(c).filter(e=>e.count>0);v(r),f(!1)})(Number(m))},[m]),s.jsx(a,{title:"Vocabulary â€¢ Levels",showBackButton:!0,backPath:"/vocabulary",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(t,{children:s.jsx(i,{className:"p-3",children:s.jsx(l,{value:m,onValueChange:x,children:s.jsx(n,{children:[1,2,3,4].map(e=>s.jsxs(o,{value:String(e),children:["Level ",e]},e))})})})}),j?s.jsx("div",{className:"text-sm text-muted-foreground p-4",children:"Loading..."}):0===h.length?s.jsx("div",{className:"text-sm text-muted-foreground p-4",children:"No decks at this level yet."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(e=>s.jsx(t,{className:"border-light-border",children:s.jsxs(i,{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Level ",m]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(d,{variant:"secondary",children:[e.count,"/20"]}),s.jsx(c,{size:"sm",asChild:!0,children:s.jsx(r,{to:`/vocabulary/test/${e.id}`,onClick:()=>console.log("VocabLevels: Starting test for deckId:",e.id),children:"Start Test"})})]})]})},e.id))})]})})}export{m as default};
