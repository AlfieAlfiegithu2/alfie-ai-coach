import{ao as e,r as t,au as r,ap as a,j as s,ar as n,as as o,at as c,b4 as d,b5 as i,am as l,w as u}from"./index-BwcFSPrQ.js";var f="Checkbox",[b,p]=e(f),[h,m]=b(f),k=t.forwardRef((e,c)=>{const{__scopeCheckbox:d,name:i,checked:l,defaultChecked:u,required:f,disabled:b,value:p="on",onCheckedChange:m,form:k,...v}=e,[x,j]=t.useState(null),w=r(c,e=>j(e)),E=t.useRef(!1),N=!x||(k||!!x.closest("form")),[R=!1,D]=a({prop:l,defaultProp:u,onChange:m}),P=t.useRef(R);return t.useEffect(()=>{const e=null==x?void 0:x.form;if(e){const t=()=>D(P.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[x,D]),s.jsxs(h,{scope:d,state:R,disabled:b,children:[s.jsx(n.button,{type:"button",role:"checkbox","aria-checked":g(R)?"mixed":R,"aria-required":f,"data-state":C(R),"data-disabled":b?"":void 0,disabled:b,value:p,...v,ref:w,onKeyDown:o(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:o(e.onClick,e=>{D(e=>!!g(e)||!e),N&&(E.current=e.isPropagationStopped(),E.current||e.stopPropagation())})}),N&&s.jsx(y,{control:x,bubbles:!E.current,name:i,value:p,checked:R,required:f,disabled:b,form:k,style:{transform:"translateX(-100%)"},defaultChecked:!g(u)&&u})]})});k.displayName=f;var v="CheckboxIndicator",x=t.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:a,...o}=e,d=m(v,r);return s.jsx(c,{present:a||g(d.state)||!0===d.state,children:s.jsx(n.span,{"data-state":C(d.state),"data-disabled":d.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});x.displayName=v;var y=e=>{const{control:r,checked:a,bubbles:n=!0,defaultChecked:o,...c}=e,l=t.useRef(null),u=d(a),f=i(r);t.useEffect(()=>{const e=l.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(u!==a&&r){const t=new Event("click",{bubbles:n});e.indeterminate=g(a),r.call(e,!g(a)&&a),e.dispatchEvent(t)}},[u,a,n]);const b=t.useRef(!g(a)&&a);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,...c,tabIndex:-1,ref:l,style:{...e.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function g(e){return"indeterminate"===e}function C(e){return g(e)?"indeterminate":e?"checked":"unchecked"}var j=k,w=x;const E=t.forwardRef(({className:e,...t},r)=>s.jsx(j,{ref:r,className:l("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(w,{className:l("flex items-center justify-center text-current"),children:s.jsx(u,{className:"h-4 w-4"})})}));E.displayName=j.displayName;export{E as C};
