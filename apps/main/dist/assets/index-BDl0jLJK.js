const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminDashboard-BOJl-M4J.js","assets/vendor-react-rLLBBC7n.js","assets/vendor-react-dom-CgqbTh6h.js","assets/vendor-charts-0DeywwxG.js","assets/vendor-ui-BGi_EvHx.js","assets/AdminLayout-DwaN-V0p.js","assets/vendor-i18n-gE2_DBDv.js","assets/vendor-utils-Cn4gX4Gv.js","assets/vendor-supabase-DcWtwiPX.js","assets/vendor-animation-DlplP_f6.js","assets/vendor-date-DT7Rq6D9.js","assets/AdminReading-Dv1XbNM2.js","assets/table-BylhXb36.js","assets/collapsible-ts_KamNe.js","assets/CSVImport-DRYKTZAg.js","assets/alert-DtyL8j6a.js","assets/AdminListening-U3ztXahi.js","assets/AdminWriting-BnGyU0UQ.js","assets/AdminSpeaking-CzHjobeY.js","assets/AdminIELTS-28wp7Nzz.js","assets/tabs-CFW1rRMF.js","assets/separator-C0bogF69.js","assets/alert-dialog-C3e0CSUs.js","assets/skills-NqzSOyzV.js","assets/AdminPTE-BhqDHxjy.js","assets/AdminTOEFL-Dg1pPg6A.js","assets/ModuleSelector-DUTJqBwb.js","assets/AdminTOEIC-CwNOD-hd.js","assets/AdminTOEICListening-B7RLInR4.js","assets/ImageQuestionExtractor-C0gnUKRS.js","assets/AdminTOEICReading-DVkmeDKj.js","assets/TOEICListeningTest-CK5cLy_H.js","assets/Header-B_feYwRL.js","assets/dropdown-menu-DF6eZyHV.js","assets/TOEICReadingTest-DHTAxI2k.js","assets/scroll-area-DzIX_ywb.js","assets/TOEICReadingResult-BEZyhu-s.js","assets/TOEICPortal-ByPul2WW.js","assets/AdminPTESpeakingWriting-B0_YTg8t.js","assets/AdminPTEReading-Cp9e2ZEJ.js","assets/AdminPTEListening--soXvmKu.js","assets/PTESpeakingWritingTest-CjG7xZFD.js","assets/shimmering-text-bR3LtDD_.js","assets/PTEReadingTest-CXNzc1aN.js","assets/checkbox-K7nwmoLP.js","assets/PTEListeningTest-DAIuhpyq.js","assets/AdminGeneral-Cfq34LVb.js","assets/PersonalPage-CvzsZcpL.js","assets/TestSelection-B_89kIcg.js","assets/Auth-DIhS9Qpb.js","assets/NotFound-CRi7PsFG.js","assets/CommunityPage-CCyfBVL2.js","assets/SettingsPage-B1QFRi42.js","assets/switch-JnklLIAd.js","assets/PTEPortal-cjnwzM9T.js","assets/TOEFLPortal-DiPFiqn0.js","assets/GeneralPortal-CK0VH17a.js","assets/EnhancedGeneralPortal-fMMBUcBU.js","assets/IELTSPortal-Bpmqsp-h.js","assets/IELTSSkillHub-kcxMWHsv.js","assets/IELTSSkillTests-DNGuN1FP.js","assets/AdminIELTSSkillManagement-DUPHloBC.js","assets/IELTSTestModules-C9NZmIU8.js","assets/QwenTTSTest-DFm4GCuX.js","assets/AdminTestManagement-4EI5_ilt.js","assets/AdminTestDetails-FzlE66re.js","assets/AdminSectionManagement-CfjZ3V1d.js","assets/AdminReadingManagement-Bk6ciavy.js","assets/AdminIELTSReadingDashboard-Cr7iMMPR.js","assets/AdminIELTSListening-y3I6V7VX.js","assets/AdminIELTSWriting-rnv6BlmU.js","assets/AdminIELTSWritingTest-BzhJ8ThY.js","assets/cloudflare-r2-_AvHNt83.js","assets/AdminIELTSReadingTest-oe8RqinP.js","assets/AdminIELTSSpeaking-FigabrA2.js","assets/IELTSWritingTest-BY8aPkTa.js","assets/languages-qPB6CivY.js","assets/IELTSWritingProResults-M48arg6-.js","assets/PenguinClapAnimation-DTEIJHVh.js","assets/IELTSWritingResults-RGQgl9bK.js","assets/AnnotatedWritingText-0Xj4l4db.js","assets/ReadingResults-Dbc60fBI.js","assets/ListeningResults-BV-HLFb2.js","assets/IELTSSpeakingResults-ChgfrT6g.js","assets/CustomAudioPlayer-CDBRrhfP.js","assets/IELTSSpeakingTest-D9dLuWup.js","assets/slider-BZdCL2PQ.js","assets/EnhancedReadingTest-KY7lrvNo.js","assets/Pricing-DpzFi9AQ.js","assets/AdminSkillsPractice-Bv9c02Oi.js","assets/AdminSkillManager-NVx8-HUH.js","assets/SkillPractice-DI74Lcbu.js","assets/VocabularyMapView-DRigtntm.js","assets/AISpeakingCall-tHFEqysR.js","assets/AISpeakingTutor-KCVwey-n.js","assets/AdminVocabularyTests-CZNHQnA6.js","assets/AdminVocabBook-41gexc75.js","assets/AdminVocabManager-zQrmTnDh.js","assets/AdminVocabularyTestDetail-BzGp5P0f.js","assets/VocabularyQuizPreview-kCmscHzD.js","assets/AdminGrammarTests-DsVpwWvL.js","assets/AdminGrammarTestDetail-DnwYgTO7.js","assets/AdminParaphrasingTests-DBq9rR8X.js","assets/AdminParaphrasingTestDetail-CiEXx56Y.js","assets/AdminPronunciationTests-7G4xP2na.js","assets/AdminPronunciationTestDetail-bJQNH4oY.js","assets/AdminSentenceScrambleTests-CVo--T5l.js","assets/AdminSentenceScrambleTestDetail-zMpqheuY.js","assets/AdminListeningForDetailsTests-Dku1f9hZ.js","assets/AdminListeningForDetailsTestDetail-Cef6HblZ.js","assets/VocabularyQuiz-C8cZAhQN.js","assets/CelebrationLottieAnimation-DF8jf7mv.js","assets/GrammarQuiz-C1wNNMY8.js","assets/ParaphraseQuiz-BPOdyKEK.js","assets/SentenceScrambleQuiz-D5t6iOHU.js","assets/ListeningQuiz-azph9MGS.js","assets/VocabularyMap-BYyjGJYv.js","assets/VocabularyBook-CZ9vDAvR.js","assets/d1Client-DHU_uMQx.js","assets/VocabHome-0Bp-x-Fv.js","assets/VocabDeck-BCq_6ZJP.js","assets/VocabReview-B1anJ3i_.js","assets/VocabLevels-OyVo8v80.js","assets/VocabTest-7HJxiN2O.js","assets/VocabTest-pHZLh13M.css","assets/Signup-B8u8HMxt.js","assets/AuthCallback-DLftrp43.js","assets/WritingHistory-B17aLvjX.js","assets/WritingResultsDetail-CdyY8hVr.js","assets/Pay-qXXKIQjt.js","assets/ResetPassword-Cu7kWvGQ.js","assets/MyWordBook-DRqT8wNe.js","assets/AdminAnalytics-DL1U9Cg6.js","assets/OnboardingAssessment-sHP6lFYG.js","assets/taskBank-C_v_y-ZR.js","assets/Plan-DGT7RUXZ.js","assets/BlogListing-Cl1zRqR-.js","assets/blogUtils-CwYOHMsN.js","assets/BlogDetail-CyHA7bSk.js","assets/AdminBlogManagement-C5UrVN2r.js","assets/AdminBookCreation-Bhw7QlKR.js","assets/jspdf.es.min-C-6aUN2p.js","assets/AdminTemplates-ngHfoQ-x.js","assets/AdminAffiliates-C2NUvmNI.js","assets/AdminAffiliateDetail-DEhGY8Vs.js","assets/GrammarPortal-CQ_AJ7zo.js","assets/GrammarLesson-C3jVA-B0.js","assets/AdminGrammarDashboard-eMr75G70.js","assets/AdminGrammarLessonEditor-D3FQjS1o.js","assets/BusinessPortal-BrIWOizB.js","assets/ResumeBuilder-DvRadSkV.js","assets/html2canvas.esm-BTH0Ap93.js","assets/EmailPractice-DKiJ-WdG.js","assets/InterviewPractice-Bxo5d7eN.js","assets/NCLEXPortal-ByLkOCsD.js","assets/NCLEXTest-DeHJEWBO.js","assets/AdminNCLEX-CWeKV52t.js","assets/AdminNCLEXTestDetail-BwAXLfpB.js","assets/BooksLibrary-DH9rUsl_.js","assets/BookReader-CZiL7gga.js","assets/TemplatesGallery-B3i7nEwM.js","assets/PrivacyPolicy-D44LHLP3.js","assets/RefundPolicy-BJQMGOez.js","assets/TermsOfService-BviZXzbI.js","assets/Support-DzfDfYhv.js","assets/PodcastListing-B4nnh1dI.js","assets/AdminPodcast-Bu7yfYhf.js"])))=>i.map(i=>d[i]);
var __defProp=Object.defineProperty,__defNormalProp=(e,t,s)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__publicField=(e,t,s)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,s),_a,_b;import{r as reactExports,j as jsxRuntimeExports,R as React,u as useNavigate,L as Link,b as useSearchParams,N as Navigate,c as useParams,d as useLocation,B as BrowserRouter,e as Routes,f as Route}from"./vendor-react-rLLBBC7n.js";import{R as ReactDOM,d as createRoot}from"./vendor-react-dom-CgqbTh6h.js";import{i as instance,B as Backend,a as Browser,b as initReactI18next,u as useTranslation,_ as __vitePreload,I as I18nextProvider}from"./vendor-i18n-gE2_DBDv.js";import{t as twMerge,c as clsx,V as Viewport,R as Root2,A as Action,C as Close,X,T as Title,D as Description,a as cva,P as Provider,b as Content2,d as Provider$1,e as Root3,f as Trigger,S as Slot,g as Trigger$1,I as Icon,h as ChevronDown,i as ScrollUpButton,j as ChevronUp,k as ScrollDownButton,l as Portal,m as Content2$1,n as Viewport$1,L as Label$1,o as Item,p as ItemIndicator,q as Check,r as ItemText,s as Separator,u as Root2$1,v as Value,B as Bot,w as Languages,M as Minimize2,U as User,x as Send,y as LoaderCircle,z as CirclePlus,E as Copy,G as Globe,F as Star,H as TrendingUp,J as Brain,K as Target,N as Calendar$1,O as Menu,Q as Rocket,W as Minus,Y as ArrowRight,Z as Instagram,_ as Facebook,$ as Twitter,a0 as Overlay,a1 as Content,a2 as Close$1,a3 as Title$1,a4 as Description$1,a5 as Root$1,a6 as Trigger$2,a7 as Portal$1,a8 as Root$2,a9 as ChevronLeft,aa as ChevronRight,ab as Portal$2,ac as Content2$2,ad as Root2$2,ae as Trigger$3,af as Settings,ag as CreditCard,ah as Palette,ai as TriangleAlert,aj as CircleCheck,ak as Sparkles,al as Info,am as LogOut,an as GraduationCap,ao as BookOpen,ap as FileText,aq as Briefcase,ar as Activity,as as MessageSquare,at as CircleCheckBig,au as Circle,av as Plus,aw as Volume2,ax as PenTool,ay as History,az as ArrowLeft,aA as Clock,aB as Root2$3,aC as Item2,aD as Indicator,aE as Root$3,aF as Indicator$1,aG as House,aH as RotateCcw,aI as CircleX,aJ as Headphones,aK as Pause,aL as Play,aM as EyeOff,aN as Eye,aO as Mic,aP as Square}from"./vendor-ui-BGi_EvHx.js";import{Q as QueryClient,a as QueryClientProvider}from"./vendor-utils-Cn4gX4Gv.js";import{g as getDefaultExportFromCjs,R as ResponsiveContainer,B as BarChart,C as CartesianGrid,X as XAxis,Y as YAxis,T as Tooltip$1,b as Bar,c as commonjsGlobal,L as LineChart,d as Line}from"./vendor-charts-0DeywwxG.js";import{c as createClient}from"./vendor-supabase-DcWtwiPX.js";import{m as motion,A as AnimatePresence,u as useMotionValue,a as useMotionValueEvent,b as animate}from"./vendor-animation-DlplP_f6.js";import{i as isSameDay,s as subDays,a as addDays,d as differenceInCalendarDays,b as startOfMonth,e as endOfMonth,c as startOfDay,f as addMonths,g as differenceInCalendarMonths,h as isSameMonth,j as isBefore,k as isAfter,l as getUnixTime,m as getWeeksInMonth,n as addWeeks,o as enUS,p as isSameYear,q as setMonth,r as setYear,t as startOfYear,u as max,v as min,w as endOfISOWeek,x as endOfWeek,y as startOfISOWeek,z as startOfWeek,A as getISOWeek,B as getWeek,C as format,D as isDate,E as addYears,F as subMonths}from"./vendor-date-DT7Rq6D9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count=0;function genId$1(){return count=(count+1)%Number.MAX_SAFE_INTEGER,count.toString()}const toastTimeouts=new Map,addToRemoveQueue=e=>{if(toastTimeouts.has(e))return;const t=setTimeout(()=>{toastTimeouts.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},TOAST_REMOVE_DELAY);toastTimeouts.set(e,t)},reducer=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?addToRemoveQueue(s):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(e){memoryState=reducer(memoryState,e),listeners.forEach(e=>{e(memoryState)})}function toast({...e}){const t=genId$1(),s=()=>dispatch({type:"DISMISS_TOAST",toastId:t});return dispatch({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function useToast(){const[e,t]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(t),()=>{const e=listeners.indexOf(t);e>-1&&listeners.splice(e,1)}),[e]),{...e,toast:toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}function cn(...e){return twMerge(clsx(e))}const ToastProvider=Provider,ToastViewport=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Viewport,{ref:s,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ToastViewport.displayName=Viewport.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:e,variant:t,...s},r)=>jsxRuntimeExports.jsx(Root2,{ref:r,className:cn(toastVariants({variant:t}),e),...s}));Toast.displayName=Root2.displayName;const ToastAction=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Action,{ref:s,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));ToastAction.displayName=Action.displayName;const ToastClose=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Close,{ref:s,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})}));ToastClose.displayName=Close.displayName;const ToastTitle=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Title,{ref:s,className:cn("text-sm font-semibold",e),...t}));ToastTitle.displayName=Title.displayName;const ToastDescription=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Description,{ref:s,className:cn("text-sm opacity-90",e),...t}));function Toaster$1(){const{toasts:e}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[e.map(function({id:e,title:t,description:s,action:r,...a}){return jsxRuntimeExports.jsxs(Toast,{...a,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[t&&jsxRuntimeExports.jsx(ToastTitle,{children:t}),s&&jsxRuntimeExports.jsx(ToastDescription,{children:s})]}),r,jsxRuntimeExports.jsx(ToastClose,{})]},e)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}ToastDescription.displayName=Description.displayName;var P=["light","dark"],E="(prefers-color-scheme: dark)",Q="undefined"==typeof window,L=reactExports.createContext(void 0),D={setTheme:e=>{},themes:[]},j=()=>{var e;return null!=(e=reactExports.useContext(L))?e:D},z=e=>reactExports.useContext(L)?e.children:reactExports.createElement(O,{...e}),N=["light","dark"],O=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:s=!0,enableColorScheme:r=!0,storageKey:a="theme",themes:n=N,defaultTheme:i=(s?"system":"light"),attribute:o="data-theme",value:l,children:c,nonce:d})=>{let[u,m]=reactExports.useState(()=>M(a,i)),[p,h]=reactExports.useState(()=>M(a)),x=l?Object.values(l):n,f=reactExports.useCallback(e=>{let a=e;if(!a)return;"system"===e&&s&&(a=T());let n=l?l[a]:a,c=t?_():null,d=document.documentElement;if("class"===o?(d.classList.remove(...x),n&&d.classList.add(n)):n?d.setAttribute(o,n):d.removeAttribute(o),r){let e=P.includes(i)?i:null,t=P.includes(a)?a:e;d.style.colorScheme=t}null==c||c()},[]),g=reactExports.useCallback(e=>{let t="function"==typeof e?e(e):e;m(t);try{localStorage.setItem(a,t)}catch(s){}},[e]),y=reactExports.useCallback(t=>{let r=T(t);h(r),"system"===u&&s&&!e&&f("system")},[u,e]);reactExports.useEffect(()=>{let e=window.matchMedia(E);return e.addListener(y),y(e),()=>e.removeListener(y)},[y]),reactExports.useEffect(()=>{let e=e=>{if(e.key!==a)return;let t=e.newValue||i;g(t)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[g]),reactExports.useEffect(()=>{f(null!=e?e:u)},[e,u]);let v=reactExports.useMemo(()=>({theme:u,setTheme:g,forcedTheme:e,resolvedTheme:"system"===u?p:u,themes:s?[...n,"system"]:n,systemTheme:s?p:void 0}),[u,g,e,p,s,n]);return reactExports.createElement(L.Provider,{value:v},reactExports.createElement(U$1,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:s,enableColorScheme:r,storageKey:a,themes:n,defaultTheme:i,attribute:o,value:l,children:c,attrs:x,nonce:d}),c)},U$1=reactExports.memo(({forcedTheme:e,storageKey:t,attribute:s,enableSystem:r,enableColorScheme:a,defaultTheme:n,value:i,attrs:o,nonce:l})=>{let c="system"===n,d="class"===s?`var d=document.documentElement,c=d.classList;c.remove(${o.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${s}',s='setAttribute';`,u=a?P.includes(n)&&n?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${n}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(e,t=!1,r=!0)=>{let n=i?i[e]:e,o=t?e+"|| ''":`'${n}'`,l="";return a&&r&&!t&&P.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===s?l+=t||n?`c.add(${o})`:"null":n&&(l+=`d[s](n,${o})`),l},p=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${c?"":"else{"+m(n,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(n,!1,!1)};}${u}}catch(t){}}();`;return reactExports.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),M=(e,t)=>{if(Q)return;let s;try{s=localStorage.getItem(e)||void 0}catch(r){}return s||t},_=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},T=e=>(e||(e=window.matchMedia(E)),e.matches?"dark":"light"),Ct=e=>{switch(e){case"success":return $t;case"info":return _t;case"warning":return Wt;case"error":return Ut;default:return null}},Ft=Array(12).fill(0),It=({visible:e})=>React.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},React.createElement("div",{className:"sonner-spinner"},Ft.map((e,t)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),$t=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wt=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_t=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ut=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Dt=()=>{let[e,t]=React.useState(document.hidden);return React.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e},ct=1,ut=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...r}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:ct++,n=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return n?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:s}),{...t,...e,id:a,dismissible:i,title:s}):t):this.addToast({title:s,...r,dismissible:i,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let r=e instanceof Promise?e:e(),a=void 0!==s;return r.then(async e=>{if(Ot(e)&&!e.ok){a=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,n="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:s,type:"error",message:r,description:n})}else if(void 0!==t.success){a=!1;let r="function"==typeof t.success?await t.success(e):t.success,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"success",message:r,description:n})}}).catch(async e=>{if(void 0!==t.error){a=!1;let r="function"==typeof t.error?await t.error(e):t.error,n="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"error",message:r,description:n})}}).finally(()=>{var e;a&&(this.dismiss(s),s=void 0),null==(e=t.finally)||e.call(t)}),s},this.custom=(e,t)=>{let s=(null==t?void 0:t.id)||ct++;return this.create({jsx:e(s),id:s,...t}),s},this.subscribers=[],this.toasts=[]}},v=new ut,Vt=(e,t)=>{let s=(null==t?void 0:t.id)||ct++;return v.addToast({title:e,...t,id:s}),s},Ot=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Kt=Vt,Xt=()=>v.toasts,Jt=Object.assign(Kt,{success:v.success,info:v.info,warning:v.warning,error:v.error,custom:v.custom,message:v.message,promise:v.promise,dismiss:v.dismiss,loading:v.loading},{getHistory:Xt});function ft(e,{insertAt:t}={}){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function U(e){return void 0!==e.label}ft(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var qt=3,Qt="32px",Zt=4e3,te=356,ee=14,oe=20,ae=200;function ne(...e){return e.filter(Boolean).join(" ")}var se=e=>{var t,s,r,a,n,i,o,l,c,d;let{invert:u,toast:m,unstyled:p,interacting:h,setHeights:x,visibleToasts:f,heights:g,index:y,toasts:v,expanded:E,removeToast:b,defaultRichColors:j,closeButton:R,style:_,cancelButtonStyle:w,actionButtonStyle:S,className:T="",descriptionClassName:P="",duration:C,position:k,gap:A,loadingIcon:N,expandByDefault:I,classNames:M,icons:D,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:F,cn:O}=e,[B,V]=React.useState(!1),[z,$]=React.useState(!1),[G,q]=React.useState(!1),[H,W]=React.useState(!1),[Y,X]=React.useState(0),[J,Q]=React.useState(0),K=React.useRef(null),Z=React.useRef(null),ee=0===y,te=y+1<=f,se=m.type,re=!1!==m.dismissible,ne=m.className||"",ie=m.descriptionClassName||"",le=React.useMemo(()=>g.findIndex(e=>e.toastId===m.id)||0,[g,m.id]),ce=React.useMemo(()=>{var e;return null!=(e=m.closeButton)?e:R},[m.closeButton,R]),de=React.useMemo(()=>m.duration||C||Zt,[m.duration,C]),ue=React.useRef(0),me=React.useRef(0),pe=React.useRef(0),he=React.useRef(null),[xe,fe]=k.split("-"),ge=React.useMemo(()=>g.reduce((e,t,s)=>s>=le?e:e+t.height,0),[g,le]),ye=Dt(),ve=m.invert||u,Ee="loading"===se;me.current=React.useMemo(()=>le*A+ge,[le,ge]),React.useEffect(()=>{V(!0)},[]),React.useLayoutEffect(()=>{if(!B)return;let e=Z.current,t=e.style.height;e.style.height="auto";let s=e.getBoundingClientRect().height;e.style.height=t,Q(s),x(e=>e.find(e=>e.toastId===m.id)?e.map(e=>e.toastId===m.id?{...e,height:s}:e):[{toastId:m.id,height:s,position:m.position},...e])},[B,m.title,m.description,x,m.id]);let be=React.useCallback(()=>{$(!0),X(me.current),x(e=>e.filter(e=>e.toastId!==m.id)),setTimeout(()=>{b(m)},ae)},[m,b,x,me]);return React.useEffect(()=>{if(m.promise&&"loading"===se||m.duration===1/0||"loading"===m.type)return;let e,t=de;return E||h||F&&ye?(()=>{if(pe.current<ue.current){let e=(new Date).getTime()-ue.current;t-=e}pe.current=(new Date).getTime()})():t!==1/0&&(ue.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=m.onAutoClose)||e.call(m,m),be()},t)),()=>clearTimeout(e)},[E,h,I,m,de,be,m.promise,se,F,ye]),React.useEffect(()=>{let e=Z.current;if(e){let t=e.getBoundingClientRect().height;return Q(t),x(e=>[{toastId:m.id,height:t,position:m.position},...e]),()=>x(e=>e.filter(e=>e.toastId!==m.id))}},[x,m.id]),React.useEffect(()=>{m.delete&&be()},[be,m.delete]),React.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Z,className:O(T,ne,null==M?void 0:M.toast,null==(t=null==m?void 0:m.classNames)?void 0:t.toast,null==M?void 0:M.default,null==M?void 0:M[se],null==(s=null==m?void 0:m.classNames)?void 0:s[se]),"data-sonner-toast":"","data-rich-colors":null!=(r=m.richColors)?r:j,"data-styled":!(m.jsx||m.unstyled||p),"data-mounted":B,"data-promise":!!m.promise,"data-removed":z,"data-visible":te,"data-y-position":xe,"data-x-position":fe,"data-index":y,"data-front":ee,"data-swiping":G,"data-dismissible":re,"data-type":se,"data-invert":ve,"data-swipe-out":H,"data-expanded":!!(E||I&&B),style:{"--index":y,"--toasts-before":y,"--z-index":v.length-y,"--offset":`${z?Y:me.current}px`,"--initial-height":I?"auto":`${J}px`,..._,...m.style},onPointerDown:e=>{Ee||!re||(K.current=new Date,X(me.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(q(!0),he.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s,r;if(H||!re)return;he.current=null;let a=Number((null==(e=Z.current)?void 0:e.style.getPropertyValue("--swipe-amount").replace("px",""))||0),n=(new Date).getTime()-(null==(t=K.current)?void 0:t.getTime()),i=Math.abs(a)/n;if(Math.abs(a)>=oe||i>.11)return X(me.current),null==(s=m.onDismiss)||s.call(m,m),be(),void W(!0);null==(r=Z.current)||r.style.setProperty("--swipe-amount","0px"),q(!1)},onPointerMove:e=>{var t;if(!he.current||!re)return;let s=e.clientY-he.current.y,r=e.clientX-he.current.x,a=("top"===xe?Math.min:Math.max)(0,s),n="touch"===e.pointerType?10:2;Math.abs(a)>n?null==(t=Z.current)||t.style.setProperty("--swipe-amount",`${s}px`):Math.abs(r)>n&&(he.current=null)}},ce&&!m.jsx?React.createElement("button",{"aria-label":L,"data-disabled":Ee,"data-close-button":!0,onClick:Ee||!re?()=>{}:()=>{var e;be(),null==(e=m.onDismiss)||e.call(m,m)},className:O(null==M?void 0:M.closeButton,null==(a=null==m?void 0:m.classNames)?void 0:a.closeButton)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||React.isValidElement(m.title)?m.jsx||m.title:React.createElement(React.Fragment,null,se||m.icon||m.promise?React.createElement("div",{"data-icon":"",className:O(null==M?void 0:M.icon,null==(n=null==m?void 0:m.classNames)?void 0:n.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||(null!=D&&D.loading?React.createElement("div",{className:"sonner-loader","data-visible":"loading"===se},D.loading):N?React.createElement("div",{className:"sonner-loader","data-visible":"loading"===se},N):React.createElement(It,{visible:"loading"===se})):null,"loading"!==m.type?m.icon||(null==D?void 0:D[se])||Ct(se):null):null,React.createElement("div",{"data-content":"",className:O(null==M?void 0:M.content,null==(i=null==m?void 0:m.classNames)?void 0:i.content)},React.createElement("div",{"data-title":"",className:O(null==M?void 0:M.title,null==(o=null==m?void 0:m.classNames)?void 0:o.title)},m.title),m.description?React.createElement("div",{"data-description":"",className:O(P,ie,null==M?void 0:M.description,null==(l=null==m?void 0:m.classNames)?void 0:l.description)},m.description):null),React.isValidElement(m.cancel)?m.cancel:m.cancel&&U(m.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||w,onClick:e=>{var t,s;U(m.cancel)&&re&&(null==(s=(t=m.cancel).onClick)||s.call(t,e),be())},className:O(null==M?void 0:M.cancelButton,null==(c=null==m?void 0:m.classNames)?void 0:c.cancelButton)},m.cancel.label):null,React.isValidElement(m.action)?m.action:m.action&&U(m.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||S,onClick:e=>{var t,s;U(m.action)&&(e.defaultPrevented||(null==(s=(t=m.action).onClick)||s.call(t,e),be()))},className:O(null==M?void 0:M.actionButton,null==(d=null==m?void 0:m.classNames)?void 0:d.actionButton)},m.action.label):null))};function Ht(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}var Te=e=>{let{invert:t,position:s="bottom-right",hotkey:r=["altKey","KeyT"],expand:a,closeButton:n,className:i,offset:o,theme:l="light",richColors:c,duration:d,style:u,visibleToasts:m=qt,toastOptions:p,dir:h=Ht(),gap:x=ee,loadingIcon:f,icons:g,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:E,cn:b=ne}=e,[j,R]=React.useState([]),_=React.useMemo(()=>Array.from(new Set([s].concat(j.filter(e=>e.position).map(e=>e.position)))),[j,s]),[w,S]=React.useState([]),[T,P]=React.useState(!1),[C,k]=React.useState(!1),[A,N]=React.useState("system"!==l?l:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=React.useRef(null),M=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=React.useRef(null),L=React.useRef(!1),F=React.useCallback(e=>{var t;null!=(t=j.find(t=>t.id===e.id))&&t.delete||v.dismiss(e.id),R(t=>t.filter(({id:t})=>t!==e.id))},[j]);return React.useEffect(()=>v.subscribe(e=>{e.dismiss?R(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{ReactDOM.flushSync(()=>{R(t=>{let s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),{...t[s],...e},...t.slice(s+1)]:[e,...t]})})})}),[]),React.useEffect(()=>{"system"===l?("system"===l&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:e})=>{N(e?"dark":"light")})):N(l)},[l]),React.useEffect(()=>{j.length<=1&&P(!1)},[j]),React.useEffect(()=>{let e=e=>{var t,s;r.every(t=>e[t]||e.code===t)&&(P(!0),null==(t=I.current)||t.focus()),"Escape"===e.code&&(document.activeElement===I.current||null!=(s=I.current)&&s.contains(document.activeElement))&&P(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),React.useEffect(()=>{if(I.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,L.current=!1)}},[I.current]),j.length?React.createElement("section",{"aria-label":`${y} ${M}`,tabIndex:-1},_.map((e,s)=>{var r;let[l,y]=e.split("-");return React.createElement("ol",{key:e,dir:"auto"===h?Ht():h,tabIndex:-1,ref:I,className:i,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":l,"data-x-position":y,style:{"--front-toast-height":`${(null==(r=w[0])?void 0:r.height)||0}px`,"--offset":"number"==typeof o?`${o}px`:o||Qt,"--width":`${te}px`,"--gap":`${x}px`,...u},onBlur:e=>{L.current&&!e.currentTarget.contains(e.relatedTarget)&&(L.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||L.current||(L.current=!0,D.current=e.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{C||P(!1)},onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||k(!0)},onPointerUp:()=>k(!1)},j.filter(t=>!t.position&&0===s||t.position===e).map((s,r)=>{var i,o;return React.createElement(se,{key:s.id,icons:g,index:r,toast:s,defaultRichColors:c,duration:null!=(i=null==p?void 0:p.duration)?i:d,className:null==p?void 0:p.className,descriptionClassName:null==p?void 0:p.descriptionClassName,invert:t,visibleToasts:m,closeButton:null!=(o=null==p?void 0:p.closeButton)?o:n,interacting:C,position:e,style:null==p?void 0:p.style,unstyled:null==p?void 0:p.unstyled,classNames:null==p?void 0:p.classNames,cancelButtonStyle:null==p?void 0:p.cancelButtonStyle,actionButtonStyle:null==p?void 0:p.actionButtonStyle,removeToast:F,toasts:j.filter(e=>e.position==s.position),heights:w.filter(e=>e.position==s.position),setHeights:S,expandByDefault:a,gap:x,loadingIcon:f,expanded:T,pauseWhenPageIsHidden:E,cn:b})}))})):null};const Toaster=({...e})=>{const{theme:t="system"}=j();return jsxRuntimeExports.jsx(Te,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},TooltipProvider=Provider$1,Tooltip=Root3,TooltipTrigger=Trigger,TooltipContent=reactExports.forwardRef(({className:e,sideOffset:t=4,...s},r)=>jsxRuntimeExports.jsx(Content2,{ref:r,sideOffset:t,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));TooltipContent.displayName=Content2.displayName;var hasElementType="undefined"!=typeof Element,hasMap="function"==typeof Map,hasSet="function"==typeof Set,hasArrayBuffer="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var s,r,a,n;if(Array.isArray(e)){if((s=e.length)!=t.length)return!1;for(r=s;0!==r--;)if(!equal(e[r],t[r]))return!1;return!0}if(hasMap&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;for(n=e.entries();!(r=n.next()).done;)if(!equal(r.value[1],t.get(r.value[0])))return!1;return!0}if(hasSet&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((s=e.length)!=t.length)return!1;for(r=s;0!==r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((s=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=s;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;if(hasElementType&&e instanceof Element)return!1;for(r=s;0!==r--;)if(("_owner"!==a[r]&&"__v"!==a[r]&&"__o"!==a[r]||!e.$$typeof)&&!equal(e[a[r]],t[a[r]]))return!1;return!0}return e!=e&&t!=t}var reactFastCompare=function(e,t){try{return equal(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const fastCompare=getDefaultExportFromCjs(reactFastCompare);var invariant=function(e,t,s,r,a,n,i,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[s,r,a,n,i,o],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}},browser=invariant;const invariant$1=getDefaultExportFromCjs(browser);var shallowequal=function(e,t,s,r){var a=s?s.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<n.length;l++){var c=n[l];if(!o(c))return!1;var d=e[c],u=t[c];if(!1===(a=s?s.call(r,d,u,c):void 0)||void 0===a&&d!==u)return!1}return!0};const shallowEqual=getDefaultExportFromCjs(shallowequal);var TAG_NAMES=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(TAG_NAMES||{}),SEO_PRIORITY_TAGS={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},VALID_TAG_NAMES=Object.values(TAG_NAMES),REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},HTML_TAG_MAP=Object.entries(REACT_TAG_MAP).reduce((e,[t,s])=>(e[s]=t,e),{}),HELMET_ATTRIBUTE="data-rh",HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},getInnermostProperty=(e,t)=>{for(let s=e.length-1;s>=0;s-=1){const r=e[s];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},getTitleFromPropsList=e=>{let t=getInnermostProperty(e,"title");const s=getInnermostProperty(e,HELMET_PROPS.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),s&&t)return s.replace(/%s/g,()=>t);const r=getInnermostProperty(e,HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0},getOnChangeClientState=e=>getInnermostProperty(e,HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||(()=>{}),getAttributesFromPropsList=(e,t)=>t.filter(t=>void 0!==t[e]).map(t=>t[e]).reduce((e,t)=>({...e,...t}),{}),getBaseTagFromPropsList=(e,t)=>t.filter(e=>void 0!==e.base).map(e=>e.base).reverse().reduce((t,s)=>{if(!t.length){const r=Object.keys(s);for(let a=0;a<r.length;a+=1){const n=r[a].toLowerCase();if(-1!==e.indexOf(n)&&s[n])return t.concat(s)}}return t},[]),warn$1=e=>console&&"function"==typeof console.warn&&console.warn(e),getTagsFromPropsList=(e,t,s)=>{const r={};return s.filter(t=>!!Array.isArray(t[e])||(void 0!==t[e]&&warn$1(`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`),!1)).map(t=>t[e]).reverse().reduce((e,s)=>{const a={};s.filter(e=>{let s;const n=Object.keys(e);for(let r=0;r<n.length;r+=1){const a=n[r],i=a.toLowerCase();-1===t.indexOf(i)||"rel"===s&&"canonical"===e[s].toLowerCase()||"rel"===i&&"stylesheet"===e[i].toLowerCase()||(s=i),-1===t.indexOf(a)||"innerHTML"!==a&&"cssText"!==a&&"itemprop"!==a||(s=a)}if(!s||!e[s])return!1;const i=e[s].toLowerCase();return r[s]||(r[s]={}),a[s]||(a[s]={}),!r[s][i]&&(a[s][i]=!0,!0)}).reverse().forEach(t=>e.push(t));const n=Object.keys(a);for(let t=0;t<n.length;t+=1){const e=n[t],s={...r[e],...a[e]};r[e]=s}return e},[]).reverse()},getAnyTrueFromPropsList=(e,t)=>{if(Array.isArray(e)&&e.length)for(let s=0;s<e.length;s+=1){if(e[s][t])return!0}return!1},reducePropsToState=e=>({baseTag:getBaseTagFromPropsList(["href"],e),bodyAttributes:getAttributesFromPropsList("bodyAttributes",e),defer:getInnermostProperty(e,HELMET_PROPS.DEFER),encode:getInnermostProperty(e,HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:getAttributesFromPropsList("htmlAttributes",e),linkTags:getTagsFromPropsList("link",["rel","href"],e),metaTags:getTagsFromPropsList("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:getTagsFromPropsList("noscript",["innerHTML"],e),onChangeClientState:getOnChangeClientState(e),scriptTags:getTagsFromPropsList("script",["src","innerHTML"],e),styleTags:getTagsFromPropsList("style",["cssText"],e),title:getTitleFromPropsList(e),titleAttributes:getAttributesFromPropsList("titleAttributes",e),prioritizeSeoTags:getAnyTrueFromPropsList(e,HELMET_PROPS.PRIORITIZE_SEO_TAGS)}),flattenArray=e=>Array.isArray(e)?e.join(""):e,checkIfPropsMatch=(e,t)=>{const s=Object.keys(e);for(let r=0;r<s.length;r+=1)if(t[s[r]]&&t[s[r]].includes(e[s[r]]))return!0;return!1},prioritizer=(e,t)=>Array.isArray(e)?e.reduce((e,s)=>(checkIfPropsMatch(s,t)?e.priority.push(s):e.default.push(s),e),{priority:[],default:[]}):{default:e,priority:[]},without=(e,t)=>({...e,[t]:void 0}),SELF_CLOSING_TAGS=["noscript","script","style"],encodeSpecialCharacters=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),generateElementAttributesAsString=e=>Object.keys(e).reduce((t,s)=>{const r=void 0!==e[s]?`${s}="${e[s]}"`:`${s}`;return t?`${t} ${r}`:r},""),generateTitleAsString=(e,t,s,r)=>{const a=generateElementAttributesAsString(s),n=flattenArray(t);return a?`<${e} ${HELMET_ATTRIBUTE}="true" ${a}>${encodeSpecialCharacters(n,r)}</${e}>`:`<${e} ${HELMET_ATTRIBUTE}="true">${encodeSpecialCharacters(n,r)}</${e}>`},generateTagsAsString=(e,t,s=!0)=>t.reduce((t,r)=>{const a=r,n=Object.keys(a).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const r=void 0===a[t]?t:`${t}="${encodeSpecialCharacters(a[t],s)}"`;return e?`${e} ${r}`:r},""),i=a.innerHTML||a.cssText||"",o=-1===SELF_CLOSING_TAGS.indexOf(e);return`${t}<${e} ${HELMET_ATTRIBUTE}="true" ${n}${o?"/>":`>${i}</${e}>`}`},""),convertElementAttributesToReactProps=(e,t={})=>Object.keys(e).reduce((t,s)=>(t[REACT_TAG_MAP[s]||s]=e[s],t),t),generateTitleAsReactComponent=(e,t,s)=>{const r=convertElementAttributesToReactProps(s,{key:t,[HELMET_ATTRIBUTE]:!0});return[React.createElement("title",r,t)]},generateTagsAsReactComponent=(e,t)=>t.map((t,s)=>{const r={key:s,[HELMET_ATTRIBUTE]:!0};return Object.keys(t).forEach(e=>{const s=REACT_TAG_MAP[e]||e;if("innerHTML"===s||"cssText"===s){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[s]=t[e]}),React.createElement(e,r)}),getMethodsForTag=(e,t,s=!0)=>{switch(e){case"title":return{toComponent:()=>generateTitleAsReactComponent(e,t.title,t.titleAttributes),toString:()=>generateTitleAsString(e,t.title,t.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>convertElementAttributesToReactProps(t),toString:()=>generateElementAttributesAsString(t)};default:return{toComponent:()=>generateTagsAsReactComponent(e,t),toString:()=>generateTagsAsString(e,t,s)}}},getPriorityMethods=({metaTags:e,linkTags:t,scriptTags:s,encode:r})=>{const a=prioritizer(e,SEO_PRIORITY_TAGS.meta),n=prioritizer(t,SEO_PRIORITY_TAGS.link),i=prioritizer(s,SEO_PRIORITY_TAGS.script);return{priorityMethods:{toComponent:()=>[...generateTagsAsReactComponent("meta",a.priority),...generateTagsAsReactComponent("link",n.priority),...generateTagsAsReactComponent("script",i.priority)],toString:()=>`${getMethodsForTag("meta",a.priority,r)} ${getMethodsForTag("link",n.priority,r)} ${getMethodsForTag("script",i.priority,r)}`},metaTags:a.default,linkTags:n.default,scriptTags:i.default}},mapStateOnServer=e=>{const{baseTag:t,bodyAttributes:s,encode:r=!0,htmlAttributes:a,noscriptTags:n,styleTags:i,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:u,scriptTags:m}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:d,metaTags:u,scriptTags:m}=getPriorityMethods(e)),{priority:p,base:getMethodsForTag("base",t,r),bodyAttributes:getMethodsForTag("bodyAttributes",s,r),htmlAttributes:getMethodsForTag("htmlAttributes",a,r),link:getMethodsForTag("link",d,r),meta:getMethodsForTag("meta",u,r),noscript:getMethodsForTag("noscript",n,r),script:getMethodsForTag("script",m,r),style:getMethodsForTag("style",i,r),title:getMethodsForTag("title",{title:o,titleAttributes:l},r)}},server_default=mapStateOnServer,instances=[],isDocument=!("undefined"==typeof window||!window.document||!window.document.createElement),HelmetData=class{constructor(e,t){__publicField(this,"instances",[]),__publicField(this,"canUseDOM",isDocument),__publicField(this,"context"),__publicField(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?instances:this.instances,add:e=>{(this.canUseDOM?instances:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?instances:this.instances).indexOf(e);(this.canUseDOM?instances:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=server_default({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},defaultValue={},Context=React.createContext(defaultValue),HelmetProvider=(_a=class extends reactExports.Component{constructor(e){super(e),__publicField(this,"helmetData"),this.helmetData=new HelmetData(this.props.context||{},_a.canUseDOM)}render(){return React.createElement(Context.Provider,{value:this.helmetData.value},this.props.children)}},__publicField(_a,"canUseDOM",isDocument),_a),updateTags=(e,t)=>{const s=document.head||document.querySelector("head"),r=s.querySelectorAll(`${e}[${HELMET_ATTRIBUTE}]`),a=[].slice.call(r),n=[];let i;return t&&t.length&&t.forEach(t=>{const s=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)s.innerHTML=t.innerHTML;else if("cssText"===e)s.styleSheet?s.styleSheet.cssText=t.cssText:s.appendChild(document.createTextNode(t.cssText));else{const r=e,a=void 0===t[r]?"":t[r];s.setAttribute(e,a)}s.setAttribute(HELMET_ATTRIBUTE,"true"),a.some((e,t)=>(i=t,s.isEqualNode(e)))?a.splice(i,1):n.push(s)}),a.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),n.forEach(e=>s.appendChild(e)),{oldTags:a,newTags:n}},updateAttributes=(e,t)=>{const s=document.getElementsByTagName(e)[0];if(!s)return;const r=s.getAttribute(HELMET_ATTRIBUTE),a=r?r.split(","):[],n=[...a],i=Object.keys(t);for(const o of i){const e=t[o]||"";s.getAttribute(o)!==e&&s.setAttribute(o,e),-1===a.indexOf(o)&&a.push(o);const r=n.indexOf(o);-1!==r&&n.splice(r,1)}for(let o=n.length-1;o>=0;o-=1)s.removeAttribute(n[o]);a.length===n.length?s.removeAttribute(HELMET_ATTRIBUTE):s.getAttribute(HELMET_ATTRIBUTE)!==i.join(",")&&s.setAttribute(HELMET_ATTRIBUTE,i.join(","))},updateTitle=(e,t)=>{void 0!==e&&document.title!==e&&(document.title=flattenArray(e)),updateAttributes("title",t)},commitTagChanges=(e,t)=>{const{baseTag:s,bodyAttributes:r,htmlAttributes:a,linkTags:n,metaTags:i,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:d,title:u,titleAttributes:m}=e;updateAttributes("body",r),updateAttributes("html",a),updateTitle(u,m);const p={baseTag:updateTags("base",s),linkTags:updateTags("link",n),metaTags:updateTags("meta",i),noscriptTags:updateTags("noscript",o),scriptTags:updateTags("script",c),styleTags:updateTags("style",d)},h={},x={};Object.keys(p).forEach(e=>{const{newTags:t,oldTags:s}=p[e];t.length&&(h[e]=t),s.length&&(x[e]=p[e].oldTags)}),t&&t(),l(e,h,x)},_helmetCallback=null,handleStateChangeOnClient=e=>{_helmetCallback&&cancelAnimationFrame(_helmetCallback),e.defer?_helmetCallback=requestAnimationFrame(()=>{commitTagChanges(e,()=>{_helmetCallback=null})}):(commitTagChanges(e),_helmetCallback=null)},client_default=handleStateChangeOnClient,HelmetDispatcher=class extends reactExports.Component{constructor(){super(...arguments),__publicField(this,"rendered",!1)}shouldComponentUpdate(e){return!shallowEqual(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let s=null;const r=reducePropsToState(e.get().map(e=>{const t={...e.props};return delete t.context,t}));HelmetProvider.canUseDOM?client_default(r):server_default&&(s=server_default(r)),t(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Helmet=(_b=class extends reactExports.Component{shouldComponentUpdate(e){return!fastCompare(without(this.props,"helmetData"),without(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,s,r){return{...t,[e.type]:[...t[e.type]||[],{...s,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,s,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...s}};case"body":return{...t,bodyAttributes:{...s}};case"html":return{...t,htmlAttributes:{...s}};default:return{...t,[e.type]:{...s}}}}mapArrayTypeChildrenToProps(e,t){let s={...t};return Object.keys(e).forEach(t=>{s={...s,[t]:e[t]}}),s}warnOnInvalidChildren(e,t){return invariant$1(VALID_TAG_NAMES.some(t=>e.type===t),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${VALID_TAG_NAMES.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),invariant$1(!t||"string"==typeof t||Array.isArray(t)&&!t.some(e=>"string"!=typeof e),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let s={};return React.Children.forEach(e,e=>{if(!e||!e.props)return;const{children:r,...a}=e.props,n=Object.keys(a).reduce((e,t)=>(e[HTML_TAG_MAP[t]||t]=a[t],e),{});let{type:i}=e;switch("symbol"==typeof i?i=i.toString():this.warnOnInvalidChildren(e,r),i){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(e,s,n,r);break;default:t=this.mapObjectTypeChildren(e,t,n,r)}}),this.mapArrayTypeChildrenToProps(s,t)}render(){const{children:e,...t}=this.props;let s={...t},{helmetData:r}=t;if(e&&(s=this.mapChildrenToProps(e,s)),r&&!(r instanceof HelmetData)){r=new HelmetData(r.context,!0),delete s.helmetData}return r?React.createElement(HelmetDispatcher,{...s,context:r.value}):React.createElement(Context.Consumer,null,e=>React.createElement(HelmetDispatcher,{...s,context:e}))}},__publicField(_b,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),_b);function normalizeLanguageCode$1(e){if(!e)return"en";return e.split("-")[0].toLowerCase()}const SUPPORTED_LANGUAGES=["en","ko","zh","ja","es","pt","fr","de","ru","hi","vi","ar","bn","ur","id","tr","fa","ta","ne","th","yue","ms","kk","sr","tl"];instance.use(Backend).use(Browser).use(initReactI18next).init({fallbackLng:"en",debug:!1,detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"ui_language",convertDetectedLanguage:e=>{const t=normalizeLanguageCode$1(e);return SUPPORTED_LANGUAGES.includes(t)?t:"en"}},backend:{loadPath:(e,t)=>{const s=normalizeLanguageCode$1(e[0]);return`${"/".endsWith("/")?"/":"//"}locales/${s}.json`},requestOptions:{cache:"default"},allowMultiLoading:!1},preload:["en"],interpolation:{escapeValue:!1},parseMissingKeyHandler:e=>{try{const t=String(e||"").split(".").pop()||"";return t?t.replace(/[-_]/g," "):""}catch{return""}},react:{useSuspense:!1,bindI18n:"languageChanged loaded",bindI18nStore:"added removed",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","em"]},initImmediate:!1}),instance.on("failedLoading",(e,t,s)=>{console.warn(`Failed loading ${t} for ${e}: ${s}`)}),instance.on("missingKey",(e,t,s,r)=>{console.warn(`Missing translation key: ${s} for ${e.join(", ")}`)});const themes={note:{name:"note",label:"Note",description:"Warm paper-like appearance",colors:{background:"#FEF9E7",backgroundGradient:"linear-gradient(to bottom, #FEF9E7 0%, #FDF6E3 100%)",backgroundOverlay:"rgba(254, 249, 231, 0.7)",backgroundImageColor:"#F5E6D3",border:"#E8D5A3",textPrimary:"#5D4E37",textSecondary:"#8B6914",textAccent:"#A68B5B",cardBackground:"#FEF9E7",cardBorder:"#E8D5A3",hoverBackground:"rgba(255, 255, 255, 0.6)",shadow:"0 2px 8px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.5)",chartLine:"#8B6914",chartTarget:"#C97D60",buttonPrimary:"#A68B5B",buttonPrimaryHover:"#8B6914"},styles:{cardStyle:{background:"linear-gradient(to bottom, #FEF9E7 0%, #FDF6E3 100%)",boxShadow:"0 2px 8px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.5)"}}},glassmorphism:{name:"glassmorphism",label:"Glassmorphism",description:"Frosted glass effect",colors:{background:"rgba(255, 255, 255, 0.4)",backgroundOverlay:"rgba(255, 255, 255, 0.6)",backgroundImageColor:"#a2d2ff",border:"rgba(255, 255, 255, 0.5)",textPrimary:"#0f172a",textSecondary:"#334155",textAccent:"#475569",cardBackground:"rgba(255, 255, 255, 0.5)",cardBorder:"rgba(255, 255, 255, 0.5)",hoverBackground:"rgba(255, 255, 255, 0.6)",shadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15)",chartLine:"rgb(59, 130, 246)",chartTarget:"rgb(239, 68, 68)",buttonPrimary:"#3b82f6",buttonPrimaryHover:"#2563eb"},styles:{cardStyle:{background:"rgba(255, 255, 255, 0.45)",backdropFilter:"blur(16px)",WebkitBackdropFilter:"blur(16px)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15)",border:"1px solid rgba(255, 255, 255, 0.18)"}}},dark:{name:"dark",label:"Dark",description:"Dark mode theme",colors:{background:"#0f172a",backgroundGradient:"linear-gradient(to bottom, #1e293b 0%, #0f172a 100%)",backgroundOverlay:"rgba(15, 23, 42, 0.9)",backgroundImageColor:"#0f172a",border:"#334155",textPrimary:"#f1f5f9",textSecondary:"#cbd5e1",textAccent:"#94a3b8",cardBackground:"#1e293b",cardBorder:"#334155",hoverBackground:"#334155",shadow:"0 4px 12px rgba(0,0,0,0.3)",chartLine:"#60a5fa",chartTarget:"#f87171",buttonPrimary:"#64748b",buttonPrimaryHover:"#475569"},styles:{cardStyle:{background:"linear-gradient(to bottom, #1e293b 0%, #0f172a 100%)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}}},minimalist:{name:"minimalist",label:"Minimalist",description:"Clean and simple",colors:{background:"#ffffff",backgroundOverlay:"rgba(255, 255, 255, 0.9)",backgroundImageColor:"#f9fafb",border:"#e5e7eb",textPrimary:"#111827",textSecondary:"#6b7280",textAccent:"#9ca3af",cardBackground:"#ffffff",cardBorder:"#e5e7eb",hoverBackground:"#f9fafb",shadow:"0 1px 3px rgba(0,0,0,0.1)",chartLine:"#3b82f6",chartTarget:"#ef4444",buttonPrimary:"#2563eb",buttonPrimaryHover:"#1d4ed8"},styles:{cardStyle:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)"}}}},getTheme=(e="note")=>themes[e]||themes.note,getStoredTheme=()=>{if("undefined"==typeof window)return"note";return localStorage.getItem("dashboard-theme")||"note"},saveTheme=e=>{"undefined"!=typeof window&&localStorage.setItem("dashboard-theme",e)},SUPABASE_URL="https://cuumxmfzhwljylbdlflj.supabase.co",SUPABASE_PUBLISHABLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN1dW14bWZ6aHdsanlsYmRsZmxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1MTkxMjEsImV4cCI6MjA2OTA5NTEyMX0.8jqO_ciOttSxSLZnKY0i5oJmEn79ROF53TjUMYhNemI",REQUEST_TIMEOUT=6e4,fetchWithTimeout=async(e,t)=>{const s=new AbortController,r=setTimeout(()=>s.abort(),REQUEST_TIMEOUT);try{return await fetch(e,{...t,signal:s.signal})}catch(a){if("AbortError"!==a.name&&("Failed to fetch"===a.message||a.message.includes("ERR_CONNECTION_CLOSED")||a.message.includes("NetworkError")))return console.log("Retrying fetch due to connection error...",a.message),await new Promise(e=>setTimeout(e,1e3)),fetch(e,t);throw a}finally{clearTimeout(r)}},supabase=createClient(SUPABASE_URL,SUPABASE_PUBLISHABLE_KEY,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{fetch:fetchWithTimeout,headers:{"X-Client-Info":"supabase-js-web"}}}),adminSupabase=supabase,client=Object.freeze(Object.defineProperty({__proto__:null,adminSupabase:adminSupabase,supabase:supabase},Symbol.toStringTag,{value:"Module"}));function normalizeLanguageCode(e){if(!e)return"en";const t=String(e).toLowerCase(),s=getSupportedLanguages().map(e=>e.code);if(s.includes(t))return t;const r=t.split("-")[0];if(s.includes(r))return r;return{english:"en",korean:"ko","":"ko",chinese:"zh","":"zh","chinese (simplified)":"zh",taiwanese:"zh-TW","":"zh-TW","chinese (traditional)":"zh-TW","traditional chinese":"zh-TW",japanese:"ja","":"ja",spanish:"es","espaol":"es",portuguese:"pt","portugus":"pt",french:"fr","franais":"fr",german:"de",deutsch:"de",russian:"ru","":"ru",hindi:"hi","":"hi",vietnamese:"vi","ting vit":"vi",arabic:"ar","":"ar",bengali:"bn","":"bn",urdu:"ur","":"ur",indonesian:"id","bahasa indonesia":"id",turkish:"tr","trke":"tr",persian:"fa",farsi:"fa","":"fa",tamil:"ta","":"ta",nepali:"ne","":"ne",thai:"th","":"th",cantonese:"yue","":"yue",malay:"ms","bahasa melayu":"ms",kazakh:"kk"," ":"kk","":"kk",italian:"it",italiano:"it",telugu:"te","":"te",marathi:"mr","":"mr",gujarati:"gu","":"gu",kannada:"kn","":"kn",malayalam:"ml","":"ml",punjabi:"pa","":"pa",odia:"or","":"or",assamese:"as","":"as",swahili:"sw",kiswahili:"sw",hausa:"ha",yoruba:"yo","yorb":"yo",igbo:"ig","ss gb":"ig",amharic:"am","":"am",zulu:"zu",isizulu:"zu",afrikaans:"af",polish:"pl",polski:"pl",ukrainian:"uk","":"uk",romanian:"ro","romn":"ro",dutch:"nl",nederlands:"nl",greek:"el","":"el",czech:"cs","etina":"cs",hungarian:"hu",magyar:"hu",swedish:"sv",svenska:"sv",bulgarian:"bg","":"bg",serbian:"sr","":"sr",croatian:"hr",hrvatski:"hr",slovak:"sk","slovenina":"sk",norwegian:"no",norsk:"no",danish:"da",dansk:"da",finnish:"fi",suomi:"fi",albanian:"sq",shqip:"sq",slovenian:"sl","slovenina":"sl",estonian:"et",eesti:"et",latvian:"lv","latvieu":"lv",lithuanian:"lt","lietuvi":"lt",uzbek:"uz","ozbek":"uz",azeri:"az",azerbaijani:"az","azrbaycan":"az",mongolian:"mn","":"mn",hebrew:"he","":"he",pashto:"ps","":"ps",georgian:"ka","":"ka",armenian:"hy","":"hy",filipino:"tl",tagalog:"tl",burmese:"my","":"my",khmer:"km","":"km",sinhala:"si","":"si"}[t]||"en"}function getSupportedLanguages(){return[{code:"en",name:"English"},{code:"zh",name:""},{code:"zh-TW",name:""},{code:"hi",name:""},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"ar",name:""},{code:"bn",name:""},{code:"pt",name:"Portugus"},{code:"ru",name:""},{code:"ja",name:""},{code:"ur",name:""},{code:"id",name:"Bahasa Indonesia"},{code:"de",name:"Deutsch"},{code:"vi",name:"Ting Vit"},{code:"tr",name:"Trke"},{code:"it",name:"Italiano"},{code:"ko",name:""},{code:"fa",name:""},{code:"ta",name:""},{code:"th",name:""},{code:"yue",name:""},{code:"ms",name:"Bahasa Melayu"},{code:"te",name:""},{code:"mr",name:""},{code:"gu",name:""},{code:"kn",name:""},{code:"ml",name:""},{code:"pa",name:""},{code:"or",name:""},{code:"as",name:""},{code:"sw",name:"Kiswahili"},{code:"ha",name:"Hausa"},{code:"yo",name:"Yorb"},{code:"ig",name:"ss gb"},{code:"am",name:""},{code:"zu",name:"isiZulu"},{code:"af",name:"Afrikaans"},{code:"pl",name:"Polski"},{code:"uk",name:""},{code:"ro",name:"Romn"},{code:"nl",name:"Nederlands"},{code:"el",name:""},{code:"cs",name:"etina"},{code:"hu",name:"Magyar"},{code:"sv",name:"Svenska"},{code:"bg",name:""},{code:"sr",name:""},{code:"hr",name:"Hrvatski"},{code:"sk",name:"Slovenina"},{code:"no",name:"Norsk"},{code:"da",name:"Dansk"},{code:"fi",name:"Suomi"},{code:"sq",name:"Shqip"},{code:"sl",name:"Slovenina"},{code:"et",name:"Eesti"},{code:"lv",name:"Latvieu"},{code:"lt",name:"Lietuvi"},{code:"uz",name:"Ozbek"},{code:"kk",name:""},{code:"az",name:"Azrbaycan"},{code:"mn",name:""},{code:"he",name:""},{code:"ps",name:""},{code:"ka",name:""},{code:"hy",name:""},{code:"tl",name:"Filipino"},{code:"my",name:""},{code:"km",name:""},{code:"si",name:""},{code:"ne",name:""}]}const LANGUAGE_FLAGS={en:"",zh:"","zh-TW":"",hi:"",es:"",fr:"",ar:"",bn:"",pt:"",ru:"",ja:"",ur:"",id:"",de:"",vi:"",tr:"",it:"",ko:"",fa:"",ta:"",th:"",yue:"",ms:"",te:"",mr:"",gu:"",kn:"",ml:"",pa:"",or:"",as:"",sw:"",ha:"",yo:"",ig:"",am:"",zu:"",af:"",pl:"",uk:"",ro:"",nl:"",el:"",cs:"",hu:"",sv:"",bg:"",sr:"",hr:"",sk:"",no:"",da:"",fi:"",sq:"",sl:"",et:"",lv:"",lt:"",uz:"",kk:"",az:"",mn:"",he:"",ps:"",ka:"",hy:"",tl:"",my:"",km:"",si:"",ne:""};function getLanguagesWithFlags(){return getSupportedLanguages().map(e=>({code:e.code,name:e.name,nativeName:e.name,flag:LANGUAGE_FLAGS[e.code]||""}))}const CODE_TO_ENGLISH_NAME={en:"English",zh:"Chinese","zh-TW":"Taiwanese",hi:"Hindi",es:"Spanish",fr:"French",ar:"Arabic",bn:"Bengali",pt:"Portuguese",ru:"Russian",ja:"Japanese",ur:"Urdu",id:"Indonesian",de:"German",vi:"Vietnamese",tr:"Turkish",it:"Italian",ko:"Korean",fa:"Persian",ta:"Tamil",th:"Thai",yue:"Cantonese",ms:"Malay",te:"Telugu",mr:"Marathi",gu:"Gujarati",kn:"Kannada",ml:"Malayalam",pa:"Punjabi",or:"Odia",as:"Assamese",sw:"Swahili",ha:"Hausa",yo:"Yoruba",ig:"Igbo",am:"Amharic",zu:"Zulu",af:"Afrikaans",pl:"Polish",uk:"Ukrainian",ro:"Romanian",nl:"Dutch",el:"Greek",cs:"Czech",hu:"Hungarian",sv:"Swedish",bg:"Bulgarian",sr:"Serbian",hr:"Croatian",sk:"Slovak",no:"Norwegian",da:"Danish",fi:"Finnish",sq:"Albanian",sl:"Slovenian",et:"Estonian",lv:"Latvian",lt:"Lithuanian",uz:"Uzbek",kk:"Kazakh",az:"Azerbaijani",mn:"Mongolian",he:"Hebrew",ps:"Pashto",ka:"Georgian",hy:"Armenian",tl:"Filipino",my:"Burmese",km:"Khmer",si:"Sinhala",ne:"Nepali"};function getLanguagesForSettings(){return getSupportedLanguages().map(e=>({value:CODE_TO_ENGLISH_NAME[e.code]||e.code,label:`${CODE_TO_ENGLISH_NAME[e.code]||e.code} (${e.name})`}))}function codeToEnglishName(e){if(!e)return"English";const t=normalizeLanguageCode(e);return CODE_TO_ENGLISH_NAME[t]||"English"}function englishNameToCode(e){if(!e)return"en";const t=normalizeLanguageCode(e);if(CODE_TO_ENGLISH_NAME[t])return t;const s={};return Object.entries(CODE_TO_ENGLISH_NAME).forEach(([e,t])=>{s[t.toLowerCase()]=e}),s[e.toLowerCase()]||"en"}const getSiteUrl=()=>{var e,t;if("undefined"!=typeof window){const e=window.location.origin;return e.includes("englishaidol.com")?"https://englishaidol.com":e}const s=null==(t=null==(e=import.meta)?void 0:e.env)?void 0:t.VITE_PUBLIC_SITE_URL;return s||"https://englishaidol.com"},siteUrl=getSiteUrl(),config={siteUrl:siteUrl,supabase:{url:"https://cuumxmfzhwljylbdlflj.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN1dW14bWZ6aHdsanlsYmRsZmxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1MTkxMjEsImV4cCI6MjA2OTA5NTEyMX0.8jqO_ciOttSxSLZnKY0i5oJmEn79ROF53TjUMYhNemI"},stripe:{publishableKey:"pk_live_51RuyWMCg5LtU404t1y36hENdj5Xi4UtGVknVBVUAF1T6AqN6LoRSzsjKrkQw3Rbnue4NFqzQeYctzA37gEWHJF9A0020cmaMDg"},oauth:{google:{redirectTo:`${siteUrl}/auth/callback`}}};function useAuth(){const[e,t]=reactExports.useState(null),[s,r]=reactExports.useState(null),[a,n]=reactExports.useState(null),[i,o]=reactExports.useState(!0),{toast:l}=useToast();reactExports.useEffect(()=>{let e=!0,s=null,a=!1,i=0;const{data:{subscription:l}}=supabase.auth.onAuthStateChange(async(i,l)=>{var d;e&&(a=!0,s&&(clearTimeout(s),s=null),console.log(" Auth state change:",i,(null==(d=null==l?void 0:l.user)?void 0:d.email)||"no user"),r(l),t((null==l?void 0:l.user)??null),o(!1),(null==l?void 0:l.user)?c(l.user.id).catch(e=>{console.error("Error fetching profile:",e)}):n(null))}),d=async(n=0)=>{const l=Math.min(1e3*Math.pow(2,n),4e3);try{const s=new Promise((e,t)=>{setTimeout(()=>t(new Error("Session fetch timeout")),5e3)}),{data:{session:n},error:i}=await Promise.race([supabase.auth.getSession(),s]);if(!e)return;if(i)throw i;a||(console.log(" Session retrieved successfully"),a=!0,r(n),t((null==n?void 0:n.user)??null),o(!1),(null==n?void 0:n.user)&&c(n.user.id).catch(e=>{console.error("Error fetching profile:",e)}))}catch(u){if(!e)return;i++;i<3&&!a?(console.log(` Retrying auth session in ${l}ms...`),s=setTimeout(()=>{e&&!a&&d(n+1)},l)):a||(console.warn(" Auth session fetch failed after retries, proceeding without session"),r(null),t(null),o(!1))}};return d(),()=>{e=!1,s&&clearTimeout(s),l.unsubscribe()}},[]);const c=async(e,t=0)=>{var s,r,a,i,o,l;const d=Math.min(1e3*Math.pow(2,t),3e3);try{const{data:i,error:o}=await supabase.from("profiles").select("*").eq("id",e).maybeSingle();if(o){if(((null==(s=o.message)?void 0:s.includes("Failed to fetch"))||(null==(r=o.message)?void 0:r.includes("ERR_CONNECTION_CLOSED"))||(null==(a=o.message)?void 0:a.includes("NetworkError")))&&t<2)return await new Promise(e=>setTimeout(e,d)),c(e,t+1);0}if(i){const e={id:i.id,full_name:i.full_name||"",role:i.role||"user",subscription_status:i.subscription_status||"free",native_language:i.native_language||"en",avatar_url:i.avatar_url,created_at:i.created_at};n(e);try{if(!localStorage.getItem("ui_language")&&(null==i?void 0:i.native_language)){const e=normalizeLanguageCode(i.native_language);e&&(await instance.changeLanguage(e),localStorage.setItem("ui_language",e))}}catch(u){console.warn("Language sync skipped:",u)}}else console.log("No profile found for user:",e),n(null);return i}catch(m){if(((null==(i=m.message)?void 0:i.includes("Failed to fetch"))||(null==(o=m.message)?void 0:o.includes("ERR_CONNECTION_CLOSED"))||(null==(l=m.message)?void 0:l.includes("NetworkError")))&&t<2)return await new Promise(e=>setTimeout(e,d)),c(e,t+1)}};return{user:e,session:s,profile:a,loading:i,signIn:async(e,s)=>{try{const{data:n,error:i}=await supabase.auth.signInWithPassword({email:e,password:s});if(i)return console.error(" Sign in error:",i),{error:i.message};if(n.session){console.log(" Sign in successful, session received:",n.session.user.email),r(n.session),t(n.session.user);try{await c(n.session.user.id)}catch(a){console.error("Error fetching profile:",a)}o(!1)}return l({title:"Welcome back!",description:"You have successfully signed in."}),{}}catch(n){return console.error(" Sign in exception:",n),{error:n.message||"An error occurred during sign in"}}},signUp:async(e,t,s)=>{try{const r=`${"http://localhost:5173"}/auth/callback`,{error:a}=await supabase.auth.signUp({email:e,password:t,options:{emailRedirectTo:r,data:{full_name:s}}});return a?{error:a.message}:(l({title:"Account created!",description:"Please check your email to verify your account."}),{})}catch(r){return{error:r.message||"An error occurred during sign up"}}},signInWithGoogle:async()=>{try{const e=`${"http://localhost:5173"}/auth/callback`;console.log(" Initiating Google OAuth sign-in, redirectTo:",e);const{error:t}=await supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:e,queryParams:{prompt:"select_account",access_type:"online"}}});return t?(console.error(" Google OAuth error:",t),{error:t.message}):(console.log(" Google OAuth redirect initiated"),{})}catch(e){return console.error(" Google OAuth exception:",e),{error:e.message||"An error occurred during Google sign in"}}},signOut:async()=>{try{const{error:e}=await supabase.auth.signOut();if(e)throw console.error("Error signing out:",e),e;return l({title:"Signed out",description:"You have been signed out successfully."}),localStorage.clear(),sessionStorage.clear(),{success:!0}}catch(e){throw console.error("Error signing out:",e),e}},resetPassword:async e=>{try{const{data:t}=await supabase.auth.getUser(),{error:s}=await supabase.auth.resetPasswordForEmail(e,{redirectTo:`${config.siteUrl}/reset-password`});return s?{error:s.message}:(l({title:"If the account exists, check your email",description:"We've sent password reset instructions to the address provided if it's associated with an account."}),{})}catch(t){return{error:t.message||"An error occurred during password reset"}}},refreshProfile:async()=>{(null==e?void 0:e.id)&&await c(e.id)},updateProfileAvatar:t=>{var s;(null==e?void 0:e.id)&&n(a?{...a,avatar_url:t}:{id:e.id,full_name:(null==(s=e.email)?void 0:s.split("@")[0])||"",role:"user",subscription_status:"free",native_language:"en",avatar_url:t})}}}const ThemeContext=reactExports.createContext(void 0),ThemeProvider=({children:e})=>{const{user:t}=useAuth(),[s,r]=reactExports.useState(getStoredTheme()),[a,n]=reactExports.useState(getTheme(s));reactExports.useEffect(()=>{if(t){const e=async(s=0)=>{var a,i,o,l,c,d,u,m,p,h,x,f;try{const{data:u,error:m}=await supabase.from("user_preferences").select("*").eq("user_id",t.id).maybeSingle();if(m){const t=(null==(a=m.message)?void 0:a.includes("ERR_CONNECTION_CLOSED"))||(null==(i=m.message)?void 0:i.includes("Failed to fetch"))||(null==(o=m.message)?void 0:o.includes("NetworkError"));"PGRST204"===m.code||"42703"===m.code||"42P01"===m.code||(null==(l=m.message)?void 0:l.toLowerCase().includes("column"))||(null==(c=m.message)?void 0:c.toLowerCase().includes("does not exist"))||(null==(d=m.message)||d.toLowerCase().includes("bad request"));return t&&s<1?(await new Promise(e=>setTimeout(e,2e3)),e(s+1)):void 0}if(u&&u.dashboard_theme){const e=u.dashboard_theme;r(e),n(getTheme(e)),saveTheme(e)}}catch(g){const t=(null==(u=null==g?void 0:g.message)?void 0:u.includes("ERR_CONNECTION_CLOSED"))||(null==(m=null==g?void 0:g.message)?void 0:m.includes("Failed to fetch"))||(null==(p=null==g?void 0:g.message)?void 0:p.includes("NetworkError"));"PGRST204"===(null==g?void 0:g.code)||"42703"===(null==g?void 0:g.code)||"42P01"===(null==g?void 0:g.code)||(null==(h=null==g?void 0:g.message)?void 0:h.toLowerCase().includes("column"))||(null==(x=null==g?void 0:g.message)?void 0:x.toLowerCase().includes("does not exist"))||(null==(f=null==g?void 0:g.message)||f.toLowerCase().includes("bad request"));if(t&&s<1)return await new Promise(e=>setTimeout(e,2e3)),e(s+1);0}};e()}},[t]),reactExports.useEffect(()=>{n(getTheme(s)),saveTheme(s),window.dispatchEvent(new CustomEvent("theme-changed",{detail:s}))},[s]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:a,themeName:s,setTheme:async e=>{r(e),saveTheme(e),t&&(async()=>{var s,r,a,n;try{const{error:i}=await supabase.from("user_preferences").select("dashboard_theme").eq("user_id",t.id).limit(1);if("PGRST204"===(null==i?void 0:i.code)||"42703"===(null==i?void 0:i.code)||"42P01"===(null==i?void 0:i.code)||400===(null==i?void 0:i.status)||(null==(s=null==i?void 0:i.message)?void 0:s.toLowerCase().includes("dashboard_theme"))||(null==(r=null==i?void 0:i.message)?void 0:r.toLowerCase().includes("column"))||(null==(a=null==i?void 0:i.message)?void 0:a.toLowerCase().includes("does not exist"))||(null==(n=null==i?void 0:i.message)?void 0:n.toLowerCase().includes("bad request")))return;const{error:o}=await supabase.from("user_preferences").upsert({user_id:t.id,dashboard_theme:e},{onConflict:"user_id"});0}catch(i){}})(),window.dispatchEvent(new CustomEvent("theme-changed",{detail:e}))}},children:e})},useTheme=()=>{const e=reactExports.useContext(ThemeContext);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},Card=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx("div",{ref:s,className:cn("rounded-2xl border border-border bg-card text-card-foreground shadow-soft soft-border",e),...t}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx("div",{ref:s,className:cn("flex flex-col space-y-1.5 p-6",e),...t}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx("h3",{ref:s,className:cn("text-2xl font-semibold leading-none tracking-tight",e),...t}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx("p",{ref:s,className:cn("text-sm text-muted-foreground leading-relaxed",e),...t}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx("div",{ref:s,className:cn("p-6 pt-0",e),...t}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx("div",{ref:s,className:cn("flex items-center p-6 pt-0",e),...t}));CardFooter.displayName="CardFooter";const buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-soft",destructive:"bg-destructive text-destructive-foreground shadow-soft",outline:"border border-border bg-background text-foreground soft-border",secondary:"bg-secondary text-secondary-foreground shadow-soft",ghost:"",link:"text-primary underline-offset-4",hero:"bg-gentle-blue text-white shadow-medium font-medium",success:"bg-soft-green text-foreground shadow-soft",neon:"bg-gentle-blue text-white shadow-medium font-medium",tech:"bg-secondary text-secondary-foreground shadow-soft border border-gentle-blue/20"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button$1=reactExports.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...a},n)=>{const i=r?Slot:"button";return jsxRuntimeExports.jsx(i,{className:cn(buttonVariants({variant:t,size:s,className:e})),ref:n,...a})});Button$1.displayName="Button";const Input=reactExports.forwardRef(({className:e,type:t,style:s,...r},a)=>jsxRuntimeExports.jsx("input",{type:t,className:cn("flex h-10 w-full rounded-md border bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm transition-colors",e),style:{borderColor:"inherit",...s},ref:a,...r}));Input.displayName="Input";const Select=Root2$1,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:e,children:t,...s},r)=>jsxRuntimeExports.jsxs(Trigger$1,{ref:r,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$1.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:s,className:cn("flex cursor-default items-center justify-center py-1",e),...t,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:s,className:cn("flex cursor-default items-center justify-center py-1",e),...t,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:e,children:t,position:s="popper",...r},a)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2$1,{ref:a,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2$1.displayName;const SelectLabel=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Label$1,{ref:s,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));SelectLabel.displayName=Label$1.displayName;const SelectItem=reactExports.forwardRef(({className:e,children:t,...s},r)=>jsxRuntimeExports.jsxs(Item,{ref:r,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:t})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Separator,{ref:s,className:cn("-mx-1 my-1 h-px bg-muted",e),...t}));SelectSeparator.displayName=Separator.displayName;let loadPromise=null;const ensureDotLottieScript=()=>{if("undefined"!=typeof window&&("undefined"==typeof customElements||!customElements.get("dotlottie-wc"))){if(!loadPromise){const e=document.querySelector("script[data-dotlottie-loader]");if(e)return void(loadPromise=new Promise(t=>{e.addEventListener("load",()=>t(),{once:!0}),e.addEventListener("error",()=>t(),{once:!0})}));loadPromise=new Promise(e=>{const t=document.createElement("script");t.src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js",t.type="module",t.defer=!0,t.crossOrigin="anonymous",t.setAttribute("data-dotlottie-loader","true"),t.setAttribute("data-cfasync","false"),t.onload=()=>e(),t.onerror=t=>{console.error("Failed to load dotlottie-wc",t),e()},document.head.appendChild(t)})}return loadPromise}},useDotLottieLoader=()=>{reactExports.useEffect(()=>{ensureDotLottieScript()},[])},LottieLoadingAnimation=({size:e="md",className:t="",message:s="Loading...",speed:r=1})=>{useDotLottieLoader();const a=reactExports.useRef(null);return reactExports.useEffect(()=>{const e=a.current;if(e){const t=e.querySelector("dotlottie-wc");t&&t.setAttribute("speed",r.toString())}},[r]),jsxRuntimeExports.jsxs("div",{className:`flex flex-col items-center justify-center gap-4 ${t}`,ref:a,children:[jsxRuntimeExports.jsx("dotlottie-wc",{src:"https://lottie.host/f9eec83f-15c9-410c-937c-c3a0d2024d6a/EoOyrmY8jW.lottie",style:{sm:{width:"120px",height:"120px"},md:{width:"200px",height:"200px"},lg:{width:"300px",height:"300px"}}[e],speed:r.toString(),autoplay:!0,loop:!0}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm font-medium animate-pulse",children:s})]})},MinimalisticChatbot=({selectedLanguage:e="en",onLanguageChange:t})=>{var s;const[r,a]=reactExports.useState(!1),[n,i]=reactExports.useState(!1),[o,l]=reactExports.useState("medium"),[c,d]=reactExports.useState("general"),[u,m]=reactExports.useState([{id:"1",text:"Hello! I'm your AI tutor. How can I help you with your English learning today?",isUser:!1,timestamp:new Date}]),[p,h]=reactExports.useState(""),[x,f]=reactExports.useState(!1),g=reactExports.useRef(null),y=[{value:"general",label:"General"},{value:"grammar",label:"Grammar"},{value:"vocabulary",label:"Vocabulary"},{value:"pronunciation",label:"Pronunciation"},{value:"writing",label:"Writing"},{value:"speaking",label:"Speaking"},{value:"reading",label:"Reading"},{value:"listening",label:"Listening"}];reactExports.useEffect(()=>{var e;null==(e=g.current)||e.scrollIntoView({behavior:"smooth"})},[u]);const v=async()=>{if(!p.trim())return;const t={id:Date.now().toString(),text:p,isUser:!0,timestamp:new Date};m(e=>[...e,t]),h(""),f(!0);try{const{data:t,error:s}=await supabase.functions.invoke("gemini-chat",{body:{message:p,context:c,language:e}});if(s)throw s;const r={id:(Date.now()+1).toString(),text:t.response||"I apologize, but I couldn't process your request. Please try again.",isUser:!1,timestamp:new Date};m(e=>[...e,r])}catch(s){console.error("Error sending message:",s);const e={id:(Date.now()+1).toString(),text:"Sorry, I encountered an error. Please try again later.",isUser:!1,timestamp:new Date};m(t=>[...t,e])}finally{f(!1)}};return r?jsxRuntimeExports.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:jsxRuntimeExports.jsxs(Card,{className:`backdrop-blur-lg bg-background/30 border-border/20 shadow-xl transition-all duration-300 ${n?"w-80 h-16":(()=>{switch(o){case"small":return"w-80 h-96";case"large":return"w-[28rem] h-[36rem]";default:return"w-96 h-[32rem]"}})()}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/30",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Bot,{className:"h-5 w-5 text-brand-blue"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-sm",children:"AI English Tutor"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Select,{value:e,onValueChange:t,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-20 h-8 text-xs",children:jsxRuntimeExports.jsx(Languages,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(SelectContent,{children:[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"ar",name:"Arabic"},{code:"hi",name:"Hindi"},{code:"vi",name:"Vietnamese"},{code:"th",name:"Thai"}].map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.code,className:"text-xs",children:e.name},e.code))})]}),jsxRuntimeExports.jsx(Button$1,{variant:"ghost",size:"sm",onClick:()=>i(!n),className:"h-8 w-8 p-0",children:jsxRuntimeExports.jsx(Minimize2,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button$1,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"h-8 w-8 p-0",children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]})]}),!n&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 border-b border-border/30",children:jsxRuntimeExports.jsxs(Select,{value:c,onValueChange:d,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-full h-8 text-xs",children:jsxRuntimeExports.jsxs("span",{className:"text-xs",children:["Topic: ",null==(s=y.find(e=>e.value===c))?void 0:s.label]})}),jsxRuntimeExports.jsx(SelectContent,{children:y.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.value,className:"text-xs",children:e.label},e.value))})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{height:"small"===o?"16rem":"large"===o?"24rem":"20rem"},children:[u.map(t=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 "+(t.isUser?"justify-end":"justify-start"),children:[!t.isUser&&jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Bot,{className:"h-6 w-6 text-brand-blue"})}),jsxRuntimeExports.jsxs("div",{className:"max-w-[75%] p-3 rounded-2xl text-sm "+(t.isUser?"bg-brand-blue text-white":"glass-effect border border-border/30"),children:[jsxRuntimeExports.jsx("p",{className:"leading-relaxed",children:t.text}),!t.isUser&&"en"!==e&&jsxRuntimeExports.jsxs(Button$1,{variant:"ghost",size:"sm",onClick:()=>(async t=>{if("en"!==e)try{const{data:s,error:r}=await supabase.functions.invoke("gemini-chat",{body:{message:`Translate the following text to ${e}: "${t}"`,context:"translation"}});if(!r&&s.response){const e={id:Date.now().toString(),text:`Translation: ${s.response}`,isUser:!1,timestamp:new Date};m(t=>[...t,e])}}catch(s){console.error("Translation error:",s)}})(t.text),className:"mt-2 h-6 text-xs text-brand-blue hover:text-brand-blue/80",children:[jsxRuntimeExports.jsx(Languages,{className:"h-3 w-3 mr-1"}),"Translate"]})]}),t.isUser&&jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(User,{className:"h-6 w-6 text-text-secondary"})})]},t.id)),x&&jsxRuntimeExports.jsx("div",{className:"flex gap-2 justify-start",children:jsxRuntimeExports.jsx(LottieLoadingAnimation,{size:"sm",message:""})}),jsxRuntimeExports.jsx("div",{ref:g})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-border/30",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{value:p,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},placeholder:"small"===o?"Type here...":"Ask me anything about English...",className:"flex-1 border-border/30 bg-surface-1/80 backdrop-blur-sm text-sm min-h-[40px]",disabled:x}),jsxRuntimeExports.jsx(Button$1,{onClick:v,disabled:x||!p.trim(),className:"h-10 w-10 p-0 bg-brand-blue hover:bg-brand-blue/90 flex-shrink-0",children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})})]})]})}):jsxRuntimeExports.jsx("div",{className:"fixed bottom-6 right-6 z-50"})},DotLottieLoadingAnimation=({message:e="Processing...",subMessage:t="Please wait while we analyze your work",size:s=300})=>(useDotLottieLoader(),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("dotlottie-wc",{src:"https://lottie.host/f9eec83f-15c9-410c-937c-c3a0d2024d6a/EoOyrmY8jW.lottie",style:{width:`${s}px`,height:`${s}px`},speed:"1",autoplay:!0,loop:!0})}),jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-medium text-text-primary",children:e}),jsxRuntimeExports.jsx("div",{className:"text-sm text-text-secondary",children:t})]})]})),useThemeStyles=()=>{const{theme:e}=useTheme();return{cardClassName:reactExports.useMemo(()=>{switch(e.name){case"note":default:return"bg-[#FEF9E7] border-[#E8D5A3]";case"glassmorphism":return"bg-white/10 border-white/20 backdrop-blur-xl";case"dark":return"bg-[#1e293b] border-[#334155]";case"minimalist":return"bg-white border-[#e5e7eb]"}},[e.name]),cardStyle:reactExports.useMemo(()=>e.styles.cardStyle||{},[e]),textPrimary:reactExports.useMemo(()=>e.colors.textPrimary,[e]),textSecondary:reactExports.useMemo(()=>e.colors.textSecondary,[e]),textAccent:reactExports.useMemo(()=>e.colors.textAccent,[e]),border:reactExports.useMemo(()=>e.colors.border,[e]),hoverBg:reactExports.useMemo(()=>e.colors.hoverBackground,[e]),buttonPrimary:reactExports.useMemo(()=>e.colors.buttonPrimary,[e]),buttonPrimaryHover:reactExports.useMemo(()=>e.colors.buttonPrimaryHover,[e]),chartLine:reactExports.useMemo(()=>e.colors.chartLine,[e]),chartTarget:reactExports.useMemo(()=>e.colors.chartTarget,[e]),backgroundOverlay:reactExports.useMemo(()=>e.colors.backgroundOverlay||"rgba(255, 255, 255, 0.2)",[e]),backgroundImageColor:reactExports.useMemo(()=>e.colors.backgroundImageColor||"#a2d2ff",[e]),cardBackground:reactExports.useMemo(()=>{switch(e.name){case"note":return"#FEF9E7";case"glassmorphism":case"dark":return"rgba(255, 255, 255, 0.1)";case"minimalist":return"#ffffff";default:return"rgba(255, 255, 255, 0.6)"}},[e.name]),theme:e}};function TranslationPopup({selectedText:e,position:t,onClose:s,targetLanguage:r}){var a;const[n,i]=reactExports.useState(null),[o,l]=reactExports.useState(!0),[c,d]=reactExports.useState(!1),[u,m]=reactExports.useState(!1),[p,h]=reactExports.useState({width:window.innerWidth,height:window.innerHeight}),{toast:x}=useToast(),{user:f}=useAuth(),g=useThemeStyles();reactExports.useEffect(()=>{const e=()=>{h({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),reactExports.useEffect(()=>{(async()=>{if(e)if("en"!==r)try{l(!0),console.log(" Fetching translation for:",e,"to",r);const s=new Promise((e,t)=>setTimeout(()=>t(new Error("Translation request timeout")),15e3)),a=supabase.functions.invoke("translation-service",{body:{text:e,sourceLang:"auto",targetLang:r,includeContext:!0}}).catch(e=>{throw console.error(" Translation service connection error:",e),new Error(`Connection error: ${e.message||"Network error"}`)}),n=await Promise.race([a,s]),{data:o,error:c}=n;if(console.log(" Translation response:",{data:o,error:c}),c)throw console.error(" Translation service error:",c),c;if(!(null==o?void 0:o.success)||!(null==o?void 0:o.result))throw console.error(" Translation failed:",o),new Error((null==o?void 0:o.error)||"Translation failed");if(console.log(" Translation received:",o.result),o.result.simple&&"string"==typeof o.result.translation){console.log(" Got cached simple translation, fetching full details...");return void(async()=>{var t;try{console.log(" Fetching full translation details with bypassCache...");const a=supabase.functions.invoke("translation-service",{body:{text:e,sourceLang:"auto",targetLang:r,includeContext:!0,bypassCache:!0}}).catch(e=>{throw console.error(" Full details connection error:",e),new Error(`Connection error: ${e.message||"Network error"}`)}),n=new Promise((e,t)=>setTimeout(()=>t(new Error("Full details timeout")),15e3)),l=await Promise.race([a,n]);if(console.log(" Full details response:",l),(null==(t=null==l?void 0:l.data)?void 0:t.success)&&l.data.result){const t=l.data.result;console.log(" Full details result structure:",{hasTranslation:!!t.translation,hasAlternatives:!!t.alternatives,alternativesType:Array.isArray(t.alternatives)?"array":typeof t.alternatives,alternativesLength:Array.isArray(t.alternatives)?t.alternatives.length:0,hasPos:!!t.pos,hasIpa:!!t.ipa,isSimple:t.simple});let a=[];if(t.alternatives&&Array.isArray(t.alternatives)&&(a=t.alternatives.map(e=>"string"==typeof e?e:e&&"object"==typeof e&&e.meaning?{meaning:e.meaning,pos:e.pos}:e&&"object"==typeof e&&e.translation?e.translation:null).filter(e=>null!==e)),console.log(" Processed alternatives:",a),t.simple)console.log(" Response still marked as simple, but using available data..."),i({translation:t.translation||o.result.translation,alternatives:a,pos:t.pos||void 0,ipa:t.ipa||void 0,context:t.context||void 0});else{console.log(" Full translation details received:",{translation:t.translation,alternativesCount:a.length,pos:t.pos,ipa:t.ipa});const n={translation:t.translation||o.result.translation,alternatives:a,pos:t.pos||void 0,ipa:t.ipa||void 0,context:t.context||void 0};i(n);try{const t=`${e.toLowerCase()}-${r}`;sessionStorage.setItem(`translation_${t}`,JSON.stringify(n))}catch(s){}}}else console.log(" Full details fetch failed, using cached translation"),i({translation:o.result.translation,alternatives:[]})}catch(a){console.error(" Error fetching full details:",a);const t=(null==a?void 0:a.message)||String(a)||"Unknown error",s=t.includes("timeout")||t.includes("Timeout"),c=t.includes("ERR_CONNECTION_RESET")||t.includes("Connection error")||t.includes("NetworkError")||t.includes("Failed to fetch");if(s||c)try{const t=`${e.toLowerCase()}-${r}`,s=sessionStorage.getItem(`translation_${t}`);if(s){const e=JSON.parse(s);return console.log(" Using cached translation for full details fallback:",e),i({translation:e.translation||o.result.translation,alternatives:e.alternatives||[],pos:e.pos,ipa:e.ipa}),void l(!1)}}catch(n){console.log(" Could not read cache:",n)}i({translation:o.result.translation,alternatives:[]})}finally{l(!1)}})()}{const s=o.result;let a=[];s.alternatives&&Array.isArray(s.alternatives)&&(a=s.alternatives.map(e=>"string"==typeof e?e:e&&"object"==typeof e&&e.meaning?{meaning:e.meaning,pos:e.pos}:e&&"object"==typeof e&&e.translation?e.translation:null).filter(e=>null!==e)),console.log(" Non-cached translation received:",{translation:s.translation,alternativesCount:a.length,alternatives:a,pos:s.pos,ipa:s.ipa});const n={translation:s.translation,alternatives:a,pos:s.pos||void 0,ipa:s.ipa||void 0,context:s.context||void 0};i(n);try{const t=`${e.toLowerCase()}-${r}`;sessionStorage.setItem(`translation_${t}`,JSON.stringify(n))}catch(t){}}}catch(s){console.error(" Translation error:",s);const t=(null==s?void 0:s.message)||String(s)||"Unknown error",n=t.includes("timeout")||t.includes("Timeout"),o=t.includes("ERR_CONNECTION_RESET")||t.includes("Connection error")||t.includes("NetworkError")||t.includes("Failed to fetch");if(n||o){console.warn(" Translation timeout/connection error, checking cache...");try{const t=`${e.toLowerCase()}-${r}`,s=sessionStorage.getItem(`translation_${t}`);if(s){const t=JSON.parse(s);return console.log(" Using cached translation:",t),i({translation:t.translation||e,alternatives:t.alternatives||[],pos:t.pos,ipa:t.ipa}),void l(!1)}}catch(a){console.log(" Could not read cache:",a)}console.warn("Translation timeout/connection error, showing fallback"),i({translation:e,alternatives:[]})}else x({title:"Translation Error",description:t,variant:"destructive"}),i(null)}finally{l(!1)}else try{l(!0),console.log(" Fetching definition for:",e);const{data:t,error:s}=await supabase.functions.invoke("translation-service",{body:{text:e,sourceLang:"en",targetLang:"en",includeContext:!0}});if(console.log(" Definition response:",{data:t,error:s}),s)throw s;(null==t?void 0:t.success)&&(null==t?void 0:t.result)?i(t.result):i({translation:e,alternatives:[],context:"Definition not available"})}catch(s){console.error(" Definition error:",s),i({translation:e,alternatives:[]})}finally{l(!1)}})()},[e,r,x]);const y=async()=>{var t;if(f){if(n){d(!0);try{const s=(null==(t=n.alternatives)?void 0:t.map(e=>"string"==typeof e?e:e.meaning||"").filter(Boolean))||[],r=e.trim().toLowerCase(),{data:a}=await supabase.from("user_vocabulary").select("id, word").eq("user_id",f.id);if(null==a?void 0:a.some(e=>!!(null==e?void 0:e.word)&&e.word.trim().toLowerCase()===r))return x({title:"Already Saved",description:"This word is already in your wordbook"}),void m(!0);const i=[n.translation,...s.map(e=>"string"==typeof e?e:null==e?void 0:e.meaning).filter(Boolean)].filter((e,t,s)=>s.indexOf(e)===t),{error:o}=await supabase.from("user_vocabulary").insert({user_id:f.id,word:r,translations:i,part_of_speech:n.pos||null});if(o)throw console.error("Insert error details:",o),o;m(!0),x({title:"Word Added",description:`"${e}" has been added to your wordbook`})}catch(s){console.error("Save error:",s),x({title:"Save Failed",description:s.message||"Failed to save word to wordbook",variant:"destructive"})}finally{d(!1)}}}else x({title:"Login Required",description:"Please log in to add words to your wordbook",variant:"destructive"})},v=(e=>{const t=["ar","he","fa","ur","ps","hi","bn","ta","te","mr","gu","kn","ml","pa","or","as","th","my","km","si","ne"].includes(e);return{width:280,fontSize:{original:"text-base",translation:"text-sm",ipa:"text-xs"},lineHeight:t?"leading-relaxed":"leading-normal"}})(r),E=v.width,b={position:"fixed",left:`${Math.max(16,Math.min(t.x-E/2,p.width-E-16))}px`,top:`${Math.max(16,Math.min(t.y,p.height-300-16))}px`,zIndex:9999,width:`${E}px`,maxHeight:o?"none":p.height-32+"px",overflowY:o?"visible":"auto",overflowX:"visible"},j=e.trim().split(/\s+/).length>1,R=(null==n?void 0:n.translation)||"",_=(null==n?void 0:n.pos)||"",w={},S=e=>e?e.toLowerCase().trim():"",T=S(_);if(R){const e=T;w[e]||(w[e]=[]),w[e].includes(R)||w[e].push(R)}console.log(" Processing alternatives:",{hasAlternatives:!!(null==n?void 0:n.alternatives),alternativesLength:(null==(a=null==n?void 0:n.alternatives)?void 0:a.length)||0,alternatives:null==n?void 0:n.alternatives}),(null==n?void 0:n.alternatives)&&n.alternatives.length>0&&n.alternatives.forEach((e,t)=>{const s="string"==typeof e?e:null==e?void 0:e.meaning,r="object"==typeof e&&(null==e?void 0:e.pos)?S(e.pos):T;if(console.log(`  Alternative ${t}:`,{meaning:s,altPOS:r,alt:e}),s&&s!==R){const e=r||T;w[e]||(w[e]=[]),w[e].includes(s)?console.log(`   Skipped duplicate "${s}"`):(w[e].push(s),console.log(`   Added "${s}" to POS group "${e}"`))}}),console.log(" Final translationsByPOS:",w),Object.keys(w).forEach(e=>{0===w[e].length&&delete w[e]});const P=T&&w[T]?[_||T,...Object.keys(w).filter(e=>S(e)!==T).sort()]:Object.keys(w).sort();return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:s,children:jsxRuntimeExports.jsxs(Card,{style:{...b,backgroundColor:g.cardBackground,borderColor:g.border,backdropFilter:"glassmorphism"===g.theme.name?"blur(10px)":"none",boxShadow:"glassmorphism"===g.theme.name?"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)":"dark"===g.theme.name?"0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2)":"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},onClick:e=>e.stopPropagation(),className:"rounded-2xl shadow-lg animate-fade-in animate-slide-up "+(o?"overflow-visible":""),children:[jsxRuntimeExports.jsxs(CardHeader,{className:"pb-2 px-3 pt-3 relative",children:[jsxRuntimeExports.jsx(Button$1,{variant:"ghost",size:"sm",onClick:s,className:"absolute top-3 right-3 h-6 w-6 p-0 rounded-lg",style:{color:g.textSecondary,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=g.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:jsxRuntimeExports.jsx(X,{className:"h-3.5 w-3.5"})}),jsxRuntimeExports.jsxs("div",{className:"text-center animate-fade-in",children:[jsxRuntimeExports.jsx("p",{className:`${v.fontSize.original} font-semibold ${v.lineHeight}`,style:{color:g.textPrimary},children:e}),jsxRuntimeExports.jsx("div",{className:"space-y-0.5 mt-0.5",children:_&&""!==_.trim()&&jsxRuntimeExports.jsx("p",{className:"text-xs font-medium",style:{color:g.textSecondary},children:_})})]})]}),jsxRuntimeExports.jsx(CardContent,{className:"px-3 pb-3 pt-4 overflow-visible",children:o?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-4 overflow-visible relative",style:{minHeight:"120px"},children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-visible",children:jsxRuntimeExports.jsx(DotLottieLoadingAnimation,{message:"Translating...",subMessage:"",size:120})})}):n?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"space-y-3 min-h-[60px] flex flex-col justify-center text-center relative",children:Object.keys(w).length>0?P.map((e,t)=>{const s=S(e),r=w[s]||[];if(0===r.length)return null;const a=P.length>1&&e&&""!==e.trim()&&t>0,n=t===P.length-1,i=r.length-1;return jsxRuntimeExports.jsxs("div",{className:"space-y-1.5 animate-fade-in",style:{animationDelay:.1*t+"s",animationFillMode:"both"},children:[a&&jsxRuntimeExports.jsx("p",{className:"text-xs font-medium animate-slide-up",style:{color:g.textSecondary},children:e}),r.map((s,r)=>{const a=n&&r===i;return jsxRuntimeExports.jsxs("div",{className:"relative w-full flex items-center justify-center animate-slide-up",style:{animationDelay:.1*t+.05*r+"s",animationFillMode:"both"},children:[jsxRuntimeExports.jsx("p",{className:`${v.fontSize.translation} font-normal ${v.lineHeight} text-center`,style:{color:g.textPrimary},children:s}),f&&!j&&a&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx("button",{onClick:y,disabled:c||u,className:"h-5 w-5 transition-all hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center flex-shrink-0",style:{color:g.textSecondary},onMouseEnter:e=>{c||u||(e.currentTarget.style.color=g.buttonPrimary)},onMouseLeave:e=>{e.currentTarget.style.color=g.textSecondary},children:u?jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"}):c?jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 animate-spin"}):jsxRuntimeExports.jsx(CirclePlus,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(TooltipContent,{side:"top",className:"text-xs z-[10000]",children:u?"Added to Wordbook":c?"Adding...":"Add to Wordbook"})]})})})]},`${e}-${r}`)})]},e)}):jsxRuntimeExports.jsxs("div",{className:"relative w-full flex items-center justify-center animate-fade-in animate-slide-up",style:{animationDelay:"0.1s",animationFillMode:"both"},children:[jsxRuntimeExports.jsx("p",{className:`${v.fontSize.translation} font-normal ${v.lineHeight} text-center`,style:{color:g.textPrimary},children:R}),f&&!j&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx("button",{onClick:y,disabled:c||u,className:"h-5 w-5 text-slate-400 dark:text-slate-500 hover:text-primary dark:hover:text-primary transition-all hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center flex-shrink-0",children:u?jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"}):c?jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 animate-spin"}):jsxRuntimeExports.jsx(CirclePlus,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(TooltipContent,{side:"top",className:"text-xs z-[10000]",children:u?"Added to Wordbook":c?"Adding...":"Add to Wordbook"})]})})})]})})}):jsxRuntimeExports.jsx("div",{className:"py-6 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-xs",style:{color:g.textSecondary},children:"Translation not available"})})})]})})}const TextActionMenu=({selectedText:e,position:t,onClose:s,onCopy:r,onTranslate:a})=>{const n=reactExports.useRef(null),i=useThemeStyles();reactExports.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&s()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]);const{left:o,top:l}=(()=>{const e=10,s=window.innerWidth,r=window.innerHeight,a=window.scrollY;let n=t.x-100,i=t.y+8;return n<e&&(n=e),n+200>s-e&&(n=s-200-e),i+50>r+a-e&&(i=t.y-50-8),i<a+e&&(i=a+e),{left:n,top:i}})();return jsxRuntimeExports.jsxs("div",{ref:n,className:"fixed z-[10000] flex items-center gap-2 p-1 rounded-lg shadow-lg",onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),style:{left:`${o}px`,top:`${l}px`,backgroundColor:i.cardBackground,borderColor:i.border,borderWidth:"1px",borderStyle:"solid",backdropFilter:"glassmorphism"===i.theme.name?"blur(10px)":"none",boxShadow:"glassmorphism"===i.theme.name?"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)":"dark"===i.theme.name?"0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2)":"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},children:[jsxRuntimeExports.jsxs(Button$1,{onClick:async()=>{try{await navigator.clipboard.writeText(e),r(),s()}catch(t){console.error("Failed to copy text:",t)}},variant:"ghost",size:"sm",className:"text-sm flex items-center gap-2",style:{color:i.textPrimary,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=i.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"}),"Copy"]}),jsxRuntimeExports.jsxs(Button$1,{onClick:a,variant:"ghost",size:"sm",className:"text-sm flex items-center gap-2",style:{color:i.textPrimary,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=i.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[jsxRuntimeExports.jsx(Languages,{className:"w-4 h-4"}),"Translate"]}),jsxRuntimeExports.jsx(Button$1,{onClick:s,variant:"ghost",size:"icon",className:"w-6 h-6",style:{color:i.textSecondary,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=i.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})},GlobalTextSelection=({children:e})=>{const[t,s]=reactExports.useState(null),[r,a]=reactExports.useState(null),[n,i]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),[c,d]=reactExports.useState("en"),{user:u,profile:m}=useAuth(),{toast:p}=useToast();reactExports.useRef(0),reactExports.useRef(null);const h=reactExports.useRef(null),x=reactExports.useRef(null),f=reactExports.useRef(!1);reactExports.useEffect(()=>{(async()=>{const e=localStorage.getItem("word_translation_language");if(e){const t=normalizeLanguageCode(e);d(t)}if(u)try{const{data:e,error:t}=await supabase.from("user_preferences").select("word_translation_language, native_language").eq("user_id",u.id).maybeSingle();if(!t&&e){const t=e,s=(null==t?void 0:t.word_translation_language)||(null==t?void 0:t.native_language);if(s){const e=normalizeLanguageCode(s);d(e),localStorage.setItem("word_translation_language",e)}}}catch(t){console.warn("Error loading word translation language:",t)}else if(null==m?void 0:m.native_language){const e=normalizeLanguageCode(m.native_language);d(e)}})()},[u,m]),reactExports.useEffect(()=>{const e=()=>{const e=localStorage.getItem("word_translation_language");if(e){const t=normalizeLanguageCode(e);d(t),console.log(" Word translation language updated:",t)}};return window.addEventListener("word-translation-language-updated",e),window.addEventListener("storage",t=>{"word_translation_language"!==t.key&&"word-translation-language-updated"!==t.key||e()}),()=>{window.removeEventListener("word-translation-language-updated",e)}},[]),reactExports.useEffect(()=>{const e=e=>{const t=e.target;"BUTTON"===t.tagName||"A"===t.tagName||t.closest("button")||t.closest("a")||t.closest('[role="button"]')||t.closest('[contenteditable="true"]')||setTimeout(()=>{const e=window.getSelection();if(!e)return;const t=e.toString().trim();if(t&&0!==t.length){console.log(" Double-click detected, selected text:",t);try{const r=e.getRangeAt(0).getBoundingClientRect();r&&(a({x:r.left+r.width/2,y:r.bottom+8}),s(t),i(!0),l(!1),console.log(" Action menu triggered for:",t))}catch(r){console.error("Error getting selection range:",r)}}else console.log(" No text selected on double-click")},10)};return document.addEventListener("dblclick",e),()=>document.removeEventListener("dblclick",e)},[]),reactExports.useEffect(()=>{let e;const t=e=>{const t=e.target;"BUTTON"===t.tagName||"A"===t.tagName||t.closest("button")||t.closest("a")||t.closest('[role="button"]')||t.closest('[contenteditable="true"]')||(x.current={x:e.clientX,y:e.clientY,time:Date.now()},f.current=!1)},r=e=>{if(!x.current)return;const t=Math.abs(e.clientX-x.current.x),s=Math.abs(e.clientY-x.current.y);(t>5||s>5)&&(f.current=!0)},n=t=>{if(!x.current)return;const r=Math.abs(t.clientX-x.current.x),n=Math.abs(t.clientY-x.current.y);f.current&&(r>10||n>10)?(clearTimeout(e),e=setTimeout(()=>{const e=window.getSelection(),t=null==e?void 0:e.toString().trim(),r=document.activeElement;if("INPUT"===(null==r?void 0:r.tagName)||"TEXTAREA"===(null==r?void 0:r.tagName)||"true"===(null==r?void 0:r.getAttribute("contenteditable")))return x.current=null,void(f.current=!1);if(t&&t.split(/\s+/).length>2){const r=null==e?void 0:e.getRangeAt(0),n=null==r?void 0:r.getBoundingClientRect();n&&(a({x:n.left+n.width/2,y:n.bottom+8}),s(t),i(!0),l(!1),console.log(" Action menu triggered for sentence:",t))}x.current=null,f.current=!1},200)):(x.current=null,f.current=!1)};return document.addEventListener("mousedown",t),document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),clearTimeout(e)}},[]),reactExports.useEffect(()=>{let e;const t=e=>{h.current={x:e.touches[0].clientX,y:e.touches[0].clientY,time:Date.now()}},r=t=>{if(!h.current)return;const r=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,o=(Date.now(),Math.abs(r-h.current.x)),c=Math.abs(n-h.current.y);(o>10||c>10)&&(clearTimeout(e),e=setTimeout(()=>{const e=window.getSelection(),t=null==e?void 0:e.toString().trim(),r=document.activeElement;if("INPUT"!==(null==r?void 0:r.tagName)&&"TEXTAREA"!==(null==r?void 0:r.tagName)&&"true"!==(null==r?void 0:r.getAttribute("contenteditable"))&&t&&t.length>=2){const r=null==e?void 0:e.getRangeAt(0),n=null==r?void 0:r.getBoundingClientRect();n&&(a({x:n.left+n.width/2,y:n.bottom+8}),s(t),i(!0),l(!1))}},300)),h.current=null};return document.addEventListener("touchstart",t),document.addEventListener("touchend",r),()=>{document.removeEventListener("touchstart",t),document.removeEventListener("touchend",r),clearTimeout(e)}},[]);const g=()=>{var e;s(null),a(null),i(!1),l(!1),null==(e=window.getSelection())||e.removeAllRanges()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e,n&&t&&r&&jsxRuntimeExports.jsx(TextActionMenu,{selectedText:t,position:r,onClose:g,onCopy:()=>{p({title:"Copied!",description:`"${t}" has been copied to clipboard.`,duration:2e3})},onTranslate:()=>{i(!1),l(!0)}}),o&&t&&r&&jsxRuntimeExports.jsx(TranslationPopup,{selectedText:t,position:r,onClose:g,targetLanguage:c})]})},LanguageWelcomeBanner=({onLanguageSelected:e})=>{const{i18n:t}=useTranslation(),[s,r]=reactExports.useState(!1),[a,n]=reactExports.useState(""),i=getLanguagesWithFlags();reactExports.useEffect(()=>{const e=localStorage.getItem("language_choice_made"),t=localStorage.getItem("ui_language");if(e||t)return;const s=navigator.language.split("-")[0];i.map(e=>e.code).includes(s)&&(n(s),r(!0))},[]);const o=()=>{localStorage.setItem("language_choice_made","true"),r(!1)};if(!s)return null;const l=(c=a,i.find(e=>e.code===c));var c;return jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-slate-200 shadow-sm",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Globe,{className:"w-5 h-5 text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:null==l?void 0:l.flag}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-slate-900",children:["Continue in ",null==l?void 0:l.name,"?"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-slate-600",children:["We detected you speak ",null==l?void 0:l.name]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>(async s=>{try{await t.changeLanguage(s),localStorage.setItem("ui_language",s),localStorage.setItem("language_choice_made","true"),r(!1),null==e||e(s)}catch(a){console.error("Failed to change language:",a)}})(a),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Yes"}),jsxRuntimeExports.jsx("button",{onClick:o,className:"px-3 py-2 text-slate-600 text-sm hover:text-slate-800 transition-colors",children:"Keep English"}),jsxRuntimeExports.jsx("button",{onClick:o,className:"p-1 text-slate-400 hover:text-slate-600 transition-colors","aria-label":"Dismiss",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})]})})})},LAUNCH_DATE=new Date("2025-12-27T00:00:00Z"),DISMISS_KEY="comingSoonDismissedV1",SUBSCRIBED_KEY="comingSoonSubscribedV1",SNOOZE_KEY="comingSoonSnoozedUntilV1",isBeforeLaunch=()=>{try{return new Date<LAUNCH_DATE}catch{return!0}},ComingSoonModal=()=>{const[e,t]=reactExports.useState(!1),[s,r]=reactExports.useState(""),[a,n]=reactExports.useState(!1),[i,o]=reactExports.useState(!1),[l,c]=reactExports.useState("");reactExports.useEffect(()=>{if(isBeforeLaunch())try{const e="true"===localStorage.getItem(DISMISS_KEY),s="true"===localStorage.getItem(SUBSCRIBED_KEY),r=localStorage.getItem(SNOOZE_KEY),a=r?new Date(r):null,n=new Date,i=a instanceof Date&&!isNaN(a.getTime())&&a>n;e||s||i||t(!0)}catch{t(!0)}},[]);return e&&isBeforeLaunch()?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-slate-900/65 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-[720px] mx-4 sm:mx-6 rounded-3xl bg-white/96 shadow-2xl border border-white/60 p-5 sm:p-7 md:p-8 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-3xl bg-gradient-to-br from-sky-50/85 via-white/40 to-indigo-50/40"}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{try{localStorage.setItem(DISMISS_KEY,"true")}catch{}t(!1)},className:"absolute right-2 top-2 sm:right-3 sm:top-3 text-slate-400 hover:text-slate-700 transition-colors","aria-label":"Close",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-sky-50 border border-sky-100 text-[10px] sm:text-xs font-semibold text-sky-700 tracking-[0.16em] uppercase font-nunito",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-sky-500 animate-pulse"}),jsxRuntimeExports.jsx("span",{children:"IELTS Speaking Experience Preview"})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl sm:text-3xl md:text-[32px] font-extrabold tracking-tight text-slate-900 leading-tight font-nunito",children:"Your AI IELTS Speaking coach is almost ready."}),jsxRuntimeExports.jsxs("p",{className:"text-[12px] sm:text-sm md:text-base text-slate-600 leading-relaxed font-nunito max-w-3xl",children:["We are finalizing an examiner-level IELTS Speaking journey: smart part 13 question flows, real-time scoring, and feedback that feels like a real speaking room, not a chatbot demo. Public launch is targeted for"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-slate-900",children:"27 December"}),". Leave your email for early access and launch-only speaking bonuses."]}),i?jsxRuntimeExports.jsx("div",{className:"mt-2 sm:mt-3 text-[11px] sm:text-sm text-emerald-700 bg-emerald-50/90 border border-emerald-100 rounded-2xl px-3 py-2 font-nunito",children:"You're in. We'll email you as soon as your IELTS Speaking coach is live."}):jsxRuntimeExports.jsxs("form",{onSubmit:async e=>{var t,r;e.preventDefault(),c("");const a=s.trim();if(a&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){n(!0);try{const e="undefined"!=typeof navigator?navigator.userAgent:null,s="undefined"!=typeof window?window.location.pathname:null,{error:n}=await supabase.from("coming_soon_signups").insert({email:a,user_agent:e,page_path:s});if(n){const e=(null==(r=null==(t=n.message)?void 0:t.toLowerCase)?void 0:r.call(t))||"";if("23505"===n.code||e.includes("duplicate")){o(!0);try{localStorage.setItem(SUBSCRIBED_KEY,"true")}catch{}return}return console.error("Error saving coming soon signup:",n),void c("Something went wrong. Please try again in a moment.")}o(!0);try{localStorage.setItem(SUBSCRIBED_KEY,"true")}catch{}}catch(i){console.error("Unexpected signup error:",i),c("Something went wrong. Please try again in a moment.")}finally{n(!1)}}else c("Please enter a valid email address.")},className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"coming-soon-email",className:"block text-[10px] sm:text-xs font-semibold text-slate-800 mb-1 font-nunito",children:"Get first access to the IELTS Speaking launch"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[jsxRuntimeExports.jsx(Input,{id:"coming-soon-email",type:"email",required:!0,placeholder:"you@example.com",value:s,onChange:e=>r(e.target.value),className:"flex-1 text-[11px] sm:text-sm h-9 sm:h-10 rounded-xl border-slate-200/90 bg-white/95 font-nunito"}),jsxRuntimeExports.jsx(Button$1,{type:"submit",className:"h-9 sm:h-10 px-4 sm:px-5 rounded-xl bg-sky-600 hover:bg-sky-700 text-[10px] sm:text-xs font-semibold shadow-sm",disabled:a,children:a?"Saving...":"Notify me"})]})]}),l&&jsxRuntimeExports.jsx("p",{className:"text-[10px] sm:text-xs text-red-600 font-nunito",children:l}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 justify-between mt-1",children:[jsxRuntimeExports.jsx("p",{className:"text-[9px] sm:text-[10px] text-slate-500 leading-snug font-nunito",children:"We'll only use your email for launch updates and key improvements. No spam."}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{try{const e=new Date;e.setHours(e.getHours()+24),localStorage.setItem(SNOOZE_KEY,e.toISOString())}catch{}t(!1)},className:"text-[9px] sm:text-[10px] text-slate-500 hover:text-slate-800 underline-offset-2 hover:underline font-nunito",children:"Remind me later (24h)"})]})]})]})]})}):null},languages=getLanguagesWithFlags(),LanguageSelector=()=>{const{i18n:e}=useTranslation(),t=useThemeStyles(),[s,r]=reactExports.useState(!1),a=reactExports.useRef(null),n=languages.find(t=>t.code===e.language)||languages[0];return reactExports.useEffect(()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),reactExports.useEffect(()=>{try{const t=localStorage.getItem("alfie-language");t&&t!==e.language&&e.changeLanguage(t).catch(e=>console.error("Failed to restore language from storage",e))}catch(t){console.warn("Unable to read persisted language",t)}},[e]),jsxRuntimeExports.jsxs("div",{className:"relative",ref:a,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>r(!s),className:"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all text-sm font-medium focus:outline-none focus:ring-2",style:{backgroundColor:"glassmorphism"===t.theme.name||"dark"===t.theme.name?"rgba(255,255,255,0.1)":"minimalist"===t.theme.name?"#ffffff":"rgba(255,255,255,0.5)",borderColor:t.border,color:t.textPrimary},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=t.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="glassmorphism"===t.theme.name||"dark"===t.theme.name?"rgba(255,255,255,0.1)":"minimalist"===t.theme.name?"#ffffff":"rgba(255,255,255,0.5)"},"aria-label":"Select language","aria-expanded":s,"aria-haspopup":"listbox",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:n.flag}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-center",children:n.nativeName}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-3 h-3 transition-transform "+(s?"rotate-180":"")})]}),s&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 mt-2 w-56 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",style:{backgroundColor:t.cardBackground,borderColor:t.border,borderWidth:"1px",borderStyle:"solid"},role:"listbox","aria-label":"Language options",children:jsxRuntimeExports.jsx("div",{className:"py-2",children:languages.map(s=>jsxRuntimeExports.jsxs("button",{onClick:()=>(async t=>{try{await e.changeLanguage(t);try{localStorage.setItem("alfie-language",t)}catch(s){console.warn("Unable to persist language preference",s)}r(!1)}catch(a){console.error("Failed to change language:",a)}})(s.code),className:"w-full flex items-center justify-between px-4 py-2 text-left transition-colors",style:{backgroundColor:e.language===s.code?t.hoverBg:"transparent"},onMouseEnter:r=>{e.language!==s.code&&(r.currentTarget.style.backgroundColor=t.hoverBg)},onMouseLeave:t=>{e.language!==s.code&&(t.currentTarget.style.backgroundColor="transparent")},role:"option","aria-selected":e.language===s.code,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:s.flag}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:t.textPrimary},children:s.nativeName}),jsxRuntimeExports.jsx("span",{className:"text-xs",style:{color:t.textSecondary},children:s.name})]})]}),e.language===s.code&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4",style:{color:t.buttonPrimary}})]},s.code))})})]})},usePageTranslation=(e,t,s)=>{const[r,a]=reactExports.useState(t),[n,i]=reactExports.useState(!1);return reactExports.useEffect(()=>{if("en"===s)return void a(t);(async()=>{i(!0);try{const{data:r,error:n}=await supabase.from("page_translations").select("content").eq("page_key",e).eq("language_code",s).single();if(r&&!n)return a(r.content),void i(!1);const{data:o,error:l}=await supabase.functions.invoke("translate-page",{body:{pageKey:e,targetLanguage:s,content:t}});l?(console.error(`Translation error for ${s}:`,l),a(t)):(null==o?void 0:o.translation)?(console.log(`Successfully loaded translation for ${s}`),a(o.translation)):(console.warn(`No translation data returned for ${s}`),a(t))}catch(r){console.error("Failed to fetch translation:",r),a(t)}finally{i(!1)}})()},[e,s]),{content:r,isLoading:n}},PricingCard=({title:e,subtitle:t,price:s,period:r,features:a,buttonText:n,onButtonClick:i,isPopular:o=!1,badge:l,isPremium:c=!1,isBlack:d=!1,isGold:u=!1,originalPrice:m,limitedTimeOffer:p=!1,className:h=""})=>{const x=e.toLowerCase().includes("pro")||d,f=o?`relative flex flex-col h-full rounded-2xl border p-8 border-neutral-200 bg-white shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 scale-105 ring-1 ring-black/5 ${h}`:`flex flex-col h-full rounded-2xl border p-8 border-neutral-100 bg-white shadow-sm hover:shadow-md transition-all duration-300 hover:-translate-y-1 ${h}`,g=x?"mt-8 w-full inline-flex items-center justify-center gap-2 rounded-xl px-4 py-4 text-sm font-medium transition bg-gradient-to-r from-[#d97757] to-[#e8956e] text-white hover:from-[#c86646] hover:to-[#d7845d] shadow-lg hover:shadow-xl":c?"mt-8 w-full inline-flex items-center justify-center gap-2 rounded-xl px-4 py-4 text-sm font-medium transition bg-[#1a1a1a] text-white hover:bg-black shadow-lg hover:shadow-xl":"mt-8 w-full inline-flex items-center justify-center gap-2 rounded-xl px-4 py-4 text-sm font-medium transition bg-white border border-neutral-200 text-neutral-900 hover:bg-neutral-50";return jsxRuntimeExports.jsxs("div",{className:f,children:[o&&l&&jsxRuntimeExports.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full px-4 py-1.5 text-xs font-medium text-white shadow-lg "+(x?"bg-gradient-to-r from-[#d97757] to-[#e8956e]":"bg-[#1a1a1a]"),children:[jsxRuntimeExports.jsx(Star,{className:"h-3 w-3 text-amber-300"}),l]})}),jsxRuntimeExports.jsxs("div",{className:"text-center "+(o?"mt-2":""),children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium tracking-tight font-serif text-[#1a1a1a]",children:e}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm text-neutral-500 min-h-[40px] leading-relaxed",children:t}),jsxRuntimeExports.jsxs("div",{className:"mt-8 flex items-baseline justify-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-5xl font-serif font-medium text-[#1a1a1a] tracking-tight",children:s}),jsxRuntimeExports.jsx("span",{className:"text-sm text-neutral-500 font-medium",children:r})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 pt-8 border-t border-neutral-100 flex-grow",children:jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:a.map((t,s)=>{const r=s===a.length-1&&"Starter"===e;return jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 text-sm "+(r?"text-neutral-400 line-through":"text-neutral-700"),children:[r?jsxRuntimeExports.jsx(X,{className:"h-4 w-4 text-neutral-300 flex-shrink-0 mt-0.5"}):jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-emerald-600 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsx("span",{className:"leading-tight",children:t})]},s)})})}),jsxRuntimeExports.jsx("button",{onClick:i,className:g,children:n})]})},SkillsProgressChart=({className:e})=>{useTranslation();const[t,s]=reactExports.useState("overall"),[r,a]=reactExports.useState(!1);reactExports.useEffect(()=>{const e=setTimeout(()=>{a(!0)},300);return()=>clearTimeout(e)},[]);const n=[{id:"ielts",label:"IELTS",icon:TrendingUp,color:"#d97757",baseline:3.2,target:7.1},{id:"toeic",label:"TOEIC",icon:null,color:"#3b82f6",baseline:550,target:900},{id:"toefl",label:"TOEFL",icon:null,color:"#10b981",baseline:60,target:110},{id:"pte",label:"PTE",icon:null,color:"#f59e0b",baseline:42,target:85}],i={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.3}}};return jsxRuntimeExports.jsx(motion.div,{className:e,initial:"hidden",animate:r?"visible":"hidden",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,staggerChildren:.1}}},children:jsxRuntimeExports.jsx(Card,{className:"bg-[#fcfaf8] border-[#e6e0d4] shadow-sm overflow-hidden min-h-[500px]",children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-8",children:[jsxRuntimeExports.jsx(motion.div,{variants:i,className:"mb-8 grid grid-cols-2 lg:grid-cols-4 gap-3",children:n.map(e=>(t===e.id||"overall"===t&&e.id,jsxRuntimeExports.jsx(motion.button,{variants:i,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s(e.id),className:"p-3 rounded-lg border transition-all duration-300 "+(t===e.id?"border-[#d97757] bg-white shadow-md":"border-[#e6e0d4] bg-[#faf8f6] hover:bg-white hover:border-[#d97757]/50"),children:jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("div",{className:"text-sm font-bold font-serif "+(t===e.id?"text-[#2d2d2d]":"text-[#666666]"),children:e.label})})},e.id)))}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(motion.div,{variants:{hidden:{opacity:0,height:0},visible:{opacity:1,height:"auto",transition:{duration:.4}}},initial:"hidden",animate:"visible",exit:"hidden",className:"relative",children:(()=>{const e=n.find(e=>e.id===("overall"===t?"ielts":t))||n[0],s=(e=>{const t=[],s=e.baseline,r=e.target,a=r-s;for(let n=0;n<=6;n++){let e;if(0===n)e=0;else{const t=n/6*6-3;let s=1/(1+Math.exp(-t));const r=1/(1+Math.exp(3));s=(s-r)/(1/(1+Math.exp(-3))-r);const a=.05*(Math.random()-.5);e=Math.max(0,Math.min(1,s+a))}let i=s+a*e;6===n&&(i=r);const o=1200,l=Math.floor(o*(n/6)*(.8+.4*Math.random())+100*n);t.push({month:0===n?"Start":`Month ${n}`,score:Math.max(s,Math.min(r,Math.round(10*i)/10)),label:0===n?"Starting Point":`Month ${n} Progress`,description:Math.round(10*i)/10+" Band Score",students:l})}return t})(e);return e.icon,jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 border border-[#e6e0d4] shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3",children:jsxRuntimeExports.jsxs("h3",{className:"text-xl font-bold text-[#2d2d2d] font-serif",children:[e.label," Mastery Path"]})})}),jsxRuntimeExports.jsx("div",{className:"h-[300px] w-full",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:s,margin:{top:20,right:10,left:0,bottom:0},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",vertical:!1,stroke:"#e6e0d4"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"month",stroke:"#666666",fontSize:12,tickLine:!1,axisLine:!1,tick:{fontFamily:"'Montserrat', sans-serif",fill:"#666666"},dy:10}),jsxRuntimeExports.jsx(YAxis,{stroke:"#666666",fontSize:12,domain:[Math.floor(.8*e.baseline),Math.ceil(1.1*e.target)],tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`,tick:{fontFamily:"'Montserrat', sans-serif",fill:"#666666"},dx:-10}),jsxRuntimeExports.jsx(Tooltip$1,{cursor:{fill:"#f5f2e8",opacity:.5},content:({active:e,payload:t,label:s})=>{if(e&&t&&t.length){const e=t[0].payload;return jsxRuntimeExports.jsxs("div",{className:"bg-white border border-[#e6e0d4] rounded-lg p-3 shadow-lg",children:[jsxRuntimeExports.jsx("p",{className:"font-serif font-bold text-[#2d2d2d] mb-1",children:e.month}),jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-[#d97757]",children:e.score}),jsxRuntimeExports.jsx("span",{className:"text-xs text-[#666666] font-medium uppercase",children:"Band Score"})]})]})}return null}}),jsxRuntimeExports.jsx(Bar,{dataKey:"score",fill:e.color,radius:[4,4,0,0],animationDuration:1500,barSize:40})]})})})]})})()},t||"default")})]})})})},createOrganizationSchema=()=>({"@context":"https://schema.org","@type":"EducationalOrganization",name:"English AIdol",alternateName:"English AI dol",description:"Master English with AI-powered learning. Join 50,000+ students achieving their English goals with personalized AI feedback, comprehensive practice tests, and expert guidance for IELTS and General English. Created by TESOL-certified experts and former IELTS examiners.",url:"https://englishaidol.com",logo:"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/uploads/1758811060051-Create_an_icon_featuring_a_cartoon-style_white_rab-1758811037411.png",image:"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/social-images/social-1758811085448-Upscale_this_adorable_bunny_character_wearing_glas-1758810348175.png",foundingDate:"2024",slogan:"AI-Powered English Learning Platform",knowsAbout:["IELTS Preparation","English Language Learning","AI Tutoring","Language Assessment","English Exam Preparation"],contactPoint:{"@type":"ContactPoint",contactType:"customer service",availableLanguage:["English"],contactOption:"TollFree",email:"hello@englishaidol.com"},sameAs:["https://www.instagram.com/englishaidol","https://www.facebook.com/englishaidol","https://twitter.com/englishaidol"],hasEducationalCredential:{"@type":"EducationalCredential",name:"IELTS Preparation",description:"Comprehensive IELTS preparation with AI-powered feedback validated by former IELTS examiners"},offers:[{"@type":"Service",name:"IELTS Preparation",description:"AI-powered IELTS preparation with 98% correlation to real exam scores, created by former IELTS examiners"},{"@type":"Service",name:"General English Learning",description:"Personalized English learning with AI feedback, vocabulary building, and grammar practice"},{"@type":"Service",name:"Speaking Practice",description:"AI-powered pronunciation and fluency training with instant feedback"},{"@type":"Service",name:"Writing Feedback",description:"Detailed writing analysis using exact IELTS Band Descriptors"}],areaServed:{"@type":"Country",name:"Worldwide"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",reviewCount:"5000",bestRating:"5",worstRating:"1"},serviceType:["IELTS Preparation","TOEFL Preparation","TOEIC Preparation","PTE Preparation","General English Learning","Vocabulary Building","Grammar Practice","Speaking Practice","Writing Feedback","AI-Powered Tutoring"]}),createCourseSchema=(e,t)=>({"@context":"https://schema.org","@type":"Course",name:`${e} Preparation Course`,description:`Comprehensive ${e} preparation with AI-powered feedback and practice tests`,provider:{"@type":"EducationalOrganization",name:"English AIdol"},courseMode:"online",timeRequired:"P4M",educationalLevel:t||"Intermediate to Advanced",teaches:getCourseSkills(e),isAccessibleForFree:!0,hasCourseInstance:{"@type":"CourseInstance",courseMode:"online",instructor:{"@type":"EducationalOrganization",name:"English AIdol AI System"}}}),createServiceSchema=(e,t)=>({"@context":"https://schema.org","@type":"Service",name:e,description:t,provider:{"@type":"EducationalOrganization",name:"English AIdol"},serviceType:"Online Education",areaServed:{"@type":"Country",name:"Worldwide"},offers:{"@type":"Offer",priceSpecification:{"@type":"PriceSpecification",price:"0",priceCurrency:"USD",referenceQuantity:{"@type":"QuantitativeValue",value:"1",unitText:"month"}},availability:"https://schema.org/InStock",seller:{"@type":"EducationalOrganization",name:"English AIdol"}}}),createWebSiteSchema=()=>({"@context":"https://schema.org","@type":"WebSite",name:"English AIdol",alternateName:"English AI dol",description:"AI-powered English learning platform for IELTS and General English mastery",url:"https://englishaidol.com",potentialAction:{"@type":"SearchAction",target:"https://englishaidol.com/search?q={search_term_string}","query-input":"required name=search_term_string"},publisher:{"@type":"EducationalOrganization",name:"English AIdol"}}),createBreadcrumbSchema=e=>({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:e.map((e,t)=>({"@type":"ListItem",position:t+1,name:e.name,item:e.url}))}),createFAQSchema=e=>({"@context":"https://schema.org","@type":"FAQPage",mainEntity:e.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}}))}),createLocalBusinessSchema=()=>({"@context":"https://schema.org","@type":"LocalBusiness","@id":"https://englishaidol.com/#organization",name:"English AIdol",image:"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/uploads/1758811060051-Create_an_icon_featuring_a_cartoon-style_white_rab-1758811037411.png",url:"https://englishaidol.com",telephone:"+1-555-0123",address:{"@type":"PostalAddress",streetAddress:"Online Platform",addressLocality:"Global",addressCountry:"US"},geo:{"@type":"GeoCoordinates",latitude:40.7128,longitude:-74.006},openingHoursSpecification:{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],opens:"00:00",closes:"23:59"},sameAs:["https://www.instagram.com/englishaidol","https://www.facebook.com/englishaidol","https://twitter.com/englishaidol"]}),getCourseSkills=e=>({IELTS:["IELTS Reading","IELTS Listening","IELTS Writing","IELTS Speaking","Academic English","Test Strategies"],TOEFL:["TOEFL Reading","TOEFL Listening","TOEFL Speaking","TOEFL Writing","Academic English"],PTE:["PTE Reading","PTE Listening","PTE Speaking","PTE Writing","Academic English"],"General English":["Grammar","Vocabulary","Speaking","Listening","Writing","Reading","Pronunciation"],"Business English":["Business Communication","Professional Writing","Presentation Skills","Meeting Skills"],"Academic English":["Academic Writing","Research Skills","Citation","Academic Reading"]}[e]||["English Language Skills"]),createArticleSchema=(e,t,s,r,a,n,i)=>({"@context":"https://schema.org","@type":"BlogPosting",headline:e,description:t,url:s,datePublished:r||(new Date).toISOString(),dateModified:a||r||(new Date).toISOString(),author:{"@type":"Organization",name:n||"English AIdol",url:"https://englishaidol.com"},publisher:{"@type":"Organization",name:"English AIdol",url:"https://englishaidol.com",logo:{"@type":"ImageObject",url:"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/uploads/1758811060051-Create_an_icon_featuring_a_cartoon-style_white_rab-1758811037411.png"}},image:i||"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/social-images/social-1758811085448-Upscale_this_adorable_bunny_character_wearing_glas-1758810348175.png",mainEntityOfPage:{"@type":"WebPage","@id":s},isAccessibleForFree:!0,inLanguage:"en"}),createArticleWithFAQSchema=(e,t,s,r,a,n,i)=>({"@context":"https://schema.org","@graph":[{"@type":"BlogPosting",headline:e,description:t,url:s,datePublished:a||(new Date).toISOString(),dateModified:n||a||(new Date).toISOString(),author:{"@type":"Organization",name:"English AIdol",url:"https://englishaidol.com"},publisher:{"@type":"Organization",name:"English AIdol",url:"https://englishaidol.com",logo:{"@type":"ImageObject",url:"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/uploads/1758811060051-Create_an_icon_featuring_a_cartoon-style_white_rab-1758811037411.png"}},image:i||"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/social-images/social-1758811085448-Upscale_this_adorable_bunny_character_wearing_glas-1758810348175.png",mainEntityOfPage:{"@type":"WebPage","@id":s},isAccessibleForFree:!0,inLanguage:"en"},{"@type":"FAQPage",mainEntity:r.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}}))}]}),createHowToSchema=(e,t,s,r,a)=>({"@context":"https://schema.org","@type":"HowTo",name:e,description:t,image:a,totalTime:r||"PT30M",step:s.map((e,t)=>({"@type":"HowToStep",position:t+1,name:e.name,text:e.text,image:e.image})),author:{"@type":"Organization",name:"English AIdol",url:"https://englishaidol.com"}}),createQAPageSchema=(e,t,s)=>({"@context":"https://schema.org","@type":"QAPage",mainEntity:{"@type":"Question",name:e,text:e,answerCount:1,acceptedAnswer:{"@type":"Answer",text:t,url:s,author:{"@type":"Organization",name:"English AIdol",url:"https://englishaidol.com"}}}}),SEO=({title:e,description:t,keywords:s,image:r,url:a,type:n="website",author:i="English AIdol",published:o,modified:l,section:c,tags:d,structuredData:u,schemaType:m,courseType:p,courseLevel:h,serviceName:x,serviceDescription:f,faqs:g,breadcrumbs:y,hreflang:v,lang:E="en",howToSteps:b,totalTime:j,questionText:R,answerText:_})=>{const w="English AIdol",S=e||"English AIdol - AI-Powered English Learning Platform | IELTS & General English",T=t||"Master English with AI-powered learning. Join 50,000+ students achieving their English goals with personalized AI feedback, comprehensive practice tests, and expert guidance for IELTS and General English. Created by TESOL-certified experts and former IELTS examiners.",P=r||"https://storage.googleapis.com/gpt-engineer-file-uploads/oufTM9t5lFf51A21C2I86dAQL9J3/social-images/social-1758811085448-Upscale_this_adorable_bunny_character_wearing_glas-1758810348175.png",C=a||"https://englishaidol.com",k=s||"English learning, IELTS preparation, AI tutor, language learning, speaking practice, writing feedback, vocabulary builder, grammar practice, TOEFL, PTE, TOEIC, English AIdol, AI English tutor, IELTS practice tests, English exam preparation";let A=u;if(m)switch(m){case"organization":A=createOrganizationSchema();break;case"course":p&&(A=createCourseSchema(p,h));break;case"service":x&&f&&(A=createServiceSchema(x,f));break;case"website":A=createWebSiteSchema();break;case"localBusiness":A=createLocalBusinessSchema();break;case"faq":g&&g.length>0&&(A=createFAQSchema(g));break;case"breadcrumb":y&&y.length>0&&(A=createBreadcrumbSchema(y));break;case"article":e&&t&&(A=createArticleSchema(e,t,C,o,l,i,P));break;case"articleWithFaq":e&&t&&g&&g.length>0&&(A=createArticleWithFAQSchema(e,t,C,g,o,l,P));break;case"howTo":e&&t&&b&&b.length>0&&(A=createHowToSchema(e,t,b,j,P));break;case"qaPage":R&&_&&(A=createQAPageSchema(R,_,C))}return jsxRuntimeExports.jsxs(Helmet,{children:[jsxRuntimeExports.jsx("html",{lang:E}),jsxRuntimeExports.jsx("title",{children:S}),jsxRuntimeExports.jsx("meta",{name:"description",content:T}),jsxRuntimeExports.jsx("meta",{name:"keywords",content:k}),jsxRuntimeExports.jsx("meta",{name:"author",content:i}),jsxRuntimeExports.jsx("meta",{name:"robots",content:"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"}),jsxRuntimeExports.jsx("meta",{name:"googlebot",content:"index, follow"}),jsxRuntimeExports.jsx("meta",{name:"application-name",content:w}),jsxRuntimeExports.jsx("meta",{name:"apple-mobile-web-app-title",content:w}),o&&jsxRuntimeExports.jsx("meta",{name:"article:published_time",content:o}),l&&jsxRuntimeExports.jsx("meta",{name:"article:modified_time",content:l}),c&&jsxRuntimeExports.jsx("meta",{name:"article:section",content:c}),d&&d.map(e=>jsxRuntimeExports.jsx("meta",{name:"article:tag",content:e},e)),jsxRuntimeExports.jsx("meta",{property:"og:title",content:S}),jsxRuntimeExports.jsx("meta",{property:"og:description",content:T}),jsxRuntimeExports.jsx("meta",{property:"og:image",content:P}),jsxRuntimeExports.jsx("meta",{property:"og:url",content:C}),jsxRuntimeExports.jsx("meta",{property:"og:type",content:n}),jsxRuntimeExports.jsx("meta",{property:"og:site_name",content:w}),jsxRuntimeExports.jsx("meta",{property:"og:locale",content:E}),v&&v.map(e=>jsxRuntimeExports.jsx("meta",{property:"og:locale:alternate",content:e.lang},e.lang)),jsxRuntimeExports.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),jsxRuntimeExports.jsx("meta",{name:"twitter:site",content:"@englishaidol"}),jsxRuntimeExports.jsx("meta",{name:"twitter:title",content:S}),jsxRuntimeExports.jsx("meta",{name:"twitter:description",content:T}),jsxRuntimeExports.jsx("meta",{name:"twitter:image",content:P}),jsxRuntimeExports.jsx("link",{rel:"canonical",href:C}),v&&v.map(e=>jsxRuntimeExports.jsx("link",{rel:"alternate",hrefLang:e.lang,href:e.url},e.lang)),v&&jsxRuntimeExports.jsx("link",{rel:"alternate",hrefLang:"x-default",href:C}),A&&jsxRuntimeExports.jsx("script",{type:"application/ld+json",children:JSON.stringify(A)})]})},HeroIndex=()=>{const e=useNavigate(),{t:t,i18n:s}=useTranslation(),{toast:r}=useToast(),{user:a,loading:n}=useAuth(),[i,o]=reactExports.useState(!1),[l,c]=reactExports.useState("monthly"),d={hero:{title:"Master English with AI-Powered Learning",subtitle:"Join 50,000+ students achieving their goals across IELTS, TOEFL, PTE, TOEIC, and General English with personalized AI feedback and expert guidance.",startButton:"Start Your Journey",exploreButton:"Explore All Tests"},highlights:{aiFeedback:{title:"AI-Powered Feedback",description:"Get instant, detailed analysis of your English skills with personalized improvement suggestions."},adaptive:{title:"Adaptive Learning",description:"Smart algorithms that adapt to your pace and focus on your weak areas for optimal progress."},proven:{title:"Proven Results",description:"95% success rate with students achieving their target scores faster than traditional methods."},community:{title:"Expert Community",description:"Connect with certified instructors and fellow learners for support and motivation."}},programs:{title:"Learning Programs",subtitle:"Choose your path to English mastery with our comprehensive programs.",cards:{ielts:{title:"IELTS"},toefl:{title:"TOEFL"},toeic:{title:"TOEIC"},pte:{title:"PTE"},general:{title:"General English"}}},features:{title:"AI-powered learning that adapts to you",subtitle:"Our advanced AI technology creates personalized learning experiences that help you achieve your English goals faster and more effectively.",list:{aiFeedback:{title:"AI-Powered Feedback",description:"Get instant, personalized feedback on your performance with detailed analysis."},adaptive:{title:"Adaptive Learning",description:"Smart algorithm adapts to your learning pace and identifies weak areas."},realtime:{title:"Real-time Progress",description:"Track your improvement with comprehensive analytics and score predictions."},community:{title:"Expert Community",description:"Connect with fellow learners and certified English instructors worldwide."}},stats:{students:"Active students",success:"Success rate",support:"AI support"},askQuestion:"Ask a Question",startLearning:"Start Learning",engineTitle:"AI Learning Engine",engineSubtitle:"Intelligent feedback system"},pricing:{title:"Pricing",discounts:{monthly:"Monthly",threeMonths:"3 Months",sixMonths:"6 Months",save10:"Save 15%",save30:"Save 30%"},free:{title:"Explorer",subtitle:"Experience the power of AI learning completely risk-free.",price:"$0",period:"/forever",features:["Access to 1 Full Practice Test","Basic AI Scoring & Feedback","Limited Vocabulary Builder","Community Forum Access"],button:"Start Free Journey"},pro:{title:"Pro",subtitle:"Unlock your full potential with unlimited AI mentorship.",badge:"Most Popular",priceMonthly:"$78",price3Months:"$68",price6Months:"$58",period:"/mo",features:["Unlimited AI Practice Tests","Examiner-Level Detailed Feedback","Advanced Pronunciation Coaching","Writing Style & Tone Analysis","Personalized Study Roadmap","Priority Support Channel"],button:"Become a Pro"},ultra:{title:"Ultra",subtitle:"The ultimate mentorship package for serious achievers.",priceMonthly:"$300",price3Months:"$270",price6Months:"$240",period:"/mo",features:["Everything in Pro Plan","1-on-1 Personal Meeting with Developers","All Premium Templates & E-books","Direct Access to New Beta Features"],button:"Get Ultra Access"}},testimonials:{title:"Student Success Stories",subtitle:"Real achievements from learners who trusted our platform."},experts:{line:"Created by TESOLcertified experts and former/current IELTS examiners."},comparison:{title:"Why our universal scoring system leads the industry",columns:["Human tutors","Our Multi-Exam AI","Traditional self-study"],rows:['{"label":"Scoring consistency","traditional":"Varies by tutor mood/fatigue","ai":"100% consistent across IELTS, TOEFL, PTE, TOEIC","self":"Guesswork"}','{"label":"Feedback accuracy","traditional":"Subjective","ai":"98% correlation with real exam results","self":"No feedback"}','{"label":"Cost per month","traditional":"$1000$5000 for intensive tutoring","ai":"$49 unlimited access","self":"Free but unreliable"}','{"label":"Exam coverage","traditional":"Specialized tutors needed","ai":"IELTS, TOEFL, PTE, TOEIC, General English","self":"Fragmented resources"}','{"label":"Band descriptors used","traditional":"Tutor\'s interpretation","ai":"Official Rubrics for Each Exam","self":"None"}']},faq:{title:"Expert-validated scoring for every major exam",items:['{"q":"Does this work for TOEFL, PTE, and TOEIC as well as IELTS?","a":"Absolutely. Our AI engine has been trained on thousands of official samples from IELTS, TOEFL, PTE, and TOEIC. It automatically detects which exam you are practicing for and applies the specific scoring rubrics and band descriptors for that test. Whether you need a TOEFL score of 100+, a PTE 79+, or a TOEIC 900+, our feedback is tailored to that exam\'s unique criteria."}','{"q":"How accurate is the scoring for Speaking and Writing?","a":"Our scoring correlates 98% with official exam results across all supported tests. This isn\'t just generic grammar checking; our system evaluates Task Response, Coherence, Lexical Resource, and Pronunciation just like a certified examiner would. We regularly calibrate our AI against real recent exam papers to ensure maximum accuracy."}','{"q":"Can I practice General English without preparing for an exam?","a":"Yes! Our General English module is perfect for professionals and learners who want to improve their fluency, vocabulary, and confidence without the pressure of a specific test format. You still get the same high-quality AI feedback to track your improvement over time."}','{"q":"Is the \'Ultra\' plan really worth it?","a":"If you are serious about achieving a high score quickly, the Ultra plan offers unparalleled value. The 1-on-1 sessions with our developers allow you to deep-dive into how the AI works and get personalized strategy tips. Plus, lifetime legacy status means you lock in your rate forever, even as we add more advanced features."}']},cta:{badge:"Start Your English Journey",title:"Ready to master English?",subtitle:"Join thousands of successful students and start your personalized learning journey today.",startTrial:"Start Free Trial",tryTest:"Try Practice Test",note:"No credit card required. Start learning immediately.",successTitle:"Your Success Awaits",successSubtitle:"Join the AI revolution in English learning"},footer:{description:"AI-powered English learning platform for IELTS and General English mastery.",email:"hello@englishaidol.com",phone:"Available 24/7 via AI Chat",learning:{title:"Learning",ielts:"IELTS Preparation",general:"General English",features:"AI Features",stories:"Success Stories"},resources:{title:"Resources",practice:"Practice Tests",writing:"Writing Feedback",speaking:"Speaking Practice",vocabulary:"Vocabulary Builder"},connect:{title:"Connect"},copyright:" 2024 English AIdol. All rights reserved.",privacy:"Privacy",terms:"Terms",support:"Support"}},{content:u,isLoading:m}=usePageTranslation("hero-page",d,s.language),p=e=>(e=>{let t=u;for(const s of e){if(!t||"object"!=typeof t)return"";t=t[s]}return"string"==typeof t?t:""})(e)||(e=>{let t=d;for(const s of e){if(!t||"object"!=typeof t)return"";t=t[s]}return"string"==typeof t?t:""})(e),h=e=>{let t=u;for(const s of e){if(!t||"object"!=typeof t){let t=d;for(const s of e)t&&"object"==typeof t&&(t=t[s]);return Array.isArray(t)?t:[]}t=t[s]}return Array.isArray(t)?t:[]},x=()=>{n||e(a?"/dashboard":"/auth")};return p(["features","list","aiFeedback","title"]),p(["features","list","aiFeedback","description"]),p(["features","list","adaptive","title"]),p(["features","list","adaptive","description"]),p(["features","list","realtime","title"]),p(["features","list","realtime","description"]),p(["features","list","community","title"]),p(["features","list","community","description"]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen antialiased text-[#3c3c3c] bg-[#f5f2e8]",style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', sans-serif"},children:[jsxRuntimeExports.jsx(SEO,{title:"English AIdol - AI-Powered English Learning Platform | IELTS & General English",description:"Master English with AI-powered learning. Join thousands of students achieving their English goals with personalized AI feedback, comprehensive practice tests, and expert guidance for IELTS, TOEFL, PTE, TOEIC, and General English. Created by TESOL-certified experts.",keywords:"English learning, IELTS preparation, AI tutor, language learning, speaking practice, writing feedback, vocabulary builder, grammar practice, TOEFL, PTE, TOEIC, English AIdol, AI English tutor, IELTS practice tests, English exam preparation, AI speaking scoring, instant writing feedback, IELTS mock test, PTE practice",type:"website",schemaType:"organization",url:"https://englishaidol.com"}),jsxRuntimeExports.jsx(LanguageWelcomeBanner,{onLanguageSelected:e=>{r({title:"Language Updated",description:"Interface language changed to your preference."})}}),jsxRuntimeExports.jsx("header",{className:"fixed z-50 top-0 right-0 left-0 bg-[#f5f2e8]/80 backdrop-blur-md border-b border-[#e6e0d4]",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between py-4",children:[jsxRuntimeExports.jsx("nav",{className:"hidden items-center gap-8 md:flex"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"md:block",children:jsxRuntimeExports.jsx(LanguageSelector,{})}),a?jsxRuntimeExports.jsxs("button",{onClick:x,className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-[#d97757] text-white font-medium hover:bg-[#c56a4b] transition-colors shadow-sm text-sm",children:[jsxRuntimeExports.jsx(Calendar$1,{className:"h-4 w-4"}),a?t("header.dashboard",{defaultValue:"Dashboard"}):t("header.startFreeTrial",{defaultValue:"Start Free Trial"})]}):jsxRuntimeExports.jsx("button",{onClick:()=>e("/auth"),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-[#d97757] text-white font-medium hover:bg-[#c56a4b] transition-colors shadow-sm text-sm",children:t("header.signIn",{defaultValue:"Sign In"})})]}),jsxRuntimeExports.jsx("button",{onClick:()=>o(!i),className:"md:hidden inline-flex h-10 w-10 items-center justify-center rounded-full bg-[#e6e0d4]/50 hover:bg-[#e6e0d4] text-[#3c3c3c] transition-colors","aria-label":"Open menu",children:i?jsxRuntimeExports.jsx(X,{className:"h-5 w-5"}):jsxRuntimeExports.jsx(Menu,{className:"h-5 w-5"})})]}),i&&jsxRuntimeExports.jsx("div",{className:"border-t px-4 py-4 md:hidden border-[#e6e0d4] bg-[#f5f2e8]",children:jsxRuntimeExports.jsx("nav",{className:"grid gap-4",children:jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:a?jsxRuntimeExports.jsxs("button",{onClick:x,className:"flex-1 inline-flex justify-center items-center gap-2 px-5 py-3 rounded-full bg-[#d97757] text-white font-medium hover:bg-[#c56a4b] transition-colors shadow-sm text-sm",children:[jsxRuntimeExports.jsx(Calendar$1,{className:"h-4 w-4"}),a?t("header.dashboard",{defaultValue:"Dashboard"}):t("header.startFree",{defaultValue:"Start Free"})]}):jsxRuntimeExports.jsx("button",{onClick:()=>e("/auth"),className:"flex-1 inline-flex justify-center items-center gap-2 px-5 py-3 rounded-full bg-[#d97757] text-white font-medium hover:bg-[#c56a4b] transition-colors shadow-sm text-sm",children:t("header.signIn",{defaultValue:"Sign In"})})})})})]})}),jsxRuntimeExports.jsx("section",{className:"pt-32 pb-20 relative min-h-[90vh] flex items-center bg-[#f5f2e8] overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-20 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-2xl text-left text-center lg:text-left",children:[jsxRuntimeExports.jsx(motion.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-4xl sm:text-5xl lg:text-6xl font-black tracking-tight text-[#2d2d2d] leading-[1.1]",style:{fontFamily:"'Montserrat', sans-serif",fontWeight:"900"},children:p(["hero","title"])}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"mt-8 text-lg sm:text-xl text-[#666666] leading-relaxed",style:{fontFamily:"'Inter', sans-serif",fontWeight:"400"},children:p(["hero","subtitle"])}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"mt-6",children:jsxRuntimeExports.jsxs("button",{onClick:x,className:"inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full bg-[#d97757] text-white font-medium hover:bg-[#c56a4b] transition-all shadow-md hover:shadow-lg text-base min-h-[48px] w-full sm:w-auto sm:min-w-[200px]",children:[jsxRuntimeExports.jsx(Rocket,{className:"h-4 w-4"}),"Get Started Now"]})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:1,delay:.2,ease:"easeOut"},className:"relative lg:block h-full min-h-[300px] sm:min-h-[400px] lg:min-h-[500px] w-full mt-12 lg:mt-0",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[#d97757]/5 rounded-[3rem] transform rotate-3 scale-95 z-0"}),jsxRuntimeExports.jsx("img",{className:"relative z-10 w-full h-auto object-cover rounded-[2.5rem] shadow-xl border border-[#e6e0d4]",src:"/hero-image.png",alt:"English AIdol Learning Interface",loading:"lazy",decoding:"async"})]})]})})}),jsxRuntimeExports.jsx("section",{className:"py-12 bg-[#f5f2e8]",id:"programs",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-[#2d2d2d]",style:{fontFamily:"'Montserrat', sans-serif"},children:p(["programs","title"])}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-lg text-[#666666] font-sans",children:p(["programs","subtitle"])})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[{id:"ielts",img:"/hero-nov06.png",title:"IELTS",path:"/ielts-portal"},{id:"toefl",img:"/Generated Image October 19, 2025 - 11_14PM.png",title:"TOEFL",path:"/toefl-portal"},{id:"toeic",img:"/TOEIC.png",title:"TOEIC",path:"/toeic"},{id:"pte",img:"/PTE.png",title:"PTE",path:"/pte-portal"},{id:"business",img:"/business-english.png",title:"Business",path:"/business-portal"},{id:"general",img:"/general english.png",title:"General English",path:"/general-portal"}].map(t=>jsxRuntimeExports.jsxs("div",{className:"group flex flex-col items-center p-6 rounded-2xl bg-[#faf8f6] border border-[#e6e0d4] transition-all duration-300 hover:shadow-lg hover:-translate-y-1 cursor-pointer",onClick:()=>e(t.path),children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 mb-6 overflow-hidden rounded-xl bg-white p-2 shadow-sm flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:t.img,alt:t.title,className:"w-full h-full object-contain",loading:"lazy",decoding:"async"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-serif font-medium text-[#3c3c3c]",children:p(["programs","cards",t.id,"title"])})]},t.id))})]})}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-[#f5f2e8]",id:"improvement",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-[#2d2d2d]",style:{fontFamily:"'Montserrat', sans-serif"},children:"Track Your English Progress"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-lg text-[#666666] font-sans max-w-2xl mx-auto",children:"Click on any skill below to see your personalized improvement journey  Based on 5,683 active students achieving their goals in just 4.6 months average"})]}),jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto",children:jsxRuntimeExports.jsx(SkillsProgressChart,{})})]})}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-[#f5f2e8]",id:"comparison",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-[#2d2d2d] text-center mb-16",style:{fontFamily:"'Inter', sans-serif"},children:p(["comparison","title"])}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"group rounded-3xl p-8 border border-[#e6e0d4] bg-white hover:border-[#d97757]/30 transition-all duration-300 hover:shadow-xl hover:-translate-y-1 relative overflow-hidden flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-[#e6e0d4]/10 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-[#2d2d2d] mb-8 text-center border-b border-[#e6e0d4] pb-4 relative z-10",style:{fontFamily:"'Inter', sans-serif"},children:"Human Tutors"}),jsxRuntimeExports.jsx("ul",{className:"space-y-6 relative z-10 flex-1",children:h(["comparison","rows"]).map((e,t)=>{let s;try{s=JSON.parse(e)}catch{return null}return jsxRuntimeExports.jsxs("li",{className:"flex flex-col gap-1.5 min-h-[80px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-[#999999] uppercase tracking-wider",children:s.label}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-[#666666] font-medium font-sans text-sm",children:[jsxRuntimeExports.jsx(Minus,{className:"h-4 w-4 mt-0.5 text-[#999999] flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:s.traditional})]})]},t)})})]}),jsxRuntimeExports.jsxs("div",{className:"group rounded-3xl p-8 border-2 border-[#d97757] bg-white shadow-2xl transform scale-105 relative z-20 overflow-visible flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#fffaf8] to-white opacity-50"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-[#d97757] mb-8 text-center border-b border-[#d97757]/10 pb-4",style:{fontFamily:"'Inter', sans-serif"},children:"English AIdol"}),jsxRuntimeExports.jsx("ul",{className:"space-y-6",children:h(["comparison","rows"]).map((e,t)=>{let s;try{s=JSON.parse(e)}catch{return null}return jsxRuntimeExports.jsxs("li",{className:"flex flex-col gap-2 min-h-[80px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-[#d97757] uppercase tracking-wider",children:s.label}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"mt-0.5 bg-[#d97757] p-1 rounded-full flex-shrink-0 shadow-sm",children:jsxRuntimeExports.jsx(Check,{className:"h-3 w-3 text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-[#2d2d2d] font-bold font-sans text-sm leading-snug",children:s.ai})]})]},t)})})]})]}),jsxRuntimeExports.jsxs("div",{className:"group rounded-3xl p-8 border border-[#e6e0d4] bg-white hover:border-[#d97757]/30 transition-all duration-300 hover:shadow-xl hover:-translate-y-1 relative overflow-hidden flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 bg-[#e6e0d4]/10 rounded-br-full -ml-4 -mt-4 transition-transform group-hover:scale-110"}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-[#2d2d2d] mb-8 text-center border-b border-[#e6e0d4] pb-4 relative z-10",style:{fontFamily:"'Inter', sans-serif"},children:"Self-Study"}),jsxRuntimeExports.jsx("ul",{className:"space-y-6 relative z-10 flex-1",children:h(["comparison","rows"]).map((e,t)=>{let s;try{s=JSON.parse(e)}catch{return null}return jsxRuntimeExports.jsxs("li",{className:"flex flex-col gap-1.5 min-h-[80px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-[#999999] uppercase tracking-wider",children:s.label}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-[#666666] font-medium font-sans text-sm",children:[jsxRuntimeExports.jsx(X,{className:"h-4 w-4 mt-0.5 text-[#999999] flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:s.self})]})]},t)})})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-[#f5f2e8]",id:"faq",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-serif font-medium text-[#2d2d2d] text-center mb-12",children:p(["faq","title"])}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:h(["faq","items"]).map((e,t)=>{let s;try{s=JSON.parse(e)}catch{return null}return jsxRuntimeExports.jsxs(motion.details,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4,delay:.05*t},className:"group rounded-xl border border-[#e6e0d4] bg-white open:shadow-md transition-all duration-200",children:[jsxRuntimeExports.jsxs("summary",{className:"cursor-pointer font-serif font-medium text-[#3c3c3c] px-6 py-5 flex items-center justify-between select-none",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:s.q}),jsxRuntimeExports.jsx(ChevronDown,{className:"h-5 w-5 text-[#666666] transition-transform group-open:rotate-180"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:jsxRuntimeExports.jsx("p",{className:"px-6 pb-6 text-[#666666] font-sans leading-relaxed border-t border-[#f5f2e8] pt-4",children:s.a})})]},t)})})]})}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-[#f5f2e8] border-t border-[#e6e0d4]",id:"pricing",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsx("div",{className:"text-center mb-12",children:jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-[#2d2d2d]",style:{fontFamily:"'Montserrat', sans-serif"},children:p(["pricing","title"])})}),jsxRuntimeExports.jsx("div",{className:"mb-16 flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex rounded-lg border border-[#e6e0d4] bg-[#faf8f6] p-1 shadow-sm",children:[jsxRuntimeExports.jsx("button",{onClick:()=>c("monthly"),"data-discount":"monthly",className:"rounded-md px-6 py-2.5 text-sm font-medium transition font-sans "+("monthly"===l?"bg-white text-[#2d2d2d] shadow-sm":"text-[#666666] hover:bg-white/50"),children:p(["pricing","discounts","monthly"])}),jsxRuntimeExports.jsxs("button",{onClick:()=>c("3months"),"data-discount":"3months",className:"rounded-md px-6 py-2.5 text-sm font-medium transition font-sans "+("3months"===l?"bg-white text-[#2d2d2d] shadow-sm":"text-[#666666] hover:bg-white/50"),children:[p(["pricing","discounts","threeMonths"]),jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs text-[#d97757] font-semibold",children:p(["pricing","discounts","save10"])})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>c("6months"),"data-discount":"6months",className:"rounded-md px-6 py-2.5 text-sm font-medium transition font-sans "+("6months"===l?"bg-white text-[#2d2d2d] shadow-sm":"text-[#666666] hover:bg-white/50"),children:[p(["pricing","discounts","sixMonths"]),jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs text-[#d97757] font-semibold",children:p(["pricing","discounts","save30"])})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid gap-8 md:grid-cols-3 max-w-7xl mx-auto",children:[jsxRuntimeExports.jsx(PricingCard,{title:p(["pricing","free","title"]),subtitle:p(["pricing","free","subtitle"]),price:p(["pricing","free","price"]),period:p(["pricing","free","period"]),features:h(["pricing","free","features"]),buttonText:p(["pricing","free","button"]),onButtonClick:x,isPopular:!0,className:"min-h-[600px]"}),jsxRuntimeExports.jsx(PricingCard,{title:p(["pricing","pro","title"]),subtitle:p(["pricing","pro","subtitle"]),price:"3months"===l?"$45":"6months"===l?"$35":"$49",period:p(["pricing","pro","period"]),features:h(["pricing","pro","features"]),buttonText:p(["pricing","pro","button"]),onButtonClick:async()=>{const{data:{session:t}}=await supabase.auth.getSession();if(!t)return r({title:"Authentication Required",description:"Please sign in to upgrade to Pro.",variant:"destructive"}),void e("/auth");e("/pay?plan=premium")},isPopular:!0,badge:p(["pricing","pro","badge"]),originalPrice:"$78",limitedTimeOffer:!0,className:"min-h-[600px]"}),jsxRuntimeExports.jsx(PricingCard,{title:p(["pricing","ultra","title"]),subtitle:p(["pricing","ultra","subtitle"]),price:"3months"===l?"$179":"6months"===l?"$159":"$199",period:p(["pricing","ultra","period"]),features:h(["pricing","ultra","features"]),buttonText:p(["pricing","ultra","button"]),onButtonClick:async()=>{const{data:{session:t}}=await supabase.auth.getSession();if(!t)return r({title:"Authentication Required",description:"Please sign in to upgrade to Ultra.",variant:"destructive"}),void e("/auth");e("/pay?plan=ultra")},isPopular:!0,isPremium:!0,isGold:!0,originalPrice:"$300",limitedTimeOffer:!0,className:"min-h-[600px]"})]})]})}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-[#f5f2e8]",id:"highlights-bottom",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center mb-24",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-80 h-80 bg-gradient-to-br from-white to-[#f5f2e8] rounded-full flex items-center justify-center border border-[#e6e0d4] shadow-sm",children:jsxRuntimeExports.jsx(Brain,{className:"w-32 h-32 text-[#d97757] opacity-80"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl sm:text-4xl font-serif font-medium text-[#2d2d2d] mb-6",children:p(["highlights","aiFeedback","title"])}),jsxRuntimeExports.jsx("p",{className:"text-lg text-[#666666] font-sans leading-relaxed",children:p(["highlights","aiFeedback","description"])})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center mb-24 lg:auto-cols-max",children:[jsxRuntimeExports.jsx("div",{className:"lg:order-2 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-80 h-80 bg-gradient-to-br from-white to-[#f5f2e8] rounded-full flex items-center justify-center border border-[#e6e0d4] shadow-sm",children:jsxRuntimeExports.jsx(Target,{className:"w-32 h-32 text-[#d97757] opacity-80"})})}),jsxRuntimeExports.jsxs("div",{className:"lg:order-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl sm:text-4xl font-serif font-medium text-[#2d2d2d] mb-6",children:p(["highlights","adaptive","title"])}),jsxRuntimeExports.jsx("p",{className:"text-lg text-[#666666] font-sans leading-relaxed",children:p(["highlights","adaptive","description"])})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center mb-24",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-80 h-80 bg-gradient-to-br from-white to-[#f5f2e8] rounded-full flex items-center justify-center border border-[#e6e0d4] shadow-sm",children:jsxRuntimeExports.jsx(TrendingUp,{className:"w-32 h-32 text-[#d97757] opacity-80"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl sm:text-4xl font-serif font-medium text-[#2d2d2d] mb-6",children:p(["highlights","proven","title"])}),jsxRuntimeExports.jsx("p",{className:"text-lg text-[#666666] font-sans leading-relaxed",children:p(["highlights","proven","description"])})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center lg:auto-cols-max",children:[jsxRuntimeExports.jsx("div",{className:"lg:order-2 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-80 h-80 bg-gradient-to-br from-white to-[#f5f2e8] rounded-full flex items-center justify-center border border-[#e6e0d4] shadow-sm",children:jsxRuntimeExports.jsx(Star,{className:"w-32 h-32 text-[#d97757] opacity-80"})})}),jsxRuntimeExports.jsxs("div",{className:"lg:order-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl sm:text-4xl font-serif font-medium text-[#2d2d2d] mb-6",children:p(["highlights","community","title"])}),jsxRuntimeExports.jsx("p",{className:"text-lg text-[#666666] font-sans leading-relaxed",children:p(["highlights","community","description"])})]})]})]})}),jsxRuntimeExports.jsx("footer",{className:"border-t border-[#e6e0d4] bg-[#faf8f6] py-20",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-12 sm:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-6",children:jsxRuntimeExports.jsx("img",{src:"/1000031328.png",alt:"English AIdol Logo",className:"h-16 w-auto opacity-90 grayscale-[0.2]"})}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm text-[#666666] font-sans leading-relaxed",children:"Simple, Transparent Pricing. Invest in your future with the most advanced AI English tutor available."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-serif font-semibold text-[#2d2d2d] tracking-wide uppercase mb-6",children:p(["footer","learning","title"])}),jsxRuntimeExports.jsxs("ul",{className:"space-y-3 text-sm text-[#666666] font-sans",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{className:"hover:text-[#d97757] transition-colors",href:"/ielts-portal",children:"IELTS Preparation"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{className:"hover:text-[#d97757] transition-colors",href:"/toefl-portal",children:"TOEFL Preparation"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{className:"hover:text-[#d97757] transition-colors",href:"/pte-portal",children:"PTE Preparation"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{className:"hover:text-[#d97757] transition-colors",href:"/toeic",children:"TOEIC Preparation"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{className:"hover:text-[#d97757] transition-colors",href:"/business-portal",children:"Business English"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{className:"hover:text-[#d97757] transition-colors",href:"/general-portal",children:"General English"})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-serif font-semibold text-[#2d2d2d] tracking-wide uppercase mb-6",children:"Blog & Resources"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-[#666666] font-sans leading-relaxed mb-4",children:"Discover expert tips, real IELTS examiner insights, and AI-powered study strategies."}),jsxRuntimeExports.jsxs(Link,{to:"/blog",className:"inline-flex items-center gap-2 text-[#d97757] hover:text-[#c56a4b] font-medium font-sans text-sm",children:[jsxRuntimeExports.jsx("span",{children:"Visit the Blog"}),jsxRuntimeExports.jsx(ArrowRight,{className:"h-3 w-3"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-serif font-semibold text-[#2d2d2d] tracking-wide uppercase mb-6",children:"Company Info"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-[#666666] font-sans leading-relaxed space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-[#2d2d2d]",children:"ENGLISHAIDOL LLC"}),jsxRuntimeExports.jsx("p",{children:"5830 E 2nd St, Ste 7000 #29281"}),jsxRuntimeExports.jsx("p",{children:"Casper, Wyoming 82609"}),jsxRuntimeExports.jsx("p",{children:"United States"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-6",children:[jsxRuntimeExports.jsx("a",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-[#e6e0d4] bg-white text-[#666666] transition hover:border-[#d97757] hover:text-[#d97757]",href:"#","aria-label":"Instagram",children:jsxRuntimeExports.jsx(Instagram,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("a",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-[#e6e0d4] bg-white text-[#666666] transition hover:border-[#d97757] hover:text-[#d97757]",href:"#","aria-label":"Facebook",children:jsxRuntimeExports.jsx(Facebook,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("a",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-[#e6e0d4] bg-white text-[#666666] transition hover:border-[#d97757] hover:text-[#d97757]",href:"#","aria-label":"Twitter",children:jsxRuntimeExports.jsx(Twitter,{className:"h-4 w-4"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-16 flex flex-col items-center justify-between gap-6 border-t border-[#e6e0d4] pt-8 text-xs sm:flex-row text-[#666666] font-sans",children:[jsxRuntimeExports.jsx("p",{children:p(["footer","copyright"])}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsx(Link,{className:"hover:text-[#d97757] transition-colors",to:"/privacy-policy",children:p(["footer","privacy"])}),jsxRuntimeExports.jsx(Link,{className:"hover:text-[#d97757] transition-colors",to:"/refund-policy",children:"Refund Policy"}),jsxRuntimeExports.jsx(Link,{className:"hover:text-[#d97757] transition-colors",to:"/terms-of-service",children:p(["footer","terms"])}),jsxRuntimeExports.jsx(Link,{className:"hover:text-[#d97757] transition-colors",to:"/support",children:p(["footer","support"])})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6 border-t border-[#e6e0d4]/50 text-[10px] text-[#666666]/60 space-y-2 font-sans max-w-4xl mx-auto text-center",children:[jsxRuntimeExports.jsx("p",{children:"We securely store your practice data and audio recordings long-term so you can review your history, track progress, and receive better AI feedback over time."}),jsxRuntimeExports.jsx("p",{children:"All feedback and scores are AI-generated for learning purposes only. This is not an official test, does not guarantee future exam results, and does not constitute legal, immigration, or professional advice."})]})]})}),jsxRuntimeExports.jsx(MinimalisticChatbot,{})]})};var lottie$1={exports:{}};(function(module,exports){var factory;"undefined"!=typeof document&&"undefined"!=typeof navigator&&(factory=function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,t){var s,r,a=e.length;for(s=0;s<a;s+=1)for(var n in r=e[s].prototype)Object.prototype.hasOwnProperty.call(r,n)&&(t.prototype[n]=r[n])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}var audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,s=this.audios.length;for(t=0;t<s;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(e,t){var s,r=0,a=[];switch(e){case"int16":case"uint8c":s=1;break;default:s=1.1}for(r=0;r<t;r+=1)a.push(s);return a}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,s){return"float32"===t?new Float32Array(s):"int16"===t?new Int16Array(s):"uint8c"===t?new Uint8ClampedArray(s):e(t,s)}:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],s=t.length;for(e=0;e<s;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"===_typeof$6(e)&&e.length){var t,s=createSizedArray(e.length),r=e.length;for(t=0;t<r;t+=1)s[t]=Math.abs(e[t]);return s}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,s,r){this.type=e,this.currentTime=t,this.totalTime=s,this.direction=r<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,s,r){this.type=e,this.currentLoop=s,this.totalLoops=t,this.direction=r<0?-1:1}function BMSegmentStartEvent(e,t,s){this.type=e,this.firstFrame=t,this.totalFrames=s}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=function(){var e=0;return function(){return idPrefix$1+"__lottie_element_"+(e+=1)}}();function HSVtoRGB(e,t,s){var r,a,n,i,o,l,c,d;switch(l=s*(1-t),c=s*(1-(o=6*e-(i=Math.floor(6*e)))*t),d=s*(1-(1-o)*t),i%6){case 0:r=s,a=d,n=l;break;case 1:r=c,a=s,n=l;break;case 2:r=l,a=s,n=d;break;case 3:r=l,a=c,n=s;break;case 4:r=d,a=l,n=s;break;case 5:r=s,a=l,n=c}return[r,a,n]}function RGBtoHSV(e,t,s){var r,a=Math.max(e,t,s),n=Math.min(e,t,s),i=a-n,o=0===a?0:i/a,l=a/255;switch(a){case n:r=0;break;case e:r=t-s+i*(t<s?6:0),r/=6*i;break;case t:r=s-e+2*i,r/=6*i;break;case s:r=e-t+4*i,r/=6*i}return[r,o,l]}function addSaturationToRGB(e,t){var s=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return s[1]+=t,s[1]>1?s[1]=1:s[1]<=0&&(s[1]=0),HSVtoRGB(s[0],s[1],s[2])}function addBrightnessToRGB(e,t){var s=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return s[2]+=t,s[2]>1?s[2]=1:s[2]<0&&(s[2]=0),HSVtoRGB(s[0],s[1],s[2])}function addHueToRGB(e,t){var s=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return s[0]+=t/360,s[0]>1?s[0]-=1:s[0]<0&&(s[0]+=1),HSVtoRGB(s[0],s[1],s[2])}var rgbToHex=function(){var e,t,s=[];for(e=0;e<256;e+=1)t=e.toString(16),s[e]=1===t.length?"0"+t:t;return function(e,t,r){return e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),"#"+s[e]+s[t]+s[r]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dataManager=function(){var e,t,s=1,r=[],a={onmessage:function(){},postMessage:function(t){e({data:t})}},n={postMessage:function(e){a.onmessage({data:e})}};function i(){t||((t=function(t){if(window.Worker&&window.Blob&&getWebWorker()){var s=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"}),r=URL.createObjectURL(s);return new Worker(r)}return e=t,a}(function(e){if(n.dataManager||(n.dataManager=function(){function e(a,n){var i,o,l,c,u,m,p=a.length;for(o=0;o<p;o+=1)if("ks"in(i=a[o])&&!i.completed){if(i.completed=!0,i.hasMask){var h=i.masksProperties;for(c=h.length,l=0;l<c;l+=1)if(h[l].pt.k.i)r(h[l].pt.k);else for(m=h[l].pt.k.length,u=0;u<m;u+=1)h[l].pt.k[u].s&&r(h[l].pt.k[u].s[0]),h[l].pt.k[u].e&&r(h[l].pt.k[u].e[0])}0===i.ty?(i.layers=t(i.refId,n),e(i.layers,n)):4===i.ty?s(i.shapes):5===i.ty&&d(i)}}function t(e,t){var s=function(e,t){for(var s=0,r=t.length;s<r;){if(t[s].id===e)return t[s];s+=1}return null}(e,t);return s?s.layers.__used?JSON.parse(JSON.stringify(s.layers)):(s.layers.__used=!0,s.layers):null}function s(e){var t,a,n;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty)if(e[t].ks.k.i)r(e[t].ks.k);else for(n=e[t].ks.k.length,a=0;a<n;a+=1)e[t].ks.k[a].s&&r(e[t].ks.k[a].s[0]),e[t].ks.k[a].e&&r(e[t].ks.k[a].e[0]);else"gr"===e[t].ty&&s(e[t].it)}function r(e){var t,s=e.i.length;for(t=0;t<s;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function a(e,t){var s=t?t.split("."):[100,100,100];return e[0]>s[0]||!(s[0]>e[0])&&(e[1]>s[1]||!(s[1]>e[1])&&(e[2]>s[2]||!(s[2]>e[2])&&null))}var n=function(){var e=[4,4,14];function t(e){var t=e.t.d;e.t.d={k:[{s:t,t:0}]}}function s(e){var s,r=e.length;for(s=0;s<r;s+=1)5===e[s].ty&&t(e[s])}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,n=t.assets.length;for(r=0;r<n;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}(),i=function(){var e=[4,7,99];return function(t){if(t.chars&&!a(e,t.v)){var r,n=t.chars.length;for(r=0;r<n;r+=1){var i=t.chars[r];i.data&&i.data.shapes&&(s(i.data.shapes),i.data.ip=0,i.data.op=99999,i.data.st=0,i.data.sr=1,i.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[r].t||(i.data.shapes.push({ty:"no"}),i.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),o=function(){var e=[5,7,15];function t(e){var t=e.t.p;"number"==typeof t.a&&(t.a={a:0,k:t.a}),"number"==typeof t.p&&(t.p={a:0,k:t.p}),"number"==typeof t.r&&(t.r={a:0,k:t.r})}function s(e){var s,r=e.length;for(s=0;s<r;s+=1)5===e[s].ty&&t(e[s])}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,n=t.assets.length;for(r=0;r<n;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}(),l=function(){var e=[4,1,9];function t(e){var s,r,a,n=e.length;for(s=0;s<n;s+=1)if("gr"===e[s].ty)t(e[s].it);else if("fl"===e[s].ty||"st"===e[s].ty)if(e[s].c.k&&e[s].c.k[0].i)for(a=e[s].c.k.length,r=0;r<a;r+=1)e[s].c.k[r].s&&(e[s].c.k[r].s[0]/=255,e[s].c.k[r].s[1]/=255,e[s].c.k[r].s[2]/=255,e[s].c.k[r].s[3]/=255),e[s].c.k[r].e&&(e[s].c.k[r].e[0]/=255,e[s].c.k[r].e[1]/=255,e[s].c.k[r].e[2]/=255,e[s].c.k[r].e[3]/=255);else e[s].c.k[0]/=255,e[s].c.k[1]/=255,e[s].c.k[2]/=255,e[s].c.k[3]/=255}function s(e){var s,r=e.length;for(s=0;s<r;s+=1)4===e[s].ty&&t(e[s].shapes)}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,n=t.assets.length;for(r=0;r<n;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}(),c=function(){var e=[4,4,18];function t(e){var s,r,a;for(s=e.length-1;s>=0;s-=1)if("sh"===e[s].ty)if(e[s].ks.k.i)e[s].ks.k.c=e[s].closed;else for(a=e[s].ks.k.length,r=0;r<a;r+=1)e[s].ks.k[r].s&&(e[s].ks.k[r].s[0].c=e[s].closed),e[s].ks.k[r].e&&(e[s].ks.k[r].e[0].c=e[s].closed);else"gr"===e[s].ty&&t(e[s].it)}function s(e){var s,r,a,n,i,o,l=e.length;for(r=0;r<l;r+=1){if((s=e[r]).hasMask){var c=s.masksProperties;for(n=c.length,a=0;a<n;a+=1)if(c[a].pt.k.i)c[a].pt.k.c=c[a].cl;else for(o=c[a].pt.k.length,i=0;i<o;i+=1)c[a].pt.k[i].s&&(c[a].pt.k[i].s[0].c=c[a].cl),c[a].pt.k[i].e&&(c[a].pt.k[i].e[0].c=c[a].cl)}4===s.ty&&t(s.shapes)}}return function(t){if(a(e,t.v)&&(s(t.layers),t.assets)){var r,n=t.assets.length;for(r=0;r<n;r+=1)t.assets[r].layers&&s(t.assets[r].layers)}}}();function d(e){0===e.t.a.length&&e.t.p}var u={completeData:function(s){s.__complete||(l(s),n(s),i(s),o(s),c(s),e(s.layers,s.assets),function(s,r){if(s){var a=0,n=s.length;for(a=0;a<n;a+=1)1===s[a].t&&(s[a].data.layers=t(s[a].data.refId,r),e(s[a].data.layers,r))}}(s.chars,s.assets),s.__complete=!0)}};return u.checkColors=l,u.checkChars=i,u.checkPathProperties=o,u.checkShapes=c,u.completeLayers=e,u}()),n.assetLoader||(n.assetLoader=function(){function e(e){var t=e.getResponseHeader("content-type");return t&&"json"===e.responseType&&-1!==t.indexOf("json")||e.response&&"object"===_typeof$5(e.response)?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,s,r,a){var n,i=new XMLHttpRequest;try{i.responseType="json"}catch(o){}i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status)n=e(i),r(n);else try{n=e(i),r(n)}catch(o){a&&a(o)}};try{i.open(["G","E","T"].join(""),t,!0)}catch(l){i.open(["G","E","T"].join(""),s+"/"+t,!0)}i.send()}}}()),"loadAnimation"===e.data.type)n.assetLoader.load(e.data.path,e.data.fullPath,function(t){n.dataManager.completeData(t),n.postMessage({id:e.data.id,payload:t,status:"success"})},function(){n.postMessage({id:e.data.id,status:"error"})});else if("complete"===e.data.type){var t=e.data.animation;n.dataManager.completeData(t),n.postMessage({id:e.data.id,payload:t,status:"success"})}else"loadData"===e.data.type&&n.assetLoader.load(e.data.path,e.data.fullPath,function(t){n.postMessage({id:e.data.id,payload:t,status:"success"})},function(){n.postMessage({id:e.data.id,status:"error"})})})).onmessage=function(e){var t=e.data,s=t.id,a=r[s];r[s]=null,"success"===t.status?a.onComplete(t.payload):a.onError&&a.onError()})}function o(e,t){var a="processId_"+(s+=1);return r[a]={onComplete:e,onError:t},a}return{loadAnimation:function(e,s,r){i();var a=o(s,r);t.postMessage({type:"loadAnimation",path:e,fullPath:window.location.origin+window.location.pathname,id:a})},loadData:function(e,s,r){i();var a=o(s,r);t.postMessage({type:"loadData",path:e,fullPath:window.location.origin+window.location.pathname,id:a})},completeAnimation:function(e,s,r){i();var a=o(s,r);t.postMessage({type:"complete",animation:e,id:a})}}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(e,t,s){var r="";if(e.e)r=e.p;else if(t){var a=e.p;-1!==a.indexOf("images/")&&(a=a.split("/")[1]),r=t+a}else r=s,r+=e.u?e.u:"",r+=e.p;return r}function a(e){var t=0,s=setInterval(function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(s)),t+=1}.bind(this),50)}function n(e){var t={assetData:e},s=r(e,this.assetsPath,this.path);return dataManager.loadData(s,function(e){t.img=e,this._footageLoaded()}.bind(this),function(){t.img={},this._footageLoaded()}.bind(this)),t}function i(){this._imageLoaded=t.bind(this),this._footageLoaded=s.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=n.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return i.prototype={loadAssets:function(e,t){var s;this.imagesLoadedCb=t;var r=e.length;for(s=0;s<r;s+=1)e[s].layers||(e[s].t&&"seq"!==e[s].t?3===e[s].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[s]))):(this.totalImages+=1,this.images.push(this._createImageData(e[s]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,s=this.images.length;t<s;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(t){var s=r(t,this.assetsPath,this.path),a=createTag("img");a.crossOrigin="anonymous",a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",function(){n.img=e,this._imageLoaded()}.bind(this),!1),a.src=s;var n={img:a,assetData:t};return n},createImageData:function(t){var s=r(t,this.assetsPath,this.path),a=createNS("image");isSafari?this.testImageLoaded(a):a.addEventListener("load",this._imageLoaded,!1),a.addEventListener("error",function(){n.img=e,this._imageLoaded()}.bind(this),!1),a.setAttributeNS("http://www.w3.org/1999/xlink","href",s),this._elementHelper.append?this._elementHelper.append(a):this._elementHelper.appendChild(a);var n={img:a,assetData:t};return n},imageLoaded:t,footageLoaded:s,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},i}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var s=this._cbs[e],r=0;r<s.length;r+=1)s[r](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var s=0,r=this._cbs[e].length;s<r;)this._cbs[e][s]===t&&(this._cbs[e].splice(s,1),s-=1,r-=1),s+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var markerParser=function(){function e(e){for(var t,s=e.split("\r\n"),r={},a=0,n=0;n<s.length;n+=1)2===(t=s[n].split(":")).length&&(r[t[0]]=t[1].trim(),a+=1);if(0===a)throw new Error;return r}return function(t){for(var s=[],r=0;r<t.length;r+=1){var a=t[r],n={time:a.tm,duration:a.dr};try{n.payload=JSON.parse(t[r].cm)}catch(i){try{n.payload=e(t[r].cm)}catch(o){n.payload={name:t[r].cm}}}s.push(n)}return s}}(),ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,s=this.compositions.length;t<s;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";e.animType?t=e.animType:e.renderer&&(t=e.renderer);var s=getRenderer(t);this.renderer=new s(this,e.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,t){t&&"object"!==_typeof$4(t)&&(t=JSON.parse(t));var s={wrapper:e,animationData:t},r=e.attributes;s.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",s.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var a=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===a?s.loop=!1:"true"===a?s.loop=!0:""!==a&&(s.loop=parseInt(a,10));var n=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;s.autoplay="false"!==n,s.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(s.prerender=!1),s.path?this.setParams(s):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,s,r=this.animationData.layers,a=r.length,n=e.layers,i=n.length;for(s=0;s<i;s+=1)for(t=0;t<a;){if(r[t].id===n[s].id){r[t]=n[s];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(a=e.assets.length,t=0;t<a;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var s=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(s,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,t){var s="number"==typeof e?e:void 0,r="number"==typeof t?t:void 0;this.renderer.updateContainerSize(s,r)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,s=0;s<this.markers.length;s+=1)if((t=this.markers[s]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,s){if(!s||this.name===s){var r=Number(e);if(isNaN(r)){var a=this.getMarkerData(e);a&&this.goToAndStop(a.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,s){if(!s||this.name===s){var r=Number(e);if(isNaN(r)){var a=this.getMarkerData(e);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(r,t,s);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,s=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(s=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(s=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),s&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var s=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?s=e:this.currentRawFrame+this.firstFrame>t&&(s=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==s&&this.goToAndStop(s,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"===_typeof$4(e[0])){var s,r=e.length;for(s=0;s<r;s+=1)this.segments.push(e[s])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var s=e.p;-1!==s.indexOf("images/")&&(s=s.split("/")[1]),t=this.assetsPath+s}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,s=this.assets.length;t<s;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,t,s){try{this.renderer.getElementByPath(e).updateDocumentData(t,s)}catch(r){}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var e={},t=[],s=0,r=0,a=0,n=!0,i=!1;function o(e){for(var s=0,a=e.target;s<r;)t[s].animation===a&&(t.splice(s,1),s-=1,r-=1,a.isPaused||d()),s+=1}function l(e,s){if(!e)return null;for(var a=0;a<r;){if(t[a].elem===e&&null!==t[a].elem)return t[a].animation;a+=1}var n=new AnimationItem;return u(n,e),n.setData(e,s),n}function c(){a+=1,h()}function d(){a-=1}function u(e,s){e.addEventListener("destroy",o),e.addEventListener("_active",c),e.addEventListener("_idle",d),t.push({elem:s,animation:e}),r+=1}function m(e){var o,l=e-s;for(o=0;o<r;o+=1)t[o].animation.advanceTime(l);s=e,a&&!i?window.requestAnimationFrame(m):n=!0}function p(e){s=e,window.requestAnimationFrame(m)}function h(){!i&&a&&n&&(window.requestAnimationFrame(p),n=!1)}return e.registerAnimation=l,e.loadAnimation=function(e){var t=new AnimationItem;return u(t,null),t.setParams(e),t},e.setSpeed=function(e,s){var a;for(a=0;a<r;a+=1)t[a].animation.setSpeed(e,s)},e.setDirection=function(e,s){var a;for(a=0;a<r;a+=1)t[a].animation.setDirection(e,s)},e.play=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.play(e)},e.pause=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.pause(e)},e.stop=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.stop(e)},e.togglePause=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.togglePause(e)},e.searchAnimations=function(e,t,s){var r,a=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),n=a.length;for(r=0;r<n;r+=1)s&&a[r].setAttribute("data-bm-type",s),l(a[r],e);if(t&&0===n){s||(s="svg");var i=document.getElementsByTagName("body")[0];i.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",s),i.appendChild(o),l(o,e)}},e.resize=function(){var e;for(e=0;e<r;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,s,a){var n;for(n=0;n<r;n+=1)t[n].animation.goToAndStop(e,s,a)},e.destroy=function(e){var s;for(s=r-1;s>=0;s-=1)t[s].animation.destroy(e)},e.freeze=function(){i=!0},e.unfreeze=function(){i=!1,h()},e.setVolume=function(e,s){var a;for(a=0;a<r;a+=1)t[a].animation.setVolume(e,s)},e.mute=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.mute(e)},e.unmute=function(e){var s;for(s=0;s<r;s+=1)t[s].animation.unmute(e)},e.getRegisteredAnimations=function(){var e,s=t.length,r=[];for(e=0;e<s;e+=1)r.push(t[e].animation);return r},e}(),BezierFactory=function(){var e={getBezierEasing:function(e,s,r,a,n){var i=n||("bez_"+e+"_"+s+"_"+r+"_"+a).replace(/\./g,"p");if(t[i])return t[i];var o=new d([e,s,r,a]);return t[i]=o,o}},t={},s=11,r=1/(s-1),a="function"==typeof Float32Array;function n(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function o(e){return 3*e}function l(e,t,s){return((n(t,s)*e+i(t,s))*e+o(t))*e}function c(e,t,s){return 3*n(t,s)*e*e+2*i(t,s)*e+o(t)}function d(e){this._p=e,this._mSampleValues=a?new Float32Array(s):new Array(s),this._precomputed=!1,this.get=this.get.bind(this)}return d.prototype={get:function(e){var t=this._p[0],s=this._p[1],r=this._p[2],a=this._p[3];return this._precomputed||this._precompute(),t===s&&r===a?e:0===e?0:1===e?1:l(this._getTForX(e),s,a)},_precompute:function(){var e=this._p[0],t=this._p[1],s=this._p[2],r=this._p[3];this._precomputed=!0,e===t&&s===r||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],a=0;a<s;++a)this._mSampleValues[a]=l(a*r,e,t)},_getTForX:function(e){for(var t=this._p[0],a=this._p[2],n=this._mSampleValues,i=0,o=1,d=s-1;o!==d&&n[o]<=e;++o)i+=r;var u=i+(e-n[--o])/(n[o+1]-n[o])*r,m=c(u,t,a);return m>=.001?function(e,t,s,r){for(var a=0;a<4;++a){var n=c(t,s,r);if(0===n)return t;t-=(l(t,s,r)-e)/n}return t}(e,u,t,a):0===m?u:function(e,t,s,r,a){var n,i,o=0;do{(n=l(i=t+(s-t)/2,r,a)-e)>0?s=i:t=i}while(Math.abs(n)>1e-7&&++o<10);return i}(e,i,i+r,t,a)}},e}(),pooling=function(){return{double:function(e){return e.concat(createSizedArray(e.length))}}}(),poolFactory=function(){return function(e,t,s){var r=0,a=e,n=createSizedArray(a);return{newElement:function(){return r?n[r-=1]:t()},release:function(e){r===a&&(n=pooling.double(n),a*=2),s&&s(e),n[r]=e,r+=1}}}}(),bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(e){var t,s=e.lengths.length;for(t=0;t<s;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0});function bezFunction(){var e=Math;function t(e,t,s,r,a,n){var i=e*r+t*a+s*n-a*r-n*e-s*t;return i>-.001&&i<.001}var s=function(){return function(e,t,s,r){var a,n,i,o,l,c,d=getDefaultCurveSegments(),u=0,m=[],p=[],h=bezierLengthPool.newElement();for(i=s.length,a=0;a<d;a+=1){for(l=a/(d-1),c=0,n=0;n<i;n+=1)o=bmPow(1-l,3)*e[n]+3*bmPow(1-l,2)*l*s[n]+3*(1-l)*bmPow(l,2)*r[n]+bmPow(l,3)*t[n],m[n]=o,null!==p[n]&&(c+=bmPow(m[n]-p[n],2)),p[n]=m[n];c&&(u+=c=bmSqrt(c)),h.percents[a]=l,h.lengths[a]=u}return h.addedLength=u,h}}();function r(e){this.segmentLength=0,this.points=new Array(e)}function a(e,t){this.partialLength=e,this.point=t}var n=function(){var e={};return function(s,n,i,o){var l=(s[0]+"_"+s[1]+"_"+n[0]+"_"+n[1]+"_"+i[0]+"_"+i[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!e[l]){var c,d,u,m,p,h,x,f=getDefaultCurveSegments(),g=0,y=null;2===s.length&&(s[0]!==n[0]||s[1]!==n[1])&&t(s[0],s[1],n[0],n[1],s[0]+i[0],s[1]+i[1])&&t(s[0],s[1],n[0],n[1],n[0]+o[0],n[1]+o[1])&&(f=2);var v=new r(f);for(u=i.length,c=0;c<f;c+=1){for(x=createSizedArray(u),p=c/(f-1),h=0,d=0;d<u;d+=1)m=bmPow(1-p,3)*s[d]+3*bmPow(1-p,2)*p*(s[d]+i[d])+3*(1-p)*bmPow(p,2)*(n[d]+o[d])+bmPow(p,3)*n[d],x[d]=m,null!==y&&(h+=bmPow(x[d]-y[d],2));g+=h=bmSqrt(h),v.points[c]=new a(h,x),y=x}v.segmentLength=g,e[l]=v}return e[l]}}();function i(e,t){var s=t.percents,r=t.lengths,a=s.length,n=bmFloor((a-1)*e),i=e*t.addedLength,o=0;if(n===a-1||0===n||i===r[n])return s[n];for(var l=r[n]>i?-1:1,c=!0;c;)if(r[n]<=i&&r[n+1]>i?(o=(i-r[n])/(r[n+1]-r[n]),c=!1):n+=l,n<0||n>=a-1){if(n===a-1)return s[n];c=!1}return s[n]+(s[n+1]-s[n])*o}var o=createTypedArray("float32",8);return{getSegmentsLength:function(e){var t,r=segmentsLengthPool.newElement(),a=e.c,n=e.v,i=e.o,o=e.i,l=e._length,c=r.lengths,d=0;for(t=0;t<l-1;t+=1)c[t]=s(n[t],n[t+1],i[t],o[t+1]),d+=c[t].addedLength;return a&&l&&(c[t]=s(n[t],n[0],i[t],o[0]),d+=c[t].addedLength),r.totalLength=d,r},getNewSegment:function(t,s,r,a,n,l,c){n<0?n=0:n>1&&(n=1);var d,u=i(n,c),m=i(l=l>1?1:l,c),p=t.length,h=1-u,x=1-m,f=h*h*h,g=u*h*h*3,y=u*u*h*3,v=u*u*u,E=h*h*x,b=u*h*x+h*u*x+h*h*m,j=u*u*x+h*u*m+u*h*m,R=u*u*m,_=h*x*x,w=u*x*x+h*m*x+h*x*m,S=u*m*x+h*m*m+u*x*m,T=u*m*m,P=x*x*x,C=m*x*x+x*m*x+x*x*m,k=m*m*x+x*m*m+m*x*m,A=m*m*m;for(d=0;d<p;d+=1)o[4*d]=e.round(1e3*(f*t[d]+g*r[d]+y*a[d]+v*s[d]))/1e3,o[4*d+1]=e.round(1e3*(E*t[d]+b*r[d]+j*a[d]+R*s[d]))/1e3,o[4*d+2]=e.round(1e3*(_*t[d]+w*r[d]+S*a[d]+T*s[d]))/1e3,o[4*d+3]=e.round(1e3*(P*t[d]+C*r[d]+k*a[d]+A*s[d]))/1e3;return o},getPointInSegment:function(t,s,r,a,n,o){var l=i(n,o),c=1-l;return[e.round(1e3*(c*c*c*t[0]+(l*c*c+c*l*c+c*c*l)*r[0]+(l*l*c+c*l*l+l*c*l)*a[0]+l*l*l*s[0]))/1e3,e.round(1e3*(c*c*c*t[1]+(l*c*c+c*l*c+c*c*l)*r[1]+(l*l*c+c*l*l+l*c*l)*a[1]+l*l*l*s[1]))/1e3]},buildBezierData:n,pointOnLine2D:t,pointOnLine3D:function(s,r,a,n,i,o,l,c,d){if(0===a&&0===o&&0===d)return t(s,r,n,i,l,c);var u,m=e.sqrt(e.pow(n-s,2)+e.pow(i-r,2)+e.pow(o-a,2)),p=e.sqrt(e.pow(l-s,2)+e.pow(c-r,2)+e.pow(d-a,2)),h=e.sqrt(e.pow(l-n,2)+e.pow(c-i,2)+e.pow(d-o,2));return(u=m>p?m>h?m-p-h:h-p-m:h>p?h-p-m:p-m-h)>-1e-4&&u<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,t){var s,r=this.offsetTime;"multidimensional"===this.propType&&(s=createTypedArray("float32",this.pv.length));for(var a,n,i,o,l,c,d,u,m,p=t.lastIndex,h=p,x=this.keyframes.length-1,f=!0;f;){if(a=this.keyframes[h],n=this.keyframes[h+1],h===x-1&&e>=n.t-r){a.h&&(a=n),p=0;break}if(n.t-r>e){p=h;break}h<x-1?h+=1:(p=0,f=!1)}i=this.keyframesMetadata[h]||{};var g,y=n.t-r,v=a.t-r;if(a.to){i.bezierData||(i.bezierData=bez.buildBezierData(a.s,n.s||a.e,a.to,a.ti));var E=i.bezierData;if(e>=y||e<v){var b=e>=y?E.points.length-1:0;for(l=E.points[b].point.length,o=0;o<l;o+=1)s[o]=E.points[b].point[o]}else{i.__fnct?m=i.__fnct:(m=BezierFactory.getBezierEasing(a.o.x,a.o.y,a.i.x,a.i.y,a.n).get,i.__fnct=m),c=m((e-v)/(y-v));var j,R=E.segmentLength*c,_=t.lastFrame<e&&t._lastKeyframeIndex===h?t._lastAddedLength:0;for(u=t.lastFrame<e&&t._lastKeyframeIndex===h?t._lastPoint:0,f=!0,d=E.points.length;f;){if(_+=E.points[u].partialLength,0===R||0===c||u===E.points.length-1){for(l=E.points[u].point.length,o=0;o<l;o+=1)s[o]=E.points[u].point[o];break}if(R>=_&&R<_+E.points[u+1].partialLength){for(j=(R-_)/E.points[u+1].partialLength,l=E.points[u].point.length,o=0;o<l;o+=1)s[o]=E.points[u].point[o]+(E.points[u+1].point[o]-E.points[u].point[o])*j;break}u<d-1?u+=1:f=!1}t._lastPoint=u,t._lastAddedLength=_-E.points[u].partialLength,t._lastKeyframeIndex=h}}else{var w,S,T,P,C;if(x=a.s.length,g=n.s||a.e,this.sh&&1!==a.h)e>=y?(s[0]=g[0],s[1]=g[1],s[2]=g[2]):e<=v?(s[0]=a.s[0],s[1]=a.s[1],s[2]=a.s[2]):quaternionToEuler(s,slerp(createQuaternion(a.s),createQuaternion(g),(e-v)/(y-v)));else for(h=0;h<x;h+=1)1!==a.h&&(e>=y?c=1:e<v?c=0:(a.o.x.constructor===Array?(i.__fnct||(i.__fnct=[]),i.__fnct[h]?m=i.__fnct[h]:(w=void 0===a.o.x[h]?a.o.x[0]:a.o.x[h],S=void 0===a.o.y[h]?a.o.y[0]:a.o.y[h],T=void 0===a.i.x[h]?a.i.x[0]:a.i.x[h],P=void 0===a.i.y[h]?a.i.y[0]:a.i.y[h],m=BezierFactory.getBezierEasing(w,S,T,P).get,i.__fnct[h]=m)):i.__fnct?m=i.__fnct:(w=a.o.x,S=a.o.y,T=a.i.x,P=a.i.y,m=BezierFactory.getBezierEasing(w,S,T,P).get,a.keyframeMetadata=m),c=m((e-v)/(y-v)))),g=n.s||a.e,C=1===a.h?a.s[h]:a.s[h]+(g[h]-a.s[h])*c,"multidimensional"===this.propType?s[h]=C:s=C}return t.lastIndex=p,s}function slerp(e,t,s){var r,a,n,i,o,l=[],c=e[0],d=e[1],u=e[2],m=e[3],p=t[0],h=t[1],x=t[2],f=t[3];return(a=c*p+d*h+u*x+m*f)<0&&(a=-a,p=-p,h=-h,x=-x,f=-f),1-a>1e-6?(r=Math.acos(a),n=Math.sin(r),i=Math.sin((1-s)*r)/n,o=Math.sin(s*r)/n):(i=1-s,o=s),l[0]=i*c+o*p,l[1]=i*d+o*h,l[2]=i*u+o*x,l[3]=i*m+o*f,l}function quaternionToEuler(e,t){var s=t[0],r=t[1],a=t[2],n=t[3],i=Math.atan2(2*r*n-2*s*a,1-2*r*r-2*a*a),o=Math.asin(2*s*r+2*a*n),l=Math.atan2(2*s*n-2*r*a,1-2*s*s-2*a*a);e[0]=i/degToRads,e[1]=o/degToRads,e[2]=l/degToRads}function createQuaternion(e){var t=e[0]*degToRads,s=e[1]*degToRads,r=e[2]*degToRads,a=Math.cos(t/2),n=Math.cos(s/2),i=Math.cos(r/2),o=Math.sin(t/2),l=Math.sin(s/2),c=Math.sin(r/2);return[o*l*i+a*n*c,o*n*i+a*l*c,a*l*i-o*n*c,a*n*i-o*l*c]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=s&&e>=s||this._caching.lastFrame<t&&e<t))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var r=this.interpolateValue(e,this._caching);this.pv=r}return this._caching.lastFrame=e,this.pv}function setVValue(e){var t;if("unidimensional"===this.propType)t=e*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var s=0,r=this.v.length;s<r;)t=e[s]*this.mult,mathAbs(this.v[s]-t)>1e-5&&(this.v[s]=t,this._mdf=!0),s+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,s=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)s=this.effectsSequence[e](s);this.setVValue(s),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,t,s,r){this.propType="unidimensional",this.mult=s||1,this.data=t,this.v=s?t.k*s:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,t,s,r){var a;this.propType="multidimensional",this.mult=s||1,this.data=t,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var n=t.k.length;for(this.v=createTypedArray("float32",n),this.pv=createTypedArray("float32",n),this.vel=createTypedArray("float32",n),a=0;a<n;a+=1)this.v[a]=t.k[a]*this.mult,this.pv[a]=t.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,t,s,r){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=s||1,this.elem=e,this.container=r,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,t,s,r){var a;this.propType="multidimensional";var n,i,o,l,c=t.k.length;for(a=0;a<c-1;a+=1)t.k[a].to&&t.k[a].s&&t.k[a+1]&&t.k[a+1].s&&(n=t.k[a].s,i=t.k[a+1].s,o=t.k[a].to,l=t.k[a].ti,(2===n.length&&(n[0]!==i[0]||n[1]!==i[1])&&bez.pointOnLine2D(n[0],n[1],i[0],i[1],n[0]+o[0],n[1]+o[1])&&bez.pointOnLine2D(n[0],n[1],i[0],i[1],i[0]+l[0],i[1]+l[1])||3===n.length&&(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2])&&bez.pointOnLine3D(n[0],n[1],n[2],i[0],i[1],i[2],n[0]+o[0],n[1]+o[1],n[2]+o[2])&&bez.pointOnLine3D(n[0],n[1],n[2],i[0],i[1],i[2],i[0]+l[0],i[1]+l[1],i[2]+l[2]))&&(t.k[a].to=null,t.k[a].ti=null),n[0]===i[0]&&n[1]===i[1]&&0===o[0]&&0===o[1]&&0===l[0]&&0===l[1]&&(2===n.length||n[2]===i[2]&&0===o[2]&&0===l[2])&&(t.k[a].to=null,t.k[a].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=e,this.container=r,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var d=t.k[0].s.length;for(this.v=createTypedArray("float32",d),this.pv=createTypedArray("float32",d),a=0;a<d;a+=1)this.v[a]=initFrame,this.pv[a]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",d)},this.addEffect=addEffect}var PropertyFactory=function(){return{getProp:function(e,t,s,r,a){var n;if(t.sid&&(t=e.globalData.slotManager.getProp(t)),t.k.length)if("number"==typeof t.k[0])n=new MultiDimensionalProperty(e,t,r,a);else switch(s){case 0:n=new KeyframedValueProperty(e,t,r,a);break;case 1:n=new KeyframedMultidimensionalProperty(e,t,r,a)}else n=new ValueProperty(e,t,r,a);return n.effectsSequence.length&&a.addDynamicProperty(n),n}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var e;this._mdf=!1;var t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var s=0;s<t;)this.v[s]=pointPool.newElement(),this.o[s]=pointPool.newElement(),this.i[s]=pointPool.newElement(),s+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,s,r,a){var n;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":n=this.v;break;case"i":n=this.i;break;case"o":n=this.o;break;default:n=[]}(!n[r]||n[r]&&!a)&&(n[r]=pointPool.newElement()),n[r][0]=e,n[r][1]=t},ShapePath.prototype.setTripleAt=function(e,t,s,r,a,n,i,o){this.setXYAt(e,t,"v",i,o),this.setXYAt(s,r,"o",i,o),this.setXYAt(a,n,"i",i,o)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,s=this.o,r=this.i,a=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],r[0][0],r[0][1],s[0][0],s[0][1],0,!1),a=1);var n,i=this._length-1,o=this._length;for(n=a;n<o;n+=1)e.setTripleAt(t[i][0],t[i][1],r[i][0],r[i][1],s[i][0],s[i][1],n,!1),i-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(e){var t,s=e._length;for(t=0;t<s;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1}),factory.clone=function(e){var t,s=factory.newElement(),r=void 0===e._length?e.v.length:e._length;for(s.setLength(r),s.c=e.c,t=0;t<r;t+=1)s.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return s},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=(ob2={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(e){var t,s=e._length;for(t=0;t<s;t+=1)shapePool.release(e.shapes[t]);e._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=e,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob2),ob2,_length,_maxLength,pool,ShapePropertyFactory=function(){var e=-999999;function t(e,t,s){var r,a,n,i,o,l,c,d,u,m=s.lastIndex,p=this.keyframes;if(e<p[0].t-this.offsetTime)r=p[0].s[0],n=!0,m=0;else if(e>=p[p.length-1].t-this.offsetTime)r=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],n=!0;else{for(var h,x,f,g=m,y=p.length-1,v=!0;v&&(h=p[g],!((x=p[g+1]).t-this.offsetTime>e));)g<y-1?g+=1:v=!1;if(f=this.keyframesMetadata[g]||{},m=g,!(n=1===h.h)){if(e>=x.t-this.offsetTime)d=1;else if(e<h.t-this.offsetTime)d=0;else{var E;f.__fnct?E=f.__fnct:(E=BezierFactory.getBezierEasing(h.o.x,h.o.y,h.i.x,h.i.y).get,f.__fnct=E),d=E((e-(h.t-this.offsetTime))/(x.t-this.offsetTime-(h.t-this.offsetTime)))}a=x.s?x.s[0]:h.e[0]}r=h.s[0]}for(l=t._length,c=r.i[0].length,s.lastIndex=m,i=0;i<l;i+=1)for(o=0;o<c;o+=1)u=n?r.i[i][o]:r.i[i][o]+(a.i[i][o]-r.i[i][o])*d,t.i[i][o]=u,u=n?r.o[i][o]:r.o[i][o]+(a.o[i][o]-r.o[i][o])*d,t.o[i][o]=u,u=n?r.v[i][o]:r.v[i][o]+(a.v[i][o]-r.v[i][o])*d,t.v[i][o]=u}function s(){var t=this.comp.renderedFrame-this.offsetTime,s=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,a=this._caching.lastFrame;return a!==e&&(a<s&&t<s||a>r&&t>r)||(this._caching.lastIndex=a<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function r(){this.paths=this.localShapeCollection}function a(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var s,r=e._length;for(s=0;s<r;s+=1)if(e.v[s][0]!==t.v[s][0]||e.v[s][1]!==t.v[s][1]||e.o[s][0]!==t.o[s][0]||e.o[s][1]!==t.o[s][1]||e.i[s][0]!==t.i[s][0]||e.i[s][1]!==t.i[s][1])return!1;return!0})(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function n(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e,t;this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var s=this.effectsSequence.length;for(t=0;t<s;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function i(e,t,s){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var a=3===s?t.pt.k:t.ks.k;this.v=shapePool.clone(a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function o(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(t,a,n){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===n?a.pt.k:a.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var i=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,i),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=r,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[s.bind(this)]}i.prototype.interpolateShape=t,i.prototype.getValue=n,i.prototype.setVValue=a,i.prototype.addEffect=o,l.prototype.getValue=n,l.prototype.interpolateShape=t,l.prototype.setVValue=a,l.prototype.addEffect=o;var c=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],s=this.p.v[1],r=this.s.v[0]/2,a=this.s.v[1]/2,n=3!==this.d,i=this.v;i.v[0][0]=t,i.v[0][1]=s-a,i.v[1][0]=n?t+r:t-r,i.v[1][1]=s,i.v[2][0]=t,i.v[2][1]=s+a,i.v[3][0]=n?t-r:t+r,i.v[3][1]=s,i.i[0][0]=n?t-r*e:t+r*e,i.i[0][1]=s-a,i.i[1][0]=n?t+r:t-r,i.i[1][1]=s-a*e,i.i[2][0]=n?t+r*e:t-r*e,i.i[2][1]=s+a,i.i[3][0]=n?t-r:t+r,i.i[3][1]=s+a*e,i.o[0][0]=n?t+r*e:t-r*e,i.o[0][1]=s-a,i.o[1][0]=n?t+r:t-r,i.o[1][1]=s+a*e,i.o[2][0]=n?t-r*e:t+r*e,i.o[2][1]=s+a,i.o[3][0]=n?t-r:t+r,i.o[3][1]=s-a*e}},extendPrototype([DynamicPropertyContainer],t),t}(),d=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,s,r,a=2*Math.floor(this.pt.v),n=2*Math.PI/a,i=!0,o=this.or.v,l=this.ir.v,c=this.os.v,d=this.is.v,u=2*Math.PI*o/(2*a),m=2*Math.PI*l/(2*a),p=-Math.PI/2;p+=this.r.v;var h=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<a;e+=1){s=i?c:d,r=i?u:m;var x=(t=i?o:l)*Math.cos(p),f=t*Math.sin(p),g=0===x&&0===f?0:f/Math.sqrt(x*x+f*f),y=0===x&&0===f?0:-x/Math.sqrt(x*x+f*f);x+=+this.p.v[0],f+=+this.p.v[1],this.v.setTripleAt(x,f,x-g*r*s*h,f-y*r*s*h,x+g*r*s*h,f+y*r*s*h,e,!0),i=!i,p+=n*h}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),s=2*Math.PI/t,r=this.or.v,a=this.os.v,n=2*Math.PI*r/(4*t),i=.5*-Math.PI,o=3===this.data.d?-1:1;for(i+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=r*Math.cos(i),c=r*Math.sin(i),d=0===l&&0===c?0:c/Math.sqrt(l*l+c*c),u=0===l&&0===c?0:-l/Math.sqrt(l*l+c*c);l+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(l,c,l-d*n*a*o,c-u*n*a*o,l+d*n*a*o,c+u*n*a*o,e,!0),i+=s*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),u=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],s=this.s.v[0]/2,r=this.s.v[1]/2,a=bmMin(s,r,this.r.v),n=a*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+s,t-r+a,e+s,t-r+a,e+s,t-r+n,0,!0),this.v.setTripleAt(e+s,t+r-a,e+s,t+r-n,e+s,t+r-a,1,!0),0!==a?(this.v.setTripleAt(e+s-a,t+r,e+s-a,t+r,e+s-n,t+r,2,!0),this.v.setTripleAt(e-s+a,t+r,e-s+n,t+r,e-s+a,t+r,3,!0),this.v.setTripleAt(e-s,t+r-a,e-s,t+r-a,e-s,t+r-n,4,!0),this.v.setTripleAt(e-s,t-r+a,e-s,t-r+n,e-s,t-r+a,5,!0),this.v.setTripleAt(e-s+a,t-r,e-s+a,t-r,e-s+n,t-r,6,!0),this.v.setTripleAt(e+s-a,t-r,e+s-n,t-r,e+s-a,t-r,7,!0)):(this.v.setTripleAt(e-s,t+r,e-s+n,t+r,e-s,t+r,2),this.v.setTripleAt(e-s,t-r,e-s,t-r+n,e-s,t-r,3))):(this.v.setTripleAt(e+s,t-r+a,e+s,t-r+n,e+s,t-r+a,0,!0),0!==a?(this.v.setTripleAt(e+s-a,t-r,e+s-a,t-r,e+s-n,t-r,1,!0),this.v.setTripleAt(e-s+a,t-r,e-s+n,t-r,e-s+a,t-r,2,!0),this.v.setTripleAt(e-s,t-r+a,e-s,t-r+a,e-s,t-r+n,3,!0),this.v.setTripleAt(e-s,t+r-a,e-s,t+r-n,e-s,t+r-a,4,!0),this.v.setTripleAt(e-s+a,t+r,e-s+a,t+r,e-s+n,t+r,5,!0),this.v.setTripleAt(e+s-a,t+r,e+s-n,t+r,e+s-a,t+r,6,!0),this.v.setTripleAt(e+s,t+r-a,e+s,t+r-a,e+s,t+r-n,7,!0)):(this.v.setTripleAt(e-s,t-r,e-s+n,t-r,e-s,t-r,1,!0),this.v.setTripleAt(e-s,t+r,e-s,t+r-n,e-s,t+r,2,!0),this.v.setTripleAt(e+s,t+r,e+s-n,t+r,e+s,t+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],e),e}(),m={getShapeProp:function(e,t,s){var r;return 3===s||4===s?r=(3===s?t.pt:t.ks).k.length?new l(e,t,s):new i(e,t,s):5===s?r=new u(e,t):6===s?r=new c(e,t):7===s&&(r=new d(e,t)),r.k&&e.addDynamicProperty(r),r},getConstructorFunction:function(){return i},getKeyframedConstructorFunction:function(){return l}};return m}(),Matrix=function(){var e=Math.cos,t=Math.sin,s=Math.tan,r=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function n(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1)}function i(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(1,0,0,0,0,r,-a,0,0,a,r,0,0,0,0,1)}function o(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(r,0,a,0,0,1,0,0,-a,0,r,0,0,0,0,1)}function l(s){if(0===s)return this;var r=e(s),a=t(s);return this._t(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1)}function c(e,t){return this._t(1,t,e,1,0,0)}function d(e,t){return this.shear(s(e),s(t))}function u(r,a){var n=e(a),i=t(a);return this._t(n,i,0,0,-i,n,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,s(r),1,0,0,0,0,1,0,0,0,0,1)._t(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1)}function m(e,t,s){return s||0===s||(s=1),1===e&&1===t&&1===s?this:this._t(e,0,0,0,0,t,0,0,0,0,s,0,0,0,0,1)}function p(e,t,s,r,a,n,i,o,l,c,d,u,m,p,h,x){return this.props[0]=e,this.props[1]=t,this.props[2]=s,this.props[3]=r,this.props[4]=a,this.props[5]=n,this.props[6]=i,this.props[7]=o,this.props[8]=l,this.props[9]=c,this.props[10]=d,this.props[11]=u,this.props[12]=m,this.props[13]=p,this.props[14]=h,this.props[15]=x,this}function h(e,t,s){return s=s||0,0!==e||0!==t||0!==s?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,s,1):this}function x(e,t,s,r,a,n,i,o,l,c,d,u,m,p,h,x){var f=this.props;if(1===e&&0===t&&0===s&&0===r&&0===a&&1===n&&0===i&&0===o&&0===l&&0===c&&1===d&&0===u)return f[12]=f[12]*e+f[15]*m,f[13]=f[13]*n+f[15]*p,f[14]=f[14]*d+f[15]*h,f[15]*=x,this._identityCalculated=!1,this;var g=f[0],y=f[1],v=f[2],E=f[3],b=f[4],j=f[5],R=f[6],_=f[7],w=f[8],S=f[9],T=f[10],P=f[11],C=f[12],k=f[13],A=f[14],N=f[15];return f[0]=g*e+y*a+v*l+E*m,f[1]=g*t+y*n+v*c+E*p,f[2]=g*s+y*i+v*d+E*h,f[3]=g*r+y*o+v*u+E*x,f[4]=b*e+j*a+R*l+_*m,f[5]=b*t+j*n+R*c+_*p,f[6]=b*s+j*i+R*d+_*h,f[7]=b*r+j*o+R*u+_*x,f[8]=w*e+S*a+T*l+P*m,f[9]=w*t+S*n+T*c+P*p,f[10]=w*s+S*i+T*d+P*h,f[11]=w*r+S*o+T*u+P*x,f[12]=C*e+k*a+A*l+N*m,f[13]=C*t+k*n+A*c+N*p,f[14]=C*s+k*i+A*d+N*h,f[15]=C*r+k*o+A*u+N*x,this._identityCalculated=!1,this}function f(e){var t=e.props;return this.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function v(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function E(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function b(e,t,s){return{x:e*this.props[0]+t*this.props[4]+s*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+s*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+s*this.props[10]+this.props[14]}}function j(e,t,s){return e*this.props[0]+t*this.props[4]+s*this.props[8]+this.props[12]}function R(e,t,s){return e*this.props[1]+t*this.props[5]+s*this.props[9]+this.props[13]}function _(e,t,s){return e*this.props[2]+t*this.props[6]+s*this.props[10]+this.props[14]}function w(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,s=-this.props[1]/e,r=-this.props[4]/e,a=this.props[0]/e,n=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,i=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,o=new Matrix;return o.props[0]=t,o.props[1]=s,o.props[4]=r,o.props[5]=a,o.props[12]=n,o.props[13]=i,o}function S(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function T(e){var t,s=e.length,r=[];for(t=0;t<s;t+=1)r[t]=S(e[t]);return r}function P(e,t,s){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=e[0],r[1]=e[1],r[2]=t[0],r[3]=t[1],r[4]=s[0],r[5]=s[1];else{var a=this.props[0],n=this.props[1],i=this.props[4],o=this.props[5],l=this.props[12],c=this.props[13];r[0]=e[0]*a+e[1]*i+l,r[1]=e[0]*n+e[1]*o+c,r[2]=t[0]*a+t[1]*i+l,r[3]=t[0]*n+t[1]*o+c,r[4]=s[0]*a+s[1]*i+l,r[5]=s[0]*n+s[1]*o+c}return r}function C(e,t,s){return this.isIdentity()?[e,t,s]:[e*this.props[0]+t*this.props[4]+s*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+s*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+s*this.props[10]+this.props[14]]}function k(e,t){if(this.isIdentity())return e+","+t;var s=this.props;return Math.round(100*(e*s[0]+t*s[4]+s[12]))/100+","+Math.round(100*(e*s[1]+t*s[5]+s[13]))/100}function A(){for(var e=0,t=this.props,s="matrix3d(";e<16;)s+=r(1e4*t[e])/1e4,s+=15===e?")":",",e+=1;return s}function N(e){return e<1e-6&&e>0||e>-1e-6&&e<0?r(1e4*e)/1e4:e}function I(){var e=this.props;return"matrix("+N(e[0])+","+N(e[1])+","+N(e[4])+","+N(e[5])+","+N(e[12])+","+N(e[13])+")"}return function(){this.reset=a,this.rotate=n,this.rotateX=i,this.rotateY=o,this.rotateZ=l,this.skew=d,this.skewFromAxis=u,this.shear=c,this.scale=m,this.setTransform=p,this.translate=h,this.transform=x,this.multiply=f,this.applyToPoint=b,this.applyToX=j,this.applyToY=R,this.applyToZ=_,this.applyToPointArray=C,this.applyToTriplePoints=P,this.applyToPointStringified=k,this.toCSS=A,this.to2dCSS=I,this.clone=v,this.cloneFromProps=E,this.equals=y,this.inversePoints=T,this.inversePoint=S,this.getInverseMatrix=w,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lottie={};function setLocation(e){setLocationHref(e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&setExpressionsPlugin(t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),s=0;s<t.length;s+=1){var r=t[s].split("=");if(decodeURIComponent(r[0])==e)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";var queryString="",scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer");var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&(window.bodymovin=lottie)}catch(err){}var ShapeModifiers=function(){var e={},t={};return e.registerModifier=function(e,s){t[e]||(t[e]=s)},e.getModifier=function(e,s,r){return new t[e](s,r)},e}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,s,r,a){var n=[];t<=1?n.push({s:e,e:t}):e>=1?n.push({s:e-1,e:t-1}):(n.push({s:e,e:1}),n.push({s:0,e:t-1}));var i,o,l=[],c=n.length;for(i=0;i<c;i+=1){var d,u;(o=n[i]).e*a<r||o.s*a>r+s||(d=o.s*a<=r?0:(o.s*a-r)/s,u=o.e*a>=r+s?1:(o.e*a-r)/s,l.push([d,u]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){var t,s=e.length;for(t=0;t<s;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,s,r,a;if(this._mdf||e){var n=this.o.v%360/360;if(n<0&&(n+=1),(t=this.s.v>1?1+n:this.s.v<0?0+n:this.s.v+n)>(s=this.e.v>1?1+n:this.e.v<0?0+n:this.e.v+n)){var i=t;t=s,s=i}t=1e-4*Math.round(1e4*t),s=1e-4*Math.round(1e4*s),this.sValue=t,this.eValue=s}else t=this.sValue,s=this.eValue;var o,l,c,d,u,m=this.shapes.length,p=0;if(s===t)for(a=0;a<m;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(1===s&&0===t||0===s&&1===t){if(this._mdf)for(a=0;a<m;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var h,x,f=[];for(a=0;a<m;a+=1)if((h=this.shapes[a]).shape._mdf||this._mdf||e||2===this.m){if(l=(r=h.shape.paths)._length,u=0,!h.shape._mdf&&h.pathsData.length)u=h.totalShapeLength;else{for(c=this.releasePathsData(h.pathsData),o=0;o<l;o+=1)d=bez.getSegmentsLength(r.shapes[o]),c.push(d),u+=d.totalLength;h.totalShapeLength=u,h.pathsData=c}p+=u,h.shape._mdf=!0}else h.shape.paths=h.localShapeCollection;var g,y=t,v=s,E=0;for(a=m-1;a>=0;a-=1)if((h=this.shapes[a]).shape._mdf){for((x=h.localShapeCollection).releaseShapes(),2===this.m&&m>1?(g=this.calculateShapeEdges(t,s,h.totalShapeLength,E,p),E+=h.totalShapeLength):g=[[y,v]],l=g.length,o=0;o<l;o+=1){y=g[o][0],v=g[o][1],f.length=0,v<=1?f.push({s:h.totalShapeLength*y,e:h.totalShapeLength*v}):y>=1?f.push({s:h.totalShapeLength*(y-1),e:h.totalShapeLength*(v-1)}):(f.push({s:h.totalShapeLength*y,e:h.totalShapeLength}),f.push({s:0,e:h.totalShapeLength*(v-1)}));var b=this.addShapes(h,f[0]);if(f[0].s!==f[0].e){if(f.length>1)if(h.shape.paths.shapes[h.shape.paths._length-1].c){var j=b.pop();this.addPaths(b,x),b=this.addShapes(h,f[1],j)}else this.addPaths(b,x),b=this.addShapes(h,f[1]);this.addPaths(b,x)}}h.shape.paths=x}}},TrimModifier.prototype.addPaths=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)t.addShape(e[s])},TrimModifier.prototype.addSegment=function(e,t,s,r,a,n,i){a.setXYAt(t[0],t[1],"o",n),a.setXYAt(s[0],s[1],"i",n+1),i&&a.setXYAt(e[0],e[1],"v",n),a.setXYAt(r[0],r[1],"v",n+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,s,r){t.setXYAt(e[1],e[5],"o",s),t.setXYAt(e[2],e[6],"i",s+1),r&&t.setXYAt(e[0],e[4],"v",s),t.setXYAt(e[3],e[7],"v",s+1)},TrimModifier.prototype.addShapes=function(e,t,s){var r,a,n,i,o,l,c,d,u=e.pathsData,m=e.shape.paths.shapes,p=e.shape.paths._length,h=0,x=[],f=!0;for(s?(o=s._length,d=s._length):(s=shapePool.newElement(),o=0,d=0),x.push(s),r=0;r<p;r+=1){for(l=u[r].lengths,s.c=m[r].c,n=m[r].c?l.length:l.length+1,a=1;a<n;a+=1)if(h+(i=l[a-1]).addedLength<t.s)h+=i.addedLength,s.c=!1;else{if(h>t.e){s.c=!1;break}t.s<=h&&t.e>=h+i.addedLength?(this.addSegment(m[r].v[a-1],m[r].o[a-1],m[r].i[a],m[r].v[a],s,o,f),f=!1):(c=bez.getNewSegment(m[r].v[a-1],m[r].v[a],m[r].o[a-1],m[r].i[a],(t.s-h)/i.addedLength,(t.e-h)/i.addedLength,l[a-1]),this.addSegmentFromArray(c,s,o,f),f=!1,s.c=!1),h+=i.addedLength,o+=1}if(m[r].c&&l.length){if(i=l[a-1],h<=t.e){var g=l[a-1].addedLength;t.s<=h&&t.e>=h+g?(this.addSegment(m[r].v[a-1],m[r].o[a-1],m[r].i[0],m[r].v[0],s,o,f),f=!1):(c=bez.getNewSegment(m[r].v[a-1],m[r].v[0],m[r].o[a-1],m[r].i[0],(t.s-h)/g,(t.e-h)/g,l[a-1]),this.addSegmentFromArray(c,s,o,f),f=!1,s.c=!1)}else s.c=!1;h+=i.addedLength,o+=1}if(s._length&&(s.setXYAt(s.v[d][0],s.v[d][1],"i",d),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),h>t.e)break;r<p-1&&(s=shapePool.newElement(),f=!0,x.push(s),o=0)}return x},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var s=t/100,r=[0,0],a=e._length,n=0;for(n=0;n<a;n+=1)r[0]+=e.v[n][0],r[1]+=e.v[n][1];r[0]/=a,r[1]/=a;var i,o,l,c,d,u,m=shapePool.newElement();for(m.c=e.c,n=0;n<a;n+=1)i=e.v[n][0]+(r[0]-e.v[n][0])*s,o=e.v[n][1]+(r[1]-e.v[n][1])*s,l=e.o[n][0]+(r[0]-e.o[n][0])*-s,c=e.o[n][1]+(r[1]-e.o[n][1])*-s,d=e.i[n][0]+(r[0]-e.i[n][0])*-s,u=e.i[n][1]+(r[1]-e.i[n][1])*-s,m.setTripleAt(i,o,l,c,d,u,n);return m},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,s,r,a,n,i,o=this.shapes.length,l=this.amount.v;if(0!==l)for(s=0;s<o;s+=1){if(i=(n=this.shapes[s]).localShapeCollection,n.shape._mdf||this._mdf||e)for(i.releaseShapes(),n.shape._mdf=!0,t=n.shape.paths.shapes,a=n.shape.paths._length,r=0;r<a;r+=1)i.addShape(this.processPath(t[r],l));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function t(e,t,s){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(s||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var r,a=t.or.k.length;for(r=0;r<a;r+=1)t.or.k[r].to=null,t.or.k[r].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var s;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,a;if(s=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/s,0),a=this.p.getValueAtTime(this.p.keyframes[0].t/s,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/s,0),a=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/s,0)):(r=this.p.pv,a=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/s,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],a=[];var n=this.px,i=this.py;n._caching.lastFrame+n.offsetTime<=n.keyframes[0].t?(r[0]=n.getValueAtTime((n.keyframes[0].t+.01)/s,0),r[1]=i.getValueAtTime((i.keyframes[0].t+.01)/s,0),a[0]=n.getValueAtTime(n.keyframes[0].t/s,0),a[1]=i.getValueAtTime(i.keyframes[0].t/s,0)):n._caching.lastFrame+n.offsetTime>=n.keyframes[n.keyframes.length-1].t?(r[0]=n.getValueAtTime(n.keyframes[n.keyframes.length-1].t/s,0),r[1]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/s,0),a[0]=n.getValueAtTime((n.keyframes[n.keyframes.length-1].t-.01)/s,0),a[1]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/s,0)):(r=[n.pv,i.pv],a[0]=n.getValueAtTime((n._caching.lastFrame+n.offsetTime-.01)/s,n.offsetTime),a[1]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/s,i.offsetTime))}else r=a=e;this.v.rotate(-Math.atan2(r[1]-a[1],r[0]-a[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,s,r){return new t(e,s,r)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(e,t){return 1e5*Math.abs(e-t)<=Math.min(Math.abs(e),Math.abs(t))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,t,s){return e*(1-s)+t*s}function lerpPoint(e,t,s){return[lerp(e[0],t[0],s),lerp(e[1],t[1],s)]}function quadRoots(e,t,s){if(0===e)return[];var r=t*t-4*e*s;if(r<0)return[];var a=-t/(2*e);if(0===r)return[a];var n=Math.sqrt(r)/(2*e);return[a-n,a+n]}function polynomialCoefficients(e,t,s,r){return[3*t-e-3*s+r,3*e-6*t+3*s,-3*e+3*t,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,t,s,r,a){a&&pointEqual(e,t)&&(t=lerpPoint(e,r,1/3)),a&&pointEqual(s,r)&&(s=lerpPoint(e,r,2/3));var n=polynomialCoefficients(e[0],t[0],s[0],r[0]),i=polynomialCoefficients(e[1],t[1],s[1],r[1]);this.a=[n[0],i[0]],this.b=[n[1],i[1]],this.c=[n[2],i[2]],this.d=[n[3],i[3]],this.points=[e,t,s,r]}function extrema(e,t){var s=e.points[0][t],r=e.points[e.points.length-1][t];if(s>r){var a=r;r=s,s=a}for(var n=quadRoots(3*e.a[t],2*e.b[t],e.c[t]),i=0;i<n.length;i+=1)if(n[i]>0&&n[i]<1){var o=e.point(n[i])[t];o<s?s=o:o>r&&(r=o)}return{min:s,max:r}}function intersectData(e,t,s){var r=e.boundingBox();return{cx:r.cx,cy:r.cy,width:r.width,height:r.height,bez:e,t:(t+s)/2,t1:t,t2:s}}function splitData(e){var t=e.bez.split(.5);return[intersectData(t[0],e.t1,e.t),intersectData(t[1],e.t,e.t2)]}function boxIntersect(e,t){return 2*Math.abs(e.cx-t.cx)<e.width+t.width&&2*Math.abs(e.cy-t.cy)<e.height+t.height}function intersectsImpl(e,t,s,r,a,n){if(boxIntersect(e,t))if(s>=n||e.width<=r&&e.height<=r&&t.width<=r&&t.height<=r)a.push([e.t,t.t]);else{var i=splitData(e),o=splitData(t);intersectsImpl(i[0],o[0],s+1,r,a,n),intersectsImpl(i[0],o[1],s+1,r,a,n),intersectsImpl(i[1],o[0],s+1,r,a,n),intersectsImpl(i[1],o[1],s+1,r,a,n)}}function crossProduct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lineIntersection(e,t,s,r){var a=[e[0],e[1],1],n=[t[0],t[1],1],i=[s[0],s[1],1],o=[r[0],r[1],1],l=crossProduct(crossProduct(a,n),crossProduct(i,o));return floatZero(l[2])?null:[l[0]/l[2],l[1]/l[2]]}function polarOffset(e,t,s){return[e[0]+Math.cos(t)*s,e[1]-Math.sin(t)*s]}function pointDistance(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function pointEqual(e,t){return floatEqual(e[0],t[0])&&floatEqual(e[1],t[1])}function ZigZagModifier(){}function setPoint(e,t,s,r,a,n,i){var o=s-Math.PI/2,l=s+Math.PI/2,c=t[0]+Math.cos(s)*r*a,d=t[1]-Math.sin(s)*r*a;e.setTripleAt(c,d,c+Math.cos(o)*n,d-Math.sin(o)*n,c+Math.cos(l)*i,d-Math.sin(l)*i,e.length())}function getPerpendicularVector(e,t){var s=[t[0]-e[0],t[1]-e[1]],r=.5*-Math.PI;return[Math.cos(r)*s[0]-Math.sin(r)*s[1],Math.sin(r)*s[0]+Math.cos(r)*s[1]]}function getProjectingAngle(e,t){var s=0===t?e.length()-1:t-1,r=(t+1)%e.length(),a=getPerpendicularVector(e.v[s],e.v[r]);return Math.atan2(0,1)-Math.atan2(a[1],a[0])}function zigZagCorner(e,t,s,r,a,n,i){var o=getProjectingAngle(t,s),l=t.v[s%t._length],c=t.v[0===s?t._length-1:s-1],d=t.v[(s+1)%t._length],u=2===n?Math.sqrt(Math.pow(l[0]-c[0],2)+Math.pow(l[1]-c[1],2)):0,m=2===n?Math.sqrt(Math.pow(l[0]-d[0],2)+Math.pow(l[1]-d[1],2)):0;setPoint(e,t.v[s%t._length],o,i,r,m/(2*(a+1)),u/(2*(a+1)))}function zigZagSegment(e,t,s,r,a,n){for(var i=0;i<r;i+=1){var o=(i+1)/(r+1),l=2===a?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,c=t.normalAngle(o);setPoint(e,t.point(o),c,n,s,l/(2*(r+1)),l/(2*(r+1))),n=-n}return n}function linearOffset(e,t,s){var r=Math.atan2(t[0]-e[0],t[1]-e[1]);return[polarOffset(e,r,s),polarOffset(t,r,s)]}function offsetSegment(e,t){var s,r,a,n,i,o,l;s=(l=linearOffset(e.points[0],e.points[1],t))[0],r=l[1],a=(l=linearOffset(e.points[1],e.points[2],t))[0],n=l[1],i=(l=linearOffset(e.points[2],e.points[3],t))[0],o=l[1];var c=lineIntersection(s,r,a,n);null===c&&(c=r);var d=lineIntersection(i,o,a,n);return null===d&&(d=i),new PolynomialBezier(s,c,d,o)}function joinLines(e,t,s,r,a){var n=t.points[3],i=s.points[0];if(3===r)return n;if(pointEqual(n,i))return n;if(2===r){var o=-t.tangentAngle(1),l=-s.tangentAngle(0)+Math.PI,c=lineIntersection(n,polarOffset(n,o+Math.PI/2,100),i,polarOffset(i,o+Math.PI/2,100)),d=c?pointDistance(c,n):pointDistance(n,i)/2,u=polarOffset(n,o,2*d*roundCorner);return e.setXYAt(u[0],u[1],"o",e.length()-1),u=polarOffset(i,l,2*d*roundCorner),e.setTripleAt(i[0],i[1],i[0],i[1],u[0],u[1],e.length()),i}var m=lineIntersection(pointEqual(n,t.points[2])?t.points[0]:t.points[2],n,i,pointEqual(i,s.points[1])?s.points[3]:s.points[1]);return m&&pointDistance(m,n)<a?(e.setTripleAt(m[0],m[1],m[0],m[1],m[0],m[1],e.length()),m):n}function getIntersection(e,t){var s=e.intersections(t);return s.length&&floatEqual(s[0][0],1)&&s.shift(),s.length?s[0]:null}function pruneSegmentIntersection(e,t){var s=e.slice(),r=t.slice(),a=getIntersection(e[e.length-1],t[0]);return a&&(s[e.length-1]=e[e.length-1].split(a[0])[0],r[0]=t[0].split(a[1])[1]),e.length>1&&t.length>1&&(a=getIntersection(e[0],t[t.length-1]))?[[e[0].split(a[0])[0]],[t[t.length-1].split(a[1])[1]]]:[s,r]}function pruneIntersections(e){for(var t,s=1;s<e.length;s+=1)t=pruneSegmentIntersection(e[s-1],e[s]),e[s-1]=t[0],e[s]=t[1];return e.length>1&&(t=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=t[0],e[0]=t[1]),e}function offsetSegmentSplit(e,t){var s,r,a,n,i=e.inflectionPoints();if(0===i.length)return[offsetSegment(e,t)];if(1===i.length||floatEqual(i[1],1))return s=(a=e.split(i[0]))[0],r=a[1],[offsetSegment(s,t),offsetSegment(r,t)];s=(a=e.split(i[0]))[0];var o=(i[1]-i[0])/(1-i[0]);return n=(a=a[1].split(o))[0],r=a[1],[offsetSegment(s,t),offsetSegment(n,t),offsetSegment(r,t)]}function OffsetPathModifier(){}function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],s="normal",r="normal",a=t.length,n=0;n<a;n+=1)switch(t[n].toLowerCase()){case"italic":r="italic";break;case"bold":s="700";break;case"black":s="900";break;case"medium":s="500";break;case"regular":case"normal":s="400";break;case"light":case"thin":s="200"}return{style:r,weight:e.fWeight||s}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,s,r,a,n){var i=n?-1:1,o=r.s.v[0]+(1-r.s.v[0])*(1-a),l=r.s.v[1]+(1-r.s.v[1])*(1-a);e.translate(r.p.v[0]*i*a,r.p.v[1]*i*a,r.p.v[2]),t.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),t.rotate(-r.r.v*i*a),t.translate(r.a.v[0],r.a.v[1],r.a.v[2]),s.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),s.scale(n?1/o:o,n?1/l:l),s.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(e,t,s,r){for(this.elem=e,this.arr=t,this.pos=s,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[s]);s>0;)s-=1,this._elements.unshift(t[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,s=e.length;for(t=0;t<s;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)e[s]._render=t,"gr"===e[s].ty&&this.changeGroupRender(e[s].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,s,r,a,n,i=!1;if(this._mdf||e){var o,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),i=!0}for(n=0,r=0;r<=this._groups.length-1;r+=1){if(o=n<l,this._groups[r]._render=o,this.changeGroupRender(this._groups[r].it,o),!o){var d=this.elemsData[r].it,u=d[d.length-1];0!==u.transform.op.v?(u.transform.op._mdf=!0,u.transform.op.v=0):u.transform.op._mdf=!1}n+=1}this._currentCopies=l;var m=this.o.v,p=m%1,h=m>0?Math.floor(m):Math.ceil(m),x=this.pMatrix.props,f=this.rMatrix.props,g=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y,v,E=0;if(m>0){for(;E<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),E+=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,p,!1),E+=p)}else if(m<0){for(;E>h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),E-=1;p&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-p,!0),E-=p)}for(r=1===this.data.m?0:this._currentCopies-1,a=1===this.data.m?1:-1,n=this._currentCopies;n;){if(v=(s=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==E){for((0!==r&&1===a||r!==this._currentCopies-1&&-1===a)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),y=0;y<v;y+=1)s[y]=this.matrix.props[y];this.matrix.reset()}else for(this.matrix.reset(),y=0;y<v;y+=1)s[y]=this.matrix.props[y];E+=1,n-=1,r+=a}}else for(n=this._currentCopies,r=0,a=1;n;)s=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,n-=1,r+=a;return i},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var s,r=shapePool.newElement();r.c=e.c;var a,n,i,o,l,c,d,u,m,p,h,x,f=e._length,g=0;for(s=0;s<f;s+=1)a=e.v[s],i=e.o[s],n=e.i[s],a[0]===i[0]&&a[1]===i[1]&&a[0]===n[0]&&a[1]===n[1]?0!==s&&s!==f-1||e.c?(o=0===s?e.v[f-1]:e.v[s-1],c=(l=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(l/2,t)/l:0,d=h=a[0]+(o[0]-a[0])*c,u=x=a[1]-(a[1]-o[1])*c,m=d-(d-a[0])*roundCorner,p=u-(u-a[1])*roundCorner,r.setTripleAt(d,u,m,p,h,x,g),g+=1,o=s===f-1?e.v[0]:e.v[s+1],c=(l=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)))?Math.min(l/2,t)/l:0,d=m=a[0]+(o[0]-a[0])*c,u=p=a[1]+(o[1]-a[1])*c,h=d-(d-a[0])*roundCorner,x=u-(u-a[1])*roundCorner,r.setTripleAt(d,u,m,p,h,x,g),g+=1):(r.setTripleAt(a[0],a[1],i[0],i[1],n[0],n[1],g),g+=1):(r.setTripleAt(e.v[s][0],e.v[s][1],e.o[s][0],e.o[s][1],e.i[s][0],e.i[s][1],g),g+=1);return r},RoundCornersModifier.prototype.processShapes=function(e){var t,s,r,a,n,i,o=this.shapes.length,l=this.rd.v;if(0!==l)for(s=0;s<o;s+=1){if(i=(n=this.shapes[s]).localShapeCollection,n.shape._mdf||this._mdf||e)for(i.releaseShapes(),n.shape._mdf=!0,t=n.shape.paths.shapes,a=n.shape.paths._length,r=0;r<a;r+=1)i.addShape(this.processPath(t[r],l));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var t=this.derivative(e);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(e){var t=this.derivative(e);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,s=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(s<0)return[];var r=Math.sqrt(s);return floatZero(r)?r>0&&r<1?[t]:[]:[t-r,t+r].filter(function(e){return e>0&&e<1})},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],e),s=lerpPoint(this.points[1],this.points[2],e),r=lerpPoint(this.points[2],this.points[3],e),a=lerpPoint(t,s,e),n=lerpPoint(s,r,e),i=lerpPoint(a,n,e);return[new PolynomialBezier(this.points[0],t,a,i,!0),new PolynomialBezier(i,n,r,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}},PolynomialBezier.prototype.intersections=function(e,t,s){void 0===t&&(t=2),void 0===s&&(s=7);var r=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,t,r,s),r},PolynomialBezier.shapeSegment=function(e,t){var s=(t+1)%e.length();return new PolynomialBezier(e.v[t],e.o[t],e.i[s],e.v[s],!0)},PolynomialBezier.shapeSegmentInverted=function(e,t){var s=(t+1)%e.length();return new PolynomialBezier(e.v[s],e.i[s],e.o[t],e.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,t.s,0,null,this),this.frequency=PropertyFactory.getProp(e,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,t.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(e,t,s,r){var a=e._length,n=shapePool.newElement();if(n.c=e.c,e.c||(a-=1),0===a)return n;var i=-1,o=PolynomialBezier.shapeSegment(e,0);zigZagCorner(n,e,0,t,s,r,i);for(var l=0;l<a;l+=1)i=zigZagSegment(n,o,t,s,r,-i),o=l!==a-1||e.c?PolynomialBezier.shapeSegment(e,(l+1)%a):null,zigZagCorner(n,e,l+1,t,s,r,i);return n},ZigZagModifier.prototype.processShapes=function(e){var t,s,r,a,n,i,o=this.shapes.length,l=this.amplitude.v,c=Math.max(0,Math.round(this.frequency.v)),d=this.pointsType.v;if(0!==l)for(s=0;s<o;s+=1){if(i=(n=this.shapes[s]).localShapeCollection,n.shape._mdf||this._mdf||e)for(i.releaseShapes(),n.shape._mdf=!0,t=n.shape.paths.shapes,a=n.shape.paths._length,r=0;r<a;r+=1)i.addShape(this.processPath(t[r],l,c,d));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(e,t,s,r){var a=shapePool.newElement();a.c=e.c;var n,i,o,l=e.length();e.c||(l-=1);var c=[];for(n=0;n<l;n+=1)o=PolynomialBezier.shapeSegment(e,n),c.push(offsetSegmentSplit(o,t));if(!e.c)for(n=l-1;n>=0;n-=1)o=PolynomialBezier.shapeSegmentInverted(e,n),c.push(offsetSegmentSplit(o,t));c=pruneIntersections(c);var d=null,u=null;for(n=0;n<c.length;n+=1){var m=c[n];for(u&&(d=joinLines(a,u,m[0],s,r)),u=m[m.length-1],i=0;i<m.length;i+=1)o=m[i],d&&pointEqual(o.points[0],d)?a.setXYAt(o.points[1][0],o.points[1][1],"o",a.length()-1):a.setTripleAt(o.points[0][0],o.points[0][1],o.points[1][0],o.points[1][1],o.points[0][0],o.points[0][1],a.length()),a.setTripleAt(o.points[3][0],o.points[3][1],o.points[3][0],o.points[3][1],o.points[2][0],o.points[2][1],a.length()),d=o.points[3]}return c.length&&joinLines(a,u,c[0][0],s,r),a},OffsetPathModifier.prototype.processShapes=function(e){var t,s,r,a,n,i,o=this.shapes.length,l=this.amount.v,c=this.miterLimit.v,d=this.lineJoin;if(0!==l)for(s=0;s<o;s+=1){if(i=(n=this.shapes[s]).localShapeCollection,n.shape._mdf||this._mdf||e)for(i.releaseShapes(),n.shape._mdf=!0,t=n.shape.paths.shapes,a=n.shape.paths._length,r=0;r<a;r+=1)i.addShape(this.processPath(t[r],l,d,c));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var e={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var s=127988,r=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function a(e,t){var s=createTag("span");s.setAttribute("aria-hidden",!0),s.style.fontFamily=t;var r=createTag("span");r.innerText="giItT1WQy@!-/#",s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",s.style.fontSize="300px",s.style.fontVariant="normal",s.style.fontStyle="normal",s.style.fontWeight="normal",s.style.letterSpacing="0",s.appendChild(r),document.body.appendChild(s);var a=r.offsetWidth;return r.style.fontFamily=function(e){var t,s=e.split(","),r=s.length,a=[];for(t=0;t<r;t+=1)"sans-serif"!==s[t]&&"monospace"!==s[t]&&a.push(s[t]);return a.join(",")}(e)+", "+t,{node:r,w:a,parent:s}}function n(e,t){var s,r=document.body&&t?"svg":"canvas",a=getFontProperties(e);if("svg"===r){var n=createNS("text");n.style.fontSize="100px",n.setAttribute("font-family",e.fFamily),n.setAttribute("font-style",a.style),n.setAttribute("font-weight",a.weight),n.textContent="1",e.fClass?(n.style.fontFamily="inherit",n.setAttribute("class",e.fClass)):n.style.fontFamily=e.fFamily,t.appendChild(n),s=n}else{var i=new OffscreenCanvas(500,500).getContext("2d");i.font=a.style+" "+a.weight+" 100px "+e.fFamily,s=i}return{measureText:function(e){return"svg"===r?(s.textContent=e,s.getComputedTextLength()):s.measureText(e).width}}}function i(e){var t=0,s=e.charCodeAt(0);if(s>=55296&&s<=56319){var r=e.charCodeAt(1);r>=56320&&r<=57343&&(t=1024*(s-55296)+r-56320+65536)}return t}function o(e){var t=i(e);return t>=127462&&t<=127487}var l=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return l.isModifier=function(e,t){var s=e.toString(16)+t.toString(16);return-1!==r.indexOf(s)},l.isZeroWidthJoiner=function(e){return 8205===e},l.isFlagEmoji=function(e){return o(e.substr(0,2))&&o(e.substr(2,2))},l.isRegionalCode=o,l.isCombinedCharacter=function(e){return-1!==t.indexOf(e)},l.isRegionalFlag=function(e,t){var r=i(e.substr(t,2));if(r!==s)return!1;var a=0;for(t+=2;a<5;){if((r=i(e.substr(t,2)))<917601||r>917626)return!1;a+=1,t+=2}return 917631===i(e.substr(t,2))},l.isVariationSelector=function(e){return 65039===e},l.BLACK_FLAG_CODE_POINT=s,l.prototype={addChars:function(e){if(e){var t;this.chars||(this.chars=[]);var s,r,a=e.length,n=this.chars.length;for(t=0;t<a;t+=1){for(s=0,r=!1;s<n;)this.chars[s].style===e[t].style&&this.chars[s].fFamily===e[t].fFamily&&this.chars[s].ch===e[t].ch&&(r=!0),s+=1;r||(this.chars.push(e[t]),n+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);if(!document.body)return this.isLoaded=!0,e.list.forEach(function(e){e.helper=n(e),e.cache={}}),void(this.fonts=e.list);var s,r=e.list,i=r.length,o=i;for(s=0;s<i;s+=1){var l,c,d=!0;if(r[s].loaded=!1,r[s].monoCase=a(r[s].fFamily,"monospace"),r[s].sansCase=a(r[s].fFamily,"sans-serif"),r[s].fPath){if("p"===r[s].fOrigin||3===r[s].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[s].fFamily+'"], style[f-origin="3"][f-family="'+r[s].fFamily+'"]')).length>0&&(d=!1),d){var u=createTag("style");u.setAttribute("f-forigin",r[s].fOrigin),u.setAttribute("f-origin",r[s].origin),u.setAttribute("f-family",r[s].fFamily),u.type="text/css",u.innerText="@font-face {font-family: "+r[s].fFamily+"; font-style: normal; src: url('"+r[s].fPath+"');}",t.appendChild(u)}}else if("g"===r[s].fOrigin||1===r[s].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<l.length;c+=1)-1!==l[c].href.indexOf(r[s].fPath)&&(d=!1);if(d){var m=createTag("link");m.setAttribute("f-forigin",r[s].fOrigin),m.setAttribute("f-origin",r[s].origin),m.type="text/css",m.rel="stylesheet",m.href=r[s].fPath,document.body.appendChild(m)}}else if("t"===r[s].fOrigin||2===r[s].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<l.length;c+=1)r[s].fPath===l[c].src&&(d=!1);if(d){var p=createTag("link");p.setAttribute("f-forigin",r[s].fOrigin),p.setAttribute("f-origin",r[s].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",r[s].fPath),t.appendChild(p)}}}else r[s].loaded=!0,o-=1;r[s].helper=n(r[s],t),r[s].cache={},this.fonts.push(r[s])}0===o?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,s,r){for(var a=0,n=this.chars.length;a<n;){if(this.chars[a].ch===t&&this.chars[a].style===s&&this.chars[a].fFamily===r)return this.chars[a];a+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,s,r)),e},getFontByName:function(e){for(var t=0,s=this.fonts.length;t<s;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,s){var r=this.getFontByName(t),a=e;if(!r.cache[a]){var n=r.helper;if(" "===e){var i=n.measureText("|"+e+"|"),o=n.measureText("||");r.cache[a]=(i-o)/100}else r.cache[a]=n.measureText(e)/100}return r.cache[a]*s},checkLoadedFonts:function(){var e,t,s,r=this.fonts.length,a=r;for(e=0;e<r;e+=1)this.fonts[e].loaded?a-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(t=this.fonts[e].monoCase.node,s=this.fonts[e].monoCase.w,t.offsetWidth!==s?(a-=1,this.fonts[e].loaded=!0):(t=this.fonts[e].sansCase.node,s=this.fonts[e].sansCase.w,t.offsetWidth!==s&&(a-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==a&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},l}();function SlotManager(e){this.animationData=e}function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(t){return e[t]||""}}();function SliderEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function AngleEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function ColorEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,1,0,s)}function PointEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,1,0,s)}function LayerIndexEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function MaskIndexEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function CheckboxEffect(e,t,s){this.p=PropertyFactory.getProp(t,e.v,0,0,s)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var s,r=e.ef||[];this.effectElements=[];var a,n=r.length;for(s=0;s<n;s+=1)a=new GroupEffect(r[s],t),this.effectElements.push(a)}function GroupEffect(e,t){this.init(e,t)}function BaseElement(){}function FrameElement(){}function FootageElement(e,t,s){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,s)}function AudioElement(e,t,s){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,s),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){var s;this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var r,a=this.data.ef.length,n=this.data.ef;for(s=0;s<a;s+=1){switch(r=null,n[s].ty){case 0:r=new SliderEffect(n[s],t,this);break;case 1:r=new AngleEffect(n[s],t,this);break;case 2:r=new ColorEffect(n[s],t,this);break;case 3:r=new PointEffect(n[s],t,this);break;case 4:case 7:r=new CheckboxEffect(n[s],t,this);break;case 10:r=new LayerIndexEffect(n[s],t,this);break;case 11:r=new MaskIndexEffect(n[s],t,this);break;case 5:r=new EffectsManager(n[s],t);break;default:r=new NoValueEffect(n[s])}r&&this.effectElements.push(r)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),s=e("effects"),r=e("shape"),a=e("text"),n=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var i=s.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(i),0===this.data.ty||this.data.xt?this.compInterface=n(this):4===this.data.ty?(this.layerInterface.shapeInterface=r(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=a(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,s){this.globalData=t,this.comp=s,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var s,r=this.dynamicProperties.length;for(s=0;s<r;s+=1)(t||this._isParent&&"transform"===this.dynamicProperties[s].propType)&&(this.dynamicProperties[s].getValue(),this.dynamicProperties[s]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var t=e("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var s=this._volume*this._volumeMultiplier;this._previousVolume!==s&&(this._previousVolume=s,this.audio.volume(s))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(e){var t,s,r=this.layers.length;for(this.completeLayers=!0,t=r-1;t>=0;t-=1)this.elements[t]||(s=this.layers[t]).ip-s.st<=e-this.layers[t].st&&s.op-s.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:default:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){var t;this.completeLayers=!1;var s,r=e.length,a=this.layers.length;for(t=0;t<r;t+=1)for(s=0;s<a;){if(this.layers[s].id===e[t].id){this.layers[s]=e[t];break}s+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,s){for(var r=this.elements,a=this.layers,n=0,i=a.length;n<i;)a[n].ind==t&&(r[n]&&!0!==r[n]?(s.push(r[n]),r[n].setAsParent(),void 0!==a[n].parent?this.buildElementParenting(e,a[n].parent,s):e.setHierarchy(s)):(this.buildItem(n),this.addPendingElement(e))),n+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,s=e.length;for(t=0;t<s;t+=1)if(e[t].xt){var r=this.createComp(e[t]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.getElementById=function(e){var t,s=this.elements.length;for(t=0;t<s;t+=1)if(this.elements[t].data.ind===e)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(e){var t,s=e.shift();if("number"==typeof s)t=this.elements[s];else{var r,a=this.elements.length;for(r=0;r<a;r+=1)if(this.elements[r].data.nm===s){t=this.elements[r];break}}return 0===e.length?t:t.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(e,t,s){this.data=e,this.element=t,this.globalData=s,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,a,n=this.globalData.defs,i=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(i),this.solidPath="";var o,l,c,d,u,m,p=this.masksProperties,h=0,x=[],f=createElementID(),g="clipPath",y="clip-path";for(r=0;r<i;r+=1)if(("a"!==p[r].mode&&"n"!==p[r].mode||p[r].inv||100!==p[r].o.k||p[r].o.x)&&(g="mask",y="mask"),"s"!==p[r].mode&&"i"!==p[r].mode||0!==h?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),x.push(c)),a=createNS("path"),"n"===p[r].mode)this.viewData[r]={op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),elem:a,lastPath:""},n.appendChild(a);else{var v;if(h+=1,a.setAttribute("fill","s"===p[r].mode?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),0!==p[r].x.k?(g="mask",y="mask",m=PropertyFactory.getProp(this.element,p[r].x,0,null,this.element),v=createElementID(),(d=createNS("filter")).setAttribute("id",v),(u=createNS("feMorphology")).setAttribute("operator","erode"),u.setAttribute("in","SourceGraphic"),u.setAttribute("radius","0"),d.appendChild(u),n.appendChild(d),a.setAttribute("stroke","s"===p[r].mode?"#000000":"#ffffff")):(u=null,m=null),this.storedData[r]={elem:a,x:m,expan:u,lastPath:"",lastOperator:"",filterId:v,lastRadius:0},"i"===p[r].mode){l=x.length;var E=createNS("g");for(o=0;o<l;o+=1)E.appendChild(x[o]);var b=createNS("mask");b.setAttribute("mask-type","alpha"),b.setAttribute("id",f+"_"+h),b.appendChild(a),n.appendChild(b),E.setAttribute("mask","url("+getLocationHref()+"#"+f+"_"+h+")"),x.length=0,x.push(E)}else x.push(a);p[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),invRect:c},this.viewData[r].prop.k||this.drawPath(p[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(g),i=x.length,r=0;r<i;r+=1)this.maskElement.appendChild(x[r]);h>0&&(this.maskElement.setAttribute("id",f),this.element.maskedElement.setAttribute(y,"url("+getLocationHref()+"#"+f+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,s=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;s<r;){if(this.hierarchy[s].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}s+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),s=0;s<r;s+=1)t.multiply(this.hierarchy[s].finalTransform.mProp.v)}this.localTransforms&&!this.finalTransform._matMdf||(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<t;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var s=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(s),e=1;e<t;e+=1){var r=this.localTransforms[e].matrix;s.multiply(r)}s.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var a=this.finalTransform.localOpacity;for(e=0;e<t;e+=1)a*=.01*this.localTransforms[e].opacity;this.finalTransform.localOpacity=a}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,s=e.length;for(t=0;t<s;t+=1)this.localTransforms.push(e[t])}}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var s,r=!0,a=this.comp;r;)a.finalTransform?(a.data.hasMask&&t.splice(0,0,a.finalTransform),a=a.comp):r=!1;var n,i=t.length;for(s=0;s<i;s+=1)n=t[s].mat.applyToPointArray(0,0,0),e=[e[0]-n[0],e[1]-n[1],0];return e},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,s=this.element.finalTransform.mat,r=this.masksProperties.length;for(t=0;t<r;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",s.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var a=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),a.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,s){var r,a,n=" M"+t.v[0][0]+","+t.v[0][1];for(a=t._length,r=1;r<a;r+=1)n+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[r][0]+","+t.i[r][1]+" "+t.v[r][0]+","+t.v[r][1];if(t.c&&a>1&&(n+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),s.lastPath!==n){var i="";s.elem&&(t.c&&(i=e.inv?this.solidPath+n:n),s.elem.setAttribute("d",i)),s.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={createFilter:function(e,t){var s=createNS("filter");return s.setAttribute("id",e),!0!==t&&(s.setAttribute("filterUnits","objectBoundingBox"),s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%")),s},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var t,s,r="SourceGraphic",a=e.data.ef?e.data.ef.length:0,n=createElementID(),i=filtersFactory.createFilter(n,!0),o=0;for(this.filters=[],t=0;t<a;t+=1){s=null;var l=e.data.ef[t].ty;registeredEffects$1[l]&&(s=new(0,registeredEffects$1[l].effect)(i,e.effectsManager.effectElements[t],e,idPrefix+o,r),r=idPrefix+o,registeredEffects$1[l].countsAsEffect&&(o+=1)),s&&this.filters.push(s)}o&&(e.globalData.defs.appendChild(i),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+n+")")),this.filters.length&&e.addRenderableComponent(this)}function registerEffect$1(e,t,s){registeredEffects$1[e]={effect:t,countsAsEffect:s}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(e,t,s){this.assetData=t.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(e,t,s),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(e,t){this.elem=e,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(e){var t,s=this.filters.length;for(t=0;t<s;t+=1)this.filters[t].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var t,s=this.filters.length,r=[];for(t=0;t<s;t+=1)this.filters[t].type===e&&r.push(this.filters[t]);return r},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var s=createNS("clipPath"),r=createNS("path");r.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=createElementID();if(s.setAttribute("id",a),s.appendChild(r),this.globalData.defs.appendChild(s),this.checkMasks()){var n=createNS("g");n.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),n.appendChild(this.layerElement),this.transformedElement=n,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t,s,r,a,n=this.layerId+"_"+e;if(1===e||3===e){var i=createNS("mask");i.setAttribute("id",n),i.setAttribute("mask-type",3===e?"luminance":"alpha"),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),i.appendChild(r),this.globalData.defs.appendChild(i),featureSupport.maskType||1!==e||(i.setAttribute("mask-type","luminance"),t=createElementID(),s=filtersFactory.createFilter(t),this.globalData.defs.appendChild(s),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(a=createNS("g")).appendChild(r),i.appendChild(a),a.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(2===e){var o=createNS("mask");o.setAttribute("id",n),o.setAttribute("mask-type","alpha");var l=createNS("g");o.appendChild(l),t=createElementID(),s=filtersFactory.createFilter(t);var c=createNS("feComponentTransfer");c.setAttribute("in","SourceGraphic"),s.appendChild(c);var d=createNS("feFuncA");d.setAttribute("type","table"),d.setAttribute("tableValues","1.0 0.0"),c.appendChild(d),this.globalData.defs.appendChild(s);var u=createNS("rect");u.setAttribute("width",this.comp.data.w),u.setAttribute("height",this.comp.data.h),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("fill","#ffffff"),u.setAttribute("opacity","0"),l.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),l.appendChild(u),(r=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(r),featureSupport.maskType||(o.setAttribute("mask-type","luminance"),s.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),l.appendChild(u),a.appendChild(this.layerElement),l.appendChild(a)),this.globalData.defs.appendChild(o)}this.matteMasks[e]=n}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initTransform(e,t,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(e){var t,s=this.shapeModifiers.length;for(t=0;t<s;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,s=0,r=t.length;s<r;){if(t[s].elem===e)return t[s].pos;s+=1}return 0},addProcessedElement:function(e,t){for(var s=this.processedElements,r=s.length;r;)if(s[r-=1].elem===e)return void(s[r].pos=t);s.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,t,s){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=s,this.lvl=t,this._isAnimated=!!s.k;for(var r=0,a=e.length;r<a;){if(e[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(e,t,s,r){var a;this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=s,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var n,i=t.length||0;for(a=0;a<i;a+=1)n=PropertyFactory.getProp(e,t[a].v,0,0,this),this.k=n.k||this.k,this.dataProps[a]={n:t[a].n,p:n};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=s,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=s}function SVGNoStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=s}function GradientProperty(e,t,s){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var r=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(s),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,s)}function SVGGradientStrokeStyleData(e,t,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,s),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,t,s){this.transform={mProps:e,op:t,container:s},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,s=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<s;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(e,t){for(var s=0,r=this.o.length/2;s<r;){if(Math.abs(e[4*s]-e[4*t+2*s])>.01)return!1;s+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,s,r,a=4*this.data.p;for(t=0;t<a;t+=1)s=t%4==0?100:255,r=Math.round(this.prop.v[t]*s),this.c[t]!==r&&(this.c[t]=r,this._cmdf=!e);if(this.o.length)for(a=this.prop.v.length,t=4*this.data.p;t<a;t+=1)s=t%2==0?100:1,r=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==r&&(this.o[t-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,s){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=s,this.stops=[],this.setGradientData(s.pElem,t),this.setGradientOpacity(t,s),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var s=createElementID(),r=createNS(1===t.t?"linearGradient":"radialGradient");r.setAttribute("id",s),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var a,n,i,o=[];for(i=4*t.g.p,n=0;n<i;n+=4)a=createNS("stop"),r.appendChild(a),o.push(a);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),this.gf=r,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var s,r,a,n=createNS("mask"),i=createNS("path");n.appendChild(i);var o=createElementID(),l=createElementID();n.setAttribute("id",l);var c=createNS(1===e.t?"linearGradient":"radialGradient");c.setAttribute("id",o),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),a=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var d=this.stops;for(r=4*e.g.p;r<a;r+=2)(s=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(s),d.push(s);i.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),"gs"===e.ty&&(i.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),i.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),1===e.lj&&i.setAttribute("stroke-miterlimit",e.ml)),this.of=c,this.ms=n,this.ost=d,this.maskId=l,t.msElem=i}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(e,t,s,r){if(0===t)return"";var a,n=e.o,i=e.i,o=e.v,l=" M"+r.applyToPointStringified(o[0][0],o[0][1]);for(a=1;a<t;a+=1)l+=" C"+r.applyToPointStringified(n[a-1][0],n[a-1][1])+" "+r.applyToPointStringified(i[a][0],i[a][1])+" "+r.applyToPointStringified(o[a][0],o[a][1]);return s&&t&&(l+=" C"+r.applyToPointStringified(n[a-1][0],n[a-1][1])+" "+r.applyToPointStringified(i[0][0],i[0][1])+" "+r.applyToPointStringified(o[0][0],o[0][1]),l+="z"),l},SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function s(e,t,s){(s||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(s||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function r(){}function a(s,r,a){var n,i,o,l,c,d,u,m,p,h,x=r.styles.length,f=r.lvl;for(d=0;d<x;d+=1){if(l=r.sh._mdf||a,r.styles[d].lvl<f){for(m=t.reset(),p=f-r.styles[d].lvl,h=r.transformers.length-1;!l&&p>0;)l=r.transformers[h].mProps._mdf||l,p-=1,h-=1;if(l)for(p=f-r.styles[d].lvl,h=r.transformers.length-1;p>0;)m.multiply(r.transformers[h].mProps.v),p-=1,h-=1}else m=e;if(i=(u=r.sh.paths)._length,l){for(o="",n=0;n<i;n+=1)(c=u.shapes[n])&&c._length&&(o+=buildShapeString(c,c._length,c.c,m));r.caches[d]=o}else o=r.caches[d];r.styles[d].d+=!0===s.hd?"":o,r.styles[d]._mdf=l||r.styles[d]._mdf}}function n(e,t,s){var r=t.style;(t.c._mdf||s)&&r.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s)&&r.pElem.setAttribute("fill-opacity",t.o.v)}function i(e,t,s){o(e,t,s),l(0,t,s)}function o(e,t,s){var r,a,n,i,o,l=t.gf,c=t.g._hasOpacity,d=t.s.v,u=t.e.v;if(t.o._mdf||s){var m="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(m,t.o.v)}if(t.s._mdf||s){var p=1===e.t?"x1":"cx",h="x1"===p?"y1":"cy";l.setAttribute(p,d[0]),l.setAttribute(h,d[1]),c&&!t.g._collapsable&&(t.of.setAttribute(p,d[0]),t.of.setAttribute(h,d[1]))}if(t.g._cmdf||s){r=t.cst;var x=t.g.c;for(n=r.length,a=0;a<n;a+=1)(i=r[a]).setAttribute("offset",x[4*a]+"%"),i.setAttribute("stop-color","rgb("+x[4*a+1]+","+x[4*a+2]+","+x[4*a+3]+")")}if(c&&(t.g._omdf||s)){var f=t.g.o;for(n=(r=t.g._collapsable?t.cst:t.ost).length,a=0;a<n;a+=1)i=r[a],t.g._collapsable||i.setAttribute("offset",f[2*a]+"%"),i.setAttribute("stop-opacity",f[2*a+1])}if(1===e.t)(t.e._mdf||s)&&(l.setAttribute("x2",u[0]),l.setAttribute("y2",u[1]),c&&!t.g._collapsable&&(t.of.setAttribute("x2",u[0]),t.of.setAttribute("y2",u[1])));else if((t.s._mdf||t.e._mdf||s)&&(o=Math.sqrt(Math.pow(d[0]-u[0],2)+Math.pow(d[1]-u[1],2)),l.setAttribute("r",o),c&&!t.g._collapsable&&t.of.setAttribute("r",o)),t.s._mdf||t.e._mdf||t.h._mdf||t.a._mdf||s){o||(o=Math.sqrt(Math.pow(d[0]-u[0],2)+Math.pow(d[1]-u[1],2)));var g=Math.atan2(u[1]-d[1],u[0]-d[0]),y=t.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var v=o*y,E=Math.cos(g+t.a.v)*v+d[0],b=Math.sin(g+t.a.v)*v+d[1];l.setAttribute("fx",E),l.setAttribute("fy",b),c&&!t.g._collapsable&&(t.of.setAttribute("fx",E),t.of.setAttribute("fy",b))}}function l(e,t,s){var r=t.style,a=t.d;a&&(a._mdf||s)&&a.dashStr&&(r.pElem.setAttribute("stroke-dasharray",a.dashStr),r.pElem.setAttribute("stroke-dashoffset",a.dashoffset[0])),t.c&&(t.c._mdf||s)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s)&&r.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||s)&&(r.pElem.setAttribute("stroke-width",t.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return n;case"gf":return o;case"gs":return i;case"st":return l;case"sh":case"el":case"rc":case"sr":return a;case"tr":return s;case"no":return r;default:return null}}}}();function SVGShapeElement(e,t,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,s),this.prevViewData=[]}function LetterProps(e,t,s,r,a,n){this.o=e,this.sw=t,this.sc=s,this.fc=r,this.m=a,this.p=n,this._mdf={o:!0,sw:!!t,sc:!!s,fc:!!r,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=e.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,s,r,a=this.shapes.length,n=this.stylesList.length,i=[],o=!1;for(s=0;s<n;s+=1){for(r=this.stylesList[s],o=!1,i.length=0,e=0;e<a;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(i.push(t),o=t._isAnimated||o);i.length>1&&o&&this.setShapesAsAnimated(i)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,s=e.length;for(t=0;t<s;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var s,r=new SVGStyleData(e,t),a=r.pElem;return"st"===e.ty?s=new SVGStrokeStyleData(this,e,r):"fl"===e.ty?s=new SVGFillStyleData(this,e,r):"gf"===e.ty||"gs"===e.ty?(s=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,r),this.globalData.defs.appendChild(s.gf),s.maskId&&(this.globalData.defs.appendChild(s.ms),this.globalData.defs.appendChild(s.of),a.setAttribute("mask","url("+getLocationHref()+"#"+s.maskId+")"))):"no"===e.ty&&(s=new SVGNoStyleData(this,e,r)),"st"!==e.ty&&"gs"!==e.ty||(a.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),a.setAttribute("fill-opacity","0"),1===e.lj&&a.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&a.setAttribute("fill-rule","evenodd"),e.ln&&a.setAttribute("id",e.ln),e.cl&&a.setAttribute("class",e.cl),e.bm&&(a.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(r),this.addToAnimatedContents(e,s),s},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var s=TransformPropertyFactory.getTransformProperty(this,e,this),r=new SVGTransformData(s,s.o,t);return this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createShapeElement=function(e,t,s){var r=4;"rc"===e.ty?r=5:"el"===e.ty?r=6:"sr"===e.ty&&(r=7);var a=new SVGShapeData(t,s,ShapePropertyFactory.getShapeProp(this,e,r,this));return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(e,a),a},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var s=0,r=this.animatedContents.length;s<r;){if(this.animatedContents[s].element===t)return;s+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,s=e.styles,r=this.stylesList.length;for(t=0;t<r;t+=1)-1!==s.indexOf(this.stylesList[t])||this.stylesList[t].closed||s.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,s,r,a,n,i){var o,l,c,d,u,m,p=[].concat(n),h=e.length-1,x=[],f=[];for(o=h;o>=0;o-=1){if((m=this.searchProcessedElement(e[o]))?t[o]=s[m-1]:e[o]._render=i,"fl"===e[o].ty||"st"===e[o].ty||"gf"===e[o].ty||"gs"===e[o].ty||"no"===e[o].ty)m?t[o].style.closed=e[o].hd:t[o]=this.createStyleElement(e[o],a),e[o]._render&&t[o].style.pElem.parentNode!==r&&r.appendChild(t[o].style.pElem),x.push(t[o].style);else if("gr"===e[o].ty){if(m)for(c=t[o].it.length,l=0;l<c;l+=1)t[o].prevViewData[l]=t[o].it[l];else t[o]=this.createGroupElement(e[o]);this.searchShapes(e[o].it,t[o].it,t[o].prevViewData,t[o].gr,a+1,p,i),e[o]._render&&t[o].gr.parentNode!==r&&r.appendChild(t[o].gr)}else"tr"===e[o].ty?(m||(t[o]=this.createTransformElement(e[o],r)),d=t[o].transform,p.push(d)):"sh"===e[o].ty||"rc"===e[o].ty||"el"===e[o].ty||"sr"===e[o].ty?(m||(t[o]=this.createShapeElement(e[o],p,a)),this.setElementStyles(t[o])):"tm"===e[o].ty||"rd"===e[o].ty||"ms"===e[o].ty||"pb"===e[o].ty||"zz"===e[o].ty||"op"===e[o].ty?(m?(u=t[o]).closed=!1:((u=ShapeModifiers.getModifier(e[o].ty)).init(this,e[o]),t[o]=u,this.shapeModifiers.push(u)),f.push(u)):"rp"===e[o].ty&&(m?(u=t[o]).closed=!0:(u=ShapeModifiers.getModifier(e[o].ty),t[o]=u,u.init(this,e,o,t),this.shapeModifiers.push(u),i=!1),f.push(u));this.addProcessedElement(e[o],o+1)}for(h=x.length,o=0;o<h;o+=1)x[o].closed=!0;for(h=f.length,o=0;o<h;o+=1)f[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var e;this.renderModifiers();var t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,s=this.animatedContents.length;for(e=0;e<s;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(e,t,s,r,a,n){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var i=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,i=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,i=!0),this.sc!==s&&(this.sc=s,this._mdf.sc=!0,i=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,i=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,i=!0),!n.length||this.p[0]===n[0]&&this.p[1]===n[1]&&this.p[4]===n[4]&&this.p[5]===n[5]&&this.p[12]===n[12]&&this.p[13]===n[13]||(this.p=n,this._mdf.p=!0,i=!0),i},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,s=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var a=this.effectsSequence.length,n=e||this.data.d.k[this.keysIndex].s;for(r=0;r<a;r+=1)n=s!==this.keysIndex?this.effectsSequence[r](n,n.t):this.effectsSequence[r](this.currentData,n.t);t!==n&&this.setCurrentData(n),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,s=0,r=e.length;s<=r-1&&!(s===r-1||e[s+1].t>t);)s+=1;return this.keysIndex!==s&&(this.keysIndex=s),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,s,r=[],a=0,n=e.length,i=!1,o=!1,l="";a<n;)i=o,o=!1,t=e.charCodeAt(a),l=e.charAt(a),FontManager.isCombinedCharacter(t)?i=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(e,a)?l=e.substr(a,14):(s=e.charCodeAt(a+1))>=56320&&s<=57343&&(FontManager.isModifier(t,s)?(l=e.substr(a,2),i=!0):l=FontManager.isFlagEmoji(e.substr(a,4))?e.substr(a,4):e.substr(a,2)):t>56319?(s=e.charCodeAt(a+1),FontManager.isVariationSelector(t)&&(i=!0)):FontManager.isZeroWidthJoiner(t)&&(i=!0,o=!0),i?(r[r.length-1]+=l,i=!1):r.push(l),a+=l.length;return r},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,s,r,a,n,i,o,l=this.elem.globalData.fontManager,c=this.data,d=[],u=0,m=c.m.g,p=0,h=0,x=0,f=[],g=0,y=0,v=l.getFontByName(e.f),E=0,b=getFontProperties(v);e.fWeight=b.weight,e.fStyle=b.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),s=e.finalText.length,e.finalLineHeight=e.lh;var j,R=e.tr/1e3*e.finalSize;if(e.sz)for(var _,w,S=!0,T=e.sz[0],P=e.sz[1];S;){_=0,g=0,s=(w=this.buildFinalText(e.t)).length,R=e.tr/1e3*e.finalSize;var C=-1;for(t=0;t<s;t+=1)j=w[t].charCodeAt(0),r=!1," "===w[t]?C=t:13!==j&&3!==j||(g=0,r=!0,_+=e.finalLineHeight||1.2*e.finalSize),l.chars?(o=l.getCharData(w[t],v.fStyle,v.fFamily),E=r?0:o.w*e.finalSize/100):E=l.measureText(w[t],e.f,e.finalSize),g+E>T&&" "!==w[t]?(-1===C?s+=1:t=C,_+=e.finalLineHeight||1.2*e.finalSize,w.splice(t,C===t?1:0,"\r"),C=-1,g=0):(g+=E,g+=R);_+=v.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&P<_?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=w,s=e.finalText.length,S=!1)}g=-R,E=0;var k,A=0;for(t=0;t<s;t+=1)if(r=!1,13===(j=(k=e.finalText[t]).charCodeAt(0))||3===j?(A=0,f.push(g),y=g>y?g:y,g=-2*R,a="",r=!0,x+=1):a=k,l.chars?(o=l.getCharData(k,v.fStyle,l.getFontByName(e.f).fFamily),E=r?0:o.w*e.finalSize/100):E=l.measureText(a,e.f,e.finalSize)," "===k?A+=E+R:(g+=E+R+A,A=0),d.push({l:E,an:E,add:p,n:r,anIndexes:[],val:a,line:x,animatorJustifyOffset:0}),2==m){if(p+=E,""===a||" "===a||t===s-1){for(""!==a&&" "!==a||(p-=E);h<=t;)d[h].an=p,d[h].ind=u,d[h].extra=E,h+=1;u+=1,p=0}}else if(3==m){if(p+=E,""===a||t===s-1){for(""===a&&(p-=E);h<=t;)d[h].an=p,d[h].ind=u,d[h].extra=E,h+=1;p=0,u+=1}}else d[u].ind=u,d[u].extra=0,u+=1;if(e.l=d,y=g>y?g:y,f.push(g),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=y,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=f;var N,I,M,D,L=c.a;i=L.length;var F=[];for(n=0;n<i;n+=1){for((N=L[n]).a.sc&&(e.strokeColorAnim=!0),N.a.sw&&(e.strokeWidthAnim=!0),(N.a.fc||N.a.fh||N.a.fs||N.a.fb)&&(e.fillColorAnim=!0),D=0,M=N.s.b,t=0;t<s;t+=1)(I=d[t]).anIndexes[n]=D,(1==M&&""!==I.val||2==M&&""!==I.val&&" "!==I.val||3==M&&(I.n||" "==I.val||t==s-1)||4==M&&(I.n||t==s-1))&&(1===N.s.rn&&F.push(D),D+=1);c.a[n].s.totalChars=D;var O,B=-1;if(1===N.s.rn)for(t=0;t<s;t+=1)B!=(I=d[t]).anIndexes[n]&&(B=I.anIndexes[n],O=F.splice(Math.floor(Math.random()*F.length),1)[0]),I.anIndexes[n]=O}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=v.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var s=this.copyData({},this.data.d.k[t].s);s=this.copyData(s,e),this.data.d.k[t].s=s,this.recalculate(t),this.setCurrentData(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,s=Math.floor;function r(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(e,t.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var a=0,n=0,i=1,o=1;this.ne.v>0?a=this.ne.v/100:n=-this.ne.v/100,this.xe.v>0?i=1-this.xe.v/100:o=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(a,n,i,o).get,c=0,d=this.finalS,u=this.finalE,m=this.data.sh;if(2===m)c=l(c=u===d?r>=u?1:0:e(0,t(.5/(u-d)+(r-d)/(u-d),1)));else if(3===m)c=l(c=u===d?r>=u?0:1:1-e(0,t(.5/(u-d)+(r-d)/(u-d),1)));else if(4===m)u===d?c=0:(c=e(0,t(.5/(u-d)+(r-d)/(u-d),1)))<.5?c*=2:c=1-2*(c-.5),c=l(c);else if(5===m){if(u===d)c=0;else{var p=u-d,h=-p/2+(r=t(e(0,r+.5-d),u-d)),x=p/2;c=Math.sqrt(1-h*h/(x*x))}c=l(c)}else 6===m?(u===d?c=0:(r=t(e(0,r+.5-d),u-d),c=(1+Math.cos(Math.PI+2*Math.PI*r/(u-d)))/2),c=l(c)):(r>=s(d)&&(c=e(0,t(r-d<0?t(u,1)-(d-r):u-r,1))),c=l(c));if(100!==this.sm.v){var f=.01*this.sm.v;0===f&&(f=1e-8);var g=.5-.5*f;c<g?c=0:(c=(c-g)/f)>1&&(c=1)}return c*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,s=this.o.v/t,r=this.s.v/t+s,a=this.e.v/t+s;if(r>a){var n=r;r=a,a=n}this.finalS=r,this.finalE=a}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(e,t,s){return new r(e,t)}}}();function TextAnimatorDataProperty(e,t,s){var r={propType:!1},a=PropertyFactory.getProp,n=t.a;this.a={r:n.r?a(e,n.r,0,degToRads,s):r,rx:n.rx?a(e,n.rx,0,degToRads,s):r,ry:n.ry?a(e,n.ry,0,degToRads,s):r,sk:n.sk?a(e,n.sk,0,degToRads,s):r,sa:n.sa?a(e,n.sa,0,degToRads,s):r,s:n.s?a(e,n.s,1,.01,s):r,a:n.a?a(e,n.a,1,0,s):r,o:n.o?a(e,n.o,0,.01,s):r,p:n.p?a(e,n.p,1,0,s):r,sw:n.sw?a(e,n.sw,0,0,s):r,sc:n.sc?a(e,n.sc,1,0,s):r,fc:n.fc?a(e,n.fc,1,0,s):r,fh:n.fh?a(e,n.fh,0,0,s):r,fs:n.fs?a(e,n.fs,0,.01,s):r,fb:n.fb?a(e,n.fb,0,.01,s):r,t:n.t?a(e,n.t,0,0,s):r},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,s),this.s.t=t.s.t}function TextAnimatorProperty(e,t,s){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=s,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(s)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,s=this._textData.a.length,r=PropertyFactory.getProp;for(e=0;e<s;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:r(this._elem,this._textData.p.a,0,0,this),f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:r(this._elem,this._textData.p.r,0,0,this),p:r(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var s,r,a,n,i,o,l,c,d,u,m,p,h,x,f,g,y,v,E,b=this._moreOptions.alignment.v,j=this._animatorsData,R=this._textData,_=this.mHelper,w=this._renderType,S=this.renderedLetters.length,T=e.l;if(this._hasMaskedPath){if(E=this._pathData.m,!this._pathData.n||this._pathData._mdf){var P,C=E.v;for(this._pathData.r.v&&(C=C.reverse()),i={tLength:0,segments:[]},n=C._length-1,g=0,a=0;a<n;a+=1)P=bez.buildBezierData(C.v[a],C.v[a+1],[C.o[a][0]-C.v[a][0],C.o[a][1]-C.v[a][1]],[C.i[a+1][0]-C.v[a+1][0],C.i[a+1][1]-C.v[a+1][1]]),i.tLength+=P.segmentLength,i.segments.push(P),g+=P.segmentLength;a=n,E.v.c&&(P=bez.buildBezierData(C.v[a],C.v[0],[C.o[a][0]-C.v[a][0],C.o[a][1]-C.v[a][1]],[C.i[0][0]-C.v[0][0],C.i[0][1]-C.v[0][1]]),i.tLength+=P.segmentLength,i.segments.push(P),g+=P.segmentLength),this._pathData.pi=i}if(i=this._pathData.pi,o=this._pathData.f.v,m=0,u=1,c=0,d=!0,x=i.segments,o<0&&E.v.c)for(i.tLength<Math.abs(o)&&(o=-Math.abs(o)%i.tLength),u=(h=x[m=x.length-1].points).length-1;o<0;)o+=h[u].partialLength,(u-=1)<0&&(u=(h=x[m-=1].points).length-1);p=(h=x[m].points)[u-1],f=(l=h[u]).partialLength}n=T.length,s=0,r=0;var k,A,N,I,M,D=1.2*e.finalSize*.714,L=!0;N=j.length;var F,O,B,V,z,$,G,q,H,W,U,Y,X=-1,J=o,Q=m,K=u,Z=-1,ee="",te=this.defaultPropsArray;if(2===e.j||1===e.j){var se=0,re=0,ae=2===e.j?-.5:-1,ne=0,ie=!0;for(a=0;a<n;a+=1)if(T[a].n){for(se&&(se+=re);ne<a;)T[ne].animatorJustifyOffset=se,ne+=1;se=0,ie=!0}else{for(A=0;A<N;A+=1)(k=j[A].a).t.propType&&(ie&&2===e.j&&(re+=k.t.v*ae),(M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars)).length?se+=k.t.v*M[0]*ae:se+=k.t.v*M*ae);ie=!1}for(se&&(se+=re);ne<a;)T[ne].animatorJustifyOffset=se,ne+=1}for(a=0;a<n;a+=1){if(_.reset(),V=1,T[a].n)s=0,r+=e.yOffset,r+=L?1:0,o=J,L=!1,this._hasMaskedPath&&(u=K,p=(h=x[m=Q].points)[u-1],f=(l=h[u]).partialLength,c=0),ee="",U="",H="",Y="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==T[a].line){switch(e.j){case 1:o+=g-e.lineWidths[T[a].line];break;case 2:o+=(g-e.lineWidths[T[a].line])/2}Z=T[a].line}X!==T[a].ind&&(T[X]&&(o+=T[X].extra),o+=T[a].an/2,X=T[a].ind),o+=b[0]*T[a].an*.005;var oe=0;for(A=0;A<N;A+=1)(k=j[A].a).p.propType&&((M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars)).length?oe+=k.p.v[0]*M[0]:oe+=k.p.v[0]*M),k.a.propType&&((M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars)).length?oe+=k.a.v[0]*M[0]:oe+=k.a.v[0]*M);for(d=!0,this._pathData.a.v&&(o=.5*T[0].an+(g-this._pathData.f.v-.5*T[0].an-.5*T[T.length-1].an)*X/(n-1),o+=this._pathData.f.v);d;)c+f>=o+oe||!h?(y=(o+oe-c)/l.partialLength,O=p.point[0]+(l.point[0]-p.point[0])*y,B=p.point[1]+(l.point[1]-p.point[1])*y,_.translate(-b[0]*T[a].an*.005,-b[1]*D*.01),d=!1):h&&(c+=l.partialLength,(u+=1)>=h.length&&(u=0,x[m+=1]?h=x[m].points:E.v.c?(u=0,h=x[m=0].points):(c-=l.partialLength,h=null)),h&&(p=l,f=(l=h[u]).partialLength));F=T[a].an/2-T[a].add,_.translate(-F,0,0)}else F=T[a].an/2-T[a].add,_.translate(-F,0,0),_.translate(-b[0]*T[a].an*.005,-b[1]*D*.01,0);for(A=0;A<N;A+=1)(k=j[A].a).t.propType&&(M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars),0===s&&0===e.j||(this._hasMaskedPath?M.length?o+=k.t.v*M[0]:o+=k.t.v*M:M.length?s+=k.t.v*M[0]:s+=k.t.v*M));for(e.strokeWidthAnim&&($=e.sw||0),e.strokeColorAnim&&(z=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(G=[e.fc[0],e.fc[1],e.fc[2]]),A=0;A<N;A+=1)(k=j[A].a).a.propType&&((M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars)).length?_.translate(-k.a.v[0]*M[0],-k.a.v[1]*M[1],k.a.v[2]*M[2]):_.translate(-k.a.v[0]*M,-k.a.v[1]*M,k.a.v[2]*M));for(A=0;A<N;A+=1)(k=j[A].a).s.propType&&((M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars)).length?_.scale(1+(k.s.v[0]-1)*M[0],1+(k.s.v[1]-1)*M[1],1):_.scale(1+(k.s.v[0]-1)*M,1+(k.s.v[1]-1)*M,1));for(A=0;A<N;A+=1){if(k=j[A].a,M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars),k.sk.propType&&(M.length?_.skewFromAxis(-k.sk.v*M[0],k.sa.v*M[1]):_.skewFromAxis(-k.sk.v*M,k.sa.v*M)),k.r.propType&&(M.length?_.rotateZ(-k.r.v*M[2]):_.rotateZ(-k.r.v*M)),k.ry.propType&&(M.length?_.rotateY(k.ry.v*M[1]):_.rotateY(k.ry.v*M)),k.rx.propType&&(M.length?_.rotateX(k.rx.v*M[0]):_.rotateX(k.rx.v*M)),k.o.propType&&(M.length?V+=(k.o.v*M[0]-V)*M[0]:V+=(k.o.v*M-V)*M),e.strokeWidthAnim&&k.sw.propType&&(M.length?$+=k.sw.v*M[0]:$+=k.sw.v*M),e.strokeColorAnim&&k.sc.propType)for(q=0;q<3;q+=1)M.length?z[q]+=(k.sc.v[q]-z[q])*M[0]:z[q]+=(k.sc.v[q]-z[q])*M;if(e.fillColorAnim&&e.fc){if(k.fc.propType)for(q=0;q<3;q+=1)M.length?G[q]+=(k.fc.v[q]-G[q])*M[0]:G[q]+=(k.fc.v[q]-G[q])*M;k.fh.propType&&(G=M.length?addHueToRGB(G,k.fh.v*M[0]):addHueToRGB(G,k.fh.v*M)),k.fs.propType&&(G=M.length?addSaturationToRGB(G,k.fs.v*M[0]):addSaturationToRGB(G,k.fs.v*M)),k.fb.propType&&(G=M.length?addBrightnessToRGB(G,k.fb.v*M[0]):addBrightnessToRGB(G,k.fb.v*M))}}for(A=0;A<N;A+=1)(k=j[A].a).p.propType&&(M=j[A].s.getMult(T[a].anIndexes[A],R.a[A].s.totalChars),this._hasMaskedPath?M.length?_.translate(0,k.p.v[1]*M[0],-k.p.v[2]*M[1]):_.translate(0,k.p.v[1]*M,-k.p.v[2]*M):M.length?_.translate(k.p.v[0]*M[0],k.p.v[1]*M[1],-k.p.v[2]*M[2]):_.translate(k.p.v[0]*M,k.p.v[1]*M,-k.p.v[2]*M));if(e.strokeWidthAnim&&(H=$<0?0:$),e.strokeColorAnim&&(W="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),e.fillColorAnim&&e.fc&&(U="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(_.translate(0,-e.ls),_.translate(0,b[1]*D*.01+r,0),this._pathData.p.v){v=(l.point[1]-p.point[1])/(l.point[0]-p.point[0]);var le=180*Math.atan(v)/Math.PI;l.point[0]<p.point[0]&&(le+=180),_.rotate(-le*Math.PI/180)}_.translate(O,B,0),o-=b[0]*T[a].an*.005,T[a+1]&&X!==T[a+1].ind&&(o+=T[a].an/2,o+=.001*e.tr*e.finalSize)}else{switch(_.translate(s,r,0),e.ps&&_.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:_.translate(T[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[T[a].line]),0,0);break;case 2:_.translate(T[a].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[T[a].line])/2,0,0)}_.translate(0,-e.ls),_.translate(F,0,0),_.translate(b[0]*T[a].an*.005,b[1]*D*.01,0),s+=T[a].l+.001*e.tr*e.finalSize}"html"===w?ee=_.toCSS():"svg"===w?ee=_.to2dCSS():te=[_.props[0],_.props[1],_.props[2],_.props[3],_.props[4],_.props[5],_.props[6],_.props[7],_.props[8],_.props[9],_.props[10],_.props[11],_.props[12],_.props[13],_.props[14],_.props[15]],Y=V}S<=a?(I=new LetterProps(Y,H,W,U,ee,te),this.renderedLetters.push(I),S+=1,this.lettersChangedFlag=!0):(I=this.renderedLetters[a],this.lettersChangedFlag=I.update(Y,H,W,U,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(e,t,s){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,s),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,t){var s,r,a=t.length,n="";for(s=0;s<a;s+=1)"sh"===t[s].ty&&(r=t[s].ks.k,n+=buildShapeString(r,r.i.length,!0,e));return n},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,s,r,a){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[s]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[s])/2,0,0)}t.translate(r,a,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,t,s){this.textSpans=[],this.renderType="svg",this.initElement(e,t,s)}function ISolidElement(e,t,s){this.initElement(e,t,s)}function NullElement(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initFrame(),this.initTransform(e,t,s),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(e,t,s){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var s="";if(t&&t.title){var r=createNS("title"),a=createElementID();r.setAttribute("id",a),r.textContent=t.title,this.svgElement.appendChild(r),s+=a}if(t&&t.description){var n=createNS("desc"),i=createElementID();n.setAttribute("id",i),n.textContent=t.description,this.svgElement.appendChild(n),s+=" "+i}s&&this.svgElement.setAttribute("aria-labelledby",s);var o=createNS("defs");this.svgElement.appendChild(o);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,s=e.length,r=[],a="";t<s;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(r.push(a),a=""):a+=e[t],t+=1;return r.push(a),r},SVGTextLottieElement.prototype.buildShapeData=function(e,t){if(e.shapes&&e.shapes.length){var s=e.shapes[0];if(s.it){var r=s.it[s.it.length-1];r.s&&(r.s.k[0]=t,r.s.k[1]=t)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){var e,t;this.addDynamicProperty(this);var s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s?s.l.length:0),s.fc?this.layerElement.setAttribute("fill",this.buildColor(s.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(s.sc)),this.layerElement.setAttribute("stroke-width",s.sw)),this.layerElement.setAttribute("font-size",s.finalSize);var r=this.globalData.fontManager.getFontByName(s.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var a=s.fWeight,n=s.fStyle;this.layerElement.setAttribute("font-style",n),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",s.t);var i,o=s.l||[],l=!!this.globalData.fontManager.chars;t=o.length;var c=this.mHelper,d=this.data.singleShape,u=0,m=0,p=!0,h=.001*s.tr*s.finalSize;if(!d||l||s.sz){var x,f=this.textSpans.length;for(e=0;e<t;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!l||!d||0===e){if(i=f>e?this.textSpans[e].span:createNS(l?"g":"text"),f<=e){if(i.setAttribute("stroke-linecap","butt"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=i,l){var g=createNS("g");i.appendChild(g),this.textSpans[e].childSpan=g}this.textSpans[e].span=i,this.layerElement.appendChild(i)}i.style.display="inherit"}if(c.reset(),d&&(o[e].n&&(u=-h,m+=s.yOffset,m+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(s,c,o[e].line,u,m),u+=o[e].l||0,u+=h),l){var y;if(1===(x=this.globalData.fontManager.getCharData(s.finalText[e],r.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily)).t)y=new SVGCompElement(x.data,this.globalData,this);else{var v=emptyShapeData;x.data&&x.data.shapes&&(v=this.buildShapeData(x.data,s.finalSize)),y=new SVGShapeElement(v,this.globalData,this)}if(this.textSpans[e].glyph){var E=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(E.layerElement),E.destroy()}this.textSpans[e].glyph=y,y._debug=!0,y.prepareFrame(0),y.renderFrame(),this.textSpans[e].childSpan.appendChild(y.layerElement),1===x.t&&this.textSpans[e].childSpan.setAttribute("transform","scale("+s.finalSize/100+","+s.finalSize/100+")")}else d&&i.setAttribute("transform","translate("+c.props[12]+","+c.props[13]+")"),i.textContent=o[e].val,i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}d&&i&&i.setAttribute("d","")}else{var b=this.textContainer,j="start";switch(s.j){case 1:j="end";break;case 2:j="middle";break;default:j="start"}b.setAttribute("text-anchor",j),b.setAttribute("letter-spacing",h);var R=this.buildTextContents(s.finalText);for(t=R.length,m=s.ps?s.ps[1]+s.ascent:0,e=0;e<t;e+=1)(i=this.textSpans[e].span||createNS("tspan")).textContent=R[e],i.setAttribute("x",0),i.setAttribute("y",m),i.style.display="inherit",b.appendChild(i),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=i,m+=s.finalLineHeight;this.layerElement.appendChild(b)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,t,s=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<s;e+=1)(t=this.textSpans[e].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var s,r,a,n=this.textAnimator.renderedLetters,i=this.textProperty.currentData.l;for(t=i.length,e=0;e<t;e+=1)i[e].n||(s=n[e],r=this.textSpans[e].span,(a=this.textSpans[e].glyph)&&a.renderFrame(),s._mdf.m&&r.setAttribute("transform",s.m),s._mdf.o&&r.setAttribute("opacity",s.o),s._mdf.sw&&r.setAttribute("stroke-width",s.sw),s._mdf.sc&&r.setAttribute("stroke",s.sc),s._mdf.fc&&r.setAttribute("fill",s.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var s=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",e.w),r.setAttribute("height",e.h),r.setAttribute("x",0),r.setAttribute("y",0);var a=createElementID();s.setAttribute("id",a),s.appendChild(r),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),t.appendChild(s),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var t=0,s=this.layers.length;for(t=0;t<s;t+=1)if(this.layers[t].ind===e)return t;return-1},SVGRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var s=this.createItem(this.layers[e]);if(t[e]=s,getExpressionsPlugin()&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(s),s.initExpressions()),this.appendElementInPos(s,e),this.layers[e].tt){var r="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(-1===r)return;if(this.elements[r]&&!0!==this.elements[r]){var a=t[r].getMatte(this.layers[e].tt);s.setMatte(a)}else this.buildItem(r),this.addPendingElement(s)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,s=this.elements.length;t<s;){if(this.elements[t]===e){var r="tp"in e.data?this.findIndexByInd(e.data.tp):t-1,a=this.elements[r].getMatte(this.layers[t].tt);e.setMatte(a);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var s=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=s-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<s;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,t){var s=e.getBaseElement();if(s){for(var r,a=0;a<t;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement()&&(r=this.elements[a].getBaseElement()),a+=1;r?this.layerElement.insertBefore(s,r):this.layerElement.appendChild(s)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initTransform(e,t,s),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var s,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),s=r-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&(this.elements[s].prepareFrame(this.renderedFrame-this.layers[s].st),this.elements[s]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(e){var t,s=e.length,r="_";for(t=0;t<s;t+=1)r+=e[t].transform.key+"_";var a=this.sequences[r];return a||(a={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=a,this.sequenceList.push(a)),a},processSequence:function(e,t){for(var s=0,r=e.transforms.length,a=t;s<r&&!t;){if(e.transforms[s].transform.mProps._mdf){a=!0;break}s+=1}if(a)for(e.finalTransform.reset(),s=r-1;s>=0;s-=1)e.finalTransform.multiply(e.transforms[s].transform.mProps.v);e._mdf=a},processSequences:function(e){var t,s=this.sequenceList.length;for(t=0;t<s;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,s=null,r=null;function a(){var a,n,i;t||(a=createNS("svg"),n=createNS("filter"),i=createNS("feColorMatrix"),n.setAttribute("id",e),i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),n.appendChild(i),a.appendChild(n),a.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(a.style.display="none"),r=a,document.body.appendChild(r),t=createTag("canvas"),(s=t.getContext("2d")).filter="url(#"+e+")",s.fillStyle="rgba(0,0,0,0)",s.fillRect(0,0,1,1))}return{load:a,get:function(r){return t||a(),t.width=r.width,t.height=r.height,s.filter="url(#"+e+")",t}}};function createCanvas(e,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,t);var s=createTag("canvas");return s.width=e,s.height=t,s}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas},registeredEffects={};function CVEffects(e){var t,s,r=e.data.ef?e.data.ef.length:0;for(this.filters=[],t=0;t<r;t+=1){s=null;var a=e.data.ef[t].ty;registeredEffects[a]&&(s=new(0,registeredEffects[a].effect)(e.effectsManager.effectElements[t],e)),s&&this.filters.push(s)}this.filters.length&&e.addRenderableComponent(this)}function registerEffect(e,t){registeredEffects[e]={effect:t}}function CVMaskElement(e,t){var s;this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r=this.masksProperties.length,a=!1;for(s=0;s<r;s+=1)"n"!==this.masksProperties[s].mode&&(a=!0),this.viewData[s]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[s],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(e){var t,s=this.filters.length;for(t=0;t<s;t+=1)this.filters[t].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var t,s=this.filters.length,r=[];for(t=0;t<s;t+=1)this.filters[t].type===e&&r.push(this.filters[t]);return r},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,s,r,a=this.element.finalTransform.mat,n=this.element.canvasContext,i=this.masksProperties.length;for(n.beginPath(),e=0;e<i;e+=1)if("n"!==this.masksProperties[e].mode){var o;this.masksProperties[e].inv&&(n.moveTo(0,0),n.lineTo(this.element.globalData.compSize.w,0),n.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),n.lineTo(0,this.element.globalData.compSize.h),n.lineTo(0,0)),r=this.viewData[e].v,t=a.applyToPointArray(r.v[0][0],r.v[0][1],0),n.moveTo(t[0],t[1]);var l=r._length;for(o=1;o<l;o+=1)s=a.applyToTriplePoints(r.o[o-1],r.i[o],r.v[o]),n.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);s=a.applyToTriplePoints(r.o[o-1],r.i[0],r.v[0]),n.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}this.element.globalData.renderer.save(!0),n.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(e,t,s,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a,n=4;"rc"===t.ty?n=5:"el"===t.ty?n=6:"sr"===t.ty&&(n=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,n,e);var i,o=s.length;for(a=0;a<o;a+=1)s[a].closed||(i={transforms:r.addTransformSequence(s[a].transforms),trNodes:[]},this.styledShapes.push(i),s[a].elements.push(i))}function CVShapeElement(e,t,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,s)}function CVTextElement(e,t,s){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,s)}function CVImageElement(e,t,s){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,s)}function CVSolidElement(e,t,s){this.initElement(e,t,s)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var e;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,e=0;e<15;e+=1){var t=new CanvasContext;this.stack[e]=t}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(e,t,s){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(e,t,s){this.initElement(e,t,s)}function HShapeElement(e,t,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,s),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,s){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,s)}function HCameraElement(e,t,s){this.initFrame(),this.initBaseData(e,t,s),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this),this.py=r(this,e.ks.p.y,1,0,this),this.pz=r(this,e.ks.p.z,1,0,this)):this.p=r(this,e.ks.p,1,0,this),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var a,n=e.ks.or.k.length;for(a=0;a<n;a+=1)e.ks.or.k[a].to=null,e.ks.or.k[a].ti=null}this.or=r(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this),this.ry=r(this,e.ks.ry,0,degToRads,this),this.rz=r(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(e,t,s){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,s)}function HybridRendererBase(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(e,t,s){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var s=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(s),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0].getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var s=assetLoader.getLumaCanvas(this.canvasContext.canvas);s.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(s,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var s={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},r={};if("fl"===e.ty||"st"===e.ty?(r.c=PropertyFactory.getProp(this,e.c,1,255,this),r.c.k||(s.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(r.s=PropertyFactory.getProp(this,e.s,1,null,this),r.e=PropertyFactory.getProp(this,e.e,1,null,this),r.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,e.g,this)),r.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(s.lc=lineCapEnum[e.lc||2],s.lj=lineJoinEnum[e.lj||2],1==e.lj&&(s.ml=e.ml),r.w=PropertyFactory.getProp(this,e.w,0,null,this),r.w.k||(s.wi=r.w.v),e.d){var a=new DashProperty(this,e.d,"canvas",this);r.d=a,r.d.k||(s.da=r.d.dashArray,s.do=r.d.dashoffset[0])}}else s.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(s),r.style=s,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,s=this.stylesList.length;for(t=0;t<s;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,s=e.length;for(t=0;t<s;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,s,r,a){var n,i,o,l,c,d,u=e.length-1,m=[],p=[],h=[].concat(a);for(n=u;n>=0;n-=1){if((l=this.searchProcessedElement(e[n]))?t[n]=s[l-1]:e[n]._shouldRender=r,"fl"===e[n].ty||"st"===e[n].ty||"gf"===e[n].ty||"gs"===e[n].ty)l?t[n].style.closed=!1:t[n]=this.createStyleElement(e[n],h),m.push(t[n].style);else if("gr"===e[n].ty){if(l)for(o=t[n].it.length,i=0;i<o;i+=1)t[n].prevViewData[i]=t[n].it[i];else t[n]=this.createGroupElement(e[n]);this.searchShapes(e[n].it,t[n].it,t[n].prevViewData,r,h)}else"tr"===e[n].ty?(l||(d=this.createTransformElement(e[n]),t[n]=d),h.push(t[n]),this.addTransformToStyleList(t[n])):"sh"===e[n].ty||"rc"===e[n].ty||"el"===e[n].ty||"sr"===e[n].ty?l||(t[n]=this.createShapeElement(e[n])):"tm"===e[n].ty||"rd"===e[n].ty||"pb"===e[n].ty||"zz"===e[n].ty||"op"===e[n].ty?(l?(c=t[n]).closed=!1:((c=ShapeModifiers.getModifier(e[n].ty)).init(this,e[n]),t[n]=c,this.shapeModifiers.push(c)),p.push(c)):"rp"===e[n].ty&&(l?(c=t[n]).closed=!0:(c=ShapeModifiers.getModifier(e[n].ty),t[n]=c,c.init(this,e,n,t),this.shapeModifiers.push(c),r=!1),p.push(c));this.addProcessedElement(e[n],n+1)}for(this.removeTransformFromStyleList(),this.closeStyles(m),u=p.length,n=0;n<u;n+=1)p[n].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,s,r,a,n,i,o,l,c=this.stylesList.length,d=this.globalData.renderer,u=this.globalData.canvasContext;for(e=0;e<c;e+=1)if(("st"!==(o=(l=this.stylesList[e]).type)&&"gs"!==o||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(d.save(),n=l.elements,"st"===o||"gs"===o?(d.ctxStrokeStyle("st"===o?l.co:l.grd),d.ctxLineWidth(l.wi),d.ctxLineCap(l.lc),d.ctxLineJoin(l.lj),d.ctxMiterLimit(l.ml||0)):d.ctxFillStyle("fl"===o?l.co:l.grd),d.ctxOpacity(l.coOp),"st"!==o&&"gs"!==o&&u.beginPath(),d.ctxTransform(l.preTransforms.finalTransform.props),s=n.length,t=0;t<s;t+=1){for("st"!==o&&"gs"!==o||(u.beginPath(),l.da&&(u.setLineDash(l.da),u.lineDashOffset=l.do)),a=(i=n[t].trNodes).length,r=0;r<a;r+=1)"m"===i[r].t?u.moveTo(i[r].p[0],i[r].p[1]):"c"===i[r].t?u.bezierCurveTo(i[r].pts[0],i[r].pts[1],i[r].pts[2],i[r].pts[3],i[r].pts[4],i[r].pts[5]):u.closePath();"st"!==o&&"gs"!==o||(d.ctxStroke(),l.da&&u.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&this.globalData.renderer.ctxFill(l.r),d.restore()}},CVShapeElement.prototype.renderShape=function(e,t,s,r){var a,n;for(n=e,a=t.length-1;a>=0;a-=1)"tr"===t[a].ty?(n=s[a].transform,this.renderShapeTransform(e,n)):"sh"===t[a].ty||"el"===t[a].ty||"rc"===t[a].ty||"sr"===t[a].ty?this.renderPath(t[a],s[a]):"fl"===t[a].ty?this.renderFill(t[a],s[a],n):"st"===t[a].ty?this.renderStroke(t[a],s[a],n):"gf"===t[a].ty||"gs"===t[a].ty?this.renderGradientFill(t[a],s[a],n):"gr"===t[a].ty?this.renderShape(n,t[a].it,s[a].it):t[a].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var s,r,a,n=e.trNodes,i=t.paths,o=i._length;n.length=0;var l=e.transforms.finalTransform;for(a=0;a<o;a+=1){var c=i.shapes[a];if(c&&c.v){for(r=c._length,s=1;s<r;s+=1)1===s&&n.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),n.push({t:"c",pts:l.applyToTriplePoints(c.o[s-1],c.i[s],c.v[s])});1===r&&n.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&r&&(n.push({t:"c",pts:l.applyToTriplePoints(c.o[s-1],c.i[0],c.v[0])}),n.push({t:"z"}))}}e.trNodes=n}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var s,r=t.styledShapes.length;for(s=0;s<r;s+=1)this.renderStyledShape(t.styledShapes[s],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,s){var r=t.style;(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*s.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,s){var r,a=t.style;if(!a.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var n,i=this.globalData.canvasContext,o=t.s.v,l=t.e.v;if(1===e.t)r=i.createLinearGradient(o[0],o[1],l[0],l[1]);else{var c=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),d=Math.atan2(l[1]-o[1],l[0]-o[0]),u=t.h.v;u>=1?u=.99:u<=-1&&(u=-.99);var m=c*u,p=Math.cos(d+t.a.v)*m+o[0],h=Math.sin(d+t.a.v)*m+o[1];r=i.createRadialGradient(p,h,0,o[0],o[1],c)}var x=e.g.p,f=t.g.c,g=1;for(n=0;n<x;n+=1)t.g._hasOpacity&&t.g._collapsable&&(g=t.g.o[2*n+1]),r.addColorStop(f[4*n]/100,"rgba("+f[4*n+1]+","+f[4*n+2]+","+f[4*n+3]+","+g+")");a.grd=r}a.coOp=t.o.v*s.opacity},CVShapeElement.prototype.renderStroke=function(e,t,s){var r=t.style,a=t.d;a&&(a._mdf||this._isFirstFrame)&&(r.da=a.dashArray,r.do=a.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||s._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*s.opacity),(t.w._mdf||this._isFirstFrame)&&(r.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var s=!1;e.sc&&(s=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var r,a,n,i,o,l,c,d,u,m,p,h,x=this.globalData.fontManager.getFontByName(e.f),f=e.l,g=this.mHelper;this.stroke=s,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,a=e.finalText.length;var y=this.data.singleShape,v=.001*e.tr*e.finalSize,E=0,b=0,j=!0,R=0;for(r=0;r<a;r+=1){i=(n=this.globalData.fontManager.getCharData(e.finalText[r],x.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&n.data||{},g.reset(),y&&f[r].n&&(E=-v,b+=e.yOffset,b+=j?1:0,j=!1),u=(c=i.shapes?i.shapes[0].it:[]).length,g.scale(e.finalSize/100,e.finalSize/100),y&&this.applyTextPropertiesToMatrix(e,g,f[r].line,E,b),p=createSizedArray(u-1);var _=0;for(d=0;d<u;d+=1)if("sh"===c[d].ty){for(l=c[d].ks.k.i.length,m=c[d].ks.k,h=[],o=1;o<l;o+=1)1===o&&h.push(g.applyToX(m.v[0][0],m.v[0][1],0),g.applyToY(m.v[0][0],m.v[0][1],0)),h.push(g.applyToX(m.o[o-1][0],m.o[o-1][1],0),g.applyToY(m.o[o-1][0],m.o[o-1][1],0),g.applyToX(m.i[o][0],m.i[o][1],0),g.applyToY(m.i[o][0],m.i[o][1],0),g.applyToX(m.v[o][0],m.v[o][1],0),g.applyToY(m.v[o][0],m.v[o][1],0));h.push(g.applyToX(m.o[o-1][0],m.o[o-1][1],0),g.applyToY(m.o[o-1][0],m.o[o-1][1],0),g.applyToX(m.i[0][0],m.i[0][1],0),g.applyToY(m.i[0][0],m.i[0][1],0),g.applyToX(m.v[0][0],m.v[0][1],0),g.applyToY(m.v[0][0],m.v[0][1],0)),p[_]=h,_+=1}y&&(E+=f[r].l,E+=v),this.textSpans[R]?this.textSpans[R].elem=p:this.textSpans[R]={elem:p},R+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,s,r,a,n;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var i,o=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;t=l.length;var c,d,u=null,m=null,p=null,h=this.globalData.renderer;for(e=0;e<t;e+=1)if(!l[e].n){if((i=o[e])&&(h.save(),h.ctxTransform(i.p),h.ctxOpacity(i.o)),this.fill){for(i&&i.fc?u!==i.fc&&(h.ctxFillStyle(i.fc),u=i.fc):u!==this.values.fill&&(u=this.values.fill,h.ctxFillStyle(this.values.fill)),r=(c=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<r;s+=1)for(n=(d=c[s]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),a=2;a<n;a+=6)this.globalData.canvasContext.bezierCurveTo(d[a],d[a+1],d[a+2],d[a+3],d[a+4],d[a+5]);this.globalData.canvasContext.closePath(),h.ctxFill()}if(this.stroke){for(i&&i.sw?p!==i.sw&&(p=i.sw,h.ctxLineWidth(i.sw)):p!==this.values.sWidth&&(p=this.values.sWidth,h.ctxLineWidth(this.values.sWidth)),i&&i.sc?m!==i.sc&&(m=i.sc,h.ctxStrokeStyle(i.sc)):m!==this.values.stroke&&(m=this.values.stroke,h.ctxStrokeStyle(this.values.stroke)),r=(c=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<r;s+=1)for(n=(d=c[s]).length,this.globalData.canvasContext.moveTo(d[0],d[1]),a=2;a<n;a+=6)this.globalData.canvasContext.bezierCurveTo(d[a],d[a+1],d[a+2],d[a+3],d[a+4],d[a+5]);this.globalData.canvasContext.closePath(),h.ctxStroke()}i&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,s,r=e.getContext("2d"),a=this.img.width,n=this.img.height,i=a/n,o=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;i>o&&"xMidYMid slice"===l||i<o&&"xMidYMid slice"!==l?t=(s=n)*o:s=(t=a)/o,r.drawImage(this.img,(a-t)/2,(n-s)/2,t,s,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){1===e[0]&&0===e[1]&&0===e[4]&&1===e[5]&&0===e[12]&&0===e[13]||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,t,s,r){this.canvasContext.fillRect(e,t,s,r)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){this.renderConfig.clearCanvas?(e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var s="0px 0px 0px";t.transformOrigin=s,t.mozTransformOrigin=s,t.webkitTransformOrigin=s,t["-webkit-transform"]=s,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,t){var s,r,a,n;if(this.reset(),e?(s=e,r=t,this.canvasContext.canvas.width=s,this.canvasContext.canvas.height=r):(this.animationItem.wrapper&&this.animationItem.container?(s=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight):(s=this.canvasContext.canvas.width,r=this.canvasContext.canvas.height),this.canvasContext.canvas.width=s*this.renderConfig.dpr,this.canvasContext.canvas.height=r*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" "),o=i[1]||"meet",l=i[0]||"xMidYMid",c=l.substr(0,4),d=l.substr(4);a=s/r,(n=this.transformCanvas.w/this.transformCanvas.h)>a&&"meet"===o||n<a&&"slice"===o?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===c&&(n<a&&"meet"===o||n>a&&"slice"===o)?(s-this.transformCanvas.w*(r/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===c&&(n<a&&"meet"===o||n>a&&"slice"===o)?(s-this.transformCanvas.w*(r/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===d&&(n>a&&"meet"===o||n<a&&"slice"===o)?(r-this.transformCanvas.h*(s/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===d&&(n>a&&"meet"===o||n<a&&"slice"===o)?(r-this.transformCanvas.h*(s/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var s;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var r=this.layers.length;for(this.completeLayers||this.checkLayers(e),s=r-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].prepareFrame(e-this.layers[s].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),s=r-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var s=this.createItem(this.layers[e],this,this.globalData);t[e]=s,s.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=0;for(t=this._length;t<e;t+=1)this.stack[t]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var t,s=this.stack[this.cArrPos],r=s.transform,a=this.cTr.props;for(t=0;t<16;t+=1)a[t]=r[t];if(e){this.nativeContext.restore();var n=this.stack[this.cArrPos+1];this.appliedFillStyle=n.fillStyle,this.appliedStrokeStyle=n.strokeStyle,this.appliedLineWidth=n.lineWidth,this.appliedLineCap=n.lineCap,this.appliedLineJoin=n.lineJoin,this.appliedMiterLimit=n.miterLimit}this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),(e||-1!==s.opacity&&this.currentOpacity!==s.opacity)&&(this.nativeContext.globalAlpha=s.opacity,this.currentOpacity=s.opacity),this.currentFillStyle=s.fillStyle,this.currentStrokeStyle=s.strokeStyle,this.currentLineWidth=s.lineWidth,this.currentLineCap=s.lineCap,this.currentLineJoin=s.lineJoin,this.currentMiterLimit=s.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var s,r=this.stack[this.cArrPos];for(s=0;s<16;s+=1)r.transform[s]=t[s];this.cArrPos+=1;var a=this.stack[this.cArrPos];a.opacity=r.opacity,a.fillStyle=r.fillStyle,a.strokeStyle=r.strokeStyle,a.lineWidth=r.lineWidth,a.lineCap=r.lineCap,a.lineJoin=r.lineJoin,a.miterLimit=r.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var s=t.props;this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13])},CVContextData.prototype.opacity=function(e){var t=this.stack[this.cArrPos].opacity;t*=e<0?0:e,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,t,s,r){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,t,s,r)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)t=e[s].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var s,r,a,n,i,o=e.sh.v,l=e.transformers,c=o._length;if(!(c<=1)){for(s=0;s<c-1;s+=1)r=this.getTransformedPoint(l,o.v[s]),a=this.getTransformedPoint(l,o.o[s]),n=this.getTransformedPoint(l,o.i[s+1]),i=this.getTransformedPoint(l,o.v[s+1]),this.checkBounds(r,a,n,i,t);o.c&&(r=this.getTransformedPoint(l,o.v[s]),a=this.getTransformedPoint(l,o.o[s]),n=this.getTransformedPoint(l,o.i[0]),i=this.getTransformedPoint(l,o.v[0]),this.checkBounds(r,a,n,i,t))}},HShapeElement.prototype.checkBounds=function(e,t,s,r,a){this.getBoundsOfCurve(e,t,s,r);var n=this.shapeBoundingBox;a.x=bmMin(n.left,a.x),a.xMax=bmMax(n.right,a.xMax),a.y=bmMin(n.top,a.y),a.yMax=bmMax(n.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,s,r){for(var a,n,i,o,l,c,d,u=[[e[0],r[0]],[e[1],r[1]]],m=0;m<2;++m)n=6*e[m]-12*t[m]+6*s[m],a=-3*e[m]+9*t[m]-9*s[m]+3*r[m],i=3*t[m]-3*e[m],n|=0,i|=0,0==(a|=0)&&0===n||(0===a?(o=-i/n)>0&&o<1&&u[m].push(this.calculateF(o,e,t,s,r,m)):(l=n*n-4*i*a)>=0&&((c=(-n+bmSqrt(l))/(2*a))>0&&c<1&&u[m].push(this.calculateF(c,e,t,s,r,m)),(d=(-n-bmSqrt(l))/(2*a))>0&&d<1&&u[m].push(this.calculateF(d,e,t,s,r,m))));this.shapeBoundingBox.left=bmMin.apply(null,u[0]),this.shapeBoundingBox.top=bmMin.apply(null,u[1]),this.shapeBoundingBox.right=bmMax.apply(null,u[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,u[1])},HShapeElement.prototype.calculateF=function(e,t,s,r,a,n){return bmPow(1-e,3)*t[n]+3*bmPow(1-e,2)*e*s[n]+3*(1-e)*bmPow(e,2)*r[n]+bmPow(e,3)*a[n]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var s,r=e.length;for(s=0;s<r;s+=1)e[s]&&e[s].sh?this.calculateShapeBoundingBox(e[s],t):e[s]&&e[s].it?this.calculateBoundingBox(e[s].it,t):e[s]&&e[s].style&&e[s].w&&this.expandStrokeBoundingBox(e[s].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,t){var s=0;if(e.keyframes){for(var r=0;r<e.keyframes.length;r+=1){var a=e.keyframes[r].s;a>s&&(s=a)}s*=e.mult}else s=e.v*e.mult;t.x-=s,t.xMax+=s,t.y-=s,t.yMax+=s},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var s=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),s=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),s=!0),s||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=a,r.webkitTransform=a}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,s=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=s,t.color=s,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var r,a,n=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",n.fClass)this.innerElem.className=n.fClass;else{t.fontFamily=n.fFamily;var i=e.fWeight,o=e.fStyle;t.fontStyle=o,t.fontWeight=i}var l,c,d,u=e.l;a=u.length;var m,p=this.mHelper,h="",x=0;for(r=0;r<a;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[x]?l=this.textPaths[x]:((l=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),l.setAttribute("stroke-linejoin",lineJoinEnum[2]),l.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[x]?d=(c=this.textSpans[x]).children[0]:((c=createTag("div")).style.lineHeight=0,(d=createNS("svg")).appendChild(l),styleDiv(c)))):this.isMasked?l=this.textPaths[x]?this.textPaths[x]:createNS("text"):this.textSpans[x]?(c=this.textSpans[x],l=this.textPaths[x]):(styleDiv(c=createTag("span")),styleDiv(l=createTag("span")),c.appendChild(l)),this.globalData.fontManager.chars){var f,g=this.globalData.fontManager.getCharData(e.finalText[r],n.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(f=g?g.data:null,p.reset(),f&&f.shapes&&f.shapes.length&&(m=f.shapes[0].it,p.scale(e.finalSize/100,e.finalSize/100),h=this.createPathShape(p,m),l.setAttribute("d",h)),this.isMasked)this.innerElem.appendChild(l);else{if(this.innerElem.appendChild(c),f&&f.shapes){document.body.appendChild(d);var y=d.getBBox();d.setAttribute("width",y.width+2),d.setAttribute("height",y.height+2),d.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2));var v=d.style,E="translate("+(y.x-1)+"px,"+(y.y-1)+"px)";v.transform=E,v.webkitTransform=E,u[r].yOffset=y.y-1}else d.setAttribute("width",1),d.setAttribute("height",1);c.appendChild(d)}}else if(l.textContent=u[r].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(l);else{this.innerElem.appendChild(c);var b=l.style,j="translate3d(0,"+-e.finalSize/1.2+"px,0)";b.transform=j,b.webkitTransform=j}this.isMasked?this.textSpans[x]=l:this.textSpans[x]=c,this.textSpans[x].style.display="block",this.textPaths[x]=l,x+=1}for(;x<this.textSpans.length;)this.textSpans[x].style.display="none",x+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var s,r,a,n,i,o=0,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(r=c.length,s=0;s<r;s+=1)c[s].n?o+=1:(n=this.textSpans[s],i=this.textPaths[s],a=l[o],o+=1,a._mdf.m&&(this.isMasked?n.setAttribute("transform",a.m):(n.style.webkitTransform=a.m,n.style.transform=a.m)),n.style.opacity=a.o,a.sw&&a._mdf.sw&&i.setAttribute("stroke-width",a.sw),a.sc&&a._mdf.sc&&i.setAttribute("stroke",a.sc),a.fc&&a._mdf.fc&&(i.setAttribute("fill",a.fc),i.style.color=a.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var d=this.innerElem.getBBox();if(this.currentBBox.w!==d.width&&(this.currentBBox.w=d.width,this.svgElement.setAttribute("width",d.width)),this.currentBBox.h!==d.height&&(this.currentBBox.h=d.height,this.svgElement.setAttribute("height",d.height)),this.currentBBox.w!==d.width+2||this.currentBBox.h!==d.height+2||this.currentBBox.x!==d.x-1||this.currentBBox.y!==d.y-1){this.currentBBox.w=d.width+2,this.currentBBox.h=d.height+2,this.currentBBox.x=d.x-1,this.currentBBox.y=d.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var u="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=u,e.webkitTransform=u}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,s,r,a=this.comp.threeDElements.length;for(e=0;e<a;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){s=t.perspectiveElem.style,r=t.container.style;var n=this.pe.v+"px",i="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";s.perspective=n,s.webkitPerspective=n,r.transformOrigin=i,r.mozTransformOrigin=i,r.webkitTransformOrigin=i,s.transform=o,s.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,s=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)s=this.hierarchy[e].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var r=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;a=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var n=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),i=[a[0]/n,a[1]/n,a[2]/n],o=Math.sqrt(i[2]*i[2]+i[0]*i[0]),l=Math.atan2(i[1],o),c=Math.atan2(i[0],-i[2]);this.mat.rotateY(c).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var d=!this._prevMat.equals(this.mat);if((d||this.pe._mdf)&&this.comp.threeDElements){var u,m,p;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)if("3d"===(u=this.comp.threeDElements[e]).type){if(d){var h=this.mat.toCSS();(p=u.container.style).transform=h,p.webkitTransform=h}this.pe._mdf&&((m=u.perspectiveElem.style).perspective=this.pe.v+"px",m.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(e,t){var s=e.getBaseElement();if(s){var r=this.layers[t];if(r.ddd&&this.supports3d)this.addTo3dContainer(s,t);else if(this.threeDElements)this.addTo3dContainer(s,t);else{for(var a,n,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement&&(n=this.elements[i],a=(this.layers[i].ddd?this.getThreeDContainerByPos(i):n.getBaseElement())||a),i+=1;a?r.ddd&&this.supports3d||this.layerElement.insertBefore(s,a):r.ddd&&this.supports3d||this.layerElement.appendChild(s)}}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var t=0,s=this.threeDElements.length;t<s;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,t){var s,r,a=createTag("div");styleDiv(a);var n=createTag("div");if(styleDiv(n),"3d"===t){(s=a.style).width=this.globalData.compSize.w+"px",s.height=this.globalData.compSize.h+"px";var i="50% 50%";s.webkitTransformOrigin=i,s.mozTransformOrigin=i,s.transformOrigin=i;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(r=n.style).transform=o,r.webkitTransform=o}a.appendChild(n);var l={container:n,perspectiveElem:a,startPos:e,endPos:e,type:t};return this.threeDElements.push(l),l},HybridRendererBase.prototype.build3dContainers=function(){var e,t,s=this.layers.length,r="";for(e=0;e<s;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==r&&(r="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==r&&(r="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(s=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,t){for(var s=0,r=this.threeDElements.length;s<r;){if(t<=this.threeDElements[s].endPos){for(var a,n=this.threeDElements[s].startPos;n<t;)this.elements[n]&&this.elements[n].getBaseElement&&(a=this.elements[n].getBaseElement()),n+=1;a?this.threeDElements[s].container.insertBefore(e,a):this.threeDElements[s].container.appendChild(e);break}s+=1}},HybridRendererBase.prototype.configAnimation=function(e){var t=createTag("div"),s=this.animationItem.wrapper,r=t.style;r.width=e.w+"px",r.height=e.h+"px",this.resizerElem=t,styleDiv(t),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),s.appendChild(t),r.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var n=createNS("defs");a.appendChild(n),this.data=e,this.setupGlobalData(e,a),this.globalData.defs=n,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e,t,s,r,a=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight,i=a/n;this.globalData.compSize.w/this.globalData.compSize.h>i?(e=a/this.globalData.compSize.w,t=a/this.globalData.compSize.w,s=0,r=(n-this.globalData.compSize.h*(a/this.globalData.compSize.w))/2):(e=n/this.globalData.compSize.h,t=n/this.globalData.compSize.h,s=(a-this.globalData.compSize.w*(n/this.globalData.compSize.h))/2,r=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+s+","+r+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,s=this.globalData.compSize.h,r=this.threeDElements.length;for(e=0;e<r;e+=1){var a=this.threeDElements[e].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(s,2))+"px",a.perspective=a.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var t,s=e.length,r=createTag("div");for(t=0;t<s;t+=1)if(e[t].xt){var a=this.createComp(e[t],r,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var s,r=0;r<t;)this.elements[r]&&this.elements[r].getBaseElement&&(s=this.elements[r].getBaseElement()),r+=1;s?this.layerElement.insertBefore(e,s):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(){return function(e){function t(t){for(var s=0,r=e.layers.length;s<r;){if(e.layers[s].nm===t||e.layers[s].ind===t)return e.elements[s].layerInterface;s+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t}}();function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function seedRandom(e,t){var s=this,r=256,a="random",n=t.pow(r,6),i=t.pow(2,52),o=2*i,l=255;function c(e){var t,s=e.length,a=this,n=0,i=a.i=a.j=0,o=a.S=[];for(s||(e=[s++]);n<r;)o[n]=n++;for(n=0;n<r;n++)o[n]=o[i=l&i+e[n%s]+(t=o[n])],o[i]=t;a.g=function(e){for(var t,s=0,n=a.i,i=a.j,o=a.S;e--;)t=o[n=l&n+1],s=s*r+o[l&(o[n]=o[i=l&i+t])+(o[i]=t)];return a.i=n,a.j=i,s}}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function u(e,t){var s,r=[],a=_typeof$2(e);if(t&&"object"==a)for(s in e)try{r.push(u(e[s],t-1))}catch(n){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var s,r=e+"",a=0;a<r.length;)t[l&a]=l&(s^=19*t[l&a])+r.charCodeAt(a++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}t["seed"+a]=function(l,h,x){var f=[],g=m(u((h=!0===h?{entropy:!0}:h||{}).entropy?[l,p(e)]:null===l?function(){try{var t=new Uint8Array(r);return(s.crypto||s.msCrypto).getRandomValues(t),p(t)}catch(i){var a=s.navigator,n=a&&a.plugins;return[+new Date,s,n,s.screen,p(e)]}}():l,3),f),y=new c(f),v=function(){for(var e=y.g(6),t=n,s=0;e<i;)e=(e+s)*r,t*=r,s=y.g(1);for(;e>=o;)e/=2,t/=2,s>>>=1;return(e+s)/t};return v.int32=function(){return 0|y.g(4)},v.quick=function(){return y.g(4)/4294967296},v.double=v,m(p(y.S),e),(h.pass||x||function(e,s,r,n){return n&&(n.S&&d(n,y),e.state=function(){return d(y,{})}),r?(t[a]=e,s):e})(v,g,"global"in h?h.global:this==t,h.state)},m(t.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||t instanceof Number||"boolean"===e||"string"===e}function $bm_neg(e){var t=_typeof$1(e);if("number"===t||e instanceof Number||"boolean"===t)return-e;if($bm_isInstanceOfArray(e)){var s,r=e.length,a=[];for(s=0;s<r;s+=1)a[s]=-e[s];return a}return e.propType?e.v:-e}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var s=_typeof$1(e),r=_typeof$1(t);if(isNumerable(s,e)&&isNumerable(r,t)||"string"===s||"string"===r)return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]+=t,e;if(isNumerable(s,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var a=0,n=e.length,i=t.length,o=[];a<n||a<i;)("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a]instanceof Number)?o[a]=e[a]+t[a]:o[a]=void 0===t[a]?e[a]:e[a]||t[a],a+=1;return o}return 0}var add=sum;function sub(e,t){var s=_typeof$1(e),r=_typeof$1(t);if(isNumerable(s,e)&&isNumerable(r,t))return"string"===s&&(e=parseInt(e,10)),"string"===r&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]-=t,e;if(isNumerable(s,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var a=0,n=e.length,i=t.length,o=[];a<n||a<i;)("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a]instanceof Number)?o[a]=e[a]-t[a]:o[a]=void 0===t[a]?e[a]:e[a]||t[a],a+=1;return o}return 0}function mul(e,t){var s,r,a,n=_typeof$1(e),i=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(i,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t)){for(a=e.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e[r]*t;return s}if(isNumerable(n,e)&&$bm_isInstanceOfArray(t)){for(a=t.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e*t[r];return s}return 0}function div(e,t){var s,r,a,n=_typeof$1(e),i=_typeof$1(t);if(isNumerable(n,e)&&isNumerable(i,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t)){for(a=e.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e[r]/t;return s}if(isNumerable(n,e)&&$bm_isInstanceOfArray(t)){for(a=t.length,s=createTypedArray("float32",a),r=0;r<a;r+=1)s[r]=e/t[r];return s}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,s){if(t>s){var r=s;s=t,t=r}return Math.min(Math.max(e,t),s)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);var s;t||(t=helperLengthArray);var r=Math.min(e.length,t.length),a=0;for(s=0;s<r;s+=1)a+=Math.pow(t[s]-e[s],2);return Math.sqrt(a)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,s,r=e[0],a=e[1],n=e[2],i=Math.max(r,a,n),o=Math.min(r,a,n),l=(i+o)/2;if(i===o)t=0,s=0;else{var c=i-o;switch(s=l>.5?c/(2-i-o):c/(i+o),i){case r:t=(a-n)/c+(a<n?6:0);break;case a:t=(n-r)/c+2;break;case n:t=(r-a)/c+4}t/=6}return[t,s,l,e[3]]}function hue2rgb(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function hslToRgb(e){var t,s,r,a=e[0],n=e[1],i=e[2];if(0===n)t=i,r=i,s=i;else{var o=i<.5?i*(1+n):i+n-i*n,l=2*i-o;t=hue2rgb(l,o,a+1/3),s=hue2rgb(l,o,a),r=hue2rgb(l,o,a-1/3)}return[t,s,r,e[3]]}function linear(e,t,s,r,a){if(void 0!==r&&void 0!==a||(r=t,a=s,t=0,s=1),s<t){var n=s;s=t,t=n}if(e<=t)return r;if(e>=s)return a;var i,o=s===t?0:(e-t)/(s-t);if(!r.length)return r+(a-r)*o;var l=r.length,c=createTypedArray("float32",l);for(i=0;i<l;i+=1)c[i]=r[i]+(a[i]-r[i])*o;return c}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var s,r=t.length;e||(e=createTypedArray("float32",r));var a=createTypedArray("float32",r),n=BMMath.random();for(s=0;s<r;s+=1)a[s]=e[s]+n*(t[s]-e[s]);return a}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,s,r){var a,n=e.length,i=shapePool.newElement();i.setPathData(!!r,n);var o,l,c=[0,0];for(a=0;a<n;a+=1)o=t&&t[a]?t[a]:c,l=s&&s[a]?s[a]:c,i.setTripleAt(e[a][0],e[a][1],l[0]+e[a][0],l[1]+e[a][1],o[0]+e[a][0],o[1]+e[a][1],a,!0);return i}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){var s,r,a=this.pv.length?this.pv.length:1,n=createTypedArray("float32",a),i=Math.floor(5*time);for(s=0,r=0;s<i;){for(r=0;r<a;r+=1)n[r]+=-t+2*t*BMMath.random();s+=1}var o=5*time,l=o-Math.floor(o),c=createTypedArray("float32",a);if(a>1){for(r=0;r<a;r+=1)c[r]=this.pv[r]+n[r]+(-t+2*t*BMMath.random())*l;return c}return this.pv+n[0]+(-t+2*t*BMMath.random())*l}.bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var s=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],r=Math.atan2(s[0],Math.sqrt(s[1]*s[1]+s[2]*s[2]))/degToRads;return[-Math.atan2(s[1],s[2])/degToRads,r,0]}function easeOut(e,t,s,r,a){return applyEase(easeOutBez,e,t,s,r,a)}function easeIn(e,t,s,r,a){return applyEase(easeInBez,e,t,s,r,a)}function ease(e,t,s,r,a){return applyEase(easeInOutBez,e,t,s,r,a)}function applyEase(e,t,s,r,a,n){void 0===a?(a=s,n=r):t=(t-s)/(r-s),t>1?t=1:t<0&&(t=0);var i=e(t);if($bm_isInstanceOfArray(a)){var o,l=a.length,c=createTypedArray("float32",l);for(o=0;o<l;o+=1)c[o]=(n[o]-a[o])*i+a[o];return c}return(n-a)*i+a}function nearestKey(e){var t,s,r,a=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(s=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)s=1,r=data.k[0].t;else{for(t=0;t<a-1;t+=1){if(e===data.k[t].t){s=t+1,r=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(s=t+2,r=data.k[t+1].t):(s=t+1,r=data.k[t].t);break}}-1===s&&(s=t+1,r=data.k[t].t)}else s=0,r=0;var n={};return n.index=s,n.time=r/elem.comp.globalData.frameRate,n}function key(e){var t,s,r;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(r=a.length,s=0;s<r;s+=1)t[s]=a[s],t.value[s]=a[s];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={initExpressions:function(e){var t=0,s=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var e,t=s.length;for(e=0;e<t;e+=1)s[e].release();s.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===s.indexOf(e)&&s.push(e)}}};return e.resetFrame=ExpressionManager.resetFrame,e}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var s,r=createSizedArray(t.viewData.length),a=t.viewData.length;for(s=0;s<a;s+=1)r[s]=new e(t.viewData[s],t.masksProperties[s]);return function(e){for(s=0;s<a;){if(t.masksProperties[s].nm===e)return r[s];s+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function s(e,t,s){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(r){if(!e.numKeys)return 0;var a="";a="s"in t.keyframes[r-1]?t.keyframes[r-1].s:"e"in t.keyframes[r-2]?t.keyframes[r-2].e:t.keyframes[r-2].s;var n="unidimensional"===s?new Number(a):Object.assign({},a);return n.time=t.keyframes[r-1].t/t.elem.comp.globalData.frameRate,n.value="unidimensional"===s?a[0]:a,n},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function r(){return e}return function(a){return a?"unidimensional"===a.propType?function(t){t&&"pv"in t||(t=e);var r=1/t.mult,a=t.pv*r,n=new Number(a);return n.value=a,s(n,t,"unidimensional"),function(){return t.k&&t.getValue(),a=t.v*r,n.value!==a&&((n=new Number(a)).value=a,n[0]=a,s(n,t,"unidimensional")),n}}(a):function(e){e&&"pv"in e||(e=t);var r=1/e.mult,a=e.data&&e.data.l||e.pv.length,n=createTypedArray("float32",a),i=createTypedArray("float32",a);return n.value=i,s(n,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<a;t+=1)i[t]=e.v[t]*r,n[t]=i[t];return n}}(a):r}}(),TransformExpressionInterface=function(){return function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var s,r,a,n;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?n=ExpressionPropertyInterface(e.p):(s=ExpressionPropertyInterface(e.px),r=ExpressionPropertyInterface(e.py),e.pz&&(a=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?n():[s(),r(),a?a():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t}}(),LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var s=this.getMatrix(t);return s.props[12]=0,s.props[13]=0,s.props[14]=0,this.applyPoint(s,e)}function s(e,t){var s=this.getMatrix(t);return this.applyPoint(s,e)}function r(e,t){var s=this.getMatrix(t);return s.props[12]=0,s.props[13]=0,s.props[14]=0,this.invertPoint(s,e)}function a(e,t){var s=this.getMatrix(t);return this.invertPoint(s,e)}function n(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var s,r=this._elem.hierarchy.length;for(s=0;s<r;s+=1)this._elem.hierarchy[s].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function i(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var s,r=this._elem.hierarchy.length;for(s=0;s<r;s+=1)this._elem.hierarchy[s].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function o(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var s,r=this._elem.hierarchy.length;for(s=0;s<r;s+=1)this._elem.hierarchy[s].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function l(){return[1,1,1,1]}return function(c){var d;function u(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return u.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return d;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return u.effect;case"ADBE Text Properties":return u.textInterface;default:return null}}u.getMatrix=e,u.invertPoint=i,u.applyPoint=n,u.toWorld=s,u.toWorldVec=t,u.fromWorld=a,u.fromWorldVec=r,u.toComp=s,u.fromComp=o,u.sampleImage=l,u.sourceRectAtTime=c.sourceRectAtTime.bind(c),u._elem=c;var m=getDescriptor(d=TransformExpressionInterface(c.finalTransform.mProp),"anchorPoint");return Object.defineProperties(u,{hasParent:{get:function(){return c.hierarchy.length}},parent:{get:function(){return c.hierarchy[0].layerInterface}},rotation:getDescriptor(d,"rotation"),scale:getDescriptor(d,"scale"),position:getDescriptor(d,"position"),opacity:getDescriptor(d,"opacity"),anchorPoint:m,anchor_point:m,transform:{get:function(){return d}},active:{get:function(){return c.isInRange}}}),u.startTime=c.data.st,u.index=c.data.ind,u.source=c.data.refId,u.height=0===c.data.ty?c.data.h:100,u.width=0===c.data.ty?c.data.w:100,u.inPoint=c.data.ip/c.comp.globalData.frameRate,u.outPoint=c.data.op/c.comp.globalData.frameRate,u._name=c.data.nm,u.registerMaskInterface=function(e){u.mask=new MaskManagerInterface(e,c)},u.registerEffectsInterface=function(e){u.effect=e},u}}(),propertyGroupFactory=function(){return function(e,t){return function(s){return(s=void 0===s?1:s)<=0?e:t(s-1)}}}(),PropertyInterface=function(){return function(e,t){var s={_name:e};return function(e){return(e=void 0===e?1:e)<=0?s:t(e-1)}}}(),EffectsExpressionInterface=function(){function e(s,r,a,n){function i(e){for(var t=s.ef,r=0,a=t.length;r<a;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?c[r]:c[r]();r+=1}throw new Error}var o,l=propertyGroupFactory(i,a),c=[],d=s.ef.length;for(o=0;o<d;o+=1)5===s.ef[o].ty?c.push(e(s.ef[o],r.effectElements[o],r.effectElements[o].propertyGroup,n)):c.push(t(r.effectElements[o],s.ef[o].ty,n,l));return"ADBE Color Control"===s.mn&&Object.defineProperty(i,"color",{get:function(){return c[0]()}}),Object.defineProperties(i,{numProperties:{get:function(){return s.np}},_name:{value:s.nm},propertyGroup:{value:l}}),i.enabled=0!==s.en,i.active=i.enabled,i}function t(e,t,s,r){var a=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===t?s.comp.compInterface(e.p.v):a()}}return{createEffectsInterface:function(t,s){if(t.effectsManager){var r,a=[],n=t.data.ef,i=t.effectsManager.effectElements.length;for(r=0;r<i;r+=1)a.push(e(n[r],t.effectsManager.effectElements[r],s,t));var o=t.data.ef||[],l=function(e){for(r=0,i=o.length;r<i;){if(e===o[r].nm||e===o[r].mn||e===o[r].ix)return a[r];r+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return o.length}}),l}return null}}}(),ShapePathInterface=function(){return function(e,t,s){var r=t.sh;function a(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?a.path:null}var n=propertyGroupFactory(a,s);return r.setGroupProperty(PropertyInterface("Path",n)),Object.defineProperties(a,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:s}}),a}}(),ShapeExpressionInterface=function(){function e(e,o,p){var h,x=[],f=e?e.length:0;for(h=0;h<f;h+=1)"gr"===e[h].ty?x.push(t(e[h],o[h],p)):"fl"===e[h].ty?x.push(s(e[h],o[h],p)):"st"===e[h].ty?x.push(n(e[h],o[h],p)):"tm"===e[h].ty?x.push(i(e[h],o[h],p)):"tr"===e[h].ty||("el"===e[h].ty?x.push(l(e[h],o[h],p)):"sr"===e[h].ty?x.push(c(e[h],o[h],p)):"sh"===e[h].ty?x.push(ShapePathInterface(e[h],o[h],p)):"rc"===e[h].ty?x.push(d(e[h],o[h],p)):"rd"===e[h].ty?x.push(u(e[h],o[h],p)):"rp"===e[h].ty?x.push(m(e[h],o[h],p)):"gf"===e[h].ty?x.push(r(e[h],o[h],p)):x.push(a(e[h],o[h])));return x}function t(t,s,r){var a=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return a.content;default:return a.transform}};a.propertyGroup=propertyGroupFactory(a,r);var n=function(t,s,r){var a,n=function(e){for(var t=0,s=a.length;t<s;){if(a[t]._name===e||a[t].mn===e||a[t].propertyIndex===e||a[t].ix===e||a[t].ind===e)return a[t];t+=1}return"number"==typeof e?a[e-1]:null};n.propertyGroup=propertyGroupFactory(n,r),a=e(t.it,s.it,n.propertyGroup),n.numProperties=a.length;var i=o(t.it[t.it.length-1],s.it[s.it.length-1],n.propertyGroup);return n.transform=i,n.propertyIndex=t.cix,n._name=t.nm,n}(t,s,a.propertyGroup),i=o(t.it[t.it.length-1],s.it[s.it.length-1],a.propertyGroup);return a.content=n,a.transform=i,Object.defineProperty(a,"_name",{get:function(){return t.nm}}),a.numProperties=t.np,a.propertyIndex=t.ix,a.nm=t.nm,a.mn=t.mn,a}function s(e,t,s){function r(e){return"Color"===e||"color"===e?r.color:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",s)),t.o.setGroupProperty(PropertyInterface("Opacity",s)),r}function r(e,t,s){function r(e){return"Start Point"===e||"start point"===e?r.startPoint:"End Point"===e||"end point"===e?r.endPoint:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",s)),t.e.setGroupProperty(PropertyInterface("End Point",s)),t.o.setGroupProperty(PropertyInterface("Opacity",s)),r}function a(){return function(){return null}}function n(e,t,s){var r,a=propertyGroupFactory(c,s),n=propertyGroupFactory(l,a);function i(s){Object.defineProperty(l,e.d[s].nm,{get:ExpressionPropertyInterface(t.d.dataProps[s].p)})}var o=e.d?e.d.length:0,l={};for(r=0;r<o;r+=1)i(r),t.d.dataProps[r].p.setGroupProperty(n);function c(e){return"Color"===e||"color"===e?c.color:"Opacity"===e||"opacity"===e?c.opacity:"Stroke Width"===e||"stroke width"===e?c.strokeWidth:null}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return l}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",a)),t.o.setGroupProperty(PropertyInterface("Opacity",a)),t.w.setGroupProperty(PropertyInterface("Stroke Width",a)),c}function i(e,t,s){function r(t){return t===e.e.ix||"End"===t||"end"===t?r.end:t===e.s.ix?r.start:t===e.o.ix?r.offset:null}var a=propertyGroupFactory(r,s);return r.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",a)),t.e.setGroupProperty(PropertyInterface("End",a)),t.o.setGroupProperty(PropertyInterface("Offset",a)),r.propertyIndex=e.ix,r.propertyGroup=s,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),r.mn=e.mn,r}function o(e,t,s){function r(t){return e.a.ix===t||"Anchor Point"===t?r.anchorPoint:e.o.ix===t||"Opacity"===t?r.opacity:e.p.ix===t||"Position"===t?r.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?r.rotation:e.s.ix===t||"Scale"===t?r.scale:e.sk&&e.sk.ix===t||"Skew"===t?r.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?r.skewAxis:null}var a=propertyGroupFactory(r,s);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",a)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",a)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",a)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",a)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",a)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",a)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",a))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",a)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),r.ty="tr",r.mn=e.mn,r.propertyGroup=s,r}function l(e,t,s){function r(t){return e.p.ix===t?r.position:e.s.ix===t?r.size:null}var a=propertyGroupFactory(r,s);r.propertyIndex=e.ix;var n="tm"===t.sh.ty?t.sh.prop:t.sh;return n.s.setGroupProperty(PropertyInterface("Size",a)),n.p.setGroupProperty(PropertyInterface("Position",a)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(n.s)},position:{get:ExpressionPropertyInterface(n.p)},_name:{value:e.nm}}),r.mn=e.mn,r}function c(e,t,s){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.rotation:e.pt.ix===t?r.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?r.outerRadius:e.os.ix===t?r.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?r.innerRoundness:null:r.innerRadius}var a=propertyGroupFactory(r,s),n="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,n.or.setGroupProperty(PropertyInterface("Outer Radius",a)),n.os.setGroupProperty(PropertyInterface("Outer Roundness",a)),n.pt.setGroupProperty(PropertyInterface("Points",a)),n.p.setGroupProperty(PropertyInterface("Position",a)),n.r.setGroupProperty(PropertyInterface("Rotation",a)),e.ir&&(n.ir.setGroupProperty(PropertyInterface("Inner Radius",a)),n.is.setGroupProperty(PropertyInterface("Inner Roundness",a))),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(n.p)},rotation:{get:ExpressionPropertyInterface(n.r)},points:{get:ExpressionPropertyInterface(n.pt)},outerRadius:{get:ExpressionPropertyInterface(n.or)},outerRoundness:{get:ExpressionPropertyInterface(n.os)},innerRadius:{get:ExpressionPropertyInterface(n.ir)},innerRoundness:{get:ExpressionPropertyInterface(n.is)},_name:{value:e.nm}}),r.mn=e.mn,r}function d(e,t,s){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?r.size:null}var a=propertyGroupFactory(r,s),n="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,n.p.setGroupProperty(PropertyInterface("Position",a)),n.s.setGroupProperty(PropertyInterface("Size",a)),n.r.setGroupProperty(PropertyInterface("Rotation",a)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(n.p)},roundness:{get:ExpressionPropertyInterface(n.r)},size:{get:ExpressionPropertyInterface(n.s)},_name:{value:e.nm}}),r.mn=e.mn,r}function u(e,t,s){function r(t){return e.r.ix===t||"Round Corners 1"===t?r.radius:null}var a=propertyGroupFactory(r,s),n=t;return r.propertyIndex=e.ix,n.rd.setGroupProperty(PropertyInterface("Radius",a)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(n.rd)},_name:{value:e.nm}}),r.mn=e.mn,r}function m(e,t,s){function r(t){return e.c.ix===t||"Copies"===t?r.copies:e.o.ix===t||"Offset"===t?r.offset:null}var a=propertyGroupFactory(r,s),n=t;return r.propertyIndex=e.ix,n.c.setGroupProperty(PropertyInterface("Copies",a)),n.o.setGroupProperty(PropertyInterface("Offset",a)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(n.c)},offset:{get:ExpressionPropertyInterface(n.o)},_name:{value:e.nm}}),r.mn=e.mn,r}return function(t,s,r){var a;function n(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?r:a[e-1];for(var t=0,s=a.length;t<s;){if(a[t]._name===e)return a[t];t+=1}return null}return n.propertyGroup=propertyGroupFactory(n,function(){return r}),a=e(t,s,n.propertyGroup),n.numProperties=a.length,n._name="Contents",n}}(),TextExpressionInterface=function(){return function(e){var t;function s(e){return"ADBE Text Document"===e?s.sourceText:null}return Object.defineProperty(s,"sourceText",{get:function(){e.textProperty.getValue();var s=e.textProperty.currentData.t;return t&&s===t.value||((t=new String(s)).value=s||new String(s),Object.defineProperty(t,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),t}}),s}}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var FootageInterface=function(){var e=function(e){function t(e){return"Outline"===e?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(e){var t="",s=e.getFootageData();function r(e){if(s[e])return t=e,"object"===_typeof(s=s[e])?r:s;var a=e.indexOf(t);if(-1!==a){var n=parseInt(e.substr(a+t.length),10);return"object"===_typeof(s=s[n])?r:s}return""}return function(){return t="",s=e.getFootageData(),r}}(e),t};return function(t){function s(e){return"Data"===e?s.dataInterface:null}return s._name="Data",s.dataInterface=e(t),s}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers=function(){return{searchExpressions:function(e,t,s){t.x&&(s.k=!0,s.x=!0,s.initiateExpression=ExpressionManager.initiateExpression,s.effectsSequence.push(s.initiateExpression(e,t,s).bind(s)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),s=this.getValueAtTime(e+-.01),r=0;if(t.length){var a;for(a=0;a<t.length;a+=1)r+=Math.pow(s[a]-t[a],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,s,r=-.001,a=this.getValueAtTime(e),n=this.getValueAtTime(e+r);if(a.length)for(t=createTypedArray("float32",a.length),s=0;s<a.length;s+=1)t[s]=(n[s]-a[s])/r;else t=(n-a)/r;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}}}();function addPropertyDecorator(){function e(e,t,s){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var r,a,n,i,o,l=this.comp.renderedFrame,c=this.keyframes,d=c[c.length-1].t;if(l<=d)return this.pv;if(s?a=d-(r=t?Math.abs(d-this.elem.comp.globalData.frameRate*t):Math.max(0,d-this.elem.data.ip)):((!t||t>c.length-1)&&(t=c.length-1),r=d-(a=c[c.length-1-t].t)),"pingpong"===e){if(Math.floor((l-a)/r)%2!=0)return this.getValueAtTime((r-(l-a)%r+a)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var u=this.getValueAtTime(a/this.comp.globalData.frameRate,0),m=this.getValueAtTime(d/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-a)%r+a)/this.comp.globalData.frameRate,0),h=Math.floor((l-a)/r);if(this.pv.length){for(i=(o=new Array(u.length)).length,n=0;n<i;n+=1)o[n]=(m[n]-u[n])*h+p[n];return o}return(m-u)*h+p}if("continue"===e){var x=this.getValueAtTime(d/this.comp.globalData.frameRate,0),f=this.getValueAtTime((d-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(i=(o=new Array(x.length)).length,n=0;n<i;n+=1)o[n]=x[n]+(x[n]-f[n])*((l-d)/this.comp.globalData.frameRate)/5e-4;return o}return x+(l-d)/.001*(x-f)}}return this.getValueAtTime(((l-a)%r+a)/this.comp.globalData.frameRate,0)}function t(e,t,s){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var r,a,n,i,o,l=this.comp.renderedFrame,c=this.keyframes,d=c[0].t;if(l>=d)return this.pv;if(s?a=d+(r=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-d)):((!t||t>c.length-1)&&(t=c.length-1),r=(a=c[t].t)-d),"pingpong"===e){if(Math.floor((d-l)/r)%2==0)return this.getValueAtTime(((d-l)%r+d)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var u=this.getValueAtTime(d/this.comp.globalData.frameRate,0),m=this.getValueAtTime(a/this.comp.globalData.frameRate,0),p=this.getValueAtTime((r-(d-l)%r+d)/this.comp.globalData.frameRate,0),h=Math.floor((d-l)/r)+1;if(this.pv.length){for(i=(o=new Array(u.length)).length,n=0;n<i;n+=1)o[n]=p[n]-(m[n]-u[n])*h;return o}return p-(m-u)*h}if("continue"===e){var x=this.getValueAtTime(d/this.comp.globalData.frameRate,0),f=this.getValueAtTime((d+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(i=(o=new Array(x.length)).length,n=0;n<i;n+=1)o[n]=x[n]+(x[n]-f[n])*(d-l)/.001;return o}return x+(x-f)*(d-l)/.001}}return this.getValueAtTime((r-((d-l)%r+d))/this.comp.globalData.frameRate,0)}function s(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var s,r,a=this.comp.renderedFrame/this.comp.globalData.frameRate,n=a-e,i=t>1?(a+e-n)/(t-1):1,o=0,l=0;for(s=this.pv.length?createTypedArray("float32",this.pv.length):0;o<t;){if(r=this.getValueAtTime(n+o*i),this.pv.length)for(l=0;l<this.pv.length;l+=1)s[l]+=r[l];else s+=r;o+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)s[l]/=t;else s/=t;return s}function r(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var s=this.a.getValueAtTime(e);t.translate(-s[0]*this.a.mult,-s[1]*this.a.mult,s[2]*this.a.mult)}if(this.appliedTransformations<2){var r=this.s.getValueAtTime(e);t.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var a=this.sk.getValueAtTime(e),n=this.sa.getValueAtTime(e);t.skewFromAxis(-a*this.sk.mult,n*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var i=this.r.getValueAtTime(e);t.rotate(-i*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(e),l=this.ry.getValueAtTime(e),c=this.rx.getValueAtTime(e),d=this.or.getValueAtTime(e);t.rotateZ(-o*this.rz.mult).rotateY(l*this.ry.mult).rotateX(c*this.rx.mult).rotateZ(-d[2]*this.or.mult).rotateY(d[1]*this.or.mult).rotateX(d[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var u=this.px.getValueAtTime(e),m=this.py.getValueAtTime(e);if(this.data.p.z){var p=this.pz.getValueAtTime(e);t.translate(u*this.px.mult,m*this.py.mult,-p*this.pz.mult)}else t.translate(u*this.px.mult,m*this.py.mult,0)}else{var h=this.p.getValueAtTime(e);t.translate(h[0]*this.p.mult,h[1]*this.p.mult,-h[2]*this.p.mult)}return t}function a(){return this.v.clone(new Matrix)}var n=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,s){var i=n(e,t,s);return i.dynamicProperties.length?i.getValueAtTime=r.bind(i):i.getValueAtTime=a.bind(i),i.setGroupProperty=expressionHelpers.setGroupProperty,i};var i=PropertyFactory.getProp;PropertyFactory.getProp=function(r,a,n,o,l){var c=i(r,a,n,o,l);c.kf?c.getValueAtTime=expressionHelpers.getValueAtTime.bind(c):c.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=e,c.loopIn=t,c.smooth=s,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===a.a?a.k.length:0,c.propertyIndex=a.ix;var d=0;return 0!==n&&(d=createTypedArray("float32",1===a.a?a.k[0].s.length:a.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:d},expressionHelpers.searchExpressions(r,a,c),c.k&&l.addDynamicProperty(c),c};var o=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(e,t){this.k&&this.getValue();var s,r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0));var a=r._length,n=r[e],i=r.v,o=createSizedArray(a);for(s=0;s<a;s+=1)o[s]="i"===e||"o"===e?[n[s][0]-i[s][0],n[s][1]-i[s][1]]:[n[s][0],n[s][1]];return o},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var s=this.v;void 0!==t&&(s=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(s));for(var r,a=this._segmentsLength,n=a.lengths,i=a.totalLength*e,o=0,l=n.length,c=0;o<l;){if(c+n[o].addedLength>i){var d=o,u=s.c&&o===l-1?0:o+1,m=(i-c)/n[o].addedLength;r=bez.getPointInSegment(s.v[d],s.v[u],s.o[d],s.i[u],m,n[o]);break}c+=n[o].addedLength,o+=1}return r||(r=s.c?[s.v[0][0],s.v[0][1]]:[s.v[s._length-1][0],s.v[s._length-1][1]]),r},vectorOnPath:function(e,t,s){1==e?e=this.v.c:0==e&&(e=.999);var r=this.pointOnPath(e,t),a=this.pointOnPath(e+.001,t),n=a[0]-r[0],i=a[1]-r[1],o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));return 0===o?[0,0]:"tangent"===s?[n/o,i/o]:[-i/o,n/o]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],o),extendPrototype([c],l),l.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var d=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,s,r,a){var n=d(e,t,s,r,a);return n.propertyIndex=t.ix,n.lock=!1,3===s?expressionHelpers.searchExpressions(e,t.pt,n):4===s&&expressionHelpers.searchExpressions(e,t.ks,n),n.k&&e.addDynamicProperty(n),n}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(e,t){var s=this.calculateExpression(t);if(e.t!==s){var r={};return this.copyData(r,e),r.t=s.toString(),r.__complete=!1,r}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(e,t){var s,r,a=createNS("feMerge");for(a.setAttribute("result",e),r=0;r<t.length;r+=1)(s=createNS("feMergeNode")).setAttribute("in",t[r]),a.appendChild(s),a.appendChild(s);return a}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,t,s,r,a){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=n,n.setAttribute("result",r+"_tint_1"),e.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result",r+"_tint_2"),e.appendChild(n),this.matrixFilter=n;var i=this.createMergeNode(r,[a,r+"_tint_1",r+"_tint_2"]);e.appendChild(i)}function SVGFillFilter(e,t,s,r){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",r),e.appendChild(a),this.matrixFilter=a}function SVGStrokeEffect(e,t,s){this.initialized=!1,this.filterManager=t,this.elem=s,this.paths=[]}function SVGTritoneFilter(e,t,s,r){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(a);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",r),this.matrixFilter=n;var i=createNS("feFuncR");i.setAttribute("type","table"),n.appendChild(i),this.feFuncR=i;var o=createNS("feFuncG");o.setAttribute("type","table"),n.appendChild(o),this.feFuncG=o;var l=createNS("feFuncB");l.setAttribute("type","table"),n.appendChild(l),this.feFuncB=l,e.appendChild(n)}function SVGProLevelsFilter(e,t,s,r){this.filterManager=t;var a=this.filterManager.effectElements,n=createNS("feComponentTransfer");(a[10].p.k||0!==a[10].p.v||a[11].p.k||1!==a[11].p.v||a[12].p.k||1!==a[12].p.v||a[13].p.k||0!==a[13].p.v||a[14].p.k||1!==a[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(a[17].p.k||0!==a[17].p.v||a[18].p.k||1!==a[18].p.v||a[19].p.k||1!==a[19].p.v||a[20].p.k||0!==a[20].p.v||a[21].p.k||1!==a[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(a[24].p.k||0!==a[24].p.v||a[25].p.k||1!==a[25].p.v||a[26].p.k||1!==a[26].p.v||a[27].p.k||0!==a[27].p.v||a[28].p.k||1!==a[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(a[31].p.k||0!==a[31].p.v||a[32].p.k||1!==a[32].p.v||a[33].p.k||1!==a[33].p.v||a[34].p.k||0!==a[34].p.v||a[35].p.k||1!==a[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(n)),(a[3].p.k||0!==a[3].p.v||a[4].p.k||1!==a[4].p.v||a[5].p.k||1!==a[5].p.v||a[6].p.k||0!==a[6].p.v||a[7].p.k||1!==a[7].p.v)&&((n=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",r),e.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGDropShadowEffect(e,t,s,r,a){var n=t.container.globalData.renderConfig.filterSize,i=t.data.fs||n;e.setAttribute("x",i.x||n.x),e.setAttribute("y",i.y||n.y),e.setAttribute("width",i.width||n.width),e.setAttribute("height",i.height||n.height),this.filterManager=t;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",r+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,e.appendChild(o);var l=createNS("feOffset");l.setAttribute("dx","25"),l.setAttribute("dy","0"),l.setAttribute("in",r+"_drop_shadow_1"),l.setAttribute("result",r+"_drop_shadow_2"),this.feOffset=l,e.appendChild(l);var c=createNS("feFlood");c.setAttribute("flood-color","#00ff00"),c.setAttribute("flood-opacity","1"),c.setAttribute("result",r+"_drop_shadow_3"),this.feFlood=c,e.appendChild(c);var d=createNS("feComposite");d.setAttribute("in",r+"_drop_shadow_3"),d.setAttribute("in2",r+"_drop_shadow_2"),d.setAttribute("operator","in"),d.setAttribute("result",r+"_drop_shadow_4"),e.appendChild(d);var u=this.createMergeNode(r,[r+"_drop_shadow_4",a]);e.appendChild(u)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+r+" 0"),this.matrixFilter.setAttribute("values",s[0]-t[0]+" 0 0 0 "+t[0]+" "+(s[1]-t[1])+" 0 0 0 "+t[1]+" "+(s[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,s=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+s+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,s,r,a=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,s=0):r=1+(s=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);s<r;s+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:s});if(3===this.filterManager.effectElements[10].p.v){var n=createNS("mask"),i=createElementID();n.setAttribute("id",i),n.setAttribute("mask-type","alpha"),n.appendChild(t),this.elem.globalData.defs.appendChild(n);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+i+")");a[0];)o.appendChild(a[0]);this.elem.layerElement.appendChild(o),this.masker=n,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(a=this.elem.layerElement.children||this.elem.layerElement.childNodes;a.length;)this.elem.layerElement.removeChild(a[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){var t;this.initialized||this.initialize();var s,r,a=this.paths.length;for(t=0;t<a;t+=1)if(-1!==this.paths[t].m&&(s=this.elem.maskManager.viewData[this.paths[t].m],r=this.paths[t].p,(e||this.filterManager._mdf||s.prop._mdf)&&r.setAttribute("d",s.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||s.prop._mdf)){var n;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var i=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),o=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=r.getTotalLength();n="0 0 0 "+l*i+" ";var c,d=l*(o-i),u=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,m=Math.floor(d/u);for(c=0;c<m;c+=1)n+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";n+="0 "+10*l+" 0 0"}else n="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",n)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*p[0])+","+bmFloor(255*p[1])+","+bmFloor(255*p[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,a=r[0]+" "+s[0]+" "+t[0],n=r[1]+" "+s[1]+" "+t[1],i=r[2]+" "+s[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",a),this.feFuncG.setAttribute("tableValues",n),this.feFuncB.setAttribute("tableValues",i)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var s=createNS(e);return s.setAttribute("type","table"),t.appendChild(s),s},SVGProLevelsFilter.prototype.getTableValue=function(e,t,s,r,a){for(var n,i,o=0,l=Math.min(e,t),c=Math.max(e,t),d=Array.call(null,{length:256}),u=0,m=a-r,p=t-e;o<=256;)i=(n=o/256)<=l?p<0?a:r:n>=c?p<0?r:a:r+m*Math.pow((n-e)/p,1/s),d[u]=i,u+=1,o+=256/255;return d.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,s=this.filterManager.effectElements;this.feFuncRComposed&&(e||s[3].p._mdf||s[4].p._mdf||s[5].p._mdf||s[6].p._mdf||s[7].p._mdf)&&(t=this.getTableValue(s[3].p.v,s[4].p.v,s[5].p.v,s[6].p.v,s[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||s[10].p._mdf||s[11].p._mdf||s[12].p._mdf||s[13].p._mdf||s[14].p._mdf)&&(t=this.getTableValue(s[10].p.v,s[11].p.v,s[12].p.v,s[13].p.v,s[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||s[17].p._mdf||s[18].p._mdf||s[19].p._mdf||s[20].p._mdf||s[21].p._mdf)&&(t=this.getTableValue(s[17].p.v,s[18].p.v,s[19].p.v,s[20].p.v,s[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||s[24].p._mdf||s[25].p._mdf||s[26].p._mdf||s[27].p._mdf||s[28].p._mdf)&&(t=this.getTableValue(s[24].p.v,s[25].p.v,s[26].p.v,s[27].p.v,s[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||s[31].p._mdf||s[32].p._mdf||s[33].p._mdf||s[34].p._mdf||s[35].p._mdf)&&(t=this.getTableValue(s[31].p.v,s[32].p.v,s[33].p.v,s[34].p.v,s[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var s=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=s*Math.cos(r),n=s*Math.sin(r);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",n)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,s){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=s,s.matteElement=createNS("g"),s.matteElement.appendChild(s.layerElement),s.matteElement.appendChild(s.transformedElement),s.baseElement=s.matteElement}function SVGGaussianBlurEffect(e,t,s,r){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var a=createNS("feGaussianBlur");a.setAttribute("result",r),e.appendChild(a),this.feGaussianBlur=a}function TransformEffect(){}function SVGTransformEffect(e,t){this.init(t)}function CVTransformEffect(e){this.init(e)}return SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,s=_svgMatteSymbols.length;t<s;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var s=e.layerElement.parentNode;if(s){for(var r,a=s.children,n=0,i=a.length;n<i&&a[n]!==e.layerElement;)n+=1;n<=i-2&&(r=a[n+1]);var o=createNS("use");o.setAttribute("href","#"+t),r?s.insertBefore(o,r):s.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var s=createElementID(),r=createNS("mask");r.setAttribute("id",t.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var a=e.globalData.defs;a.appendChild(r);var n=createNS("symbol");n.setAttribute("id",s),this.replaceInParent(t,s),n.appendChild(t.layerElement),a.appendChild(n);var i=createNS("use");i.setAttribute("href","#"+s),r.appendChild(i),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,s=0,r=t.length;s<r;)t[s]&&t[s].data.ind===e&&this.setElementAsMask(this.elem,t[s]),s+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,r=3==s?0:t,a=2==s?0:t;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+a);var n=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",n)}},TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var t=this.effectsManager.effectElements,s=t[0].p.v,r=t[1].p.v,a=1===t[2].p.v,n=t[3].p.v,i=a?n:t[4].p.v,o=t[5].p.v,l=t[6].p.v,c=t[7].p.v;this.matrix.reset(),this.matrix.translate(-s[0],-s[1],s[2]),this.matrix.scale(.01*i,.01*n,1),this.matrix.rotate(-c*degToRads),this.matrix.skewFromAxis(-o*degToRads,(l+90)*degToRads),this.matrix.translate(r[0],r[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=Array(t);s<t;s++)r[s]=e[s];return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,t,s){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _iterableToArrayLimit(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t);else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach(function(t){_defineProperty(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function _objectWithoutProperties(e,t){if(null==e)return{};var s,r,a=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;s[r]=e[r]}return s}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var s={}.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function(e,t){var s=e.animationData,r=e.loop,a=e.autoplay,n=e.initialSegment,i=e.onComplete,o=e.onLoopComplete,l=e.onEnterFrame,c=e.onSegmentStart,d=e.onConfigReady,u=e.onDataReady,m=e.onDataFailed,p=e.onLoadedImages,h=e.onDOMLoaded,x=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var f=_objectWithoutProperties(e,_excluded$1),g=_slicedToArray(reactExports.useState(!1),2),y=g[0],v=g[1],E=reactExports.useRef(),b=reactExports.useRef(null);return reactExports.useEffect(function(){var t=function(){var t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(b.current){null===(t=E.current)||void 0===t||t.destroy();var r=_objectSpread2(_objectSpread2(_objectSpread2({},e),s),{},{container:b.current});return E.current=lottie.loadAnimation(r),v(!!E.current),function(){var e;null===(e=E.current)||void 0===e||e.destroy(),E.current=void 0}}}();return function(){return null==t?void 0:t()}},[s,r]),reactExports.useEffect(function(){E.current&&(E.current.autoplay=!!a)},[a]),reactExports.useEffect(function(){E.current&&(n?Array.isArray(n)&&n.length&&((E.current.currentRawFrame<n[0]||E.current.currentRawFrame>n[1])&&(E.current.currentRawFrame=n[0]),E.current.setSegment(n[0],n[1])):E.current.resetSegments(!0))},[n]),reactExports.useEffect(function(){var e=[{name:"complete",handler:i},{name:"loopComplete",handler:o},{name:"enterFrame",handler:l},{name:"segmentStart",handler:c},{name:"config_ready",handler:d},{name:"data_ready",handler:u},{name:"data_failed",handler:m},{name:"loaded_images",handler:p},{name:"DOMLoaded",handler:h},{name:"destroy",handler:x}].filter(function(e){return null!=e.handler});if(e.length){var t=e.map(function(e){var t;return null===(t=E.current)||void 0===t||t.addEventListener(e.name,e.handler),function(){var t;null===(t=E.current)||void 0===t||t.removeEventListener(e.name,e.handler)}});return function(){t.forEach(function(e){return e()})}}},[i,o,l,c,d,u,m,p,h,x]),{View:React.createElement("div",_objectSpread2({style:t,ref:b},f)),play:function(){var e;null===(e=E.current)||void 0===e||e.play()},stop:function(){var e;null===(e=E.current)||void 0===e||e.stop()},pause:function(){var e;null===(e=E.current)||void 0===e||e.pause()},setSpeed:function(e){var t;null===(t=E.current)||void 0===t||t.setSpeed(e)},goToAndStop:function(e,t){var s;null===(s=E.current)||void 0===s||s.goToAndStop(e,t)},goToAndPlay:function(e,t){var s;null===(s=E.current)||void 0===s||s.goToAndPlay(e,t)},setDirection:function(e){var t;null===(t=E.current)||void 0===t||t.setDirection(e)},playSegments:function(e,t){var s;null===(s=E.current)||void 0===s||s.playSegments(e,t)},setSubframe:function(e){var t;null===(t=E.current)||void 0===t||t.setSubframe(e)},getDuration:function(e){var t;return null===(t=E.current)||void 0===t?void 0:t.getDuration(e)},destroy:function(){var e;null===(e=E.current)||void 0===e||e.destroy(),E.current=void 0},animationContainerRef:b,animationLoaded:y,animationItem:E.current}};function getContainerVisibility(e){var t=e.getBoundingClientRect(),s=t.top,r=t.height;return(window.innerHeight-s)/(window.innerHeight+r)}function getContainerCursorPosition(e,t,s){var r=e.getBoundingClientRect(),a=r.top;return{x:(t-r.left)/r.width,y:(s-a)/r.height}}var useInitInteractivity=function(e){var t=e.wrapperRef,s=e.animationItem,r=e.mode,a=e.actions;reactExports.useEffect(function(){var e=t.current;if(e&&s&&a.length){s.stop();var n,i,o,l,c;switch(r){case"scroll":return l=null,c=function(){var t=getContainerVisibility(e),r=a.find(function(e){var s=e.visibility;return s&&t>=s[0]&&t<=s[1]});if(r){if("seek"===r.type&&r.visibility&&2===r.frames.length){var n=r.frames[0]+Math.ceil((t-r.visibility[0])/(r.visibility[1]-r.visibility[0])*r.frames[1]);
//! goToAndStop must be relative to the start of the current segment
s.goToAndStop(n-s.firstFrame-1,!0)}"loop"===r.type&&(null===l||l!==r.frames||s.isPaused)&&(s.playSegments(r.frames,!0),l=r.frames),"play"===r.type&&s.isPaused&&(s.resetSegments(!0),s.play()),"stop"===r.type&&s.goToAndStop(r.frames[0]-s.firstFrame-1,!0)}},document.addEventListener("scroll",c),function(){document.removeEventListener("scroll",c)};case"cursor":return n=function(t,r){var n=t,i=r;if(-1!==n&&-1!==i){var o=getContainerCursorPosition(e,n,i);n=o.x,i=o.y}var l=a.find(function(e){var t=e.position;return t&&Array.isArray(t.x)&&Array.isArray(t.y)?n>=t.x[0]&&n<=t.x[1]&&i>=t.y[0]&&i<=t.y[1]:!(!t||Number.isNaN(t.x)||Number.isNaN(t.y))&&n===t.x&&i===t.y});if(l){if("seek"===l.type&&l.position&&Array.isArray(l.position.x)&&Array.isArray(l.position.y)&&2===l.frames.length){var c=(n-l.position.x[0])/(l.position.x[1]-l.position.x[0]),d=(i-l.position.y[0])/(l.position.y[1]-l.position.y[0]);s.playSegments(l.frames,!0),s.goToAndStop(Math.ceil((c+d)/2*(l.frames[1]-l.frames[0])),!0)}"loop"===l.type&&s.playSegments(l.frames,!0),"play"===l.type&&(s.isPaused&&s.resetSegments(!1),s.playSegments(l.frames)),"stop"===l.type&&s.goToAndStop(l.frames[0],!0)}},i=function(e){n(e.clientX,e.clientY)},o=function(){n(-1,-1)},e.addEventListener("mousemove",i),e.addEventListener("mouseout",o),function(){e.removeEventListener("mousemove",i),e.removeEventListener("mouseout",o)}}}},[r,s])},useLottieInteractivity=function(e){var t=e.actions,s=e.mode,r=e.lottieObj,a=r.animationItem,n=r.View,i=r.animationContainerRef;return useInitInteractivity({actions:t,animationItem:a,mode:s,wrapperRef:i}),n},_excluded=["style","interactivity"],Lottie=function(e){var t,s,r,a=e.style,n=e.interactivity,i=_objectWithoutProperties(e,_excluded),o=useLottie(i,a),l=o.View,c=o.play,d=o.stop,u=o.pause,m=o.setSpeed,p=o.goToAndStop,h=o.goToAndPlay,x=o.setDirection,f=o.playSegments,g=o.setSubframe,y=o.getDuration,v=o.destroy,E=o.animationContainerRef,b=o.animationLoaded,j=o.animationItem;return reactExports.useEffect(function(){e.lottieRef&&(e.lottieRef.current={play:c,stop:d,pause:u,setSpeed:m,goToAndPlay:h,goToAndStop:p,setDirection:x,playSegments:f,setSubframe:g,getDuration:y,destroy:v,animationContainerRef:E,animationLoaded:b,animationItem:j})},[null===(t=e.lottieRef)||void 0===t?void 0:t.current]),useLottieInteractivity({lottieObj:{View:l,play:c,stop:d,pause:u,setSpeed:m,goToAndStop:p,goToAndPlay:h,setDirection:x,playSegments:f,setSubframe:g,getDuration:y,destroy:v,animationContainerRef:E,animationLoaded:b,animationItem:j},actions:null!==(s=null==n?void 0:n.actions)&&void 0!==s?s:[],mode:null!==(r=null==n?void 0:n.mode)&&void 0!==r?r:"scroll"})};const LottieAnimation=({animationData:e,className:t="",loop:s=!0,autoplay:r=!0,speed:a=1,onComplete:n})=>{const i=reactExports.useRef(null);return reactExports.useEffect(()=>{i.current&&i.current.setSpeed(a)},[a]),jsxRuntimeExports.jsx(Lottie,{lottieRef:i,animationData:e,className:t,loop:s,autoplay:r,onComplete:n})},defaultLoadingData={v:"5.7.4",fr:60,ip:0,op:60,w:100,h:100,nm:"Loading",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:60,s:[360]}]},p:{a:0,k:[50,50,0]},a:{a:0,k:[0,0,0]},s:{a:0,k:[100,100,100]}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[40,40]},p:{a:0,k:[0,0]}},{ty:"st",c:{a:0,k:[.2,.6,1,1]},o:{a:0,k:100},w:{a:0,k:3}},{ty:"tr",p:{a:0,k:[0,0]},a:{a:0,k:[0,0]},s:{a:0,k:[100,100]},r:{a:0,k:0},o:{a:0,k:100}}]}],ip:0,op:60,st:0}]},LoadingAnimation=({animationData:e=defaultLoadingData,size:t="md",className:s=""})=>jsxRuntimeExports.jsx("div",{className:`${{sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}[t]} ${s}`,children:jsxRuntimeExports.jsx(LottieAnimation,{animationData:e,className:"w-full h-full",loop:!0,autoplay:!0})}),Dialog=Root$1,DialogTrigger=Trigger$2,DialogPortal=Portal$1,DialogClose=Close$1,DialogOverlay=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Overlay,{ref:s,className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:e,children:t,...s},r)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content,{ref:r,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,jsxRuntimeExports.jsxs(Close$1,{className:"absolute right-4 top-4 rounded-sm ring-offset-background transition-all hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground z-50 p-1 hover:bg-black/10 dark:hover:bg-white/10",children:[jsxRuntimeExports.jsx(X,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content.displayName;const DialogHeader=({className:e,...t})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});DialogHeader.displayName="DialogHeader";const DialogFooter=({className:e,...t})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});DialogFooter.displayName="DialogFooter";const DialogTitle=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Title$1,{ref:s,className:cn("text-lg font-semibold leading-none tracking-tight",e),...t}));DialogTitle.displayName=Title$1.displayName;const DialogDescription=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Description$1,{ref:s,className:cn("text-sm text-muted-foreground",e),...t}));DialogDescription.displayName=Description$1.displayName;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Root$2,{ref:s,className:cn(labelVariants(),e),...t}));Label.displayName=Root$2.displayName;var __assign=function(){return __assign=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)};function __rest(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}function __spreadArray(e,t,s){for(var r,a=0,n=t.length;a<n;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function isDayPickerMultiple(e){return"multiple"===e.mode}function isDayPickerRange(e){return"range"===e.mode}function isDayPickerSingle(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var defaultClassNames={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function formatCaption(e,t){return format(e,"LLLL y",t)}function formatDay(e,t){return format(e,"d",t)}function formatMonthCaption(e,t){return format(e,"LLLL",t)}function formatWeekNumber(e){return"".concat(e)}function formatWeekdayName(e,t){return format(e,"cccccc",t)}function formatYearCaption(e,t){return format(e,"yyyy",t)}var formatters=Object.freeze({__proto__:null,formatCaption:formatCaption,formatDay:formatDay,formatMonthCaption:formatMonthCaption,formatWeekNumber:formatWeekNumber,formatWeekdayName:formatWeekdayName,formatYearCaption:formatYearCaption}),labelDay=function(e,t,s){return format(e,"do MMMM (EEEE)",s)},labelMonthDropdown=function(){return"Month: "},labelNext=function(){return"Go to next month"},labelPrevious=function(){return"Go to previous month"},labelWeekday=function(e,t){return format(e,"cccc",t)},labelWeekNumber=function(e){return"Week n. ".concat(e)},labelYearDropdown=function(){return"Year: "},labels=Object.freeze({__proto__:null,labelDay:labelDay,labelMonthDropdown:labelMonthDropdown,labelNext:labelNext,labelPrevious:labelPrevious,labelWeekNumber:labelWeekNumber,labelWeekday:labelWeekday,labelYearDropdown:labelYearDropdown});function getDefaultContextValues(){return{captionLayout:"buttons",classNames:defaultClassNames,formatters:formatters,labels:labels,locale:enUS,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"}}function parseFromToProps(e){var t=e.fromYear,s=e.toYear,r=e.fromMonth,a=e.toMonth,n=e.fromDate,i=e.toDate;return r?n=startOfMonth(r):t&&(n=new Date(t,0,1)),a?i=endOfMonth(a):s&&(i=new Date(s,11,31)),{fromDate:n?startOfDay(n):void 0,toDate:i?startOfDay(i):void 0}}var DayPickerContext=reactExports.createContext(void 0);function DayPickerProvider(e){var t,s,r=e.initialProps,a=getDefaultContextValues(),n=parseFromToProps(r),i=n.fromDate,o=n.toDate,l=null!==(t=r.captionLayout)&&void 0!==t?t:a.captionLayout;"buttons"===l||i&&o||(l="buttons"),(isDayPickerSingle(r)||isDayPickerMultiple(r)||isDayPickerRange(r))&&(s=r.onSelect);var c=__assign(__assign(__assign({},a),r),{captionLayout:l,classNames:__assign(__assign({},a.classNames),r.classNames),components:__assign({},r.components),formatters:__assign(__assign({},a.formatters),r.formatters),fromDate:i,labels:__assign(__assign({},a.labels),r.labels),mode:r.mode||a.mode,modifiers:__assign(__assign({},a.modifiers),r.modifiers),modifiersClassNames:__assign(__assign({},a.modifiersClassNames),r.modifiersClassNames),onSelect:s,styles:__assign(__assign({},a.styles),r.styles),toDate:o});return jsxRuntimeExports.jsx(DayPickerContext.Provider,{value:c,children:e.children})}function useDayPicker(){var e=reactExports.useContext(DayPickerContext);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function CaptionLabel(e){var t=useDayPicker(),s=t.locale,r=t.classNames,a=t.styles,n=t.formatters.formatCaption;return jsxRuntimeExports.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:n(e.displayMonth,{locale:s})})}function IconDropdown(e){return jsxRuntimeExports.jsx("svg",__assign({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:jsxRuntimeExports.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Dropdown(e){var t,s,r=e.onChange,a=e.value,n=e.children,i=e.caption,o=e.className,l=e.style,c=useDayPicker(),d=null!==(s=null===(t=c.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==s?s:IconDropdown;return jsxRuntimeExports.jsxs("div",{className:o,style:l,children:[jsxRuntimeExports.jsx("span",{className:c.classNames.vhidden,children:e["aria-label"]}),jsxRuntimeExports.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:a,onChange:r,children:n}),jsxRuntimeExports.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,jsxRuntimeExports.jsx(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function MonthsDropdown(e){var t,s=useDayPicker(),r=s.fromDate,a=s.toDate,n=s.styles,i=s.locale,o=s.formatters.formatMonthCaption,l=s.classNames,c=s.components,d=s.labels.labelMonthDropdown;if(!r)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!a)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var u=[];if(isSameYear(r,a))for(var m=startOfMonth(r),p=r.getMonth();p<=a.getMonth();p++)u.push(setMonth(m,p));else for(m=startOfMonth(new Date),p=0;p<=11;p++)u.push(setMonth(m,p));var h=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:Dropdown;return jsxRuntimeExports.jsx(h,{name:"months","aria-label":d(),className:l.dropdown_month,style:n.dropdown_month,onChange:function(t){var s=Number(t.target.value),r=setMonth(startOfMonth(e.displayMonth),s);e.onChange(r)},value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:i}),children:u.map(function(e){return jsxRuntimeExports.jsx("option",{value:e.getMonth(),children:o(e,{locale:i})},e.getMonth())})})}function YearsDropdown(e){var t,s=e.displayMonth,r=useDayPicker(),a=r.fromDate,n=r.toDate,i=r.locale,o=r.styles,l=r.classNames,c=r.components,d=r.formatters.formatYearCaption,u=r.labels.labelYearDropdown,m=[];if(!a)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!n)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});for(var p=a.getFullYear(),h=n.getFullYear(),x=p;x<=h;x++)m.push(setYear(startOfYear(new Date),x));var f=null!==(t=null==c?void 0:c.Dropdown)&&void 0!==t?t:Dropdown;return jsxRuntimeExports.jsx(f,{name:"years","aria-label":u(),className:l.dropdown_year,style:o.dropdown_year,onChange:function(t){var r=setYear(startOfMonth(s),Number(t.target.value));e.onChange(r)},value:s.getFullYear(),caption:d(s,{locale:i}),children:m.map(function(e){return jsxRuntimeExports.jsx("option",{value:e.getFullYear(),children:d(e,{locale:i})},e.getFullYear())})})}function useControlledValue(e,t){var s=reactExports.useState(e),r=s[0];return[void 0===t?r:t,s[1]]}function getInitialMonth(e){var t=e.month,s=e.defaultMonth,r=e.today,a=t||s||r||new Date,n=e.toDate,i=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;n&&differenceInCalendarMonths(n,a)<0&&(a=addMonths(n,-1*(l-1)));return i&&differenceInCalendarMonths(a,i)<0&&(a=i),startOfMonth(a)}function useNavigationState(){var e=useDayPicker(),t=useControlledValue(getInitialMonth(e),e.month),s=t[0],r=t[1];return[s,function(t){var s;if(!e.disableNavigation){var a=startOfMonth(t);r(a),null===(s=e.onMonthChange)||void 0===s||s.call(e,a)}}]}function getDisplayMonths(e,t){for(var s=t.reverseMonths,r=t.numberOfMonths,a=startOfMonth(e),n=startOfMonth(addMonths(a,r)),i=differenceInCalendarMonths(n,a),o=[],l=0;l<i;l++){var c=addMonths(a,l);o.push(c)}return s&&(o=o.reverse()),o}function getNextMonth(e,t){if(!t.disableNavigation){var s=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,n=void 0===a?1:a,i=r?n:1,o=startOfMonth(e);if(!s)return addMonths(o,i);if(!(differenceInCalendarMonths(s,e)<n))return addMonths(o,i)}}function getPreviousMonth(e,t){if(!t.disableNavigation){var s=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,n=r?void 0===a?1:a:1,i=startOfMonth(e);if(!s)return addMonths(i,-n);if(!(differenceInCalendarMonths(i,s)<=0))return addMonths(i,-n)}}var NavigationContext=reactExports.createContext(void 0);function NavigationProvider(e){var t=useDayPicker(),s=useNavigationState(),r=s[0],a=s[1],n=getDisplayMonths(r,t),i=getNextMonth(r,t),o=getPreviousMonth(r,t),l=function(e){return n.some(function(t){return isSameMonth(e,t)})},c={currentMonth:r,displayMonths:n,goToMonth:a,goToDate:function(e,s){l(e)||(s&&isBefore(e,s)?a(addMonths(e,1+-1*t.numberOfMonths)):a(e))},previousMonth:o,nextMonth:i,isDateDisplayed:l};return jsxRuntimeExports.jsx(NavigationContext.Provider,{value:c,children:e.children})}function useNavigation(){var e=reactExports.useContext(NavigationContext);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function CaptionDropdowns(e){var t,s=useDayPicker(),r=s.classNames,a=s.styles,n=s.components,i=useNavigation().goToMonth,o=function(t){i(addMonths(t,e.displayIndex?-e.displayIndex:0))},l=null!==(t=null==n?void 0:n.CaptionLabel)&&void 0!==t?t:CaptionLabel,c=jsxRuntimeExports.jsx(l,{id:e.id,displayMonth:e.displayMonth});return jsxRuntimeExports.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[jsxRuntimeExports.jsx("div",{className:r.vhidden,children:c}),jsxRuntimeExports.jsx(MonthsDropdown,{onChange:o,displayMonth:e.displayMonth}),jsxRuntimeExports.jsx(YearsDropdown,{onChange:o,displayMonth:e.displayMonth})]})}function IconLeft(e){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:jsxRuntimeExports.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function IconRight(e){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:jsxRuntimeExports.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Button=reactExports.forwardRef(function(e,t){var s=useDayPicker(),r=s.classNames,a=s.styles,n=[r.button_reset,r.button];e.className&&n.push(e.className);var i=n.join(" "),o=__assign(__assign({},a.button_reset),a.button);return e.style&&Object.assign(o,e.style),jsxRuntimeExports.jsx("button",__assign({},e,{ref:t,type:"button",className:i,style:o}))});function Navigation(e){var t,s,r=useDayPicker(),a=r.dir,n=r.locale,i=r.classNames,o=r.styles,l=r.labels,c=l.labelPrevious,d=l.labelNext,u=r.components;if(!e.nextMonth&&!e.previousMonth)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var m=c(e.previousMonth,{locale:n}),p=[i.nav_button,i.nav_button_previous].join(" "),h=d(e.nextMonth,{locale:n}),x=[i.nav_button,i.nav_button_next].join(" "),f=null!==(t=null==u?void 0:u.IconRight)&&void 0!==t?t:IconRight,g=null!==(s=null==u?void 0:u.IconLeft)&&void 0!==s?s:IconLeft;return jsxRuntimeExports.jsxs("div",{className:i.nav,style:o.nav,children:[!e.hidePrevious&&jsxRuntimeExports.jsx(Button,{name:"previous-month","aria-label":m,className:p,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===a?jsxRuntimeExports.jsx(f,{className:i.nav_icon,style:o.nav_icon}):jsxRuntimeExports.jsx(g,{className:i.nav_icon,style:o.nav_icon})}),!e.hideNext&&jsxRuntimeExports.jsx(Button,{name:"next-month","aria-label":h,className:x,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===a?jsxRuntimeExports.jsx(g,{className:i.nav_icon,style:o.nav_icon}):jsxRuntimeExports.jsx(f,{className:i.nav_icon,style:o.nav_icon})})]})}function CaptionNavigation(e){var t=useDayPicker().numberOfMonths,s=useNavigation(),r=s.previousMonth,a=s.nextMonth,n=s.goToMonth,i=s.displayMonths,o=i.findIndex(function(t){return isSameMonth(e.displayMonth,t)}),l=0===o,c=o===i.length-1,d=t>1&&(l||!c),u=t>1&&(c||!l);return jsxRuntimeExports.jsx(Navigation,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:u,nextMonth:a,previousMonth:r,onPreviousClick:function(){r&&n(r)},onNextClick:function(){a&&n(a)}})}function Caption(e){var t,s,r=useDayPicker(),a=r.classNames,n=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=null!==(t=null==l?void 0:l.CaptionLabel)&&void 0!==t?t:CaptionLabel;return s=n?jsxRuntimeExports.jsx(c,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===o?jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:e.displayMonth,id:e.id})]}),jsxRuntimeExports.jsx("div",{className:a.caption,style:i.caption,children:s})}function Footer(e){var t=useDayPicker(),s=t.footer,r=t.styles,a=t.classNames.tfoot;return s?jsxRuntimeExports.jsx("tfoot",{className:a,style:r.tfoot,children:jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:8,children:s})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function getWeekdays(e,t,s){for(var r=s?startOfISOWeek(new Date):startOfWeek(new Date,{locale:e,weekStartsOn:t}),a=[],n=0;n<7;n++){var i=addDays(r,n);a.push(i)}return a}function HeadRow(){var e=useDayPicker(),t=e.classNames,s=e.styles,r=e.showWeekNumber,a=e.locale,n=e.weekStartsOn,i=e.ISOWeek,o=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,c=getWeekdays(a,n,i);return jsxRuntimeExports.jsxs("tr",{style:s.head_row,className:t.head_row,children:[r&&jsxRuntimeExports.jsx("td",{style:s.head_cell,className:t.head_cell}),c.map(function(e,r){return jsxRuntimeExports.jsx("th",{scope:"col",className:t.head_cell,style:s.head_cell,"aria-label":l(e,{locale:a}),children:o(e,{locale:a})},r)})]})}function Head(){var e,t=useDayPicker(),s=t.classNames,r=t.styles,a=t.components,n=null!==(e=null==a?void 0:a.HeadRow)&&void 0!==e?e:HeadRow;return jsxRuntimeExports.jsx("thead",{style:r.head,className:s.head,children:jsxRuntimeExports.jsx(n,{})})}function DayContent(e){var t=useDayPicker(),s=t.locale,r=t.formatters.formatDay;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r(e.date,{locale:s})})}var SelectMultipleContext=reactExports.createContext(void 0);function SelectMultipleProvider(e){if(!isDayPickerMultiple(e.initialProps)){return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return jsxRuntimeExports.jsx(SelectMultipleProviderInternal,{initialProps:e.initialProps,children:e.children})}function SelectMultipleProviderInternal(e){var t=e.initialProps,s=e.children,r=t.selected,a=t.min,n=t.max,i={disabled:[]};r&&i.disabled.push(function(e){var t=n&&r.length>n-1,s=r.some(function(t){return isSameDay(t,e)});return Boolean(t&&!s)});var o={selected:r,onDayClick:function(e,s,i){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,s,i),!Boolean(s.selected&&a&&(null==r?void 0:r.length)===a))&&!Boolean(!s.selected&&n&&(null==r?void 0:r.length)===n)){var c=r?__spreadArray([],r):[];if(s.selected){var d=c.findIndex(function(t){return isSameDay(e,t)});c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,s,i)}},modifiers:i};return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:o,children:s})}function useSelectMultiple(){var e=reactExports.useContext(SelectMultipleContext);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function addToRange(e,t){var s=t||{},r=s.from,a=s.to;if(r&&a){if(isSameDay(a,e)&&isSameDay(r,e))return;if(isSameDay(a,e))return{from:a,to:void 0};if(isSameDay(r,e))return;return isAfter(r,e)?{from:e,to:a}:{from:r,to:e}}return a?isAfter(e,a)?{from:a,to:e}:{from:e,to:a}:r?isBefore(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var SelectRangeContext=reactExports.createContext(void 0),InternalModifier,InternalModifier2;function SelectRangeProvider(e){if(!isDayPickerRange(e.initialProps)){return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return jsxRuntimeExports.jsx(SelectRangeProviderInternal,{initialProps:e.initialProps,children:e.children})}function SelectRangeProviderInternal(e){var t=e.initialProps,s=e.children,r=t.selected,a=r||{},n=a.from,i=a.to,o=t.min,l=t.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(n?(c.range_start=[n],i?(c.range_end=[i],isSameDay(n,i)||(c.range_middle=[{after:n,before:i}])):c.range_end=[n]):i&&(c.range_start=[i],c.range_end=[i]),o&&(n&&!i&&c.disabled.push({after:subDays(n,o-1),before:addDays(n,o-1)}),n&&i&&c.disabled.push({after:n,before:addDays(n,o-1)}),!n&&i&&c.disabled.push({after:subDays(i,o-1),before:addDays(i,o-1)})),l){if(n&&!i&&(c.disabled.push({before:addDays(n,1-l)}),c.disabled.push({after:addDays(n,l-1)})),n&&i){var d=l-(differenceInCalendarDays(i,n)+1);c.disabled.push({before:subDays(n,d)}),c.disabled.push({after:addDays(i,d)})}!n&&i&&(c.disabled.push({before:addDays(i,1-l)}),c.disabled.push({after:addDays(i,l-1)}))}return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:{selected:r,onDayClick:function(e,s,a){var n,i;null===(n=t.onDayClick)||void 0===n||n.call(t,e,s,a);var o=addToRange(e,r);null===(i=t.onSelect)||void 0===i||i.call(t,o,e,s,a)},modifiers:c},children:s})}function useSelectRange(){var e=reactExports.useContext(SelectRangeContext);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function matcherToArray(e){return Array.isArray(e)?__spreadArray([],e):void 0!==e?[e]:[]}function getCustomModifiers(e){var t={};return Object.entries(e).forEach(function(e){var s=e[0],r=e[1];t[s]=matcherToArray(r)}),t}InternalModifier2=InternalModifier||(InternalModifier={}),InternalModifier2.Outside="outside",InternalModifier2.Disabled="disabled",InternalModifier2.Selected="selected",InternalModifier2.Hidden="hidden",InternalModifier2.Today="today",InternalModifier2.RangeStart="range_start",InternalModifier2.RangeEnd="range_end",InternalModifier2.RangeMiddle="range_middle";var Selected=InternalModifier.Selected,Disabled=InternalModifier.Disabled,Hidden=InternalModifier.Hidden,Today=InternalModifier.Today,RangeEnd=InternalModifier.RangeEnd,RangeMiddle=InternalModifier.RangeMiddle,RangeStart=InternalModifier.RangeStart,Outside=InternalModifier.Outside;function getInternalModifiers(e,t,s){var r,a=((r={})[Selected]=matcherToArray(e.selected),r[Disabled]=matcherToArray(e.disabled),r[Hidden]=matcherToArray(e.hidden),r[Today]=[e.today],r[RangeEnd]=[],r[RangeMiddle]=[],r[RangeStart]=[],r[Outside]=[],r);return e.fromDate&&a[Disabled].push({before:e.fromDate}),e.toDate&&a[Disabled].push({after:e.toDate}),isDayPickerMultiple(e)?a[Disabled]=a[Disabled].concat(t.modifiers[Disabled]):isDayPickerRange(e)&&(a[Disabled]=a[Disabled].concat(s.modifiers[Disabled]),a[RangeStart]=s.modifiers[RangeStart],a[RangeMiddle]=s.modifiers[RangeMiddle],a[RangeEnd]=s.modifiers[RangeEnd]),a}var ModifiersContext=reactExports.createContext(void 0);function ModifiersProvider(e){var t=useDayPicker(),s=getInternalModifiers(t,useSelectMultiple(),useSelectRange()),r=getCustomModifiers(t.modifiers),a=__assign(__assign({},s),r);return jsxRuntimeExports.jsx(ModifiersContext.Provider,{value:a,children:e.children})}function useModifiers(){var e=reactExports.useContext(ModifiersContext);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function isDateInterval(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}function isDateRange(e){return Boolean(e&&"object"==typeof e&&"from"in e)}function isDateAfterType(e){return Boolean(e&&"object"==typeof e&&"after"in e)}function isDateBeforeType(e){return Boolean(e&&"object"==typeof e&&"before"in e)}function isDayOfWeekType(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}function isDateInRange(e,t){var s,r=t.from,a=t.to;return r&&a?(differenceInCalendarDays(a,r)<0&&(r=(s=[a,r])[0],a=s[1]),differenceInCalendarDays(e,r)>=0&&differenceInCalendarDays(a,e)>=0):a?isSameDay(a,e):!!r&&isSameDay(r,e)}function isDateType(e){return isDate(e)}function isArrayOfDates(e){return Array.isArray(e)&&e.every(isDate)}function isMatch(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(isDateType(t))return isSameDay(e,t);if(isArrayOfDates(t))return t.includes(e);if(isDateRange(t))return isDateInRange(e,t);if(isDayOfWeekType(t))return t.dayOfWeek.includes(e.getDay());if(isDateInterval(t)){var s=differenceInCalendarDays(t.before,e)>0,r=differenceInCalendarDays(t.after,e)<0;return isAfter(t.before,t.after)?r&&s:s||r}return isDateAfterType(t)?differenceInCalendarDays(e,t.after)>0:isDateBeforeType(t)?differenceInCalendarDays(t.before,e)>0:"function"==typeof t&&t(e)})}function getActiveModifiers(e,t,s){var r=Object.keys(t).reduce(function(s,r){var a=t[r];return isMatch(e,a)&&s.push(r),s},[]),a={};return r.forEach(function(e){return a[e]=!0}),s&&!isSameMonth(e,s)&&(a.outside=!0),a}function getInitialFocusTarget(e,t){for(var s,r,a=startOfMonth(e[0]),n=endOfMonth(e[e.length-1]),i=a;i<=n;){var o=getActiveModifiers(i,t);if(!o.disabled&&!o.hidden){if(o.selected)return i;o.today&&!r&&(r=i),s||(s=i),i=addDays(i,1)}else i=addDays(i,1)}return r||s}var MAX_RETRY=365;function getNextFocus(e,t){var s=t.moveBy,r=t.direction,a=t.context,n=t.modifiers,i=t.retry,o=void 0===i?{count:0,lastFocused:e}:i,l=a.weekStartsOn,c=a.fromDate,d=a.toDate,u=a.locale,m={day:addDays,week:addWeeks,month:addMonths,year:addYears,startOfWeek:function(e){return a.ISOWeek?startOfISOWeek(e):startOfWeek(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return a.ISOWeek?endOfISOWeek(e):endOfWeek(e,{locale:u,weekStartsOn:l})}}[s](e,"after"===r?1:-1);"before"===r&&c?m=max([c,m]):"after"===r&&d&&(m=min([d,m]));var p=!0;if(n){var h=getActiveModifiers(m,n);p=!h.disabled&&!h.hidden}return p?m:o.count>MAX_RETRY?o.lastFocused:getNextFocus(m,{moveBy:s,direction:r,context:a,modifiers:n,retry:__assign(__assign({},o),{count:o.count+1})})}var FocusContext=reactExports.createContext(void 0);function FocusProvider(e){var t=useNavigation(),s=useModifiers(),r=reactExports.useState(),a=r[0],n=r[1],i=reactExports.useState(),o=i[0],l=i[1],c=getInitialFocusTarget(t.displayMonths,s),d=(null!=a?a:o&&t.isDateDisplayed(o))?o:c,u=function(e){n(e)},m=useDayPicker(),p=function(e,r){if(a){var n=getNextFocus(a,{moveBy:e,direction:r,context:m,modifiers:s});isSameDay(a,n)||(t.goToDate(n,a),u(n))}},h={focusedDay:a,focusTarget:d,blur:function(){l(a),n(void 0)},focus:u,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return jsxRuntimeExports.jsx(FocusContext.Provider,{value:h,children:e.children})}function useFocusContext(){var e=reactExports.useContext(FocusContext);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function useActiveModifiers(e,t){return getActiveModifiers(e,useModifiers(),t)}var SelectSingleContext=reactExports.createContext(void 0);function SelectSingleProvider(e){if(!isDayPickerSingle(e.initialProps)){return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:{selected:void 0},children:e.children})}return jsxRuntimeExports.jsx(SelectSingleProviderInternal,{initialProps:e.initialProps,children:e.children})}function SelectSingleProviderInternal(e){var t=e.initialProps,s=e.children,r={selected:t.selected,onDayClick:function(e,s,r){var a,n,i;null===(a=t.onDayClick)||void 0===a||a.call(t,e,s,r),!s.selected||t.required?null===(i=t.onSelect)||void 0===i||i.call(t,e,e,s,r):null===(n=t.onSelect)||void 0===n||n.call(t,void 0,e,s,r)}};return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:r,children:s})}function useSelectSingle(){var e=reactExports.useContext(SelectSingleContext);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function useDayEventHandlers(e,t){var s=useDayPicker(),r=useSelectSingle(),a=useSelectMultiple(),n=useSelectRange(),i=useFocusContext(),o=i.focusDayAfter,l=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,u=i.blur,m=i.focus,p=i.focusMonthBefore,h=i.focusMonthAfter,x=i.focusYearBefore,f=i.focusYearAfter,g=i.focusStartOfWeek,y=i.focusEndOfWeek;return{onClick:function(i){var o,l,c,d;isDayPickerSingle(s)?null===(o=r.onDayClick)||void 0===o||o.call(r,e,t,i):isDayPickerMultiple(s)?null===(l=a.onDayClick)||void 0===l||l.call(a,e,t,i):isDayPickerRange(s)?null===(c=n.onDayClick)||void 0===c||c.call(n,e,t,i):null===(d=s.onDayClick)||void 0===d||d.call(s,e,t,i)},onFocus:function(r){var a;m(e),null===(a=s.onDayFocus)||void 0===a||a.call(s,e,t,r)},onBlur:function(r){var a;u(),null===(a=s.onDayBlur)||void 0===a||a.call(s,e,t,r)},onKeyDown:function(r){var a;switch(r.key){case"ArrowLeft":r.preventDefault(),r.stopPropagation(),"rtl"===s.dir?o():l();break;case"ArrowRight":r.preventDefault(),r.stopPropagation(),"rtl"===s.dir?l():o();break;case"ArrowDown":r.preventDefault(),r.stopPropagation(),c();break;case"ArrowUp":r.preventDefault(),r.stopPropagation(),d();break;case"PageUp":r.preventDefault(),r.stopPropagation(),r.shiftKey?x():p();break;case"PageDown":r.preventDefault(),r.stopPropagation(),r.shiftKey?f():h();break;case"Home":r.preventDefault(),r.stopPropagation(),g();break;case"End":r.preventDefault(),r.stopPropagation(),y()}null===(a=s.onDayKeyDown)||void 0===a||a.call(s,e,t,r)},onKeyUp:function(r){var a;null===(a=s.onDayKeyUp)||void 0===a||a.call(s,e,t,r)},onMouseEnter:function(r){var a;null===(a=s.onDayMouseEnter)||void 0===a||a.call(s,e,t,r)},onMouseLeave:function(r){var a;null===(a=s.onDayMouseLeave)||void 0===a||a.call(s,e,t,r)},onPointerEnter:function(r){var a;null===(a=s.onDayPointerEnter)||void 0===a||a.call(s,e,t,r)},onPointerLeave:function(r){var a;null===(a=s.onDayPointerLeave)||void 0===a||a.call(s,e,t,r)},onTouchCancel:function(r){var a;null===(a=s.onDayTouchCancel)||void 0===a||a.call(s,e,t,r)},onTouchEnd:function(r){var a;null===(a=s.onDayTouchEnd)||void 0===a||a.call(s,e,t,r)},onTouchMove:function(r){var a;null===(a=s.onDayTouchMove)||void 0===a||a.call(s,e,t,r)},onTouchStart:function(r){var a;null===(a=s.onDayTouchStart)||void 0===a||a.call(s,e,t,r)}}}function useSelectedDays(){var e=useDayPicker(),t=useSelectSingle(),s=useSelectMultiple(),r=useSelectRange();return isDayPickerSingle(e)?t.selected:isDayPickerMultiple(e)?s.selected:isDayPickerRange(e)?r.selected:void 0}function isInternalModifier(e){return Object.values(InternalModifier).includes(e)}function getDayClassNames(e,t){var s=[e.classNames.day];return Object.keys(t).forEach(function(t){var r=e.modifiersClassNames[t];if(r)s.push(r);else if(isInternalModifier(t)){var a=e.classNames["day_".concat(t)];a&&s.push(a)}}),s}function getDayStyle(e,t){var s=__assign({},e.styles.day);return Object.keys(t).forEach(function(t){var r;s=__assign(__assign({},s),null===(r=e.modifiersStyles)||void 0===r?void 0:r[t])}),s}function useDayRender(e,t,s){var r,a,n,i=useDayPicker(),o=useFocusContext(),l=useActiveModifiers(e,t),c=useDayEventHandlers(e,l),d=useSelectedDays(),u=Boolean(i.onDayClick||"default"!==i.mode);reactExports.useEffect(function(){var t;l.outside||o.focusedDay&&u&&isSameDay(o.focusedDay,e)&&(null===(t=s.current)||void 0===t||t.focus())},[o.focusedDay,e,s,u,l.outside]);var m=getDayClassNames(i,l).join(" "),p=getDayStyle(i,l),h=Boolean(l.outside&&!i.showOutsideDays||l.hidden),x=null!==(n=null===(a=i.components)||void 0===a?void 0:a.DayContent)&&void 0!==n?n:DayContent,f={style:p,className:m,children:jsxRuntimeExports.jsx(x,{date:e,displayMonth:t,activeModifiers:l}),role:"gridcell"},g=o.focusTarget&&isSameDay(o.focusTarget,e)&&!l.outside,y=o.focusedDay&&isSameDay(o.focusedDay,e),v=__assign(__assign(__assign({},f),((r={disabled:l.disabled,role:"gridcell"})["aria-selected"]=l.selected,r.tabIndex=y||g?0:-1,r)),c);return{isButton:u,isHidden:h,activeModifiers:l,selectedDays:d,buttonProps:v,divProps:f}}function Day(e){var t=reactExports.useRef(null),s=useDayRender(e.date,e.displayMonth,t);return s.isHidden?jsxRuntimeExports.jsx("div",{role:"gridcell"}):s.isButton?jsxRuntimeExports.jsx(Button,__assign({name:"day",ref:t},s.buttonProps)):jsxRuntimeExports.jsx("div",__assign({},s.divProps))}function WeekNumber(e){var t=e.number,s=e.dates,r=useDayPicker(),a=r.onWeekNumberClick,n=r.styles,i=r.classNames,o=r.locale,l=r.labels.labelWeekNumber,c=(0,r.formatters.formatWeekNumber)(Number(t),{locale:o});if(!a)return jsxRuntimeExports.jsx("span",{className:i.weeknumber,style:n.weeknumber,children:c});var d=l(Number(t),{locale:o});return jsxRuntimeExports.jsx(Button,{name:"week-number","aria-label":d,className:i.weeknumber,style:n.weeknumber,onClick:function(e){a(t,s,e)},children:c})}function Row(e){var t,s,r,a=useDayPicker(),n=a.styles,i=a.classNames,o=a.showWeekNumber,l=a.components,c=null!==(t=null==l?void 0:l.Day)&&void 0!==t?t:Day,d=null!==(s=null==l?void 0:l.WeekNumber)&&void 0!==s?s:WeekNumber;return o&&(r=jsxRuntimeExports.jsx("td",{className:i.cell,style:n.cell,children:jsxRuntimeExports.jsx(d,{number:e.weekNumber,dates:e.dates})})),jsxRuntimeExports.jsxs("tr",{className:i.row,style:n.row,children:[r,e.dates.map(function(t){return jsxRuntimeExports.jsx("td",{className:i.cell,style:n.cell,role:"presentation",children:jsxRuntimeExports.jsx(c,{displayMonth:e.displayMonth,date:t})},getUnixTime(t))})]})}function daysToMonthWeeks(e,t,s){for(var r=(null==s?void 0:s.ISOWeek)?endOfISOWeek(t):endOfWeek(t,s),a=(null==s?void 0:s.ISOWeek)?startOfISOWeek(e):startOfWeek(e,s),n=differenceInCalendarDays(r,a),i=[],o=0;o<=n;o++)i.push(addDays(a,o));return i.reduce(function(e,t){var r=(null==s?void 0:s.ISOWeek)?getISOWeek(t):getWeek(t,s),a=e.find(function(e){return e.weekNumber===r});return a?(a.dates.push(t),e):(e.push({weekNumber:r,dates:[t]}),e)},[])}function getMonthWeeks(e,t){var s=daysToMonthWeeks(startOfMonth(e),endOfMonth(e),t);if(null==t?void 0:t.useFixedWeeks){var r=getWeeksInMonth(e,t);if(r<6){var a=s[s.length-1],n=a.dates[a.dates.length-1],i=addWeeks(n,6-r),o=daysToMonthWeeks(addWeeks(n,1),i,t);s.push.apply(s,o)}}return s}function Table(e){var t,s,r,a=useDayPicker(),n=a.locale,i=a.classNames,o=a.styles,l=a.hideHead,c=a.fixedWeeks,d=a.components,u=a.weekStartsOn,m=a.firstWeekContainsDate,p=a.ISOWeek,h=getMonthWeeks(e.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:p,locale:n,weekStartsOn:u,firstWeekContainsDate:m}),x=null!==(t=null==d?void 0:d.Head)&&void 0!==t?t:Head,f=null!==(s=null==d?void 0:d.Row)&&void 0!==s?s:Row,g=null!==(r=null==d?void 0:d.Footer)&&void 0!==r?r:Footer;return jsxRuntimeExports.jsxs("table",{id:e.id,className:i.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&jsxRuntimeExports.jsx(x,{}),jsxRuntimeExports.jsx("tbody",{className:i.tbody,style:o.tbody,children:h.map(function(t){return jsxRuntimeExports.jsx(f,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),jsxRuntimeExports.jsx(g,{displayMonth:e.displayMonth})]})}function canUseDOM(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var useIsomorphicLayoutEffect=canUseDOM()?reactExports.useLayoutEffect:reactExports.useEffect,serverHandoffComplete=!1,id=0;function genId(){return"react-day-picker-".concat(++id)}function useId(e){var t,s=null!=e?e:serverHandoffComplete?genId():null,r=reactExports.useState(s),a=r[0],n=r[1];return useIsomorphicLayoutEffect(function(){null===a&&n(genId())},[]),reactExports.useEffect(function(){!1===serverHandoffComplete&&(serverHandoffComplete=!0)},[]),null!==(t=null!=e?e:a)&&void 0!==t?t:void 0}function Month(e){var t,s,r=useDayPicker(),a=r.dir,n=r.classNames,i=r.styles,o=r.components,l=useNavigation().displayMonths,c=useId(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,u=[n.month],m=i.month,p=0===e.displayIndex,h=e.displayIndex===l.length-1,x=!p&&!h;"rtl"===a&&(h=(t=[p,h])[0],p=t[1]),p&&(u.push(n.caption_start),m=__assign(__assign({},m),i.caption_start)),h&&(u.push(n.caption_end),m=__assign(__assign({},m),i.caption_end)),x&&(u.push(n.caption_between),m=__assign(__assign({},m),i.caption_between));var f=null!==(s=null==o?void 0:o.Caption)&&void 0!==s?s:Caption;return jsxRuntimeExports.jsxs("div",{className:u.join(" "),style:m,children:[jsxRuntimeExports.jsx(f,{id:c,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),jsxRuntimeExports.jsx(Table,{id:d,"aria-labelledby":c,displayMonth:e.displayMonth})]},e.displayIndex)}function Months(e){var t=useDayPicker(),s=t.classNames,r=t.styles;return jsxRuntimeExports.jsx("div",{className:s.months,style:r.months,children:e.children})}function Root(e){var t,s,r=e.initialProps,a=useDayPicker(),n=useFocusContext(),i=useNavigation(),o=reactExports.useState(!1),l=o[0],c=o[1];reactExports.useEffect(function(){a.initialFocus&&n.focusTarget&&(l||(n.focus(n.focusTarget),c(!0)))},[a.initialFocus,l,n.focus,n.focusTarget,n]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var u=__assign(__assign({},a.styles.root),a.style),m=Object.keys(r).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var s;return __assign(__assign({},e),((s={})[t]=r[t],s))},{}),p=null!==(s=null===(t=r.components)||void 0===t?void 0:t.Months)&&void 0!==s?s:Months;return jsxRuntimeExports.jsx("div",__assign({className:d.join(" "),style:u,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:jsxRuntimeExports.jsx(p,{children:i.displayMonths.map(function(e,t){return jsxRuntimeExports.jsx(Month,{displayIndex:t,displayMonth:e},t)})})}))}function RootProvider(e){var t=e.children,s=__rest(e,["children"]);return jsxRuntimeExports.jsx(DayPickerProvider,{initialProps:s,children:jsxRuntimeExports.jsx(NavigationProvider,{children:jsxRuntimeExports.jsx(SelectSingleProvider,{initialProps:s,children:jsxRuntimeExports.jsx(SelectMultipleProvider,{initialProps:s,children:jsxRuntimeExports.jsx(SelectRangeProvider,{initialProps:s,children:jsxRuntimeExports.jsx(ModifiersProvider,{children:jsxRuntimeExports.jsx(FocusProvider,{children:t})})})})})})})}function DayPicker(e){return jsxRuntimeExports.jsx(RootProvider,__assign({},e,{children:jsxRuntimeExports.jsx(Root,{initialProps:e})}))}function Calendar({className:e,classNames:t,showOutsideDays:s=!0,...r}){const a=useThemeStyles();return jsxRuntimeExports.jsx(DayPicker,{showOutsideDays:s,className:cn("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:cn(buttonVariants({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:cn(buttonVariants({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"text-white hover:text-white focus:text-white",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},modifiersStyles:{selected:{backgroundColor:a.buttonPrimary,color:"#FFFFFF"},day:{color:a.textPrimary}},components:{IconLeft:({...e})=>jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4",style:{color:a.textPrimary}}),IconRight:({...e})=>jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4",style:{color:a.textPrimary}})},...r})}Calendar.displayName="Calendar";const Popover=Root2$2,PopoverTrigger=Trigger$3,PopoverContent=reactExports.forwardRef(({className:e,align:t="center",sideOffset:s=4,...r},a)=>jsxRuntimeExports.jsx(Portal$2,{children:jsxRuntimeExports.jsx(Content2$2,{ref:a,align:t,sideOffset:s,className:cn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));PopoverContent.displayName=Content2$2.displayName;const animalPhotos=[{name:"Bear",src:"/bear.png"},{name:"Rabbit",src:"/rabbit.png"},{name:"Duck",src:"/duck.png"},{name:"Panda",src:"/panda.png"},{name:"Polar Bear",src:"/polar bear.png"},{name:"Hamster",src:"/Hamster.png"},{name:"Cat",src:"/cat.png"},{name:"Piglet",src:"/piglet.png"},{name:"Monkey",src:"/Monkey.png"},{name:"Seal",src:"/seal.png"},{name:"Fox",src:"/fox.png"},{name:"Puppy",src:"/puppy.png"},{name:"Otter",src:"/otter.png"},{name:"Koala",src:"/koala.png"},{name:"Chick",src:"/chick.png"},{name:"Hedgehog",src:"/hedgehog.png"}],ProfilePhotoSelector=({children:e,onPhotoUpdate:t,onPhotoSelect:s})=>{const{user:r,refreshProfile:a,updateProfileAvatar:n}=useAuth();useToast();const[i,o]=reactExports.useState(!1),[l,c]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(Dialog,{open:i,onOpenChange:o,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:e}),jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-xl bg-white/95 backdrop-blur-xl border-white/20",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Choose Profile Photo"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Select one of our friendly avatars."})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-4 max-h-[60vh] overflow-y-auto p-1",children:animalPhotos.map(e=>jsxRuntimeExports.jsx("button",{onClick:()=>(async e=>{if(s)return s(e),void o(!1);if(r)try{n(e),null==t||t(),o(!1)}catch(a){console.error("Error updating avatar:",a)}})(e.src),disabled:l,className:"aspect-square rounded-full overflow-hidden bg-slate-100 hover:bg-slate-200 transition-all border-4 border-transparent hover:border-primary/20 hover:scale-105 active:scale-95 relative group shadow-sm",title:e.name,children:jsxRuntimeExports.jsx("img",{src:e.src,alt:e.name,className:"w-full h-full object-cover"})},e.name))})})})]})]})},TestTranslationLanguageSelector=()=>{const{user:e}=useAuth(),t=useThemeStyles(),s=getLanguagesWithFlags(),[r,a]=reactExports.useState(!1),n=reactExports.useRef(null),[i,o]=reactExports.useState((()=>{try{const e=localStorage.getItem("preferred_feedback_language");if(e&&s.find(t=>t.code===e))return e}catch(e){}return"en"})()),[l,c]=reactExports.useState(!0);reactExports.useEffect(()=>{const t=()=>{if(e){(async()=>{try{const{data:t}=await supabase.from("user_preferences").select("preferred_feedback_language, native_language").eq("user_id",e.id).maybeSingle(),r=t,a=(null==r?void 0:r.preferred_feedback_language)||(null==r?void 0:r.native_language);if(a){const e=s.find(e=>e.code===a);e&&o(e.code)}}catch(t){console.warn("Error reloading language:",t)}})()}};return window.addEventListener("storage",t),window.addEventListener("language-updated",t),()=>{window.removeEventListener("storage",t),window.removeEventListener("language-updated",t)}},[e,s]),reactExports.useEffect(()=>{if(!e)return void c(!1);(async()=>{var t,r,a,n;try{c(!0),console.log(" Loading preferred feedback language for user:",e.id);const{data:i,error:l}=await supabase.from("user_preferences").select("preferred_feedback_language, native_language").eq("user_id",e.id).maybeSingle();if(l){if("PGRST204"===l.code||"42703"===l.code||(null==(t=l.message)?void 0:t.includes("preferred_feedback_language"))||(null==(r=l.message)?void 0:r.includes("column"))||(null==(a=l.message)?void 0:a.includes("schema cache"))||(null==(n=l.message)?void 0:n.includes("does not exist"))){console.log(" preferred_feedback_language column not found, trying native_language...");const{data:t,error:r}=await supabase.from("user_preferences").select("native_language").eq("user_id",e.id).maybeSingle();if(!r&&t){const e=null==t?void 0:t.native_language;if(e){const t=s.find(t=>t.code===e);if(t)return o(t.code),localStorage.setItem("preferred_feedback_language",t.code),c(!1),void console.log(" Loaded from native_language (fallback):",t.code,t.nativeName)}}return o("en"),localStorage.setItem("preferred_feedback_language","en"),void c(!1)}return console.warn(" Error loading preferences:",l),o("en"),localStorage.setItem("preferred_feedback_language","en"),void c(!1)}const d=i,u=(null==d?void 0:d.preferred_feedback_language)||(null==d?void 0:d.native_language);if(console.log(" Loaded preferences:",{preferred_feedback_language:null==d?void 0:d.preferred_feedback_language,native_language:null==d?void 0:d.native_language,selected:u}),u){const e=s.find(e=>e.code===u);e?(o(e.code),localStorage.setItem("preferred_feedback_language",e.code),c(!1),console.log(" Loaded preferred feedback language:",e.code,e.nativeName)):(console.warn(" Language code not found in languages array:",u,"defaulting to English"),o("en"),localStorage.setItem("preferred_feedback_language","en"),c(!1))}else console.log(" No feedback language preference found, using default: English"),o("en"),localStorage.setItem("preferred_feedback_language","en"),c(!1)}catch(i){console.warn(" Error loading test translation language:",i),o("en"),localStorage.setItem("preferred_feedback_language","en"),c(!1)}})()},[e]),reactExports.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const d=s.find(e=>e.code===i)||s.find(e=>"en"===e.code)||s[0];return jsxRuntimeExports.jsxs("div",{className:"relative",ref:n,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all text-sm font-medium focus:outline-none focus:ring-2",style:{backgroundColor:"glassmorphism"===t.theme.name||"dark"===t.theme.name?"rgba(255,255,255,0.1)":"minimalist"===t.theme.name?"#ffffff":"rgba(255,255,255,0.5)",borderColor:t.border,color:t.textPrimary},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=t.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="glassmorphism"===t.theme.name||"dark"===t.theme.name?"rgba(255,255,255,0.1)":"minimalist"===t.theme.name?"#ffffff":"rgba(255,255,255,0.5)"},"aria-label":"Select test translation language","aria-expanded":r,"aria-haspopup":"listbox",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:d.flag}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-center",children:d.nativeName}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-3 h-3 transition-transform "+(r?"rotate-180":"")})]}),r&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 mt-2 w-56 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",style:{backgroundColor:t.cardBackground,borderColor:t.border,borderWidth:"1px",borderStyle:"solid"},role:"listbox","aria-label":"Test translation language options",children:jsxRuntimeExports.jsx("div",{className:"py-2",children:s.map(r=>jsxRuntimeExports.jsxs("button",{onClick:()=>(async t=>{var r,n,i,l,c,d;if(o(t),a(!1),e)try{const{data:a}=await supabase.from("user_preferences").select("user_id").eq("user_id",e.id).maybeSingle();let u;if(a){const{error:a}=await supabase.from("user_preferences").update({preferred_feedback_language:t}).eq("user_id",e.id);if(u=a,u&&("PGRST204"===u.code||"42703"===u.code||(null==(r=u.message)?void 0:r.includes("preferred_feedback_language"))||(null==(n=u.message)?void 0:n.includes("column"))||(null==(i=u.message)?void 0:i.includes("does not exist")))){console.log(" preferred_feedback_language column not found, using native_language as fallback...");const{error:r}=await supabase.from("user_preferences").update({native_language:t}).eq("user_id",e.id);if(!r){console.log(" Saved to native_language (fallback - migration not applied yet):",t),u=null;const e=s.find(e=>e.code===t);return console.log(" Language saved successfully:",t,(null==e?void 0:e.nativeName)||(null==e?void 0:e.name)),localStorage.setItem("preferred_feedback_language",t),window.dispatchEvent(new CustomEvent("language-updated")),void localStorage.setItem("feedback-language-updated",Date.now().toString())}}}else{const{error:r}=await supabase.from("user_preferences").insert({user_id:e.id,preferred_feedback_language:t});if(u=r,u&&("PGRST204"===u.code||"42703"===u.code||(null==(l=u.message)?void 0:l.includes("preferred_feedback_language"))||(null==(c=u.message)?void 0:c.includes("column"))||(null==(d=u.message)?void 0:d.includes("does not exist")))){console.log(" preferred_feedback_language column not found, using native_language as fallback...");const{error:r}=await supabase.from("user_preferences").insert({user_id:e.id,native_language:t});if(!r){console.log(" Saved to native_language (fallback - migration not applied yet):",t),u=null;const e=s.find(e=>e.code===t);return console.log(" Language saved successfully:",t,(null==e?void 0:e.nativeName)||(null==e?void 0:e.name)),localStorage.setItem("preferred_feedback_language",t),window.dispatchEvent(new CustomEvent("language-updated")),void localStorage.setItem("feedback-language-updated",Date.now().toString())}}}if(u){console.error(" Error saving preferred feedback language:",u);const{data:t}=await supabase.from("user_preferences").select("preferred_feedback_language, native_language").eq("user_id",e.id).maybeSingle(),r=t,a=(null==r?void 0:r.preferred_feedback_language)||(null==r?void 0:r.native_language);if(a){const e=s.find(e=>e.code===a);e&&(o(e.code),console.log(" Reverted to saved language:",e.code))}}else{const e=s.find(e=>e.code===t);console.log(" Preferred feedback language saved successfully:",t,(null==e?void 0:e.nativeName)||(null==e?void 0:e.name)),localStorage.setItem("preferred_feedback_language",t),window.dispatchEvent(new CustomEvent("language-updated")),localStorage.setItem("feedback-language-updated",Date.now().toString())}}catch(u){console.error(" Error saving preferred feedback language:",u)}})(r.code),className:"w-full flex items-center justify-between px-4 py-2 text-left transition-colors",style:{backgroundColor:i===r.code?t.hoverBg:"transparent"},onMouseEnter:e=>{i!==r.code&&(e.currentTarget.style.backgroundColor=t.hoverBg)},onMouseLeave:e=>{i!==r.code&&(e.currentTarget.style.backgroundColor="transparent")},role:"option","aria-selected":i===r.code,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:r.flag}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:t.textPrimary},children:r.nativeName}),jsxRuntimeExports.jsx("span",{className:"text-xs",style:{color:t.textSecondary},children:r.name})]})]}),i===r.code&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4",style:{color:t.buttonPrimary}})]},r.code))})})]})},WordTranslationLanguageSelector=()=>{const{user:e}=useAuth(),t=useThemeStyles(),s=getLanguagesWithFlags(),[r,a]=reactExports.useState(!1),n=reactExports.useRef(null),[i,o]=reactExports.useState((()=>{try{const e=localStorage.getItem("word_translation_language");if(e&&s.find(t=>t.code===e))return e}catch(e){}return"en"})()),[l,c]=reactExports.useState(!0);reactExports.useEffect(()=>{const t=()=>{if(e){(async()=>{try{const{data:t}=await supabase.from("user_preferences").select("word_translation_language, native_language").eq("user_id",e.id).maybeSingle(),r=t,a=(null==r?void 0:r.word_translation_language)||(null==r?void 0:r.native_language);if(a){const e=s.find(e=>e.code===a);e&&o(e.code)}}catch(t){console.warn("Error reloading word translation language:",t)}})()}};return window.addEventListener("storage",t),window.addEventListener("word-translation-language-updated",t),()=>{window.removeEventListener("storage",t),window.removeEventListener("word-translation-language-updated",t)}},[e,s]),reactExports.useEffect(()=>{if(!e)return void c(!1);(async()=>{var t,r,a,n;try{c(!0),console.log(" Loading word translation language for user:",e.id);const{data:i,error:l}=await supabase.from("user_preferences").select("word_translation_language, native_language").eq("user_id",e.id).maybeSingle();if(l){if("PGRST204"===l.code||"42703"===l.code||(null==(t=l.message)?void 0:t.includes("word_translation_language"))||(null==(r=l.message)?void 0:r.includes("column"))||(null==(a=l.message)?void 0:a.includes("schema cache"))||(null==(n=l.message)?void 0:n.includes("does not exist"))){console.log(" word_translation_language column not found, trying native_language...");const{data:t,error:r}=await supabase.from("user_preferences").select("native_language").eq("user_id",e.id).maybeSingle();if(!r&&t){const e=null==t?void 0:t.native_language;if(e){const t=s.find(t=>t.code===e);if(t)return o(t.code),localStorage.setItem("word_translation_language",t.code),c(!1),void console.log(" Loaded from native_language (fallback):",t.code,t.nativeName)}}return o("en"),localStorage.setItem("word_translation_language","en"),void c(!1)}return console.warn(" Error loading preferences:",l),o("en"),localStorage.setItem("word_translation_language","en"),void c(!1)}const d=i,u=(null==d?void 0:d.word_translation_language)||(null==d?void 0:d.native_language);if(console.log(" Loaded preferences:",{word_translation_language:null==d?void 0:d.word_translation_language,native_language:null==d?void 0:d.native_language,selected:u}),u){const e=s.find(e=>e.code===u);e?(o(e.code),localStorage.setItem("word_translation_language",e.code),c(!1),console.log(" Loaded word translation language:",e.code,e.nativeName)):(console.warn(" Language code not found in languages array:",u,"defaulting to English"),o("en"),localStorage.setItem("word_translation_language","en"),c(!1))}else console.log(" No word translation language preference found, using default: English"),o("en"),localStorage.setItem("word_translation_language","en"),c(!1)}catch(i){console.warn(" Error loading word translation language:",i),o("en"),localStorage.setItem("word_translation_language","en"),c(!1)}})()},[e]),reactExports.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const d=s.find(e=>e.code===i)||s.find(e=>"en"===e.code)||s[0];return jsxRuntimeExports.jsxs("div",{className:"relative",ref:n,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all text-sm font-medium focus:outline-none focus:ring-2",style:{backgroundColor:"glassmorphism"===t.theme.name||"dark"===t.theme.name?"rgba(255,255,255,0.1)":"minimalist"===t.theme.name?"#ffffff":"rgba(255,255,255,0.5)",borderColor:t.border,color:t.textPrimary},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=t.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="glassmorphism"===t.theme.name||"dark"===t.theme.name?"rgba(255,255,255,0.1)":"minimalist"===t.theme.name?"#ffffff":"rgba(255,255,255,0.5)"},"aria-label":"Select word translation language","aria-expanded":r,"aria-haspopup":"listbox",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:d.flag}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-center",children:d.nativeName}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-3 h-3 transition-transform "+(r?"rotate-180":"")})]}),r&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 mt-2 w-56 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",style:{backgroundColor:t.cardBackground,borderColor:t.border,borderWidth:"1px",borderStyle:"solid"},role:"listbox","aria-label":"Word translation language options",children:jsxRuntimeExports.jsx("div",{className:"py-2",children:s.map(r=>jsxRuntimeExports.jsxs("button",{onClick:()=>(async t=>{var r,n,i,l,c,d;if(o(t),a(!1),e)try{const{data:a}=await supabase.from("user_preferences").select("user_id").eq("user_id",e.id).maybeSingle();let u;if(a){const{error:a}=await supabase.from("user_preferences").update({word_translation_language:t}).eq("user_id",e.id);if(u=a,u&&("PGRST204"===u.code||"42703"===u.code||(null==(r=u.message)?void 0:r.includes("word_translation_language"))||(null==(n=u.message)?void 0:n.includes("column"))||(null==(i=u.message)?void 0:i.includes("does not exist")))){console.log(" word_translation_language column not found, using native_language as fallback...");const{error:r}=await supabase.from("user_preferences").update({native_language:t}).eq("user_id",e.id);if(!r){console.log(" Saved to native_language (fallback - migration not applied yet):",t),u=null;const e=s.find(e=>e.code===t);return console.log(" Language saved successfully:",t,(null==e?void 0:e.nativeName)||(null==e?void 0:e.name)),localStorage.setItem("word_translation_language",t),window.dispatchEvent(new CustomEvent("word-translation-language-updated")),void localStorage.setItem("word-translation-language-updated",Date.now().toString())}}}else{const{error:r}=await supabase.from("user_preferences").insert({user_id:e.id,word_translation_language:t});if(u=r,u&&("PGRST204"===u.code||"42703"===u.code||(null==(l=u.message)?void 0:l.includes("word_translation_language"))||(null==(c=u.message)?void 0:c.includes("column"))||(null==(d=u.message)?void 0:d.includes("does not exist")))){console.log(" word_translation_language column not found, using native_language as fallback...");const{error:r}=await supabase.from("user_preferences").insert({user_id:e.id,native_language:t});if(!r){console.log(" Saved to native_language (fallback - migration not applied yet):",t),u=null;const e=s.find(e=>e.code===t);return console.log(" Language saved successfully:",t,(null==e?void 0:e.nativeName)||(null==e?void 0:e.name)),localStorage.setItem("word_translation_language",t),window.dispatchEvent(new CustomEvent("word-translation-language-updated")),void localStorage.setItem("word-translation-language-updated",Date.now().toString())}}}if(u){console.error(" Error saving word translation language:",u);const{data:t}=await supabase.from("user_preferences").select("word_translation_language, native_language").eq("user_id",e.id).maybeSingle(),r=t,a=(null==r?void 0:r.word_translation_language)||(null==r?void 0:r.native_language);if(a){const e=s.find(e=>e.code===a);e&&(o(e.code),console.log(" Reverted to saved language:",e.code))}}else{const e=s.find(e=>e.code===t);console.log(" Word translation language saved successfully:",t,(null==e?void 0:e.nativeName)||(null==e?void 0:e.name)),localStorage.setItem("word_translation_language",t),window.dispatchEvent(new CustomEvent("word-translation-language-updated")),localStorage.setItem("word-translation-language-updated",Date.now().toString())}}catch(u){console.error(" Error saving word translation language:",u)}})(r.code),className:"w-full flex items-center justify-between px-4 py-2 text-left transition-colors",style:{backgroundColor:i===r.code?t.hoverBg:"transparent"},onMouseEnter:e=>{i!==r.code&&(e.currentTarget.style.backgroundColor=t.hoverBg)},onMouseLeave:e=>{i!==r.code&&(e.currentTarget.style.backgroundColor="transparent")},role:"option","aria-selected":i===r.code,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:r.flag}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:t.textPrimary},children:r.nativeName}),jsxRuntimeExports.jsx("span",{className:"text-xs",style:{color:t.textSecondary},children:r.name})]})]}),i===r.code&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4",style:{color:t.buttonPrimary}})]},r.code))})})]})},badgeVariants=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:e,variant:t,...s}){return jsxRuntimeExports.jsx("div",{className:cn(badgeVariants({variant:t}),e),...s})}const Textarea=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx("textarea",{className:cn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));Textarea.displayName="Textarea";const SettingsModal=({onSettingsChange:e,children:t,open:s,onOpenChange:r})=>{var a;const{user:n,signOut:i,profile:o,refreshProfile:l}=useAuth(),c=useNavigate(),{t:d,i18n:u}=useTranslation(),{themeName:m,setTheme:p}=useTheme(),h=useThemeStyles(),[x,f]=reactExports.useState(!1),g=void 0!==s?s:x,y=r||f,[v,E]=reactExports.useState(!1),[b,j]=reactExports.useState({target_test_type:"IELTS",target_score:7,target_deadline:null,preferred_name:"",target_scores:{reading:7,listening:7,writing:7,speaking:7,overall:7}}),[R,_]=reactExports.useState(null),[w,S]=reactExports.useState(null),[T,P]=reactExports.useState(null),[C,k]=reactExports.useState(!1),[A,N]=reactExports.useState(null),[I,M]=reactExports.useState("English"),[D,L]=reactExports.useState("en"),[F,O]=reactExports.useState("free"),[B,V]=reactExports.useState("profile"),[z,$]=reactExports.useState(!1),[G,q]=reactExports.useState(""),[H,W]=reactExports.useState(null),U=[{id:"too_expensive",label:"Too expensive"},{id:"not_using",label:"Not using it enough"},{id:"missing_features",label:"Missing features I need"},{id:"found_alternative",label:"Found a better alternative"},{id:"temporary",label:"Just need a break"},{id:"other",label:"Other reason"}],Y=reactExports.useRef(null),J=reactExports.useRef(null),Q=reactExports.useRef(null),K=reactExports.useRef(null),Z=reactExports.useRef(null),ee=reactExports.useRef(null),te=reactExports.useRef(!1),se={profile:Y,subscription:J,preferences:Q,appearance:K,danger:Z},re=e=>{var t;te.current=!0;const s=se[e];if((null==s?void 0:s.current)&&ee.current){const e=s.current.offsetTop-12;ee.current.scrollTo({top:e,behavior:"smooth"}),setTimeout(()=>{te.current=!1},800)}else null==(t=null==s?void 0:s.current)||t.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{te.current=!1},800);V(e)};reactExports.useEffect(()=>{const e=()=>{if(te.current||!ee.current)return;const e=ee.current.scrollTop+100,t=["profile","subscription","preferences","appearance","danger"];for(const s of t){const t=se[s].current;if(t){const{offsetTop:r,offsetHeight:a}=t;if(e>=r&&e<r+a){V(s);break}}}},t=ee.current;return null==t||t.addEventListener("scroll",e),()=>null==t?void 0:t.removeEventListener("scroll",e)},[]);const ae=[{value:"IELTS",label:"IELTS",icon:Globe,color:"text-blue-600",bg:"bg-white"},{value:"PTE",label:"PTE Academic",icon:GraduationCap,color:"text-orange-600",bg:"bg-white"},{value:"TOEFL",label:"TOEFL iBT",icon:BookOpen,color:"text-blue-500",bg:"bg-white"},{value:"TOEIC",label:"TOEIC",icon:FileText,color:"text-purple-600",bg:"bg-white"},{value:"Business",label:"Business English",icon:Briefcase,color:"text-amber-600",bg:"bg-white"},{value:"NCLEX",label:"NCLEX",icon:Activity,color:"text-red-600",bg:"bg-white"},{value:"GENERAL",label:"General English",icon:MessageSquare,color:"text-emerald-600",bg:"bg-white"}],ne=[4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9];reactExports.useEffect(()=>{if(n&&g&&(S(m),P(o?JSON.parse(JSON.stringify(o)):null),ie(),!(null==o?void 0:o.avatar_url)&&!A)){const e=animalPhotos[Math.floor(Math.random()*animalPhotos.length)];N(e.src),k(!0)}},[n,g,null==o?void 0:o.avatar_url]),reactExports.useEffect(()=>{const e=()=>{const e=localStorage.getItem("word_translation_language");e&&(L(e),console.log(" SettingsModal synced word translation language:",e))};return window.addEventListener("word-translation-language-updated",e),()=>{window.removeEventListener("word-translation-language-updated",e)}},[]);const ie=async(e=0)=>{var t,s,r,a,i,o;if(!n)return void console.log(" Cannot load preferences: No user");console.log(" Loading preferences for user:",n.id);try{const{data:a}=await supabase.from("profiles").select("subscription_status").eq("id",n.id).maybeSingle();(null==a?void 0:a.subscription_status)&&O(a.subscription_status);const{data:i,error:o}=await supabase.from("user_preferences").select("*").eq("user_id",n.id).maybeSingle();if(o){const a=(null==(t=o.message)?void 0:t.includes("ERR_CONNECTION_CLOSED"))||(null==(s=o.message)?void 0:s.includes("Failed to fetch"))||(null==(r=o.message)?void 0:r.includes("NetworkError"));return a&&e<1?(await new Promise(e=>setTimeout(e,2e3)),ie(e+1)):void 0}if(console.log(" Loaded preferences:",i),null==i?void 0:i.native_language){console.log(" Loaded native language from preferences:",i.native_language);const e=codeToEnglishName(i.native_language);M(e)}else console.log(" No native language found, using default");const l=i;if((null==l?void 0:l.word_translation_language)?(console.log(" Loaded word translation language from preferences:",l.word_translation_language),L(l.word_translation_language),localStorage.setItem("word_translation_language",l.word_translation_language)):(null==i?void 0:i.native_language)&&(console.log(" No word translation language found, using native_language as fallback"),L(i.native_language),localStorage.setItem("word_translation_language",i.native_language)),(null==i?void 0:i.dashboard_theme)&&p(i.dashboard_theme),i){const e={reading:7,listening:7,writing:7,speaking:7,overall:7},t={target_test_type:i.target_test_type||"IELTS",target_score:i.target_score||7,target_deadline:i.target_deadline?new Date(i.target_deadline):null,preferred_name:i.preferred_name||"",target_scores:i.target_scores||e};console.log(" Setting preferences:",t),j(t),_(JSON.parse(JSON.stringify(t)))}else console.log(" No existing preferences found, using defaults"),_(JSON.parse(JSON.stringify(b)))}catch(l){const t=(null==(a=null==l?void 0:l.message)?void 0:a.includes("ERR_CONNECTION_CLOSED"))||(null==(i=null==l?void 0:l.message)?void 0:i.includes("Failed to fetch"))||(null==(o=null==l?void 0:l.message)?void 0:o.includes("NetworkError"));if(t&&e<1)return await new Promise(e=>setTimeout(e,2e3)),ie(e+1);0}},oe=async e=>{E(!0);try{const{error:t}=await supabase.functions.invoke("cancel-subscription",{body:{reason:e||"No reason provided"}});if(t)throw t;Jt.success("Subscription cancelled successfully"),await l()}catch(t){console.error("Error cancelling subscription:",t),Jt.error(t.message||"Failed to cancel subscription")}finally{E(!1)}},le=({tab:e,icon:t,label:s})=>jsxRuntimeExports.jsxs("button",{onClick:()=>re(e),className:cn("w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors",B===e?"bg-accent/10":"hover:bg-accent/5"),style:{color:B===e?h.buttonPrimary:h.textSecondary,backgroundColor:B===e?h.hoverBg:"transparent"},children:[jsxRuntimeExports.jsx(t,{className:"w-4 h-4"}),s]});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Dialog,{open:g,onOpenChange:e=>{!e&&C?(R&&(j(R),_(null)),w&&w!==m&&(p(w),saveTheme(w),S(null)),n&&(l(),P(null)),k(!1)):e||(_(null),S(null),P(null)),y(e)},children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:t||jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",className:"border",style:{backgroundColor:"glassmorphism"===h.theme.name||"dark"===h.theme.name?"rgba(255,255,255,0.1)":"minimalist"===h.theme.name?"#ffffff":"rgba(255,255,255,0.1)",borderColor:h.border,color:h.textPrimary},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=h.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="glassmorphism"===h.theme.name||"dark"===h.theme.name?"rgba(255,255,255,0.1)":"minimalist"===h.theme.name?"#ffffff":"rgba(255,255,255,0.1)"},onClick:()=>console.log(" Settings button clicked"),children:[jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4 mr-2"}),"Settings"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:`w-full h-[100dvh] sm:h-[85vh] sm:max-w-5xl p-0 overflow-hidden ${h.cardClassName} ${"note"===h.theme.name?"":"backdrop-blur-xl"} flex flex-col`,style:{...h.cardStyle,borderColor:h.border,backgroundColor:"note"===h.theme.name?h.backgroundImageColor:null==(a=h.cardStyle)?void 0:a.backgroundColor},onInteractOutside:e=>{e.preventDefault()},children:[jsxRuntimeExports.jsxs("div",{className:"sr-only",children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Settings"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Manage your account settings and preferences."})]}),jsxRuntimeExports.jsx(DialogClose,{asChild:!0,children:jsxRuntimeExports.jsx("button",{"aria-label":"Close",className:"absolute top-3 right-3 rounded-full p-2 transition focus:outline-none focus-visible:outline-none",style:{color:h.textPrimary,backgroundColor:h.cardBackground,border:`1px solid ${h.border}`,boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=h.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor=h.cardBackground,children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsxs("div",{className:"flex h-full",children:[jsxRuntimeExports.jsxs("div",{className:"w-64 border-r p-6 space-y-1 overflow-y-auto hidden md:block flex-shrink-0",style:{borderColor:h.border},children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-6 px-2",style:{color:h.textPrimary},children:d("settings.title")}),jsxRuntimeExports.jsx(le,{tab:"profile",icon:User,label:d("settings.nav.profile")}),jsxRuntimeExports.jsx(le,{tab:"subscription",icon:CreditCard,label:d("settings.nav.subscription")}),jsxRuntimeExports.jsx(le,{tab:"preferences",icon:Settings,label:d("settings.nav.preferences")}),jsxRuntimeExports.jsx(le,{tab:"appearance",icon:Palette,label:d("settings.nav.appearance")}),jsxRuntimeExports.jsx("div",{className:"pt-4 mt-4 border-t",style:{borderColor:h.border},children:jsxRuntimeExports.jsxs("button",{onClick:()=>re("danger"),className:cn("w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors"),style:{color:"danger"===B?"#ef4444":h.textSecondary,backgroundColor:"danger"===B?"rgba(239, 68, 68, 0.1)":"transparent"},children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4"}),d("settings.nav.accountActions")]})})]}),jsxRuntimeExports.jsx("div",{ref:ee,className:"flex-1 overflow-y-auto",style:{backgroundColor:h.backgroundImageColor},children:jsxRuntimeExports.jsxs("div",{className:"p-4 md:p-8 max-w-3xl mx-auto space-y-6 md:space-y-8 pb-12 min-h-full flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-xl md:text-2xl font-bold",style:{color:h.textPrimary},children:d("settings.title")})}),jsxRuntimeExports.jsx("div",{ref:Y,className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start",children:[jsxRuntimeExports.jsx(ProfilePhotoSelector,{onPhotoSelect:e=>{console.log(" Profile photo selected (pending save):",e),N(e),k(!0)},children:jsxRuntimeExports.jsxs("div",{className:"w-24 h-24 rounded-full bg-slate-600 flex items-center justify-center overflow-hidden cursor-pointer hover:opacity-80 transition-opacity shadow-lg group relative",children:[A||(null==o?void 0:o.avatar_url)?jsxRuntimeExports.jsx("img",{src:A||(null==o?void 0:o.avatar_url)||"",alt:"Profile",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx(User,{className:"w-10 h-10 text-white"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx(Palette,{className:"w-6 h-6 text-white"})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2 min-w-[220px]",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("h3",{className:"font-medium text-lg",style:{color:h.textPrimary},children:d("settings.nicknameProfile")})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"preferred_name",className:"text-base",style:{color:h.textPrimary}}),jsxRuntimeExports.jsx(Input,{id:"preferred_name",value:b.preferred_name,onChange:e=>{j(t=>({...t,preferred_name:e.target.value})),k(!0)},placeholder:d("settings.enterNickname"),className:"h-12 text-lg px-4",style:{backgroundColor:h.cardBackground,borderColor:h.border,color:h.textPrimary}})]})]})]})}),jsxRuntimeExports.jsx("div",{ref:J,className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:jsxRuntimeExports.jsx("div",{className:`relative overflow-hidden p-6 rounded-xl border ${h.cardClassName}`,style:{...h.cardStyle,borderColor:h.border},children:jsxRuntimeExports.jsxs("div",{className:"relative z-10 space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 pb-6 border-b border-dashed",style:{borderColor:h.border},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-xl",style:{color:h.textPrimary},children:d("settings.currentPlan")}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mt-1",children:"ultra"===F?jsxRuntimeExports.jsx(Badge,{className:"px-2 py-0.5 text-xs bg-gradient-to-r from-amber-500 to-yellow-400 text-white border-0 shadow-sm",children:d("settings.plan.ultra")}):"premium"===F||"pro"===F?jsxRuntimeExports.jsx(Badge,{className:"px-2 py-0.5 text-xs bg-gradient-to-r from-[#d97757] to-[#e8956f] text-white border-0",children:d("settings.plan.pro")}):jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"px-2 py-0.5 text-xs font-normal text-muted-foreground",children:d("settings.plan.free")})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-muted-foreground whitespace-nowrap",children:d("settings.preparingFor")}),jsxRuntimeExports.jsxs(Select,{value:b.target_test_type,onValueChange:e=>{j(t=>({...t,target_test_type:e})),k(!0)},children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[140px] h-9 bg-transparent",style:{borderColor:h.border,color:h.textPrimary},children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[ae.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.value,children:e.label},e.value)),jsxRuntimeExports.jsx(SelectItem,{value:"GENERAL",children:d("settings.testTypes.GENERAL")})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl border",style:{borderColor:h.border,backgroundColor:h.cardBackground},children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-base mb-4",style:{color:h.textPrimary},children:d("settings.freeFeatures.title")}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:["dailyPractice","basicAnalysis","pronunciation","community"].map(e=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 text-sm text-muted-foreground",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 mt-0.5 text-muted-foreground flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"leading-snug",children:d(`settings.freeFeatures.${e}`)})]},e))})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl border",style:{borderColor:"pro"===F||"premium"===F?h.buttonPrimary:h.border,backgroundColor:h.cardBackground},children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-base mb-4",style:{color:h.textPrimary},children:d("settings.proFeatures.title")}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:["unlimitedPractice","detailedFeedback","pronunciationCoaching","studyRoadmap"].map(e=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 text-sm text-muted-foreground",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 mt-0.5 text-[#d97757] flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"leading-snug",children:d(`settings.proFeatures.${e}`)})]},e))})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 rounded-xl border",style:{borderColor:"ultra"===F?h.buttonPrimary:h.border,backgroundColor:h.cardBackground},children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-base mb-4",style:{color:h.textPrimary},children:d("settings.ultraFeatures.title")}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:["everythingPro","personalMeeting","premiumTemplates","betaAccess"].map(e=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3 text-sm text-muted-foreground",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 mt-0.5 text-amber-500 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"leading-snug",children:d(`settings.ultraFeatures.${e}`)})]},e))})]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-4 pt-2",children:"free"===F?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button$1,{size:"lg",onClick:()=>{y(!1),c("/pay?plan=premium")},className:"flex-1 bg-[#d97757] hover:bg-[#c56a4b] text-white h-12 shadow-md hover:shadow-lg transition-all",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 mr-2"}),d("settings.upgradePro")]}),jsxRuntimeExports.jsx(Button$1,{size:"lg",onClick:()=>{y(!1),c("/pay?plan=ultra")},className:"flex-1 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-white h-12 shadow-md hover:shadow-lg transition-all border-0",children:d("settings.goUltra")})]}):"ultra"!==F?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button$1,{size:"lg",onClick:()=>{y(!1),c("/pay?plan=ultra")},className:"flex-1 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-white h-12 shadow-md hover:shadow-lg transition-all border-0",children:d("settings.upgradeUltra")}),jsxRuntimeExports.jsx(Button$1,{size:"lg",variant:"ghost",onClick:oe,className:"flex-1 text-muted-foreground hover:text-destructive hover:bg-destructive/5 h-12",disabled:v,children:d(v?"settings.cancel.loading":"settings.cancelSubscription")})]}):jsxRuntimeExports.jsx(Button$1,{size:"lg",variant:"outline",onClick:()=>{y(!1),c("/settings")},className:"w-full bg-transparent h-12 border-dashed",style:{borderColor:h.border,color:h.textSecondary},children:d("settings.manageSubscription")})})]})})}),jsxRuntimeExports.jsxs("div",{ref:Q,className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg border-b pb-2",style:{borderColor:h.border,color:h.textPrimary},children:d("settings.languageSettings")}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Label,{className:"text-base",style:{color:h.textPrimary},children:d("settings.displayLanguage")}),jsxRuntimeExports.jsx(TooltipProvider,{delayDuration:200,children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 cursor-help",style:{color:h.textSecondary}})}),jsxRuntimeExports.jsx(TooltipContent,{className:"max-w-xs",children:jsxRuntimeExports.jsx("p",{className:"text-sm",children:d("settings.displayLanguageTooltip")})})]})})]}),jsxRuntimeExports.jsx(LanguageSelector,{})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Label,{className:"text-base",style:{color:h.textPrimary},children:d("settings.preferredFeedbackLanguage")}),jsxRuntimeExports.jsx(TooltipProvider,{delayDuration:200,children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 cursor-help",style:{color:h.textSecondary}})}),jsxRuntimeExports.jsx(TooltipContent,{className:"max-w-xs",children:jsxRuntimeExports.jsx("p",{className:"text-sm",children:d("settings.feedbackLanguageTooltip")})})]})})]}),jsxRuntimeExports.jsx(TestTranslationLanguageSelector,{},g?"open":"closed")]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Label,{className:"text-base",style:{color:h.textPrimary},children:d("settings.wordTranslationLanguage")}),jsxRuntimeExports.jsx(TooltipProvider,{delayDuration:200,children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 cursor-help",style:{color:h.textSecondary}})}),jsxRuntimeExports.jsx(TooltipContent,{className:"max-w-xs",children:jsxRuntimeExports.jsx("p",{className:"text-sm",children:d("settings.wordTranslationLanguageTooltip")})})]})})]}),jsxRuntimeExports.jsx(WordTranslationLanguageSelector,{},g?"open-word":"closed-word")]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg border-b pb-2",style:{borderColor:h.border,color:h.textPrimary},children:d("settings.studyGoals")}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 gap-6 pt-1",children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{style:{color:h.textPrimary},children:d("settings.targetDeadline")}),jsxRuntimeExports.jsxs(Popover,{children:[jsxRuntimeExports.jsx(PopoverTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button$1,{variant:"outline",className:cn("w-full justify-start text-left font-normal h-10 bg-transparent",!b.target_deadline&&"text-muted-foreground"),style:{borderColor:h.border,color:b.target_deadline?h.textPrimary:h.textSecondary,backgroundColor:"dark"===h.theme.name||"glassmorphism"===h.theme.name?h.backgroundImageColor:h.cardBackground},children:[jsxRuntimeExports.jsx(Calendar$1,{className:"mr-2 h-4 w-4",style:{color:h.textPrimary}}),b.target_deadline?format(b.target_deadline,"PPP"):jsxRuntimeExports.jsx("span",{children:d("settings.pickDate")})]})}),jsxRuntimeExports.jsx(PopoverContent,{className:"w-auto p-0",align:"start",style:{backgroundColor:"dark"===h.theme.name||"glassmorphism"===h.theme.name?h.backgroundImageColor:h.cardBackground,borderColor:h.border,color:h.textPrimary},children:jsxRuntimeExports.jsx(Calendar,{mode:"single",className:"p-3",style:{color:h.textPrimary},selected:b.target_deadline||void 0,onSelect:e=>{j(t=>({...t,target_deadline:e||null})),k(!0)},disabled:e=>e<new Date,initialFocus:!0})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Label,{style:{color:h.textPrimary},children:d("settings.targetScores")}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(b.target_scores).map(([e,t])=>jsxRuntimeExports.jsxs("div",{className:"space-y-1.5",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:d(`settings.targetScoresSections.${e}`)}),jsxRuntimeExports.jsxs(Select,{value:t.toString(),onValueChange:t=>((e,t)=>{j(s=>({...s,target_scores:{...s.target_scores,[e]:t}})),k(!0)})(e,parseFloat(t)),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-9 bg-transparent focus:ring-0 focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 outline-none",style:{borderColor:h.border,color:h.textPrimary,backgroundColor:h.cardBackground,boxShadow:"none"},children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{style:{backgroundColor:h.cardBackground,color:h.textPrimary,borderColor:h.border},children:ne.map(e=>jsxRuntimeExports.jsx(SelectItem,{value:e.toString(),children:e},e))})]})]},e))})]})]})]}),jsxRuntimeExports.jsxs("div",{ref:K,className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg border-b pb-2",style:{borderColor:h.border,color:h.textPrimary},children:d("settings.appearance")}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.values(themes).map(e=>jsxRuntimeExports.jsxs("button",{onClick:()=>{p(e.name),k(!0)},className:"p-4 rounded-xl border-2 transition-all text-left relative overflow-hidden group",style:{borderColor:m===e.name?h.buttonPrimary:h.border,backgroundColor:m===e.name?h.hoverBg:h.cardBackground},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",style:{color:h.textPrimary},children:e.label}),m===e.name&&jsxRuntimeExports.jsx(CircleCheck,{className:"w-5 h-5",style:{color:h.buttonPrimary}})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[e.colors.background,e.colors.cardBackground,e.colors.buttonPrimary].map((t,s)=>jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full border shadow-sm",style:{backgroundColor:t,borderColor:e.colors.border}},s))})]},e.name))})]}),jsxRuntimeExports.jsx("div",{className:"pt-6 mt-2 border-t flex justify-end py-4",style:{borderColor:h.border},children:jsxRuntimeExports.jsx(Button$1,{onClick:async()=>{var t,s,r,a,i,o,c,d,u,p;if(n){E(!0),console.log(" Saving preferences for user:",n.id,b);try{if(A){console.log(" Saving deferred profile photo...");const{error:e}=await supabase.from("profiles").update({avatar_url:A}).eq("id",n.id);e?console.error(" Failed to save profile photo:",e):(await l(),N(null))}const{data:p}=await supabase.from("user_preferences").select("user_id").eq("user_id",n.id).maybeSingle(),x=localStorage.getItem("word_translation_language")||D||"en",f={target_test_type:b.target_test_type,target_score:b.target_score,target_deadline:(null==(t=b.target_deadline)?void 0:t.toISOString().split("T")[0])||null,preferred_name:b.preferred_name,native_language:englishNameToCode(I),target_scores:b.target_scores,word_translation_language:x},g={user_id:n.id,...f};let y;const v={target_test_type:b.target_test_type,target_score:b.target_score,target_deadline:(null==(s=b.target_deadline)?void 0:s.toISOString().split("T")[0])||null,preferred_name:b.preferred_name,native_language:englishNameToCode(I),target_scores:b.target_scores};if(p){const{error:e}=await supabase.from("user_preferences").update(f).eq("user_id",n.id);if(e&&((null==(r=e.message)?void 0:r.includes("word_translation_language"))||(null==(a=e.message)?void 0:a.includes("column"))||"42703"===e.code)){console.log(" word_translation_language column not found, saving without it...");const{error:e}=await supabase.from("user_preferences").update(v).eq("user_id",n.id);y=e}else y=e}else{const e={...g,dashboard_theme:m},{error:t}=await supabase.from("user_preferences").insert(e);if(t){if("PGRST204"===t.code||(null==(i=t.message)?void 0:i.includes("dashboard_theme"))||(null==(o=t.message)?void 0:o.includes("word_translation_language"))||"42703"===t.code){const{error:e}=await supabase.from("user_preferences").insert({user_id:n.id,...v});y=e}else y=t}}if(y){if(!((null==(c=y.message)?void 0:c.includes("column"))||(null==(d=y.message)?void 0:d.includes("dashboard_theme"))||"42703"===y.code||"42P01"===y.code||"PGRST204"===y.code)){console.error(" Preferences save error:",y);throw"23502"===y.code||"23505"===y.code||(null==(u=y.message)?void 0:u.includes("violates"))?(Jt.error(`Failed to save settings: ${y.message||"Validation error"}`),y):(Jt.error(`Failed to save settings: ${y.message||"Unknown error"}`),y)}if(console.log(" Preferences saved (dashboard_theme column not available)"),Jt.success("Settings saved successfully!"),b.preferred_name&&(null==n?void 0:n.id))try{localStorage.setItem(`nickname_${n.id}`,JSON.stringify({nickname:b.preferred_name,timestamp:Date.now()}))}catch(h){}}else if(console.log(" Preferences and language saved successfully"),Jt.success("Settings saved successfully!"),b.preferred_name&&(null==n?void 0:n.id))try{localStorage.setItem(`nickname_${n.id}`,JSON.stringify({nickname:b.preferred_name,timestamp:Date.now()}))}catch(h){}localStorage.setItem("language-updated",Date.now().toString()),window.dispatchEvent(new StorageEvent("storage",{key:"language-updated"})),_(null),S(null),P(null),k(!1),null==e||e()}catch(x){console.error(" Error saving preferences:",x);(null==(p=null==x?void 0:x.message)?void 0:p.includes("column"))||"42703"===(null==x?void 0:x.code)||"42P01"===(null==x?void 0:x.code)||"PGRST204"===(null==x?void 0:x.code)?(Jt.success("Settings saved successfully!"),null==e||e()):Jt.error(`Failed to save settings: ${x.message||"Unknown error"}`)}finally{E(!1)}}},disabled:v,size:"lg",className:"w-full sm:w-auto min-w-[150px] text-white shadow-lg",style:{backgroundColor:h.buttonPrimary},children:d(v?"common.loading":"settings.save")})}),jsxRuntimeExports.jsxs("div",{ref:Z,className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-8",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg border-b pb-2",style:{borderColor:h.border,color:h.textPrimary},children:d("settings.accountActions")}),jsxRuntimeExports.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:async()=>{console.log(" Initiating logout for user:",null==n?void 0:n.id);try{await i(),console.log(" Logout successful"),c("/"),y(!1)}catch(e){console.error(" Logout error:",e),Jt.error(`Failed to logout: ${e.message||"Unknown error"}`)}},className:"flex items-center justify-between p-4 rounded-lg border text-left transition",style:{borderColor:h.border,backgroundColor:h.cardBackground,color:h.textPrimary},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:d("settings.signOut")}),jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>$(!0),className:"flex items-center justify-between p-4 rounded-lg border text-left transition",style:{borderColor:h.border,backgroundColor:h.cardBackground,color:h.textPrimary},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:d("settings.cancelSubscription")}),jsxRuntimeExports.jsx("span",{className:"text-sm",style:{color:h.textSecondary},children:""})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:async()=>{if(!n)return;if(window.confirm(d("settings.resetConfirm"))){E(!0);try{await supabase.from("writing_test_results").delete().eq("user_id",n.id),await supabase.from("speaking_test_results").delete().eq("user_id",n.id),await supabase.from("reading_test_results").delete().eq("user_id",n.id),await supabase.from("listening_test_results").delete().eq("user_id",n.id);const{error:t}=await supabase.from("test_results").delete().eq("user_id",n.id);if(t)throw t;Jt.success(d("settings.resetSuccess")),y(!1),null==e||e()}catch(t){console.error("Failed to reset results",t),Jt.error(d("settings.resetError"))}finally{E(!1)}}},className:"flex items-center justify-between p-4 rounded-lg border text-left transition",style:{borderColor:h.border,backgroundColor:h.cardBackground,color:h.textPrimary},disabled:v,children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:d("settings.reset")}),jsxRuntimeExports.jsx("span",{className:"text-sm",style:{color:h.textSecondary},children:""})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:async()=>{if(!window.confirm("Are you absolutely sure you want to delete your account? This action cannot be undone."))return;if("DELETE"===window.prompt('Type "DELETE" to confirm account deletion:')){E(!0);try{const{error:e}=await supabase.functions.invoke("delete-account");if(e)throw e;Jt.success("Account deleted successfully"),await i(),c("/"),y(!1)}catch(e){console.error("Error deleting account:",e),Jt.error("Failed to delete account automatically. Please contact support.")}finally{E(!1)}}},className:"flex items-center justify-between p-4 rounded-lg border text-left transition",style:{borderColor:h.border,backgroundColor:h.cardBackground,color:h.textPrimary},disabled:v,children:[jsxRuntimeExports.jsx("span",{className:"font-medium",style:{color:"crimson"},children:d("settings.delete")}),jsxRuntimeExports.jsx("span",{className:"text-sm",style:{color:h.textSecondary},children:""})]})]})]})]})})]})]})]}),jsxRuntimeExports.jsx(Dialog,{open:z,onOpenChange:e=>{$(e),e||(q(""),W(null))},children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-lg",style:{backgroundColor:h.cardBackground,borderColor:h.border,color:h.textPrimary},children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{style:{color:h.textPrimary},children:"Cancel Subscription"}),jsxRuntimeExports.jsx(DialogDescription,{style:{color:h.textSecondary},children:"We're sorry to see you go. Please let us know why you're leaving."})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border mb-2",style:{borderColor:h.border,backgroundColor:h.hoverBg},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",style:{color:h.textSecondary},children:"Your Current Plan"}),jsxRuntimeExports.jsx(Badge,{className:"px-2 py-0.5 text-xs text-white border-0",style:{background:"ultra"===F?"linear-gradient(to right, #f59e0b, #fbbf24)":"linear-gradient(to right, #d97757, #e8956f)"},children:"ultra"===F?"Ultra":"pro"===F||"premium"===F?"Pro":"Free"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:h.textSecondary},children:"Your subscription will remain active until the end of your current billing period. After that, you'll be moved to the Free plan."})]}),("pro"===F||"premium"===F||"ultra"===F)&&jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium mb-2",style:{color:h.textPrimary},children:"Features you'll lose:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1.5",children:(ce=F,"ultra"===ce?["Unlimited AI feedback","Priority support","Advanced analytics","All practice tests","Personalized study plans","Speaking practice with AI"]:"pro"===ce||"premium"===ce?["Extended AI feedback","More practice tests","Basic analytics","Email support"]:[]).map((e,t)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2 text-sm",style:{color:h.textSecondary},children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-400"}),e]},t))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Label,{style:{color:h.textPrimary},children:"Why are you cancelling?"}),jsxRuntimeExports.jsx("div",{className:"grid gap-2",children:U.map(e=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>W(e.id),className:"flex items-center gap-3 p-3 rounded-lg border text-left transition-colors",style:{borderColor:H===e.id?h.buttonPrimary:h.border,backgroundColor:H===e.id?h.hoverBg:"transparent",color:h.textPrimary},children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center",style:{borderColor:H===e.id?h.buttonPrimary:h.border},children:H===e.id&&jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:h.buttonPrimary}})}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:e.label})]},e.id))})]}),"other"===H&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"cancel-reason",style:{color:h.textPrimary},children:"Tell us more (optional)"}),jsxRuntimeExports.jsx(Textarea,{id:"cancel-reason",placeholder:"Let us know how we can improve...",value:G,onChange:e=>q(e.target.value),className:"min-h-[80px]",style:{backgroundColor:h.cardBackground,borderColor:h.border,color:h.textPrimary}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[jsxRuntimeExports.jsx(Button$1,{variant:"outline",onClick:()=>{$(!1),q(""),W(null)},style:{borderColor:h.border,color:h.textPrimary,backgroundColor:"transparent"},children:"Keep My Plan"}),jsxRuntimeExports.jsx(Button$1,{variant:"destructive",disabled:v||!H,onClick:async()=>{var e;const t="other"===H?G:(null==(e=U.find(e=>e.id===H))?void 0:e.label)||"";await oe(t),$(!1),q(""),W(null)},children:v?"Cancelling...":"Cancel Subscription"})]})]})})]});var ce},TestResultsChart=({selectedSkill:e,selectedTestType:t})=>{var s,r;const{user:a}=useAuth(),{t:n}=useTranslation(),i=useThemeStyles(),[o,l]=reactExports.useState("week"),[c,d]=reactExports.useState([]),[u,m]=reactExports.useState(!0),[p,h]=reactExports.useState(null);reactExports.useEffect(()=>{a&&(f(),x())},[a,o,e,t]);const x=async()=>{var e,t,s,r,n,i;if(a)try{const{data:r,error:n}=await supabase.from("user_preferences").select("target_score, target_deadline, target_scores").eq("user_id",a.id).maybeSingle();if(n){return void("PGRST204"===n.code||"42703"===n.code||"42P01"===n.code||"PGRST116"===n.code||(null==(e=n.message)?void 0:e.toLowerCase().includes("column"))||(null==(t=n.message)?void 0:t.toLowerCase().includes("does not exist"))||(null==(s=n.message)?void 0:s.toLowerCase().includes("bad request"))||console.error("Error loading user preferences:",n))}h(r)}catch(o){"PGRST204"===(null==o?void 0:o.code)||"42703"===(null==o?void 0:o.code)||"42P01"===(null==o?void 0:o.code)||"PGRST116"===(null==o?void 0:o.code)||(null==(r=null==o?void 0:o.message)?void 0:r.toLowerCase().includes("column"))||(null==(n=null==o?void 0:o.message)?void 0:n.toLowerCase().includes("does not exist"))||(null==(i=null==o?void 0:o.message)?void 0:i.toLowerCase().includes("bad request"))||console.error("Error loading user preferences:",o)}},f=async()=>{if(a){m(!0);try{let t=supabase.from("test_results").select("id, score_percentage, test_type, created_at").eq("user_id",a.id);if("full"!==o){let e;switch(o){case"week":default:e=subDays(new Date,7);break;case"month":e=subMonths(new Date,1)}t=t.gte("created_at",e.toISOString())}"overall"!==e&&(t=t.ilike("test_type",`%${e}%`));const{data:s,error:r}=await t.order("created_at",{ascending:!0});if(r)throw r;d(s||[])}catch(t){console.error("Error loading test results:",t)}finally{m(!1)}}},g=e=>e>=95?9:e>=90?8.5:e>=85?8:e>=80?7.5:e>=75?7:e>=70?6.5:e>=65?6:e>=60?5.5:e>=55?5:e>=50?4.5:e>=45?4:e>=40?3.5:e>=35?3:e>=30?2.5:e>=25?2:e>=20?1.5:e>=15?1:e>=10?.5:0,y=c.map((e,t)=>({test:format(new Date(e.created_at),"MMM dd"),score:g(e.score_percentage||0),date:format(new Date(e.created_at),"MMM dd"),type:e.test_type})),v=c.length>0?g(c.reduce((e,t)=>e+(t.score_percentage||0),0)/c.length):0,E=c.length>1?g((null==(s=c[c.length-1])?void 0:s.score_percentage)||0)-g((null==(r=c[0])?void 0:r.score_percentage)||0):0,b=(null==p?void 0:p.target_deadline)?Math.max(0,Math.ceil((new Date(p.target_deadline).getTime()-Date.now())/864e5)):null;return jsxRuntimeExports.jsxs(Card,{className:`${i.cardClassName} h-full flex flex-col shadow-md`,style:i.cardStyle,children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 relative flex-shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(CardTitle,{style:{fontFamily:"Poppins, sans-serif",color:i.textPrimary},children:"overall"===e?n("testResults.overallResults",{defaultValue:"Overall Test Results"}):""}),jsxRuntimeExports.jsxs(Select,{value:o,onValueChange:l,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-auto min-w-[70px] h-7 text-xs border",style:{fontFamily:"Poppins, sans-serif",backgroundColor:"glassmorphism"===i.theme.name||"dark"===i.theme.name?"rgba(255,255,255,0.1)":"minimalist"===i.theme.name?"#ffffff":"rgba(255,255,255,0.6)",borderColor:i.border,color:i.textPrimary},children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{className:"backdrop-blur-xl border",style:{backgroundColor:i.cardBackground,borderColor:i.border},children:[jsxRuntimeExports.jsx(SelectItem,{value:"week",className:"text-xs",style:{fontFamily:"Poppins, sans-serif",color:i.textPrimary},children:"Week"}),jsxRuntimeExports.jsx(SelectItem,{value:"month",className:"text-xs",style:{fontFamily:"Poppins, sans-serif",color:i.textPrimary},children:"Month"}),jsxRuntimeExports.jsx(SelectItem,{value:"full",className:"text-xs",style:{fontFamily:"Poppins, sans-serif",color:i.textPrimary},children:"Full"})]})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"px-0 lg:px-2 flex-1 flex flex-col min-h-0",children:[jsxRuntimeExports.jsx("div",{className:"h-64 mb-4 w-full flex items-center justify-center flex-shrink-0",children:u?jsxRuntimeExports.jsx("p",{style:{color:i.textSecondary},children:n("common.loading",{defaultValue:"Loading..."})}):0===c.length?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 px-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-center",style:{fontFamily:"Inter, sans-serif",color:i.textSecondary},children:"No data available for graph"}),jsxRuntimeExports.jsx("button",{onClick:()=>{if(!a)return;const t=[],s=new Date,r=[];for(let e=0;e<8;e++){const e=Math.floor(30*Math.random()),t=new Date(s);t.setDate(t.getDate()-e),r.push(t)}r.sort((e,t)=>e.getTime()-t.getTime());const n=[];for(let e=0;e<8;e++){let t=50+5*e+(10*Math.random()-5);e>0&&Math.random()<.3&&(t=n[e-1]),t=Math.max(45,Math.min(90,t)),n.push(Math.round(10*t)/10)}let i="IELTS";"overall"!==e&&("reading"===e?i="IELTS Reading":"listening"===e?i="IELTS Listening":"writing"===e?i="writing":"speaking"===e&&(i="speaking"));for(let e=0;e<8;e++)t.push({id:`mock-${e}-${Date.now()}`,score_percentage:n[e],test_type:i,created_at:r[e].toISOString(),test_data:null});d(t),m(!1)},className:"px-4 py-2 rounded-lg text-sm font-medium transition shadow-sm",style:{fontFamily:"Poppins, sans-serif",backgroundColor:i.buttonPrimary,color:"white"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=i.buttonPrimaryHover,onMouseLeave:e=>e.currentTarget.style.backgroundColor=i.buttonPrimary,children:"Generate Mock Data"})]}):jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:y,margin:{left:-10,right:10,top:5,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:i.textSecondary+"40"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"test",stroke:i.textSecondary,fontSize:12}),jsxRuntimeExports.jsx(YAxis,{stroke:i.textSecondary,fontSize:12,domain:[0,9],ticks:[0,1,2,3,4,5,6,7,8,9],tickFormatter:e=>`${e}`}),jsxRuntimeExports.jsx(Tooltip$1,{contentStyle:{backgroundColor:i.cardBackground,border:`1px solid ${i.border}`,borderRadius:"8px",color:i.textPrimary},formatter:(e,t)=>[`${e}`,"IELTS Band"],labelFormatter:e=>`${e}`}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"score",stroke:i.chartLine,strokeWidth:3,dot:{fill:i.chartLine,strokeWidth:2,r:4},activeDot:{r:6,stroke:i.chartLine,strokeWidth:2}}),(null==p?void 0:p.target_scores)&&"overall"!==e?jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:()=>{var t;return(null==(t=p.target_scores)?void 0:t[e])||p.target_score},stroke:i.chartTarget,strokeWidth:2,strokeDasharray:"5 5",dot:!1,activeDot:!1}):(null==p?void 0:p.target_score)&&jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:()=>p.target_score,stroke:i.chartTarget,strokeWidth:2,strokeDasharray:"5 5",dot:!1,activeDot:!1})]})})}),!u&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3 flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-normal",style:{fontFamily:"Poppins, sans-serif",color:i.textPrimary},children:null!==b?b:""}),jsxRuntimeExports.jsx("p",{className:"text-[11px]",style:{fontFamily:"Poppins, sans-serif",color:i.textSecondary},children:n("dashboard.daysLeft",{defaultValue:"Days Left"})})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-normal",style:{fontFamily:"Poppins, sans-serif",color:i.textPrimary},children:v.toFixed(1)}),jsxRuntimeExports.jsx("p",{className:"text-[11px]",style:{fontFamily:"Poppins, sans-serif",color:i.textSecondary},children:n("dashboard.averageScore",{defaultValue:"Average Score"})})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-normal",style:{fontFamily:"Poppins, sans-serif",color:E>=0?i.textSecondary:i.chartTarget},children:[E>0?"+":"",E.toFixed(1)]}),jsxRuntimeExports.jsx("p",{className:"text-[11px]",style:{fontFamily:"Poppins, sans-serif",color:i.textSecondary},children:n("testResults.improvement",{defaultValue:"Improvement"})})]})]})]})]})};function formatLocalISO(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function normalizeToLocalMidnight(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function getPlanDayForLocalDate(e,t){var s,r,a,n;if(!(null==(s=null==e?void 0:e.weekly)?void 0:s.length))return null;const i=(()=>{var t;if(null==(t=null==e?void 0:e.meta)?void 0:t.startDateISO){const t=new Date(e.meta.startDateISO);return new Date(t.getFullYear(),t.getMonth(),t.getDate())}const s=new Date;return new Date(s.getFullYear(),s.getMonth(),s.getDate())})(),o=normalizeToLocalMidnight(t),l=Math.max(0,Math.floor((o.getTime()-i.getTime())/864e5)),c=Math.floor(l/7),d=l%7;return(null==(n=null==(a=null==(r=null==e?void 0:e.weekly)?void 0:r[c])?void 0:a.days)?void 0:n[d])||null}const StudyPlanTodoList=()=>{const{user:e}=useAuth(),{t:t}=useTranslation(),s=useThemeStyles(),[r,a]=reactExports.useState(null),[n,i]=reactExports.useState(!0),[o,l]=reactExports.useState({title:"",minutes:15}),[c,d]=reactExports.useState(null),[u,m]=reactExports.useState(()=>normalizeToLocalMidnight(new Date)),[p,h]=reactExports.useState(!1);reactExports.useEffect(()=>{e?x():i(!1)},[e]);const x=async()=>{i(!0);try{let r=null;try{const e=JSON.parse(localStorage.getItem("latest_plan")||"null");if((null==e?void 0:e.plan)&&(null==e?void 0:e.ts)&&(r=e,e.fresh))return a(e.plan),void i(!1)}catch(t){console.warn("Error reading local cache:",t)}try{const{data:s,error:n}=await supabase.from("profiles").select("current_plan_id").eq("id",e.id).maybeSingle();if(n&&console.warn("Error loading profile:",n),null==s?void 0:s.current_plan_id){const{data:e,error:n}=await supabase.from("study_plans").select("plan, updated_at, created_at").eq("id",s.current_plan_id).maybeSingle();if(n)console.warn("Error loading study plan:",n),(null==r?void 0:r.plan)&&a(r.plan);else if(null==e?void 0:e.plan){const s=new Date(e.updated_at||e.created_at||Date.now()).getTime(),n=(null==r?void 0:r.ts)||0,i=Math.abs(s-n);if(!r||i>3e4){a(e.plan);try{localStorage.setItem("latest_plan",JSON.stringify({plan:e.plan,ts:Date.now()}))}catch(t){console.warn("Error saving to localStorage:",t)}}else a(r.plan)}else(null==r?void 0:r.plan)&&a(r.plan)}else(null==r?void 0:r.plan)&&a(r.plan)}catch(s){console.error("Database error:",s),(null==r?void 0:r.plan)&&a(r.plan)}}catch(r){console.error("Error loading study plan:",r),d(r instanceof Error?r.message:"Failed to load study plan")}finally{i(!1)}},f=reactExports.useMemo(()=>normalizeToLocalMidnight(u),[u]),g=reactExports.useMemo(()=>formatLocalISO(f),[f]),y=reactExports.useMemo(()=>{if(!r)return null;try{return getPlanDayForLocalDate(r,f)}catch(e){return console.error("Error calculating day:",e),null}},[r,f]),[v,E]=reactExports.useState(()=>normalizeToLocalMidnight(new Date));reactExports.useEffect(()=>{const e=setInterval(()=>{E(normalizeToLocalMidnight(new Date))},6e4);return()=>clearInterval(e)},[]);const b=v,j=reactExports.useMemo(()=>{const e=new Date(b);return e.setDate(e.getDate()-1),normalizeToLocalMidnight(e)},[b]),R=reactExports.useMemo(()=>{const e=new Date(b);return e.setDate(e.getDate()+1),normalizeToLocalMidnight(e)},[b]),_=reactExports.useMemo(()=>f.getTime()===b.getTime(),[f,b]),w=reactExports.useMemo(()=>f.getTime()===j.getTime(),[f,j]),S=reactExports.useMemo(()=>f.getTime()===R.getTime(),[f,R]),T=reactExports.useMemo(()=>f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),[f]),P=e=>{const t=new Date(f);"prev"===e?t.setDate(t.getDate()-1):"next"===e?t.setDate(t.getDate()+1):t.setTime(b.getTime()),m(normalizeToLocalMidnight(t)),h(!1)},[C,k]=reactExports.useState({}),[A,N]=reactExports.useState([]),[I,M]=reactExports.useState(new Set);reactExports.useEffect(()=>{const e=formatLocalISO(f);try{const t=JSON.parse(localStorage.getItem(`quicktodo-${e}`)||"{}");k(t)}catch{k({})}try{const t=JSON.parse(localStorage.getItem(`quicktodo-custom-${e}`)||"[]");N(t)}catch{N([])}try{const t=JSON.parse(localStorage.getItem(`quicktodo-hidden-ai-${e}`)||"[]");M(new Set(t))}catch{M(new Set)}},[f]);const D=()=>g||formatLocalISO(normalizeToLocalMidnight(new Date)),L=e=>{const t={...C,[e]:!C[e]};k(t);try{localStorage.setItem(`quicktodo-${D()}`,JSON.stringify(t))}catch(s){console.warn("Error saving task state:",s)}},F=e=>{const t=`c${e}`,s={...C,[t]:!C[t]};k(s);try{localStorage.setItem(`quicktodo-${D()}`,JSON.stringify(s))}catch(r){console.warn("Error saving custom task state:",r)}},O=()=>{if(!o.title.trim())return;const e=[...A,{title:o.title.trim(),minutes:Math.max(5,Math.min(180,Number(o.minutes)||15))}];N(e),l({title:"",minutes:15});try{localStorage.setItem(`quicktodo-custom-${D()}`,JSON.stringify(e))}catch(t){console.warn("Error saving custom tasks:",t)}},B=reactExports.useMemo(()=>(null==y?void 0:y.tasks)&&Array.isArray(y.tasks)?y.tasks.slice(0,5).map((e,t)=>({task:e,originalIndex:t})).filter(({originalIndex:e})=>!I.has(String(e))).map(({task:e,originalIndex:t})=>({...e,originalIndex:t})):[],[y,I]),[V,z]=reactExports.useState({totalTests:0,savedWords:0,dayStreak:7});return reactExports.useEffect(()=>{if(!e)return;(async()=>{try{const{count:t}=await supabase.from("test_results").select("id",{count:"exact",head:!0}).eq("user_id",e.id),{count:s}=await supabase.from("user_vocabulary").select("id",{count:"exact",head:!0}).eq("user_id",e.id);z({totalTests:t||0,savedWords:s||0,dayStreak:7})}catch(t){console.error("Error fetching stats:",t)}})()},[e]),n?jsxRuntimeExports.jsx("div",{className:`${s.cardClassName} rounded-xl p-4`,style:s.cardStyle,children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:s.textSecondary},children:t("common.loading",{defaultValue:"Loading..."})})}):c?jsxRuntimeExports.jsx("div",{className:`${s.cardClassName} rounded-xl p-4`,style:s.cardStyle,children:jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:s.textSecondary},children:c})}):jsxRuntimeExports.jsxs("div",{className:`${s.cardClassName} rounded-xl p-4 lg:p-5 shadow-md flex flex-col`,style:s.cardStyle,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsxs("h3",{className:"text-sm lg:text-base font-normal",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:s.textPrimary},children:[T,_&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs font-medium",style:{color:s.textSecondary},children:"Today"}),w&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs font-medium",style:{color:s.textSecondary},children:"Yesterday"}),S&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs font-medium",style:{color:s.textSecondary},children:"Tomorrow"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>P("prev"),className:"p-1 rounded transition",style:{color:s.textSecondary,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=s.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",title:"Yesterday",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>P("next"),className:"p-1 rounded transition",style:{color:s.textSecondary,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=s.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",title:"Tomorrow",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>h(!p),className:"p-1 rounded transition ml-1",style:{color:s.textSecondary,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=s.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",title:"Calendar",children:jsxRuntimeExports.jsx(Calendar$1,{className:"w-4 h-4"})})]})]}),p&&jsxRuntimeExports.jsx("div",{className:"mb-4 flex-shrink-0",children:jsxRuntimeExports.jsx(MiniCalendar,{plan:r||null,selectedDate:f,onSelectDate:e=>{m(e),h(!1)}})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto mb-4 min-h-0",style:{maxHeight:"400px"},children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[r&&B.length>0&&B.map((e,t)=>{if(!e||!e.title)return null;const r=e.originalIndex??t,a=!0===C[r];return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all "+(a?"line-through opacity-60":"hover:shadow-sm"),style:{backgroundColor:a?"note"===s.theme.name?"rgba(245, 230, 211, 0.5)":"dark"===s.theme.name?"rgba(255,255,255,0.05)":"minimalist"===s.theme.name?"#f9fafb":"rgba(255,255,255,0.1)":"glassmorphism"===s.theme.name?"rgba(255,255,255,0.1)":"dark"===s.theme.name?"rgba(255,255,255,0.05)":"minimalist"===s.theme.name?"#ffffff":"rgba(255,255,255,0.4)",borderColor:s.border,boxShadow:a?"none":"0 1px 2px rgba(0,0,0,0.05)"},onClick:()=>L(r),children:[jsxRuntimeExports.jsx("button",{className:"flex-shrink-0",onClick:e=>{e.stopPropagation(),L(r)},children:a?jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5",style:{color:s.textSecondary}}):jsxRuntimeExports.jsx(Circle,{className:"w-5 h-5",style:{color:s.textAccent}})}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-sm",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',color:a?s.textSecondary:s.textPrimary},children:e.title||"Untitled task"}),jsxRuntimeExports.jsx("button",{className:"text-xs font-bold flex-shrink-0 z-10",style:{color:s.chartTarget,opacity:a?.8:1},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity=a?"0.8":"1",onClick:e=>{e.stopPropagation(),e.preventDefault(),(t=>{const s=new Set(I);s.add(String(t)),M(s);try{localStorage.setItem(`quicktodo-hidden-ai-${D()}`,JSON.stringify(Array.from(s)))}catch(e){console.warn("Error hiding AI task:",e)}})(r)},title:"Remove",children:""})]},`ai-${r}`)}),A.length>0&&A.map((e,t)=>{if(!e||!e.title)return null;const r=!0===C[`c${t}`];return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all "+(r?"line-through opacity-60":"hover:shadow-sm"),style:{backgroundColor:r?"note"===s.theme.name?"rgba(245, 230, 211, 0.5)":"dark"===s.theme.name?"rgba(255,255,255,0.05)":"minimalist"===s.theme.name?"#f9fafb":"rgba(255,255,255,0.1)":"glassmorphism"===s.theme.name?"rgba(255,255,255,0.1)":"dark"===s.theme.name?"rgba(255,255,255,0.05)":"minimalist"===s.theme.name?"#ffffff":"rgba(255,255,255,0.4)",borderColor:s.border,boxShadow:r?"none":"0 1px 2px rgba(0,0,0,0.05)"},onClick:()=>F(t),children:[jsxRuntimeExports.jsx("button",{className:"flex-shrink-0",onClick:e=>{e.stopPropagation(),F(t)},children:r?jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5",style:{color:s.textSecondary}}):jsxRuntimeExports.jsx(Circle,{className:"w-5 h-5",style:{color:s.textAccent}})}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-sm",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',color:r?s.textSecondary:s.textPrimary},children:e.title||"Untitled task"}),jsxRuntimeExports.jsx("button",{className:"text-xs font-bold flex-shrink-0 z-10",style:{color:s.chartTarget,opacity:r?.8:1},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity=r?"0.8":"1",onClick:e=>{e.stopPropagation(),e.preventDefault(),(t=>{const s=A.slice();s.splice(t,1),N(s);try{localStorage.setItem(`quicktodo-custom-${D()}`,JSON.stringify(s))}catch(e){console.warn("Error removing custom task:",e)}})(t)},title:"Remove",children:""})]},`custom-${t}`)}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t flex-shrink-0",style:{borderColor:s.border},children:[jsxRuntimeExports.jsx("input",{type:"text",value:o.title,onChange:e=>l({...o,title:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),O())},placeholder:t("studyPlan.addTask",{defaultValue:"Add a task..."}),className:"flex-1 rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-0 focus:ring-offset-0",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',borderColor:s.border,backgroundColor:"glassmorphism"===s.theme.name||"dark"===s.theme.name?"rgba(255,255,255,0.1)":"minimalist"===s.theme.name?"#ffffff":"rgba(255,255,255,0.6)",color:s.textPrimary}}),jsxRuntimeExports.jsx("button",{onClick:O,className:"rounded-lg px-3 py-2 transition flex items-center justify-center shadow-sm focus:outline-none focus:ring-0 focus:ring-offset-0",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',backgroundColor:s.buttonPrimary,color:"white",minWidth:"44px",minHeight:"38px",boxSizing:"border-box"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=s.buttonPrimaryHover,onMouseLeave:e=>e.currentTarget.style.backgroundColor=s.buttonPrimary,children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"})})]})]})})]})},MiniCalendar=({plan:e,selectedDate:t,onSelectDate:s})=>{var r;const a=useThemeStyles(),n=new Date,[i,o]=reactExports.useState(()=>{const e=normalizeToLocalMidnight(t);return 12*(e.getFullYear()-n.getFullYear())+(e.getMonth()-n.getMonth())});reactExports.useEffect(()=>{const e=normalizeToLocalMidnight(t),s=12*(e.getFullYear()-n.getFullYear())+(e.getMonth()-n.getMonth());o(s)},[t]),(null==(r=null==e?void 0:e.meta)?void 0:r.startDateISO)||(new Date).toISOString();const l=new Date(n.getFullYear(),n.getMonth()+i,1),c=new Date(l.getFullYear(),l.getMonth()+1,0).getDate(),d=l.toLocaleString(void 0,{month:"long",year:"numeric"}),u=l.getDay(),m=Array.from({length:u}).map((e,t)=>t),p=[];for(let h=1;h<=c;h++){const t=new Date(l.getFullYear(),l.getMonth(),h);let s=!1,r=!1;try{if(e){const a=getPlanDayForLocalDate(e,t),n=null==a?void 0:a.tasks;if(Array.isArray(n)&&n.length>0){const e=formatLocalISO(normalizeToLocalMidnight(t)),a=new Set(JSON.parse(localStorage.getItem(`quicktodo-hidden-ai-${e}`)||"[]")),i=n.filter((e,t)=>!a.has(String(t)));if(s=i.length>0,s){const t=JSON.parse(localStorage.getItem(`quicktodo-${e}`)||"{}"),s=JSON.parse(localStorage.getItem(`quicktodo-custom-${e}`)||"[]"),a=i.every((e,s)=>!0===t[s]),n=s.every((e,s)=>!0===t[`c${s}`]);r=a&&n}}}else{const e=formatLocalISO(normalizeToLocalMidnight(t)),a=JSON.parse(localStorage.getItem(`quicktodo-custom-${e}`)||"[]");if(a.length>0){s=!0;const t=JSON.parse(localStorage.getItem(`quicktodo-${e}`)||"{}");r=a.every((e,s)=>!0===t[`c${s}`])}}}catch{s=!1,r=!1}p.push({date:t,hasTasks:s,allCompleted:r})}return jsxRuntimeExports.jsxs("div",{className:`rounded-xl border p-4 shadow-sm ${a.cardClassName}`,style:a.cardStyle,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("div",{className:"text-base font-medium",style:{color:a.textPrimary},children:d}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{"aria-label":"Previous",className:"rounded-md border px-3 py-1.5 text-sm transition",style:{borderColor:a.border,color:a.textSecondary,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=a.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",onClick:()=>o(e=>e-1),children:""}),jsxRuntimeExports.jsx("button",{"aria-label":"Next",className:"rounded-md border px-3 py-1.5 text-sm transition",style:{borderColor:a.border,color:a.textSecondary,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=a.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",onClick:()=>o(e=>e+1),children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 gap-2 text-sm mb-3 font-medium",style:{color:a.textSecondary},children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>jsxRuntimeExports.jsx("div",{className:"text-center",children:e},e))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[m.map(e=>jsxRuntimeExports.jsx("div",{className:"h-10"},`b${e}`)),p.map((e,r)=>{const i=normalizeToLocalMidnight(e.date),o=(l=e.date,t.getTime()===normalizeToLocalMidnight(l).getTime());var l;const c=(e=>n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate())(e.date);return jsxRuntimeExports.jsxs("button",{onClick:()=>s(i),className:"relative h-10 rounded-lg border text-sm transition",style:{backgroundColor:o?a.buttonPrimary:c&&!o?"glassmorphism"===a.theme.name?"rgba(255,255,255,0.2)":"dark"===a.theme.name?"rgba(255,255,255,0.1)":"minimalist"===a.theme.name?"#f9fafb":"rgba(255,255,255,0.6)":"glassmorphism"===a.theme.name||"dark"===a.theme.name?"rgba(255,255,255,0.05)":"minimalist"===a.theme.name?"#ffffff":"rgba(255,255,255,0.3)",borderColor:o?a.buttonPrimary:e.allCompleted?"#D4AF37":a.border,borderWidth:e.allCompleted?"2px":"1px",color:o?"white":e.hasTasks?a.textPrimary:a.textSecondary},onMouseEnter:e=>{o||(e.currentTarget.style.backgroundColor=a.hoverBg)},onMouseLeave:e=>{o||(e.currentTarget.style.backgroundColor=c&&!o?"glassmorphism"===a.theme.name?"rgba(255,255,255,0.2)":"dark"===a.theme.name?"rgba(255,255,255,0.1)":"minimalist"===a.theme.name?"#f9fafb":"rgba(255,255,255,0.6)":"glassmorphism"===a.theme.name||"dark"===a.theme.name?"rgba(255,255,255,0.05)":"minimalist"===a.theme.name?"#ffffff":"rgba(255,255,255,0.3)")},children:[jsxRuntimeExports.jsx("span",{className:"relative z-10",children:e.date.getDate()}),e.allCompleted&&jsxRuntimeExports.jsx("div",{className:"absolute top-0.5 right-0.5 text-[10px] z-10",children:""}),!e.allCompleted&&e.hasTasks&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 h-1.5 w-1.5 rounded-full bg-current"})]},r)})]})]})},Dashboard$1=()=>{const e=useNavigate(),[t,s]=useSearchParams(),{t:r}=useTranslation(),{user:a,profile:n,refreshProfile:i,loading:o}=useAuth(),{toast:l}=useToast(),c=useThemeStyles(),[d,u]=reactExports.useState("IELTS"),[m,p]=reactExports.useState("reading"),[h,x]=reactExports.useState(null),[f,g]=reactExports.useState([]),[y,v]=reactExports.useState(!0),[E,b]=reactExports.useState(0);reactExports.useState("overview");const[j,R]=reactExports.useState(null),[_,w]=reactExports.useState(0),[S,T]=reactExports.useState(!1),[P,C]=reactExports.useState(!1),[k,A]=reactExports.useState(!1),[N,I]=reactExports.useState({}),M=e=>{if(null==a?void 0:a.id)try{e?localStorage.setItem(`nickname_${a.id}`,JSON.stringify({nickname:e,timestamp:Date.now()})):localStorage.removeItem(`nickname_${a.id}`)}catch(t){}},D=[{id:"reading",label:"R",fullLabel:r("skills.reading"),icon:BookOpen},{id:"listening",label:"L",fullLabel:r("skills.listening"),icon:Volume2},{id:"writing",label:"W",fullLabel:r("skills.writing"),icon:PenTool},{id:"speaking",label:"S",fullLabel:r("skills.speaking"),icon:MessageSquare}],L=async(e=0)=>{var t,s,r,n,i,o,l,c,d,m,p,h;if(!a)return;try{const{data:l,error:c}=await supabase.from("user_preferences").select("*").eq("user_id",a.id).maybeSingle();if(c){const a=(null==(t=c.message)?void 0:t.includes("ERR_CONNECTION_CLOSED"))||(null==(s=c.message)?void 0:s.includes("Failed to fetch"))||(null==(r=c.message)?void 0:r.includes("NetworkError"));"PGRST204"===c.code||"42703"===c.code||"42P01"===c.code||(null==(n=c.message)?void 0:n.toLowerCase().includes("column"))||(null==(i=c.message)?void 0:i.toLowerCase().includes("does not exist"))||(null==(o=c.message)||o.toLowerCase().includes("bad request"));if(a&&e<1)return await new Promise(e=>setTimeout(e,2e3)),L(e+1);0,R(null)}else l?(R(l),u(l.target_test_type||"IELTS"),w(e=>e+1),l.preferred_name&&M(l.preferred_name)):(R(null),M(null))}catch(x){const t=(null==(l=null==x?void 0:x.message)?void 0:l.includes("ERR_CONNECTION_CLOSED"))||(null==(c=null==x?void 0:x.message)?void 0:c.includes("Failed to fetch"))||(null==(d=null==x?void 0:x.message)?void 0:d.includes("NetworkError"));"PGRST204"===(null==x?void 0:x.code)||"42703"===(null==x?void 0:x.code)||"42P01"===(null==x?void 0:x.code)||(null==(m=null==x?void 0:x.message)?void 0:m.toLowerCase().includes("column"))||(null==(p=null==x?void 0:x.message)?void 0:p.toLowerCase().includes("does not exist"))||(null==(h=null==x?void 0:x.message)||h.toLowerCase().includes("bad request"));if(t&&e<1)return await new Promise(e=>setTimeout(e,2e3)),L(e+1);0,R(null)}};reactExports.useEffect(()=>{if(!a||o||y)return;"required"===t.get("setup")&&(console.log(" Settings setup explicitly required, opening settings modal"),C(!0),s({},{replace:!0}),l({title:"Welcome! Complete your profile",description:"Please set up your preferences to get started.",duration:5e3}))},[a,o,y,t,s,l]),reactExports.useEffect(()=>{if(!a||o||y||k)return;const e=`settings_seen_${a.id}`,t="true"===localStorage.getItem(e);t?A(!0):j||t||(C(!0),localStorage.setItem(e,"true"),A(!0))},[a,o,y,j,k]),reactExports.useEffect(()=>{let e=!0,t=0;const s=new Image;s.onload=()=>T(!0),s.src="/lovable-uploads/5d9b151b-eb54-41c3-a578-e70139faa878.png";const r=async()=>{var s,n;if(a)try{await L();const{data:e,error:t}=await supabase.from("test_results").select("id, test_type, score_percentage, created_at, user_id").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(10);t&&console.warn("Error fetching test results:",t);const{data:r,error:i}=await supabase.from("reading_test_results").select("id, comprehension_score, created_at, reading_time_seconds, user_id").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(10);i&&console.warn("Error fetching reading results:",i);const{data:o}=await supabase.from("writing_test_results").select("id, created_at, task_number, band_scores, user_id, test_result_id").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(10),l=[...e||[]];if(r&&r.forEach(e=>{l.push({id:e.id,user_id:e.user_id,test_type:"reading",score_percentage:Math.round(100*e.comprehension_score),created_at:e.created_at,test_data:{readingResult:e},section_number:null,total_questions:40,correct_answers:Math.floor(40*(e.comprehension_score||0)),time_taken:e.reading_time_seconds,completed_at:e.created_at,audio_retention_expires_at:null,detailed_feedback:null,question_analysis:null,performance_metrics:null,skill_breakdown:null})}),o){const e={};o.forEach(t=>{var s;const r=t.test_result_id||(null==(s=t.created_at)?void 0:s.split("T")[0])||"standalone";e[r]||(e[r]=[]),e[r].push(t)}),Object.entries(e).forEach(([e,t])=>{if("standalone"!==e&&l.some(t=>t.id===e))return;const s=t.find(e=>1===e.task_number),r=t.find(e=>2===e.task_number);let n=70;if(s&&r){const e=e=>{if(e.band_scores&&"object"==typeof e.band_scores){const t=Object.values(e.band_scores).filter(e=>"number"==typeof e);if(t.length>0)return t.reduce((e,t)=>e+t,0)/t.length}return 7},t=(1*e(s)+2*e(r))/3;n=Math.round(10*t)}l.push({id:"standalone"===e?`writing-${Date.now()}`:e,user_id:a.id,test_type:"writing",score_percentage:n,created_at:t[0].created_at,test_data:{writingResults:t},section_number:null,total_questions:t.length,correct_answers:null,time_taken:null,completed_at:t[0].created_at,audio_retention_expires_at:null,detailed_feedback:null,question_analysis:null,performance_metrics:null,skill_breakdown:null})})}l.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),g(l);const c=l.length,d=l.length>0?l.reduce((e,t)=>e+(t.score_percentage||0),0)/l.length:0;x({totalTests:c,avgScore:Math.round(d),recentImprovement:c>1?Math.round(((null==(s=l[0])?void 0:s.score_percentage)||0)-((null==(n=l[1])?void 0:n.score_percentage)||0)):0,weeklyProgress:15})}catch(i){if(console.error("Error fetching user data:",i),e&&t<2&&(t++,console.log(` Retrying dashboard data fetch (attempt ${t}/2)...`),await new Promise(e=>setTimeout(e,1e3*Math.pow(2,t))),e))return r()}finally{e&&v(!1)}else v(!1)};return r(),F(),()=>{e=!1}},[a]);const F=async()=>{if(a)try{const{count:e,error:t}=await supabase.from("user_vocabulary").select("id",{count:"exact",head:!0}).eq("user_id",a.id);if(t)return void console.warn("Error loading vocabulary count:",t);b(e||0)}catch(e){console.error("Error loading vocabulary count:",e)}},O=e=>e>=95?"9.0":e>=90?"8.5":e>=85?"8.0":e>=80?"7.5":e>=75?"7.0":e>=70?"6.5":e>=65?"6.0":e>=60?"5.5":e>=55?"5.0":e>=50?"4.5":e>=45?"4.0":e>=40?"3.5":e>=35?"3.0":e>=30?"2.5":e>=25?"2.0":e>=20?"1.5":"1.0";if(o)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoadingAnimation,{})});if(!a)return jsxRuntimeExports.jsx(Navigate,{to:"/auth",replace:!0});if(y)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoadingAnimation,{})});const B="dark"===c.theme.name?c.theme.colors.background:"transparent";return jsxRuntimeExports.jsxs("div",{className:"h-screen relative overflow-hidden",style:{backgroundColor:B},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-contain bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"note"===c.theme.name||"minimalist"===c.theme.name||"dark"===c.theme.name?"none":"url('/lovable-uploads/5d9b151b-eb54-41c3-a578-e70139faa878.png')",backgroundColor:c.backgroundImageColor}}),jsxRuntimeExports.jsx("div",{className:"relative z-10 h-full w-full flex flex-col",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full overflow-y-auto border backdrop-blur-xl",style:{backgroundColor:c.backgroundOverlay,borderColor:"glassmorphism"===c.theme.name?"rgba(255, 255, 255, 0.3)":c.border+"40",backdropFilter:"glassmorphism"===c.theme.name?"blur(12px)":"dark"===c.theme.name?"blur(8px)":"none"},children:[jsxRuntimeExports.jsxs("header",{className:"flex flex-col lg:flex-row sm:px-6 lg:px-12 lg:py-5 pt-4 pr-4 pb-4 pl-4 items-center justify-between border-b gap-4 lg:gap-0",style:{borderColor:"glassmorphism"===c.theme.name?"rgba(255, 255, 255, 0.2)":c.border+"60"},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 order-3 lg:order-1"}),jsxRuntimeExports.jsxs("nav",{className:"flex items-center gap-4 lg:gap-6 text-sm font-medium order-1 lg:order-2 flex-wrap justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>e("/dashboard/my-word-book"),className:"transition whitespace-nowrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textSecondary},onMouseEnter:e=>e.currentTarget.style.color=c.buttonPrimary,onMouseLeave:e=>e.currentTarget.style.color=c.textSecondary,children:r("dashboard.myWordBook")}),jsxRuntimeExports.jsx("button",{onClick:()=>{e({IELTS:"/ielts-portal",PTE:"/pte-portal",TOEFL:"/toefl-portal",TOEIC:"/toeic-portal",Business:"/business-portal",NCLEX:"/nclex-portal",GENERAL:"/general-portal"}[d]||"/ielts-portal")},className:"transition whitespace-nowrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textSecondary},onMouseEnter:e=>e.currentTarget.style.color=c.buttonPrimary,onMouseLeave:e=>e.currentTarget.style.color=c.textSecondary,children:r("dashboard.tests")}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/hero"),className:"transition whitespace-nowrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textSecondary},onMouseEnter:e=>e.currentTarget.style.color=c.buttonPrimary,onMouseLeave:e=>e.currentTarget.style.color=c.textSecondary,children:r("dashboard.home")}),jsxRuntimeExports.jsx("button",{onClick:()=>e("/community"),className:"transition whitespace-nowrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textSecondary},onMouseEnter:e=>e.currentTarget.style.color=c.buttonPrimary,onMouseLeave:e=>e.currentTarget.style.color=c.textSecondary,children:r("navigation.community")})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 lg:gap-3 order-2 lg:order-3 relative z-50",children:jsxRuntimeExports.jsx(SettingsModal,{open:P,onOpenChange:C,onSettingsChange:()=>{L(),i(),w(e=>e+1),C(!1)},children:jsxRuntimeExports.jsxs("button",{className:"group w-8 h-8 lg:w-9 lg:h-9 rounded-full bg-slate-800/80 backdrop-blur-sm flex items-center justify-center border border-white/20 overflow-hidden hover:border-blue-400/50 transition-all duration-200 hover:scale-105",title:r("dashboard.clickToOpenSettings"),children:[(null==n?void 0:n.avatar_url)?jsxRuntimeExports.jsx("img",{src:n.avatar_url,alt:"Profile",className:"w-full h-full object-cover group-hover:opacity-80 transition-opacity"}):jsxRuntimeExports.jsx(User,{className:"w-4 h-4 text-white group-hover:text-blue-300 transition-colors"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Settings,{className:"w-3 h-3 text-white"})})]})})})]}),jsxRuntimeExports.jsx("main",{className:"relative flex-1 overflow-y-auto sm:px-6 lg:px-12 pr-4 pb-4 pl-4",children:jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 lg:gap-8 pt-3 lg:pt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[jsxRuntimeExports.jsx("div",{className:"space-y-3",children:jsxRuntimeExports.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl tracking-tight font-semibold flex-shrink-0",style:{fontFamily:'Comfortaa, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, cursive, sans-serif',color:c.textPrimary},children:r("dashboard.helloUser",{name:(()=>{const e=(()=>{if(!(null==a?void 0:a.id))return null;try{const e=localStorage.getItem(`nickname_${a.id}`);if(e){const{nickname:t,timestamp:s}=JSON.parse(e);if(Date.now()-s<864e5)return t}}catch(e){}return null})();return e||((null==j?void 0:j.preferred_name)?j.preferred_name:(null==n?void 0:n.full_name)?n.full_name.split(" ")[0]:"Learner")})()})})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-2 lg:gap-3 flex-shrink-0",children:D.map(e=>{const t=m===e.id;return jsxRuntimeExports.jsx("button",{onClick:()=>p(e.id),className:"flex flex-col items-center justify-center gap-2 p-2 lg:p-3 rounded-xl border transition-all min-h-[60px] "+(t?c.cardClassName+" shadow-md":"bg-white/40 border-gray-200 hover:bg-gray-50"),style:{...t?c.cardStyle:{},borderColor:c.border},children:jsxRuntimeExports.jsx("span",{className:"text-xs lg:text-sm font-medium text-center leading-tight px-1",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',color:t?c.textPrimary:c.textSecondary},children:e.fullLabel})},e.id)})}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",style:{height:"400px"},children:jsxRuntimeExports.jsx(TestResultsChart,{selectedSkill:m,selectedTestType:d},_)}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 mt-4",children:jsxRuntimeExports.jsx(StudyPlanTodoList,{})})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full",children:jsxRuntimeExports.jsxs("div",{className:"grid xl:grid-cols-1 h-full pt-12 sm:pt-16 lg:pt-20",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col flex-1 justify-start gap-4",children:D.map(t=>{const s=f.filter(e=>"writing"===t.id?"writing"===e.test_type:e.test_type&&e.test_type.toLowerCase().includes(t.id.toLowerCase())).slice(0,3),a=s.length>0?Math.round(s.reduce((e,t)=>e+(t.score_percentage||0),0)/s.length):0;"writing"===t.id||t.id;const n=((e,t,s)=>{var r;if(t.length>0)return{testsTaken:t.length,avgDisplay:O(s),latestDisplay:O((null==(r=t[0])?void 0:r.score_percentage)||0)};const a=N[e];return{testsTaken:(null==a?void 0:a.tests)??0,avgDisplay:O((null==a?void 0:a.avg)??0),latestDisplay:O((null==a?void 0:a.latest)??0)}})(t.id,s,a);return jsxRuntimeExports.jsxs("div",{className:`relative lg:p-6 ${c.cardClassName} rounded-xl pt-4 pr-4 pb-4 pl-4 min-h-[190px] flex flex-col transition-all hover:shadow-md`,style:c.cardStyle,children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm lg:text-base tracking-tight font-normal text-center",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textPrimary},children:t.fullLabel}),jsxRuntimeExports.jsx(History,{onClick:s=>{var r;s.stopPropagation(),r=t.id,e({reading:"/reading-results",writing:"/ielts-writing-results",speaking:"/ielts-speaking-results",listening:"/listening-results"}[r]||"/personal")},className:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 cursor-pointer transition-colors",style:{color:c.textSecondary},onMouseEnter:e=>e.currentTarget.style.color=c.textPrimary,onMouseLeave:e=>e.currentTarget.style.color=c.textSecondary,"aria-label":r("dashboard.viewHistory")})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex flex-col justify-center",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-normal mb-1",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textSecondary},children:r("dashboard.testsTaken")}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl font-medium mt-2",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textPrimary},children:n.testsTaken})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-normal mb-1",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textSecondary},children:r("dashboard.averageScore")}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl font-medium mt-2",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textPrimary},children:n.avgDisplay})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-normal mb-1",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textSecondary},children:r("dashboard.latestScore")}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl font-medium mt-2",style:{fontFamily:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',color:c.textPrimary},children:n.latestDisplay})]})]})})]},t.id)})}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mt-4",children:jsxRuntimeExports.jsx("button",{className:"text-xs font-medium underline",style:{color:c.buttonPrimary},onClick:()=>{const e={};D.forEach(t=>{e[t.id]={tests:Math.floor(5*Math.random())+1,avg:Math.floor(50*Math.random())+50,latest:Math.floor(50*Math.random())+50}}),I(t=>({...t,...e}))},children:r("dashboard.generateMockNumbers")})})]})})]})})]})})]})},Dashboard$2=Object.freeze(Object.defineProperty({__proto__:null,default:Dashboard$1},Symbol.toStringTag,{value:"Module"})),Index=()=>{const{user:e,loading:t}=useAuth();return t?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-primary flex items-center justify-center",children:jsxRuntimeExports.jsx(LottieLoadingAnimation,{size:"lg"})}):e?jsxRuntimeExports.jsx(Dashboard$1,{}):jsxRuntimeExports.jsx(HeroIndex,{})},Reading=()=>{const e=useNavigate(),{toast:t}=useToast(),[s,r]=reactExports.useState(3600),[a,n]=reactExports.useState(null),[i,o]=reactExports.useState([]),[l,c]=reactExports.useState({}),[d,u]=reactExports.useState(!0);reactExports.useEffect(()=>{m()},[]),reactExports.useEffect(()=>{const e=setInterval(()=>{r(e=>e<=1?(h(),0):e-1)},1e3);return()=>clearInterval(e)},[]);const m=async()=>{try{u(!1);n({id:"placeholder",title:"Reading Test Coming Soon",content:"Reading tests are being updated to the new system. Please check back soon!",passage_type:"placeholder"}),o([])}catch(e){t({title:"Error",description:"Failed to load reading test: "+e.message,variant:"destructive"})}finally{u(!1)}},p=(e,t)=>{c(s=>({...s,[e]:t}))},h=()=>{const s=x();t({title:"Test Submitted!",description:`You answered ${s}/${i.length} questions correctly.`}),e("/")},x=()=>i.reduce((e,t)=>l[t.id]===t.correct_answer?e+1:e,0),f={title:"IELTS Reading Practice Test Online | Timed Passages & Answers",description:"Train for IELTS Reading with realistic passages, question types, and countdown timers. Track accuracy and build scanning strategies in one dashboard.",keywords:"IELTS reading practice, IELTS reading mock test, reading passage PDF, IELTS skimming scanning tips, IELTS multiple choice practice",type:"article",schemaType:"faq",url:"https://englishaidol.com/reading",faqs:[{question:"What IELTS reading question types can I practice here?",answer:"You can work through matching headings, True/False/Not Given, multiple choice, and summary completion question sets, mirroring the official exam format."},{question:"Do I get a timer like the real IELTS Reading section?",answer:"Yes. A built-in one-hour timer keeps you on pace, then we calculate accuracy so you can see if you are meeting your target band score."}]};return d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SEO,{...f}),jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{children:"Loading reading test..."})]})})]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background",children:[jsxRuntimeExports.jsx(SEO,{...f}),jsxRuntimeExports.jsx("div",{className:"bg-white border-b-2 border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:()=>e("/"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4"}),"Back to Dashboard"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-lg",children:"IELTS Reading Test"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-orange-100 px-3 py-1 rounded-lg",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4 text-orange-600"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-orange-600 font-medium",children:(e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60),r=e%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})(s)})]}),jsxRuntimeExports.jsx(Button$1,{onClick:h,className:"bg-blue-600 hover:bg-blue-700",children:"Submit Test"})]})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto p-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5"}),null==a?void 0:a.title]}),jsxRuntimeExports.jsxs(CardDescription,{children:["Type: ",null==a?void 0:a.passage_type]})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"prose max-w-none text-sm leading-relaxed",children:null==a?void 0:a.content.split("\n\n").map((e,t)=>jsxRuntimeExports.jsx("p",{className:"mb-4",children:e},t))})})]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{children:["Questions (",i.length,")"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Read the passage and answer all questions"})]}),jsxRuntimeExports.jsx(CardContent,{className:"space-y-6",children:i.map(e=>jsxRuntimeExports.jsxs("div",{className:"border-b pb-4 last:border-b-0",children:[jsxRuntimeExports.jsxs("p",{className:"font-medium mb-3",children:[e.question_number,". ",e.question_text]}),"multiple_choice"===e.question_type&&e.options?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:e.options.map((t,s)=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:`question_${e.id}`,value:t,checked:l[e.id]===t,onChange:t=>p(e.id,t.target.value),className:"text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:t})]},s))}):jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Type your answer here",value:l[e.id]||"",onChange:t=>p(e.id,t.target.value),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]},e.id))})]})})]})})]})},RadioGroup=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Root2$3,{className:cn("grid gap-2",e),...t,ref:s}));RadioGroup.displayName=Root2$3.displayName;const RadioGroupItem=reactExports.forwardRef(({className:e,...t},s)=>jsxRuntimeExports.jsx(Item2,{ref:s,className:cn("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:jsxRuntimeExports.jsx(Indicator,{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));RadioGroupItem.displayName=Item2.displayName;const StudentLayout=({children:e,title:t,showBackButton:s=!1,backPath:r,transparentBackground:a=!1,fullWidth:n=!1,noPadding:i=!1})=>(useNavigate(),jsxRuntimeExports.jsx("div",{className:"min-h-screen "+(a?"bg-transparent":"bg-gradient-to-br from-slate-100 via-blue-50/30 to-indigo-100/50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 dark:opacity-95"),style:a?{}:{backgroundImage:"radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.08) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 50%), radial-gradient(circle at 40% 40%, rgba(59, 130, 246, 0.03) 0%, transparent 50%)"},children:jsxRuntimeExports.jsx("main",{className:`${n?"w-full":"container mx-auto px-6"} ${i?"":"py-8"}`,children:e})})),getListeningBandScore=e=>e>=39?9:e>=37?8.5:e>=35?8:e>=32?7.5:e>=30?7:e>=26?6.5:e>=23?6:e>=18?5.5:e>=16?5:e>=13?4.5:e>=10?4:e>=8?3.5:e>=6?3:e>=4?2.5:e>=2?2:e>=1?1:0,getAcademicReadingBandScore=e=>e>=39?9:e>=37?8.5:e>=35?8:e>=33?7.5:e>=30?7:e>=27?6.5:e>=23?6:e>=19?5.5:e>=15?5:e>=13?4.5:e>=10?4:e>=8?3.5:e>=6?3:e>=4?2.5:e>=2?2:e>=1?1:0,getGeneralReadingBandScore=e=>e>=40?9:e>=39?8.5:e>=37?8:e>=36?7.5:e>=34?7:e>=32?6.5:e>=30?6:e>=27?5.5:e>=23?5:e>=19?4.5:e>=15?4:e>=12?3.5:e>=9?3:e>=6?2.5:e>=4?2:e>=2?1.5:e>=1?1:0,getBandScore=(e,t="academic-reading")=>{switch(t){case"listening":return getListeningBandScore(e);case"academic-reading":default:return getAcademicReadingBandScore(e);case"general-reading":return getGeneralReadingBandScore(e)}},Progress=reactExports.forwardRef(({className:e,value:t,...s},r)=>jsxRuntimeExports.jsx(Root$3,{ref:r,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:jsxRuntimeExports.jsx(Indicator$1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function length(e){let t=e[0],s=e[1],r=e[2];return Math.sqrt(t*t+s*s+r*r)}function copy$4(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function set$4(e,t,s,r){return e[0]=t,e[1]=s,e[2]=r,e}function add$1(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e}function subtract$1(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e}function multiply$3(e,t,s){return e[0]=t[0]*s[0],e[1]=t[1]*s[1],e[2]=t[2]*s[2],e}function divide(e,t,s){return e[0]=t[0]/s[0],e[1]=t[1]/s[1],e[2]=t[2]/s[2],e}function scale$2(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function distance(e,t){let s=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(s*s+r*r+a*a)}function squaredDistance(e,t){let s=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return s*s+r*r+a*a}function squaredLength(e){let t=e[0],s=e[1],r=e[2];return t*t+s*s+r*r}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function inverse(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function normalize$2(e,t){let s=t[0],r=t[1],a=t[2],n=s*s+r*r+a*a;return n>0&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function dot$2(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cross(e,t,s){let r=t[0],a=t[1],n=t[2],i=s[0],o=s[1],l=s[2];return e[0]=a*l-n*o,e[1]=n*i-r*l,e[2]=r*o-a*i,e}function lerp(e,t,s,r){let a=t[0],n=t[1],i=t[2];return e[0]=a+r*(s[0]-a),e[1]=n+r*(s[1]-n),e[2]=i+r*(s[2]-i),e}function smoothLerp(e,t,s,r,a){const n=Math.exp(-r*a);let i=t[0],o=t[1],l=t[2];return e[0]=s[0]+(i-s[0])*n,e[1]=s[1]+(o-s[1])*n,e[2]=s[2]+(l-s[2])*n,e}function transformMat4(e,t,s){let r=t[0],a=t[1],n=t[2],i=s[3]*r+s[7]*a+s[11]*n+s[15];return i=i||1,e[0]=(s[0]*r+s[4]*a+s[8]*n+s[12])/i,e[1]=(s[1]*r+s[5]*a+s[9]*n+s[13])/i,e[2]=(s[2]*r+s[6]*a+s[10]*n+s[14])/i,e}function scaleRotateMat4(e,t,s){let r=t[0],a=t[1],n=t[2],i=s[3]*r+s[7]*a+s[11]*n+s[15];return i=i||1,e[0]=(s[0]*r+s[4]*a+s[8]*n)/i,e[1]=(s[1]*r+s[5]*a+s[9]*n)/i,e[2]=(s[2]*r+s[6]*a+s[10]*n)/i,e}function transformMat3(e,t,s){let r=t[0],a=t[1],n=t[2];return e[0]=r*s[0]+a*s[3]+n*s[6],e[1]=r*s[1]+a*s[4]+n*s[7],e[2]=r*s[2]+a*s[5]+n*s[8],e}function transformQuat(e,t,s){let r=t[0],a=t[1],n=t[2],i=s[0],o=s[1],l=s[2],c=o*n-l*a,d=l*r-i*n,u=i*a-o*r,m=o*u-l*d,p=l*c-i*u,h=i*d-o*c,x=2*s[3];return c*=x,d*=x,u*=x,m*=2,p*=2,h*=2,e[0]=r+c+m,e[1]=a+d+p,e[2]=n+u+h,e}Progress.displayName=Root$3.displayName;const angle=function(){const e=[0,0,0],t=[0,0,0];return function(s,r){copy$4(e,s),copy$4(t,r),normalize$2(e,e),normalize$2(t,t);let a=dot$2(e,t);return a>1?0:a<-1?Math.PI:Math.acos(a)}}();function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}class Vec3 extends Array{constructor(e=0,t=e,s=e){return super(e,t,s),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,s=e){return e.length?this.copy(e):(set$4(this,e,t,s),this)}copy(e){return copy$4(this,e),this}add(e,t){return t?add$1(this,e,t):add$1(this,this,e),this}sub(e,t){return t?subtract$1(this,e,t):subtract$1(this,this,e),this}multiply(e){return e.length?multiply$3(this,this,e):scale$2(this,this,e),this}divide(e){return e.length?divide(this,this,e):scale$2(this,this,1/e),this}inverse(e=this){return inverse(this,e),this}len(){return length(this)}distance(e){return e?distance(this,e):length(this)}squaredLen(){return squaredLength(this)}squaredDistance(e){return e?squaredDistance(this,e):squaredLength(this)}negate(e=this){return negate(this,e),this}cross(e,t){return t?cross(this,e,t):cross(this,this,e),this}scale(e){return scale$2(this,this,e),this}normalize(){return normalize$2(this,this),this}dot(e){return dot$2(this,e)}equals(e){return exactEquals(this,e)}applyMatrix3(e){return transformMat3(this,this,e),this}applyMatrix4(e){return transformMat4(this,this,e),this}scaleRotateMatrix4(e){return scaleRotateMat4(this,this,e),this}applyQuaternion(e){return transformQuat(this,this,e),this}angle(e){return angle(this,e)}lerp(e,t){return lerp(this,this,e,t),this}smoothLerp(e,t,s){return smoothLerp(this,this,e,t,s),this}clone(){return new Vec3(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],s=this[1],r=this[2];return this[0]=e[0]*t+e[4]*s+e[8]*r,this[1]=e[1]*t+e[5]*s+e[9]*r,this[2]=e[2]*t+e[6]*s+e[10]*r,this.normalize()}}const tempVec3$1=new Vec3;let ID$3=1,ATTR_ID=1,isBoundsWarned=!1;class Geometry{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=ID$3++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let s in t)this.addAttribute(s,t[s])}addAttribute(e,t){if(this.attributes[e]=t,t.id=ATTR_ID++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else"index"===e?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((e,{name:t,type:s})=>{if(!this.attributes[t])return void console.warn(`active attribute ${t} not being supplied`);const r=this.attributes[t];this.gl.bindBuffer(r.target,r.buffer),this.glState.boundBuffer=r.buffer;let a=1;35674===s&&(a=2),35675===s&&(a=3),35676===s&&(a=4);const n=r.size/a,i=1===a?0:a*a*4,o=1===a?0:4*a;for(let l=0;l<a;l++)this.gl.vertexAttribPointer(e+l,n,r.type,r.normalized,r.stride+i,r.offset+l*o),this.gl.enableVertexAttribArray(e+l),this.gl.renderer.vertexAttribDivisor(e+l,r.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((e,{name:t})=>{const s=this.attributes[t];s.needsUpdate&&this.updateAttribute(s)});let r=2;(null==(s=this.attributes.index)?void 0:s.type)===this.gl.UNSIGNED_INT&&(r=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;return e.data?e:isBoundsWarned?void 0:(console.warn("No position buffer data found to compute bounds"),isBoundsWarned=!0)}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,s=e.size;this.bounds||(this.bounds={min:new Vec3,max:new Vec3,center:new Vec3,scale:new Vec3,radius:1/0});const r=this.bounds.min,a=this.bounds.max,n=this.bounds.center,i=this.bounds.scale;r.set(1/0),a.set(-1/0);for(let o=0,l=t.length;o<l;o+=s){const e=t[o],s=t[o+1],n=t[o+2];r.x=Math.min(e,r.x),r.y=Math.min(s,r.y),r.z=Math.min(n,r.z),a.x=Math.max(e,a.x),a.y=Math.max(s,a.y),a.z=Math.max(n,a.z)}i.sub(a,r),n.add(r,a).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,s=e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let a=0,n=t.length;a<n;a+=s)tempVec3$1.fromArray(t,a),r=Math.max(r,this.bounds.center.squaredDistance(tempVec3$1));this.bounds.radius=Math.sqrt(r)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let ID$2=1;const arrayCacheF32={};class Program{constructor(e,{vertex:t,fragment:s,uniforms:r={},transparent:a=!1,cullFace:n=e.BACK,frontFace:i=e.CCW,depthTest:o=!0,depthWrite:l=!0,depthFunc:c=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=r,this.id=ID$2++,t||console.warn("vertex shader not supplied"),s||console.warn("fragment shader not supplied"),this.transparent=a,this.cullFace=n,this.frontFace=i,this.depthTest=o,this.depthWrite=l,this.depthFunc=c,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:s})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),""!==this.gl.getShaderInfoLog(this.vertexShader)&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}\nVertex Shader\n${addLineNumbers(e)}`)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),""!==this.gl.getShaderInfoLog(this.fragmentShader)&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}\nFragment Shader\n${addLineNumbers(t)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){let e=this.gl.getActiveUniform(this.program,n);this.uniformLocations.set(e,this.gl.getUniformLocation(this.program,e.name));const t=e.name.match(/(\w+)/g);e.uniformName=t[0],e.nameComponents=t.slice(1)}this.attributeLocations=new Map;const r=[],a=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let n=0;n<a;n++){const e=this.gl.getActiveAttrib(this.program,n),t=this.gl.getAttribLocation(this.program,e.name);-1!==t&&(r[t]=e.name,this.attributeLocations.set(e,t))}this.attributeOrder=r.join("")}setBlendFunc(e,t,s,r){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=s,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,s){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=s}setStencilOp(e,t,s){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=s}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((e,s)=>{let r=this.uniforms[s.uniformName];for(const t of s.nameComponents){if(!r)break;if(!(t in r)){if(Array.isArray(r.value))break;r=void 0;break}r=r[t]}if(!r)return warn(`Active uniform ${s.name} has not been supplied`);if(r&&void 0===r.value)return warn(`${s.name} uniform is missing a value parameter`);if(r.value.texture)return t+=1,r.value.update(t),setUniform(this.gl,s.type,e,t);if(r.value.length&&r.value[0].texture){const a=[];return r.value.forEach(e=>{t+=1,e.update(t),a.push(t)}),setUniform(this.gl,s.type,e,a)}setUniform(this.gl,s.type,e,r.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function setUniform(e,t,s,r){r=r.length?flatten(r):r;const a=e.renderer.state.uniformLocations.get(s);if(r.length)if(void 0===a||a.length!==r.length)e.renderer.state.uniformLocations.set(s,r.slice(0));else{if(arraysEqual(a,r))return;a.set?a.set(r):setArray(a,r),e.renderer.state.uniformLocations.set(s,a)}else{if(a===r)return;e.renderer.state.uniformLocations.set(s,r)}switch(t){case 5126:return r.length?e.uniform1fv(s,r):e.uniform1f(s,r);case 35664:return e.uniform2fv(s,r);case 35665:return e.uniform3fv(s,r);case 35666:return e.uniform4fv(s,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(s,r):e.uniform1i(s,r);case 35671:case 35667:return e.uniform2iv(s,r);case 35672:case 35668:return e.uniform3iv(s,r);case 35673:case 35669:return e.uniform4iv(s,r);case 35674:return e.uniformMatrix2fv(s,!1,r);case 35675:return e.uniformMatrix3fv(s,!1,r);case 35676:return e.uniformMatrix4fv(s,!1,r)}}function addLineNumbers(e){let t=e.split("\n");for(let s=0;s<t.length;s++)t[s]=s+1+": "+t[s];return t.join("\n")}function flatten(e){const t=e.length,s=e[0].length;if(void 0===s)return e;const r=t*s;let a=arrayCacheF32[r];a||(arrayCacheF32[r]=a=new Float32Array(r));for(let n=0;n<t;n++)a.set(e[n],n*s);return a}function arraysEqual(e,t){if(e.length!==t.length)return!1;for(let s=0,r=e.length;s<r;s++)if(e[s]!==t[s])return!1;return!0}function setArray(e,t){for(let s=0,r=e.length;s<r;s++)e[s]=t[s]}let warnCount=0;function warn(e){warnCount>100||(console.warn(e),warnCount++,warnCount>100&&console.warn("More than 100 program warnings - stopping logs."))}const tempVec3=new Vec3;let ID$1=1;class Renderer{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:s=150,dpr:r=1,alpha:a=!1,depth:n=!0,stencil:i=!1,antialias:o=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:c=!1,powerPreference:d="default",autoClear:u=!0,webgl:m=2}={}){const p={alpha:a,depth:n,stencil:i,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d};this.dpr=r,this.alpha=a,this.color=!0,this.depth=n,this.stencil=i,this.premultipliedAlpha=l,this.autoClear=u,this.id=ID$1++,2===m&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,s),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,s=0,r=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=s,this.state.viewport.y=r,this.gl.viewport(s,r,e,t))}setScissor(e,t,s=0,r=0){this.gl.scissor(s,r,e,t)}enable(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}disable(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,s,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===s&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=s,this.state.blendFunc.dstAlpha=r,void 0!==s?this.gl.blendFuncSeparate(e,t,s,r):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t||(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,void 0!==t?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,s){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===s||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=s||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,s||0))}setStencilOp(e,t,s){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===s||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=s,this.gl.stencilOp(e,t,s))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,s){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][s].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:s,sort:r}){let a=[];if(t&&s&&t.updateFrustum(),e.traverse(e=>{if(!e.visible)return!0;e.draw&&(s&&e.frustumCulled&&t&&!t.frustumIntersectsMesh(e)||a.push(e))}),r){const e=[],s=[],r=[];a.forEach(a=>{a.program.transparent?a.program.depthTest?s.push(a):r.push(a):e.push(a),a.zDepth=0,0===a.renderOrder&&a.program.depthTest&&t&&(a.worldMatrix.getTranslation(tempVec3),tempVec3.applyMatrix4(t.projectionViewMatrix),a.zDepth=tempVec3.z)}),e.sort(this.sortOpaque),s.sort(this.sortTransparent),r.sort(this.sortUI),a=e.concat(s,r)}return a}render({scene:e,camera:t,target:s=null,update:r=!0,sort:a=!0,frustumCull:n=!0,clear:i}){null===s?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(s),this.setViewport(s.width,s.height)),(i||this.autoClear&&!1!==i)&&(!this.depth||s&&!s.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!s||s.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&e.updateMatrixWorld(),t&&t.updateMatrixWorld();this.getRenderList({scene:e,camera:t,frustumCull:n,sort:a}).forEach(e=>{e.draw({camera:t})})}}function copy$3(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function set$3(e,t,s,r,a){return e[0]=t,e[1]=s,e[2]=r,e[3]=a,e}function normalize$1(e,t){let s=t[0],r=t[1],a=t[2],n=t[3],i=s*s+r*r+a*a+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=s*i,e[1]=r*i,e[2]=a*i,e[3]=n*i,e}function dot$1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function identity$2(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function setAxisAngle(e,t,s){s*=.5;let r=Math.sin(s);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(s),e}function multiply$2(e,t,s){let r=t[0],a=t[1],n=t[2],i=t[3],o=s[0],l=s[1],c=s[2],d=s[3];return e[0]=r*d+i*o+a*c-n*l,e[1]=a*d+i*l+n*o-r*c,e[2]=n*d+i*c+r*l-a*o,e[3]=i*d-r*o-a*l-n*c,e}function rotateX(e,t,s){s*=.5;let r=t[0],a=t[1],n=t[2],i=t[3],o=Math.sin(s),l=Math.cos(s);return e[0]=r*l+i*o,e[1]=a*l+n*o,e[2]=n*l-a*o,e[3]=i*l-r*o,e}function rotateY(e,t,s){s*=.5;let r=t[0],a=t[1],n=t[2],i=t[3],o=Math.sin(s),l=Math.cos(s);return e[0]=r*l-n*o,e[1]=a*l+i*o,e[2]=n*l+r*o,e[3]=i*l-a*o,e}function rotateZ(e,t,s){s*=.5;let r=t[0],a=t[1],n=t[2],i=t[3],o=Math.sin(s),l=Math.cos(s);return e[0]=r*l+a*o,e[1]=a*l-r*o,e[2]=n*l+i*o,e[3]=i*l-n*o,e}function slerp(e,t,s,r){let a,n,i,o,l,c=t[0],d=t[1],u=t[2],m=t[3],p=s[0],h=s[1],x=s[2],f=s[3];return n=c*p+d*h+u*x+m*f,n<0&&(n=-n,p=-p,h=-h,x=-x,f=-f),1-n>1e-6?(a=Math.acos(n),i=Math.sin(a),o=Math.sin((1-r)*a)/i,l=Math.sin(r*a)/i):(o=1-r,l=r),e[0]=o*c+l*p,e[1]=o*d+l*h,e[2]=o*u+l*x,e[3]=o*m+l*f,e}function invert$2(e,t){let s=t[0],r=t[1],a=t[2],n=t[3],i=s*s+r*r+a*a+n*n,o=i?1/i:0;return e[0]=-s*o,e[1]=-r*o,e[2]=-a*o,e[3]=n*o,e}function conjugate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function fromMat3(e,t){let s,r=t[0]+t[4]+t[8];if(r>0)s=Math.sqrt(r+1),e[3]=.5*s,s=.5/s,e[0]=(t[5]-t[7])*s,e[1]=(t[6]-t[2])*s,e[2]=(t[1]-t[3])*s;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);let a=(r+1)%3,n=(r+2)%3;s=Math.sqrt(t[3*r+r]-t[3*a+a]-t[3*n+n]+1),e[r]=.5*s,s=.5/s,e[3]=(t[3*a+n]-t[3*n+a])*s,e[a]=(t[3*a+r]+t[3*r+a])*s,e[n]=(t[3*n+r]+t[3*r+n])*s}return e}function fromEuler(e,t,s="YXZ"){let r=Math.sin(.5*t[0]),a=Math.cos(.5*t[0]),n=Math.sin(.5*t[1]),i=Math.cos(.5*t[1]),o=Math.sin(.5*t[2]),l=Math.cos(.5*t[2]);return"XYZ"===s?(e[0]=r*i*l+a*n*o,e[1]=a*n*l-r*i*o,e[2]=a*i*o+r*n*l,e[3]=a*i*l-r*n*o):"YXZ"===s?(e[0]=r*i*l+a*n*o,e[1]=a*n*l-r*i*o,e[2]=a*i*o-r*n*l,e[3]=a*i*l+r*n*o):"ZXY"===s?(e[0]=r*i*l-a*n*o,e[1]=a*n*l+r*i*o,e[2]=a*i*o+r*n*l,e[3]=a*i*l-r*n*o):"ZYX"===s?(e[0]=r*i*l-a*n*o,e[1]=a*n*l+r*i*o,e[2]=a*i*o-r*n*l,e[3]=a*i*l+r*n*o):"YZX"===s?(e[0]=r*i*l+a*n*o,e[1]=a*n*l+r*i*o,e[2]=a*i*o-r*n*l,e[3]=a*i*l-r*n*o):"XZY"===s&&(e[0]=r*i*l-a*n*o,e[1]=a*n*l-r*i*o,e[2]=a*i*o+r*n*l,e[3]=a*i*l+r*n*o),e}const copy$2=copy$3,set$2=set$3,dot=dot$1,normalize=normalize$1;class Quat extends Array{constructor(e=0,t=0,s=0,r=1){super(e,t,s,r),this.onChange=()=>{},this._target=this;const a=["0","1","2","3"];return new Proxy(this,{set(e,t){const s=Reflect.set(...arguments);return s&&a.includes(t)&&e.onChange(),s}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return identity$2(this._target),this.onChange(),this}set(e,t,s,r){return e.length?this.copy(e):(set$2(this._target,e,t,s,r),this.onChange(),this)}rotateX(e){return rotateX(this._target,this._target,e),this.onChange(),this}rotateY(e){return rotateY(this._target,this._target,e),this.onChange(),this}rotateZ(e){return rotateZ(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return invert$2(this._target,e),this.onChange(),this}conjugate(e=this._target){return conjugate(this._target,e),this.onChange(),this}copy(e){return copy$2(this._target,e),this.onChange(),this}normalize(e=this._target){return normalize(this._target,e),this.onChange(),this}multiply(e,t){return t?multiply$2(this._target,e,t):multiply$2(this._target,this._target,e),this.onChange(),this}dot(e){return dot(this._target,e)}fromMatrix3(e){return fromMat3(this._target,e),this.onChange(),this}fromEuler(e,t){return fromEuler(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return setAxisAngle(this._target,e,t),this.onChange(),this}slerp(e,t){return slerp(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const EPSILON=1e-6;function copy$1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function set$1(e,t,s,r,a,n,i,o,l,c,d,u,m,p,h,x,f){return e[0]=t,e[1]=s,e[2]=r,e[3]=a,e[4]=n,e[5]=i,e[6]=o,e[7]=l,e[8]=c,e[9]=d,e[10]=u,e[11]=m,e[12]=p,e[13]=h,e[14]=x,e[15]=f,e}function identity$1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function invert$1(e,t){let s=t[0],r=t[1],a=t[2],n=t[3],i=t[4],o=t[5],l=t[6],c=t[7],d=t[8],u=t[9],m=t[10],p=t[11],h=t[12],x=t[13],f=t[14],g=t[15],y=s*o-r*i,v=s*l-a*i,E=s*c-n*i,b=r*l-a*o,j=r*c-n*o,R=a*c-n*l,_=d*x-u*h,w=d*f-m*h,S=d*g-p*h,T=u*f-m*x,P=u*g-p*x,C=m*g-p*f,k=y*C-v*P+E*T+b*S-j*w+R*_;return k?(k=1/k,e[0]=(o*C-l*P+c*T)*k,e[1]=(a*P-r*C-n*T)*k,e[2]=(x*R-f*j+g*b)*k,e[3]=(m*j-u*R-p*b)*k,e[4]=(l*S-i*C-c*w)*k,e[5]=(s*C-a*S+n*w)*k,e[6]=(f*E-h*R-g*v)*k,e[7]=(d*R-m*E+p*v)*k,e[8]=(i*P-o*S+c*_)*k,e[9]=(r*S-s*P-n*_)*k,e[10]=(h*j-x*E+g*y)*k,e[11]=(u*E-d*j-p*y)*k,e[12]=(o*w-i*T-l*_)*k,e[13]=(s*T-r*w+a*_)*k,e[14]=(x*v-h*b-f*y)*k,e[15]=(d*b-u*v+m*y)*k,e):null}function determinant(e){let t=e[0],s=e[1],r=e[2],a=e[3],n=e[4],i=e[5],o=e[6],l=e[7],c=e[8],d=e[9],u=e[10],m=e[11],p=e[12],h=e[13],x=e[14],f=e[15];return(t*i-s*n)*(u*f-m*x)-(t*o-r*n)*(d*f-m*h)+(t*l-a*n)*(d*x-u*h)+(s*o-r*i)*(c*f-m*p)-(s*l-a*i)*(c*x-u*p)+(r*l-a*o)*(c*h-d*p)}function multiply$1(e,t,s){let r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],m=t[9],p=t[10],h=t[11],x=t[12],f=t[13],g=t[14],y=t[15],v=s[0],E=s[1],b=s[2],j=s[3];return e[0]=v*r+E*o+b*u+j*x,e[1]=v*a+E*l+b*m+j*f,e[2]=v*n+E*c+b*p+j*g,e[3]=v*i+E*d+b*h+j*y,v=s[4],E=s[5],b=s[6],j=s[7],e[4]=v*r+E*o+b*u+j*x,e[5]=v*a+E*l+b*m+j*f,e[6]=v*n+E*c+b*p+j*g,e[7]=v*i+E*d+b*h+j*y,v=s[8],E=s[9],b=s[10],j=s[11],e[8]=v*r+E*o+b*u+j*x,e[9]=v*a+E*l+b*m+j*f,e[10]=v*n+E*c+b*p+j*g,e[11]=v*i+E*d+b*h+j*y,v=s[12],E=s[13],b=s[14],j=s[15],e[12]=v*r+E*o+b*u+j*x,e[13]=v*a+E*l+b*m+j*f,e[14]=v*n+E*c+b*p+j*g,e[15]=v*i+E*d+b*h+j*y,e}function translate$1(e,t,s){let r,a,n,i,o,l,c,d,u,m,p,h,x=s[0],f=s[1],g=s[2];return t===e?(e[12]=t[0]*x+t[4]*f+t[8]*g+t[12],e[13]=t[1]*x+t[5]*f+t[9]*g+t[13],e[14]=t[2]*x+t[6]*f+t[10]*g+t[14],e[15]=t[3]*x+t[7]*f+t[11]*g+t[15]):(r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],m=t[9],p=t[10],h=t[11],e[0]=r,e[1]=a,e[2]=n,e[3]=i,e[4]=o,e[5]=l,e[6]=c,e[7]=d,e[8]=u,e[9]=m,e[10]=p,e[11]=h,e[12]=r*x+o*f+u*g+t[12],e[13]=a*x+l*f+m*g+t[13],e[14]=n*x+c*f+p*g+t[14],e[15]=i*x+d*f+h*g+t[15]),e}function scale$1(e,t,s){let r=s[0],a=s[1],n=s[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rotate$1(e,t,s,r){let a,n,i,o,l,c,d,u,m,p,h,x,f,g,y,v,E,b,j,R,_,w,S,T,P=r[0],C=r[1],k=r[2],A=Math.hypot(P,C,k);return Math.abs(A)<EPSILON?null:(A=1/A,P*=A,C*=A,k*=A,a=Math.sin(s),n=Math.cos(s),i=1-n,o=t[0],l=t[1],c=t[2],d=t[3],u=t[4],m=t[5],p=t[6],h=t[7],x=t[8],f=t[9],g=t[10],y=t[11],v=P*P*i+n,E=C*P*i+k*a,b=k*P*i-C*a,j=P*C*i-k*a,R=C*C*i+n,_=k*C*i+P*a,w=P*k*i+C*a,S=C*k*i-P*a,T=k*k*i+n,e[0]=o*v+u*E+x*b,e[1]=l*v+m*E+f*b,e[2]=c*v+p*E+g*b,e[3]=d*v+h*E+y*b,e[4]=o*j+u*R+x*_,e[5]=l*j+m*R+f*_,e[6]=c*j+p*R+g*_,e[7]=d*j+h*R+y*_,e[8]=o*w+u*S+x*T,e[9]=l*w+m*S+f*T,e[10]=c*w+p*S+g*T,e[11]=d*w+h*S+y*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function getTranslation(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function getScaling(e,t){let s=t[0],r=t[1],a=t[2],n=t[4],i=t[5],o=t[6],l=t[8],c=t[9],d=t[10];return e[0]=Math.hypot(s,r,a),e[1]=Math.hypot(n,i,o),e[2]=Math.hypot(l,c,d),e}function getMaxScaleOnAxis(e){let t=e[0],s=e[1],r=e[2],a=e[4],n=e[5],i=e[6],o=e[8],l=e[9],c=e[10];const d=t*t+s*s+r*r,u=a*a+n*n+i*i,m=o*o+l*l+c*c;return Math.sqrt(Math.max(d,u,m))}const getRotation=function(){const e=[1,1,1];return function(t,s){let r=e;getScaling(r,s);let a=1/r[0],n=1/r[1],i=1/r[2],o=s[0]*a,l=s[1]*n,c=s[2]*i,d=s[4]*a,u=s[5]*n,m=s[6]*i,p=s[8]*a,h=s[9]*n,x=s[10]*i,f=o+u+x,g=0;return f>0?(g=2*Math.sqrt(f+1),t[3]=.25*g,t[0]=(m-h)/g,t[1]=(p-c)/g,t[2]=(l-d)/g):o>u&&o>x?(g=2*Math.sqrt(1+o-u-x),t[3]=(m-h)/g,t[0]=.25*g,t[1]=(l+d)/g,t[2]=(p+c)/g):u>x?(g=2*Math.sqrt(1+u-o-x),t[3]=(p-c)/g,t[0]=(l+d)/g,t[1]=.25*g,t[2]=(m+h)/g):(g=2*Math.sqrt(1+x-o-u),t[3]=(l-d)/g,t[0]=(p+c)/g,t[1]=(m+h)/g,t[2]=.25*g),t}}();function decompose(e,t,s,r){let a=length([e[0],e[1],e[2]]);const n=length([e[4],e[5],e[6]]),i=length([e[8],e[9],e[10]]);determinant(e)<0&&(a=-a),s[0]=e[12],s[1]=e[13],s[2]=e[14];const o=e.slice(),l=1/a,c=1/n,d=1/i;o[0]*=l,o[1]*=l,o[2]*=l,o[4]*=c,o[5]*=c,o[6]*=c,o[8]*=d,o[9]*=d,o[10]*=d,getRotation(t,o),r[0]=a,r[1]=n,r[2]=i}function compose(e,t,s,r){const a=e,n=t[0],i=t[1],o=t[2],l=t[3],c=n+n,d=i+i,u=o+o,m=n*c,p=n*d,h=n*u,x=i*d,f=i*u,g=o*u,y=l*c,v=l*d,E=l*u,b=r[0],j=r[1],R=r[2];return a[0]=(1-(x+g))*b,a[1]=(p+E)*b,a[2]=(h-v)*b,a[3]=0,a[4]=(p-E)*j,a[5]=(1-(m+g))*j,a[6]=(f+y)*j,a[7]=0,a[8]=(h+v)*R,a[9]=(f-y)*R,a[10]=(1-(m+x))*R,a[11]=0,a[12]=s[0],a[13]=s[1],a[14]=s[2],a[15]=1,a}function fromQuat$1(e,t){let s=t[0],r=t[1],a=t[2],n=t[3],i=s+s,o=r+r,l=a+a,c=s*i,d=r*i,u=r*o,m=a*i,p=a*o,h=a*l,x=n*i,f=n*o,g=n*l;return e[0]=1-u-h,e[1]=d+g,e[2]=m-f,e[3]=0,e[4]=d-g,e[5]=1-c-h,e[6]=p+x,e[7]=0,e[8]=m+f,e[9]=p-x,e[10]=1-c-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function perspective(e,t,s,r,a){let n=1/Math.tan(t/2),i=1/(r-a);return e[0]=n/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*i,e[15]=0,e}function ortho(e,t,s,r,a,n,i){let o=1/(t-s),l=1/(r-a),c=1/(n-i);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+s)*o,e[13]=(a+r)*l,e[14]=(i+n)*c,e[15]=1,e}function targetTo(e,t,s,r){let a=t[0],n=t[1],i=t[2],o=r[0],l=r[1],c=r[2],d=a-s[0],u=n-s[1],m=i-s[2],p=d*d+u*u+m*m;0===p?m=1:(p=1/Math.sqrt(p),d*=p,u*=p,m*=p);let h=l*m-c*u,x=c*d-o*m,f=o*u-l*d;return p=h*h+x*x+f*f,0===p&&(c?o+=1e-6:l?c+=1e-6:l+=1e-6,h=l*m-c*u,x=c*d-o*m,f=o*u-l*d,p=h*h+x*x+f*f),p=1/Math.sqrt(p),h*=p,x*=p,f*=p,e[0]=h,e[1]=x,e[2]=f,e[3]=0,e[4]=u*f-m*x,e[5]=m*h-d*f,e[6]=d*x-u*h,e[7]=0,e[8]=d,e[9]=u,e[10]=m,e[11]=0,e[12]=a,e[13]=n,e[14]=i,e[15]=1,e}function add(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e[3]=t[3]+s[3],e[4]=t[4]+s[4],e[5]=t[5]+s[5],e[6]=t[6]+s[6],e[7]=t[7]+s[7],e[8]=t[8]+s[8],e[9]=t[9]+s[9],e[10]=t[10]+s[10],e[11]=t[11]+s[11],e[12]=t[12]+s[12],e[13]=t[13]+s[13],e[14]=t[14]+s[14],e[15]=t[15]+s[15],e}function subtract(e,t,s){return e[0]=t[0]-s[0],e[1]=t[1]-s[1],e[2]=t[2]-s[2],e[3]=t[3]-s[3],e[4]=t[4]-s[4],e[5]=t[5]-s[5],e[6]=t[6]-s[6],e[7]=t[7]-s[7],e[8]=t[8]-s[8],e[9]=t[9]-s[9],e[10]=t[10]-s[10],e[11]=t[11]-s[11],e[12]=t[12]-s[12],e[13]=t[13]-s[13],e[14]=t[14]-s[14],e[15]=t[15]-s[15],e}function multiplyScalar(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12]*s,e[13]=t[13]*s,e[14]=t[14]*s,e[15]=t[15]*s,e}class Mat4 extends Array{constructor(e=1,t=0,s=0,r=0,a=0,n=1,i=0,o=0,l=0,c=0,d=1,u=0,m=0,p=0,h=0,x=1){return super(e,t,s,r,a,n,i,o,l,c,d,u,m,p,h,x),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,s,r,a,n,i,o,l,c,d,u,m,p,h,x){return e.length?this.copy(e):(set$1(this,e,t,s,r,a,n,i,o,l,c,d,u,m,p,h,x),this)}translate(e,t=this){return translate$1(this,t,e),this}rotate(e,t,s=this){return rotate$1(this,s,e,t),this}scale(e,t=this){return scale$1(this,t,"number"==typeof e?[e,e,e]:e),this}add(e,t){return t?add(this,e,t):add(this,this,e),this}sub(e,t){return t?subtract(this,e,t):subtract(this,this,e),this}multiply(e,t){return e.length?t?multiply$1(this,e,t):multiply$1(this,this,e):multiplyScalar(this,this,e),this}identity(){return identity$1(this),this}copy(e){return copy$1(this,e),this}fromPerspective({fov:e,aspect:t,near:s,far:r}={}){return perspective(this,e,t,s,r),this}fromOrthogonal({left:e,right:t,bottom:s,top:r,near:a,far:n}){return ortho(this,e,t,s,r,a,n),this}fromQuaternion(e){return fromQuat$1(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return invert$1(this,e),this}compose(e,t,s){return compose(this,e,t,s),this}decompose(e,t,s){return decompose(this,e,t,s),this}getRotation(e){return getRotation(e,this),this}getTranslation(e){return getTranslation(e,this),this}getScaling(e){return getScaling(e,this),this}getMaxScaleOnAxis(){return getMaxScaleOnAxis(this)}lookAt(e,t,s){return targetTo(this,e,t,s),this}determinant(){return determinant(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}function fromRotationMatrix(e,t,s="YXZ"){return"XYZ"===s?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):"YXZ"===s?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):"ZXY"===s?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):"ZYX"===s?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):"YZX"===s?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):"XZY"===s&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0)),e}const tmpMat4=new Mat4;class Euler extends Array{constructor(e=0,t=e,s=e,r="YXZ"){super(e,t,s),this.order=r,this.onChange=()=>{},this._target=this;const a=["0","1","2"];return new Proxy(this,{set(e,t){const s=Reflect.set(...arguments);return s&&a.includes(t)&&e.onChange(),s}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,s=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=s,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return fromRotationMatrix(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,s){return tmpMat4.fromQuaternion(e),this._target.fromRotationMatrix(tmpMat4,t),s||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class Transform{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Mat4,this.worldMatrix=new Mat4,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Vec3,this.quaternion=new Quat,this.scale=new Vec3(1),this.rotation=new Euler,this.up=new Vec3(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,s=this.children.length;t<s;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,s=this.children.length;t<s;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function fromMat4(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function fromQuat(e,t){let s=t[0],r=t[1],a=t[2],n=t[3],i=s+s,o=r+r,l=a+a,c=s*i,d=r*i,u=r*o,m=a*i,p=a*o,h=a*l,x=n*i,f=n*o,g=n*l;return e[0]=1-u-h,e[3]=d-g,e[6]=m+f,e[1]=d+g,e[4]=1-c-h,e[7]=p-x,e[2]=m-f,e[5]=p+x,e[8]=1-c-u,e}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function set(e,t,s,r,a,n,i,o,l,c){return e[0]=t,e[1]=s,e[2]=r,e[3]=a,e[4]=n,e[5]=i,e[6]=o,e[7]=l,e[8]=c,e}function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function invert(e,t){let s=t[0],r=t[1],a=t[2],n=t[3],i=t[4],o=t[5],l=t[6],c=t[7],d=t[8],u=d*i-o*c,m=-d*n+o*l,p=c*n-i*l,h=s*u+r*m+a*p;return h?(h=1/h,e[0]=u*h,e[1]=(-d*r+a*c)*h,e[2]=(o*r-a*i)*h,e[3]=m*h,e[4]=(d*s-a*l)*h,e[5]=(-o*s+a*n)*h,e[6]=p*h,e[7]=(-c*s+r*l)*h,e[8]=(i*s-r*n)*h,e):null}function multiply(e,t,s){let r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],m=s[0],p=s[1],h=s[2],x=s[3],f=s[4],g=s[5],y=s[6],v=s[7],E=s[8];return e[0]=m*r+p*i+h*c,e[1]=m*a+p*o+h*d,e[2]=m*n+p*l+h*u,e[3]=x*r+f*i+g*c,e[4]=x*a+f*o+g*d,e[5]=x*n+f*l+g*u,e[6]=y*r+v*i+E*c,e[7]=y*a+v*o+E*d,e[8]=y*n+v*l+E*u,e}function translate(e,t,s){let r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],m=s[0],p=s[1];return e[0]=r,e[1]=a,e[2]=n,e[3]=i,e[4]=o,e[5]=l,e[6]=m*r+p*i+c,e[7]=m*a+p*o+d,e[8]=m*n+p*l+u,e}function rotate(e,t,s){let r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],m=Math.sin(s),p=Math.cos(s);return e[0]=p*r+m*i,e[1]=p*a+m*o,e[2]=p*n+m*l,e[3]=p*i-m*r,e[4]=p*o-m*a,e[5]=p*l-m*n,e[6]=c,e[7]=d,e[8]=u,e}function scale(e,t,s){let r=s[0],a=s[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function normalFromMat4(e,t){let s=t[0],r=t[1],a=t[2],n=t[3],i=t[4],o=t[5],l=t[6],c=t[7],d=t[8],u=t[9],m=t[10],p=t[11],h=t[12],x=t[13],f=t[14],g=t[15],y=s*o-r*i,v=s*l-a*i,E=s*c-n*i,b=r*l-a*o,j=r*c-n*o,R=a*c-n*l,_=d*x-u*h,w=d*f-m*h,S=d*g-p*h,T=u*f-m*x,P=u*g-p*x,C=m*g-p*f,k=y*C-v*P+E*T+b*S-j*w+R*_;return k?(k=1/k,e[0]=(o*C-l*P+c*T)*k,e[1]=(l*S-i*C-c*w)*k,e[2]=(i*P-o*S+c*_)*k,e[3]=(a*P-r*C-n*T)*k,e[4]=(s*C-a*S+n*w)*k,e[5]=(r*S-s*P-n*_)*k,e[6]=(x*R-f*j+g*b)*k,e[7]=(f*E-h*R-g*v)*k,e[8]=(h*j-x*E+g*y)*k,e):null}class Mat3 extends Array{constructor(e=1,t=0,s=0,r=0,a=1,n=0,i=0,o=0,l=1){return super(e,t,s,r,a,n,i,o,l),this}set(e,t,s,r,a,n,i,o,l){return e.length?this.copy(e):(set(this,e,t,s,r,a,n,i,o,l),this)}translate(e,t=this){return translate(this,t,e),this}rotate(e,t=this){return rotate(this,t,e),this}scale(e,t=this){return scale(this,t,e),this}multiply(e,t){return t?multiply(this,e,t):multiply(this,this,e),this}identity(){return identity(this),this}copy(e){return copy(this,e),this}fromMatrix4(e){return fromMat4(this,e),this}fromQuaternion(e){return fromQuat(this,e),this}fromBasis(e,t,s){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],s[0],s[1],s[2]),this}inverse(e=this){return invert(this,e),this}getNormalMatrix(e){return normalFromMat4(this,e),this}}let ID=0;class Mesh extends Transform{constructor(e,{geometry:t,program:s,mode:r=e.TRIANGLES,frustumCulled:a=!0,renderOrder:n=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=ID++,this.geometry=t,this.program=s,this.mode=r,this.frustumCulled=a,this.renderOrder=n,this.modelViewMatrix=new Mat4,this.normalMatrix=new Mat3,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}))}}class Triangle extends Geometry{constructor(e,{attributes:t={}}={}){Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}const DEFAULT_COLOR="#ffffff",hexToRgb=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]:[1,1,1]},getAnchorAndDir=(e,t,s)=>{switch(e){case"top-left":return{anchor:[0,-.2*s],dir:[0,1]};case"top-right":return{anchor:[t,-.2*s],dir:[0,1]};case"left":return{anchor:[-.2*t,.5*s],dir:[1,0]};case"right":return{anchor:[1.2*t,.5*s],dir:[-1,0]};case"bottom-left":return{anchor:[0,1.2*s],dir:[0,-1]};case"bottom-center":return{anchor:[.5*t,1.2*s],dir:[0,-1]};case"bottom-right":return{anchor:[t,1.2*s],dir:[0,-1]};default:return{anchor:[.5*t,-.2*s],dir:[0,1]}}},LightRays=({raysOrigin:e="top-center",raysColor:t=DEFAULT_COLOR,raysSpeed:s=1,lightSpread:r=1,rayLength:a=2,pulsating:n=!1,fadeDistance:i=1,saturation:o=1,followMouse:l=!0,mouseInfluence:c=.1,noiseAmount:d=0,distortion:u=0,className:m=""})=>{const p=reactExports.useRef(null),h=reactExports.useRef(null),x=reactExports.useRef(null),f=reactExports.useRef({x:.5,y:.5}),g=reactExports.useRef({x:.5,y:.5}),y=reactExports.useRef(null),v=reactExports.useRef(null),E=reactExports.useRef(null),[b,j]=reactExports.useState(!1),R=reactExports.useRef(null);return reactExports.useEffect(()=>{if(p.current)return R.current=new IntersectionObserver(e=>{const t=e[0];j(t.isIntersecting)},{threshold:.1}),R.current.observe(p.current),()=>{R.current&&(R.current.disconnect(),R.current=null)}},[]),reactExports.useEffect(()=>{if(!b||!p.current)return;E.current&&(E.current(),E.current=null);return(async()=>{if(!p.current)return;if(await new Promise(e=>setTimeout(e,10)),!p.current)return;const m=new Renderer({dpr:Math.min(window.devicePixelRatio,2),alpha:!0});x.current=m;const b=m.gl;for(b.canvas.style.width="100%",b.canvas.style.height="100%";p.current.firstChild;)p.current.removeChild(p.current.firstChild);p.current.appendChild(b.canvas);const j={iTime:{value:0},iResolution:{value:[1,1]},rayPos:{value:[0,0]},rayDir:{value:[0,1]},raysColor:{value:hexToRgb(t)},raysSpeed:{value:s},lightSpread:{value:r},rayLength:{value:a},pulsating:{value:n?1:0},fadeDistance:{value:i},saturation:{value:o},mousePos:{value:[.5,.5]},mouseInfluence:{value:c},noiseAmount:{value:d},distortion:{value:u}};h.current=j;const R=new Triangle(b),_=new Program(b,{vertex:"\nattribute vec2 position;\nvarying vec2 vUv;\nvoid main() {\n  vUv = position * 0.5 + 0.5;\n  gl_Position = vec4(position, 0.0, 1.0);\n}",fragment:"precision highp float;\n\nuniform float iTime;\nuniform vec2  iResolution;\n\nuniform vec2  rayPos;\nuniform vec2  rayDir;\nuniform vec3  raysColor;\nuniform float raysSpeed;\nuniform float lightSpread;\nuniform float rayLength;\nuniform float pulsating;\nuniform float fadeDistance;\nuniform float saturation;\nuniform vec2  mousePos;\nuniform float mouseInfluence;\nuniform float noiseAmount;\nuniform float distortion;\n\nvarying vec2 vUv;\n\nfloat noise(vec2 st) {\n  return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\nfloat rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord,\n                  float seedA, float seedB, float speed) {\n  vec2 sourceToCoord = coord - raySource;\n  vec2 dirNorm = normalize(sourceToCoord);\n  float cosAngle = dot(dirNorm, rayRefDirection);\n\n  float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;\n  \n  float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));\n\n  float distance = length(sourceToCoord);\n  float maxDistance = iResolution.x * rayLength;\n  float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);\n  \n  float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);\n  float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;\n\n  float baseStrength = clamp(\n    (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +\n    (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),\n    0.0, 1.0\n  );\n\n  return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n  vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);\n  \n  vec2 finalRayDir = rayDir;\n  if (mouseInfluence > 0.0) {\n    vec2 mouseScreenPos = mousePos * iResolution.xy;\n    vec2 mouseDirection = normalize(mouseScreenPos - rayPos);\n    finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));\n  }\n\n  vec4 rays1 = vec4(1.0) *\n               rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349,\n                           1.5 * raysSpeed);\n  vec4 rays2 = vec4(1.0) *\n               rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234,\n                           1.1 * raysSpeed);\n\n  fragColor = rays1 * 0.5 + rays2 * 0.4;\n\n  if (noiseAmount > 0.0) {\n    float n = noise(coord * 0.01 + iTime * 0.1);\n    fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);\n  }\n\n  float brightness = 1.0 - (coord.y / iResolution.y);\n  fragColor.x *= 0.1 + brightness * 0.8;\n  fragColor.y *= 0.3 + brightness * 0.6;\n  fragColor.z *= 0.5 + brightness * 0.5;\n\n  if (saturation != 1.0) {\n    float gray = dot(fragColor.rgb, vec3(0.299, 0.587, 0.114));\n    fragColor.rgb = mix(vec3(gray), fragColor.rgb, saturation);\n  }\n\n  fragColor.rgb *= raysColor;\n}\n\nvoid main() {\n  vec4 color;\n  mainImage(color, gl_FragCoord.xy);\n  gl_FragColor  = color;\n}",uniforms:j}),w=new Mesh(b,{geometry:R,program:_});v.current=w;const S=()=>{if(!p.current||!m)return;m.dpr=Math.min(window.devicePixelRatio,2);const{clientWidth:t,clientHeight:s}=p.current;m.setSize(t,s);const r=m.dpr,a=t*r,n=s*r;j.iResolution.value=[a,n];const{anchor:i,dir:o}=getAnchorAndDir(e,a,n);j.rayPos.value=i,j.rayDir.value=o},T=e=>{if(x.current&&h.current&&v.current){if(j.iTime.value=.001*e,l&&c>0){const e=.92;g.current.x=g.current.x*e+f.current.x*(1-e),g.current.y=g.current.y*e+f.current.y*(1-e),j.mousePos.value=[g.current.x,g.current.y]}try{m.render({scene:w}),y.current=requestAnimationFrame(T)}catch(t){return void console.warn("WebGL rendering error:",t)}}};window.addEventListener("resize",S),S(),y.current=requestAnimationFrame(T),E.current=()=>{if(y.current&&(cancelAnimationFrame(y.current),y.current=null),window.removeEventListener("resize",S),m)try{const e=m.gl.canvas,t=m.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),e&&e.parentNode&&e.parentNode.removeChild(e)}catch(e){console.warn("Error during WebGL cleanup:",e)}x.current=null,h.current=null,v.current=null}})(),()=>{E.current&&(E.current(),E.current=null)}},[b,e,t,s,r,a,n,i,o,l,c,d,u]),reactExports.useEffect(()=>{if(!h.current||!p.current||!x.current)return;const l=h.current,m=x.current;l.raysColor.value=hexToRgb(t),l.raysSpeed.value=s,l.lightSpread.value=r,l.rayLength.value=a,l.pulsating.value=n?1:0,l.fadeDistance.value=i,l.saturation.value=o,l.mouseInfluence.value=c,l.noiseAmount.value=d,l.distortion.value=u;const{clientWidth:f,clientHeight:g}=p.current,y=m.dpr,{anchor:v,dir:E}=getAnchorAndDir(e,f*y,g*y);l.rayPos.value=v,l.rayDir.value=E},[t,s,r,e,a,n,i,o,c,d,u]),reactExports.useEffect(()=>{const e=e=>{if(!p.current||!x.current)return;const t=p.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width,r=(e.clientY-t.top)/t.height;f.current={x:s,y:r}};if(l)return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[l]),jsxRuntimeExports.jsx("div",{ref:p,className:`light-rays-container ${m}`.trim()})},TestResults=({score:e,totalQuestions:t,timeTaken:s,answers:r,questions:a,onRetake:n,onContinue:i,testTitle:o})=>{const l=useNavigate(),{t:c}=useTranslation(),d=Math.round(e/t*100),u=getBandScore(e,"academic-reading"),m=a.filter(e=>{var t,s;return(null==(t=r[e.id])?void 0:t.toLowerCase().trim())===(null==(s=e.correct_answer)?void 0:s.toLowerCase().trim())}),p=a.filter(e=>{var t,s;return r[e.id]&&(null==(t=r[e.id])?void 0:t.toLowerCase().trim())!==(null==(s=e.correct_answer)?void 0:s.toLowerCase().trim())}),h=a.filter(e=>!r[e.id]);return jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6 relative",children:[jsxRuntimeExports.jsx(LightRays,{raysOrigin:"top-right",raysColor:"#F59E0B",raysSpeed:.6,lightSpread:1.2,rayLength:1.5,pulsating:!0,fadeDistance:1,saturation:.8,followMouse:!0,mouseInfluence:.1,noiseAmount:.12,distortion:.25}),jsxRuntimeExports.jsxs(Card,{className:"rounded-2xl border-light-border shadow-soft",style:{background:"var(--gradient-card)"},children:[jsxRuntimeExports.jsxs(CardHeader,{className:"text-center pb-4",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-3xl font-georgia text-foreground mb-2",children:c("testResults.viewResults",{defaultValue:"View Results"})}),o&&jsxRuntimeExports.jsx("p",{className:"text-warm-gray",children:o})]}),jsxRuntimeExports.jsxs(CardContent,{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-4xl font-bold text-foreground",children:[e,"/",t]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-warm-gray",children:c("testResults.correctAnswers",{defaultValue:"Correct Answers"})}),jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"text-lg px-3 py-1",children:[d,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl font-bold text-primary",children:u}),jsxRuntimeExports.jsx("p",{className:"text-sm text-warm-gray",children:c("testResults.band",{defaultValue:"Band"})}),jsxRuntimeExports.jsx(Progress,{value:d,className:"w-full h-2"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-8 h-8 text-primary mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-warm-gray",children:c("testResults.performance",{defaultValue:"Performance"})}),jsxRuntimeExports.jsx(Badge,{variant:d>=70?"default":d>=50?"secondary":"destructive",className:"text-sm px-3 py-1",children:d>=70?c("testResults.excellent",{defaultValue:"Excellent"}):d>=50?c("testResults.good",{defaultValue:"Good"}):c("testResults.needsWork",{defaultValue:"Needs Work"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outline",onClick:()=>l("/dashboard"),className:"rounded-xl px-6",children:[jsxRuntimeExports.jsx(House,{className:"w-4 h-4 mr-2"}),c("header.dashboard",{defaultValue:"Dashboard"})]}),jsxRuntimeExports.jsxs(Button$1,{variant:"outline",onClick:n,className:"rounded-xl px-6",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4 mr-2"}),c("testResults.retakeTest",{defaultValue:"Retake Test"})]}),jsxRuntimeExports.jsxs(Button$1,{onClick:i,className:"rounded-xl px-6",style:{background:"var(--gradient-button)"},children:[c("testResults.continuePractice",{defaultValue:"Continue Practice"}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs(Card,{className:"rounded-2xl border-light-border shadow-soft",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl font-georgia text-foreground",children:c("testResults.summary",{defaultValue:"Summary"})})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-foreground",children:c("testResults.correct",{defaultValue:"Correct"})})]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-green-50 text-green-700",children:m.length})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-foreground",children:c("testResults.incorrect",{defaultValue:"Incorrect"})})]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-red-50 text-red-700",children:p.length})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-foreground",children:c("testResults.skipped",{defaultValue:"Skipped"})})]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-gray-50 text-gray-700",children:h.length})]})]})]}),jsxRuntimeExports.jsxs(Card,{className:"rounded-2xl border-light-border shadow-soft",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl font-georgia text-foreground",children:c("testResults.questionTypes",{defaultValue:"Question Types"})})}),jsxRuntimeExports.jsx(CardContent,{children:(()=>{const e=a.reduce((e,t)=>{var s,a;const n=t.question_type||"Unknown";return e[n]||(e[n]={correct:0,total:0}),e[n].total++,(null==(s=r[t.id])?void 0:s.toLowerCase().trim())===(null==(a=t.correct_answer)?void 0:a.toLowerCase().trim())&&e[n].correct++,e},{});return Object.entries(e).map(([e,t])=>jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-foreground",children:e}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-warm-gray",children:[t.correct,"/",t.total]})]}),jsxRuntimeExports.jsx(Progress,{value:t.correct/t.total*100,className:"h-2"})]},e))})()})]})]}),jsxRuntimeExports.jsxs(Card,{className:"rounded-2xl border-light-border shadow-soft",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-xl font-georgia text-foreground",children:c("testResults.answerReview",{defaultValue:"Answer Review"})})}),jsxRuntimeExports.jsx(CardContent,{className:"space-y-4",children:a.map(e=>{var t;const s=r[e.id],a=(null==s?void 0:s.toLowerCase().trim())===(null==(t=e.correct_answer)?void 0:t.toLowerCase().trim()),n=!s;return jsxRuntimeExports.jsx("div",{className:"p-4 rounded-xl border-2 "+(a?"border-green-200 bg-green-50":n?"border-gray-200 bg-gray-50":"border-red-200 bg-red-50"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:a?jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-500 mt-0.5"}):n?jsxRuntimeExports.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-400 mt-0.5"}):jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5 text-red-500 mt-0.5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"text-xs",children:["Q",e.question_number]}),jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:e.question_type})]}),jsxRuntimeExports.jsx("p",{className:"font-medium text-foreground",children:e.question_text}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-warm-gray",children:c("testResults.yourAnswer",{defaultValue:"Your answer:"})}),jsxRuntimeExports.jsx("span",{className:"font-medium "+(a?"text-green-700":n?"text-gray-500":"text-red-700"),children:s||c("testResults.notAnswered",{defaultValue:"Not answered"})})]}),!a&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-warm-gray",children:c("testResults.correctAnswer",{defaultValue:"Correct answer:"})}),jsxRuntimeExports.jsx("span",{className:"font-medium text-green-700",children:e.correct_answer})]})]}),e.explanation&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("strong",{children:c("testResults.explanation",{defaultValue:"Explanation:"})})," ",e.explanation]})})]})]})},e.id)})})]})]})},SpotlightCard=({children:e,className:t="",spotlightColor:s="rgba(255, 255, 255, 0.25)",onClick:r,...a})=>{const n=reactExports.useRef(null);return jsxRuntimeExports.jsx("div",{ref:n,onMouseMove:e=>{if(!n.current)return;const t=n.current.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;n.current.style.setProperty("--mouse-x",`${r}px`),n.current.style.setProperty("--mouse-y",`${a}px`),n.current.style.setProperty("--spotlight-color",s)},onClick:r,className:`card-spotlight ${t}`,...a,children:e})},ReadingTest=()=>{var e,t;const s=useNavigate(),{toast:r}=useToast(),{testId:a}=useParams(),n=useThemeStyles(),[i,o]=reactExports.useState(3600),[l,c]=reactExports.useState(1),[d,u]=reactExports.useState({}),[m,p]=reactExports.useState({}),[h,x]=reactExports.useState(!0),[f,g]=reactExports.useState(!1),[y,v]=reactExports.useState(!1),[E,b]=reactExports.useState([]),[j,R]=reactExports.useState([]),[_,w]=reactExports.useState(null);reactExports.useEffect(()=>{a?S(a):T()},[a]),reactExports.useEffect(()=>{if(i>0&&!f){const e=setTimeout(()=>o(i-1),1e3);return()=>clearTimeout(e)}0!==i||f||k()},[i,f]);const S=async e=>{try{if(x(!0),!e||"random"===e){return u({1:{passage:{id:"placeholder",title:"Reading Test Coming Soon",content:"Reading tests are being updated to the new universal system. Please check back soon!",part_number:1},questions:[]}}),void b([])}const{data:t,error:a}=await supabase.from("tests").select("*").eq("id",e).maybeSingle();if(a)throw a;if(!t)return r({title:"Test Not Found",description:"This test doesn't exist. Please check the test ID.",variant:"destructive"}),void s(-1);w(t);const{data:n,error:i}=await supabase.from("questions").select("*").eq("test_id",e).order("part_number",{ascending:!0}).order("question_number_in_part",{ascending:!0});if(i)throw i;if(!n||0===n.length)return r({title:"No Questions Available",description:"This test doesn't have questions yet. Please contact your instructor.",variant:"destructive"}),void s(-1);const o={},l=[],c={},d={};n.forEach(e=>{0!==e.question_number_in_part?(c[e.part_number]||(c[e.part_number]=[]),c[e.part_number].push(e)):d[e.part_number]=e.question_text}),Object.entries(c).forEach(([e,s])=>{const r=parseInt(e),a=s[0],n=d[r]||`Reading Passage ${r}`;o[r]={passage:{id:`passage-${r}`,title:n,content:(null==a?void 0:a.passage_text)||"Passage content not available",part_number:r,test_number:t.test_number||1},questions:s.map((e,t)=>({id:e.id,question_number:e.question_number_in_part||t+1,question_text:e.question_text,question_type:e.question_type,options:e.choices?"string"==typeof e.choices?e.choices.includes(";")?e.choices.split(";"):[e.choices]:Array.isArray(e.choices)?e.choices.map(e=>String(e)):[]:[],correct_answer:e.correct_answer,explanation:e.explanation||"",passage_id:`passage-${r}`,part_number:e.part_number,structure_data:e.structure_data}))},l.push(...o[r].questions)}),u(o),b(l),console.log(` Loaded ${Object.keys(o).length} parts with ${l.length} total questions`)}catch(t){console.error("Error fetching test:",t),r({title:"Error",description:"Failed to load reading test",variant:"destructive"}),s(-1)}finally{x(!1)}},T=async()=>{x(!0);try{console.log(" Loading available reading tests...");const{data:e,error:t}=await supabase.from("tests").select("*").eq("test_type","IELTS").eq("module","Reading").order("created_at",{ascending:!1});if(t)throw console.error(" Error loading tests:",t),t;let s=e||[];if(s.length>0){const e=s.map(e=>e.id),{data:t,error:r}=await supabase.from("questions").select("test_id").in("test_id",e);if(!r&&t){const e=new Set(t.map(e=>e.test_id)),r=s.length;s=s.filter(t=>e.has(t.id)),console.log(` Filtered from ${r} to ${s.length} tests (only showing tests with questions)`)}}console.log(` Found ${s.length} available reading tests:`,s.map(e=>({id:e.id,name:e.test_name,module:e.module,skill_category:e.skill_category}))),R(s)}catch(e){console.error("Error fetching available tests:",e),r({title:"Error",description:"Failed to load available reading tests.",variant:"destructive"}),R([])}finally{x(!1)}},P=(e,t)=>{p(s=>({...s,[e]:t}))},C=()=>{let e=0;return E.forEach(t=>{var s;(null==(s=m[t.id])?void 0:s.toLowerCase().trim())===t.correct_answer.toLowerCase().trim()&&e++}),e},k=async()=>{var e;const t=C(),s=E.length;g(!0),v(!0);try{const{data:{user:r}}=await supabase.auth.getUser();if(r&&(null==(e=d[1])?void 0:e.passage)){const e={user_id:r.id,test_type:"reading",section_number:1,total_questions:s,correct_answers:t,score_percentage:t/s*100,time_taken:3600-i,test_data:{answers:m,all_questions:E.map(e=>({id:e.id,question_number:e.question_number,question_type:e.question_type,question_text:e.question_text,correct_answer:e.correct_answer,explanation:e.explanation})),completed_parts:Object.keys(d).map(e=>parseInt(e))}},{error:a}=await supabase.from("test_results").insert(e);a?console.error("Error saving test result:",a):console.log(" Test result saved successfully")}}catch(r){console.error("Error saving test result:",r)}};if(h)return jsxRuntimeExports.jsx(StudentLayout,{title:"Loading Reading Test",children:jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading Reading Test..."})]})})});if(y)return jsxRuntimeExports.jsx(StudentLayout,{title:"Reading Test Results",children:jsxRuntimeExports.jsx(TestResults,{score:C(),totalQuestions:E.length,timeTaken:3600-i,answers:m,questions:E,onRetake:()=>window.location.reload(),onContinue:()=>s("/ielts-portal"),testTitle:`Reading Test ${(null==_?void 0:_.test_name)||a}`})});if(!a)return jsxRuntimeExports.jsxs("div",{className:"min-h-screen relative",style:{backgroundColor:"dark"===n.theme.name?n.theme.colors.background:"transparent"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"note"===n.theme.name||"minimalist"===n.theme.name||"dark"===n.theme.name?"none":"url('/1000031207.png')",backgroundColor:n.backgroundImageColor}}),jsxRuntimeExports.jsx("div",{className:"relative z-10",children:jsxRuntimeExports.jsx(StudentLayout,{title:"Available Reading Tests",children:jsxRuntimeExports.jsx("div",{className:"min-h-screen py-12",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"mb-8 text-center",children:jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-2",style:{color:n.textPrimary},children:"IELTS Reading Tests"})}),j.length>0?jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(e=>jsxRuntimeExports.jsx(SpotlightCard,{className:"cursor-pointer h-[140px] hover:scale-105 transition-all duration-300 hover:shadow-lg flex items-center justify-center",onClick:()=>s(`/reading/${e.id}`),style:{backgroundColor:"glassmorphism"===n.theme.name?"rgba(255,255,255,0.8)":"dark"===n.theme.name?"rgba(255,255,255,0.1)":"minimalist"===n.theme.name?"#ffffff":n.theme.colors.cardBackground,borderColor:n.border,...n.cardStyle},children:jsxRuntimeExports.jsx(CardContent,{className:"p-3 md:p-4 text-center flex items-center justify-center h-full",children:jsxRuntimeExports.jsx("h3",{className:"font-semibold text-sm",style:{color:n.textPrimary},children:e.test_name||`Reading Test ${e.test_number||""}`})})},e.id))}):jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("p",{className:"text-lg mb-4",style:{color:n.textSecondary},children:"No reading tests available yet"}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>s("/ielts-portal"),variant:"outline",style:{borderColor:n.border,color:n.textPrimary,backgroundColor:"glassmorphism"===n.theme.name||"dark"===n.theme.name?"rgba(255,255,255,0.1)":"minimalist"===n.theme.name?"#ffffff":n.theme.colors.cardBackground},onMouseEnter:e=>e.currentTarget.style.backgroundColor=n.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="glassmorphism"===n.theme.name||"dark"===n.theme.name?"rgba(255,255,255,0.1)":"minimalist"===n.theme.name?"#ffffff":n.theme.colors.cardBackground,children:"Back to Portal"})]})]})})})})})]});const A=d[l];return A?jsxRuntimeExports.jsx(StudentLayout,{title:`Reading Test - Part ${l}`,transparentBackground:!0,fullWidth:!0,noPadding:!0,children:jsxRuntimeExports.jsxs("div",{className:"h-screen flex flex-col bg-[#FEF9E7] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 bg-[#FEF9E7] border-b border-[#E8D5A3]",children:jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"ghost",onClick:()=>s("/ielts-portal"),className:"text-[#5c4b37] hover:bg-[#E8D5A3]/50",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 bg-white/50 p-1 rounded-full border border-[#E8D5A3]",children:Object.keys(d).map(e=>{const t=parseInt(e),s=l===t;return jsxRuntimeExports.jsx("button",{onClick:()=>(e=>{d[e]&&c(e)})(t),className:"w-8 h-8 rounded-full font-serif font-bold text-sm transition-all duration-300 "+(s?"bg-[#8B4513] text-white shadow-sm scale-110":"text-[#5c4b37] hover:bg-[#8B4513]/10"),children:t},t)})}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 text-[#8B4513]",children:jsxRuntimeExports.jsx("span",{className:"font-serif text-lg font-medium tabular-nums tracking-wider",children:(e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60),r=e%60;return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})(i)})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 grid lg:grid-cols-2 min-h-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-h-0 bg-[#FEF9E7] border-r border-[#E8D5A3]",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 border-b border-[#E8D5A3] px-6 py-4",children:jsxRuntimeExports.jsx("h2",{className:"font-serif text-[#5c4b37] text-xl font-semibold",children:A.passage.title})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-5 ielts-scrollbar",children:jsxRuntimeExports.jsx("div",{className:"prose prose-lg max-w-none font-serif text-[#2f241f]",children:jsxRuntimeExports.jsx("div",{className:"whitespace-pre-wrap leading-loose text-justify",children:A.passage.content})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-h-0 bg-[#FEF9E7]",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 border-b border-[#E8D5A3] px-6 py-4",children:jsxRuntimeExports.jsxs("h2",{className:"text-xl text-[#5c4b37] font-serif font-semibold",children:["Questions ",null==(e=A.questions[0])?void 0:e.question_number," - ",null==(t=A.questions[A.questions.length-1])?void 0:t.question_number]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-5 ielts-scrollbar",children:(()=>{const e=[];let t=null;return A.questions.forEach(s=>{const r=s.question_type||"Short Answer",a=(s.options||[]).join("|"),n=t?t.options.join("|"):"";if(t&&t.type===r&&a===n)t.questions.push(s);else{const a=s.structure_data;t={type:r,questions:[s],options:s.options||[],taskInstruction:(null==a?void 0:a.taskInstruction)||"",instructions:(null==a?void 0:a.instructions)||""},e.push(t)}}),e.map((e,t)=>{var s,r;const a=e.type.toLowerCase().includes("yes")&&e.type.toLowerCase().includes("no"),n=e.type.toLowerCase().includes("true")&&e.type.toLowerCase().includes("false"),i=e.options.length>=5&&e.options.every(e=>/^[A-G]\s{1,2}[A-Z]/.test(e)),o=e.type.toLowerCase().includes("matching")||e.type.toLowerCase().includes("paragraph")||i,l="multiple choice"===e.type.toLowerCase()&&4===e.options.length&&!i,c=e.type.toLowerCase().includes("summary")||e.type.toLowerCase().includes("completion")&&!o,d=null==(s=e.questions[0])?void 0:s.question_number,u=null==(r=e.questions[e.questions.length-1])?void 0:r.question_number,p=d===u?`${d}`:`${d}-${u}`;return jsxRuntimeExports.jsxs("div",{className:"py-6 border-b border-[#E8D5A3]/40 last:border-b-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("h5",{className:"font-bold text-lg text-[#2f241f] font-serif",children:["Questions ",p]}),e.taskInstruction&&!a&&!n&&jsxRuntimeExports.jsx("p",{className:"text-sm text-[#2f241f] mt-2 leading-relaxed",children:e.taskInstruction}),!e.taskInstruction&&e.instructions&&!a&&!n&&jsxRuntimeExports.jsx("p",{className:"text-sm text-[#5a4a3f] mt-2 italic leading-relaxed",children:e.instructions})]}),(a||n)&&jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 bg-[#fdfaf3] rounded-lg border border-[#e0d6c7]",children:[e.taskInstruction&&jsxRuntimeExports.jsx("p",{className:"text-sm text-[#2f241f] mb-3 leading-relaxed",children:e.taskInstruction}),a?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-[#2f241f] w-24",children:"YES"}),jsxRuntimeExports.jsx("span",{className:"text-[#5a4a3f]",children:"if the statement agrees with the claims of the writer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-[#2f241f] w-24",children:"NO"}),jsxRuntimeExports.jsx("span",{className:"text-[#5a4a3f]",children:"if the statement contradicts the claims of the writer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-[#2f241f] w-24",children:"NOT GIVEN"}),jsxRuntimeExports.jsx("span",{className:"text-[#5a4a3f]",children:"if it is impossible to say what the writer thinks about this"})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-[#2f241f] w-24",children:"TRUE"}),jsxRuntimeExports.jsx("span",{className:"text-[#5a4a3f]",children:"if the statement agrees with the information"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-[#2f241f] w-24",children:"FALSE"}),jsxRuntimeExports.jsx("span",{className:"text-[#5a4a3f]",children:"if the statement contradicts the information"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"font-bold text-[#2f241f] w-24",children:"NOT GIVEN"}),jsxRuntimeExports.jsx("span",{className:"text-[#5a4a3f]",children:"if there is no information on this"})]})]})]}),o&&e.options.length>0&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-[#fdfaf3] rounded-lg border border-[#e0d6c7]",children:jsxRuntimeExports.jsx("div",{className:"space-y-1",children:e.options.map((e,t)=>jsxRuntimeExports.jsx("div",{className:"text-sm text-[#2f241f]",children:e},t))})}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:e.questions.map(t=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 text-base font-bold text-black font-serif w-6 text-right pt-0.5",children:t.question_number}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"font-serif text-base text-black leading-relaxed",children:t.question_text}),(()=>{if(a)return jsxRuntimeExports.jsx(RadioGroup,{value:m[t.id]||"",onValueChange:e=>P(t.id,e),className:"flex flex-wrap gap-2 mt-2",children:["YES","NO","NOT GIVEN"].map(e=>{const s=m[t.id]===e;return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:e,id:`${t.id}-${e}`,className:"peer sr-only"}),jsxRuntimeExports.jsx(Label,{htmlFor:`${t.id}-${e}`,className:"flex items-center justify-center px-4 py-1.5 min-w-[80px] rounded-md border transition-all duration-200 cursor-pointer text-sm font-bold tracking-wide "+(s?"bg-[#8B4513] text-white border-[#8B4513] shadow-md":"bg-white border-[#E8D5A3] text-[#5c4b37] hover:bg-[#FEF9E7] hover:border-[#8B4513]"),children:e})]},e)})});if(n)return jsxRuntimeExports.jsx(RadioGroup,{value:m[t.id]||"",onValueChange:e=>P(t.id,e),className:"flex flex-wrap gap-2 mt-2",children:["TRUE","FALSE","NOT GIVEN"].map(e=>{const s=m[t.id]===e;return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:e,id:`${t.id}-${e}`,className:"peer sr-only"}),jsxRuntimeExports.jsx(Label,{htmlFor:`${t.id}-${e}`,className:"flex items-center justify-center px-4 py-1.5 min-w-[80px] rounded-md border transition-all duration-200 cursor-pointer text-sm font-bold tracking-wide "+(s?"bg-[#8B4513] text-white border-[#8B4513] shadow-md":"bg-white border-[#E8D5A3] text-[#5c4b37] hover:bg-[#FEF9E7] hover:border-[#8B4513]"),children:e})]},e)})});if(o){const s=`A-${e.options.length>0?String.fromCharCode(64+e.options.length):e.type.toLowerCase().includes("paragraph")?"I":"G"}`;return jsxRuntimeExports.jsx(Input,{value:m[t.id]||"",onChange:e=>P(t.id,e.target.value.toUpperCase()),placeholder:s,maxLength:1,className:"w-16 h-10 text-center bg-white border border-[#E8D5A3] rounded-lg focus:ring-1 focus:ring-[#8B4513] focus:border-[#8B4513] shadow-sm font-serif text-lg font-bold text-black uppercase mt-2"})}return c?t.options&&t.options.length>0?jsxRuntimeExports.jsxs("select",{value:m[t.id]||"",onChange:e=>P(t.id,e.target.value),className:"w-64 h-10 bg-white border border-[#E8D5A3] rounded-lg px-3 focus:ring-1 focus:ring-[#8B4513] focus:border-[#8B4513] shadow-sm font-serif text-base text-black mt-2",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select answer..."}),t.options.map((e,t)=>{var s;const r=(null==(s=e.match(/^([A-E])\s/))?void 0:s[1])||String.fromCharCode(65+t);return jsxRuntimeExports.jsx("option",{value:r,children:e},t)})]}):jsxRuntimeExports.jsx(Input,{value:m[t.id]||"",onChange:e=>P(t.id,e.target.value),placeholder:"Type your answer",className:"w-48 h-10 bg-white border border-[#E8D5A3] rounded-lg px-3 focus:ring-1 focus:ring-[#8B4513] focus:border-[#8B4513] shadow-sm font-serif text-base text-black mt-2"}):l&&t.options&&t.options.length>0?jsxRuntimeExports.jsx(RadioGroup,{value:m[t.id]||"",onValueChange:e=>P(t.id,e),className:"grid gap-2 mt-3",children:t.options.map((e,s)=>{const r=String.fromCharCode(65+s),a=m[t.id]===r;return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:r,id:`${t.id}-${r}`,className:"peer sr-only"}),jsxRuntimeExports.jsxs(Label,{htmlFor:`${t.id}-${r}`,className:"flex items-start p-3 rounded-lg border transition-all duration-200 cursor-pointer "+(a?"border-[#8B4513] bg-[#FEF9E7] shadow-sm":"border-[#E8D5A3] bg-white hover:bg-[#FEF9E7] hover:border-[#8B4513]/50"),children:[jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 font-bold text-base mr-3 "+(a?"text-[#8B4513]":"text-[#8B4513]/70"),children:r}),jsxRuntimeExports.jsx("span",{className:"text-sm leading-relaxed text-black",children:e.replace(/^[A-D]\s+/,"")})]})]},s)})}):jsxRuntimeExports.jsx(Input,{value:m[t.id]||"",onChange:e=>P(t.id,e.target.value),className:"max-w-md bg-white border border-[#E8D5A3] rounded-lg px-4 py-2 focus:ring-1 focus:ring-[#8B4513] focus:border-[#8B4513] shadow-sm font-serif h-10 text-base text-black mt-2"})})()]})]},t.id))})]},`section-${t}`)})})()})]})]})]})}):jsxRuntimeExports.jsx(StudentLayout,{title:"Reading Test - Part Not Available",children:jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg text-muted-foreground",children:["Part ",l," not available"]}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>c(1),className:"mt-4",children:"Go to Part 1"})]})})})},Listening=()=>{const e=useNavigate(),{toast:t}=useToast(),[s,r]=reactExports.useState(1800),[a,n]=reactExports.useState(null),[i,o]=reactExports.useState([]),[l,c]=reactExports.useState({}),[d,u]=reactExports.useState(!0),[m,p]=reactExports.useState(!1),[h,x]=reactExports.useState(null),f=[...i].sort((e,t)=>e.question_number-t.question_number);reactExports.useEffect(()=>{g()},[]),reactExports.useEffect(()=>{const e=setInterval(()=>{r(e=>e<=1?(v(),0):e-1)},1e3);return()=>clearInterval(e)},[]);const g=async()=>{try{u(!1);n({id:"placeholder",title:"Listening Test Coming Soon",section_number:1,instructions:"Listening tests are being updated to the new system. Please check back soon!",audio_url:null,transcript:""}),o([])}catch(e){t({title:"Error",description:"Failed to load listening test: "+e.message,variant:"destructive"})}finally{u(!1)}},y=(e,t)=>{c(s=>({...s,[e]:t}))},v=()=>{h&&h.pause();const s=E();t({title:"Test Submitted!",description:`You answered ${s}/${i.length} questions correctly.`}),e("/")},E=()=>i.reduce((e,t)=>l[t.id]===t.correct_answer?e+1:e,0),b={title:"IELTS Listening Practice | Audio Mock Test & Instant Feedback",description:"Simulate the IELTS Listening exam with authentic audio tracks, transcripts, timers, and auto-scoring so you can sharpen note-taking skills.",keywords:"IELTS listening practice, IELTS audio mock test, IELTS listening questions, band score listening, IELTS listening timer",type:"article",schemaType:"faq",url:"https://englishaidol.com/listening",faqs:[{question:"Can I replay IELTS listening audio tracks?",answer:"You control playback to mimic exam pacing, but we recommend listening once to build real test stamina. Transcripts are available for review afterward."},{question:"What feedback do I get after finishing a section?",answer:"We tally your correct answers, highlight weak question types, and suggest listening strategies so you know exactly how to improve."}]};return d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SEO,{...b}),jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{children:"Loading listening test..."})]})})]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background",children:[jsxRuntimeExports.jsx(SEO,{...b}),jsxRuntimeExports.jsx("div",{className:"bg-white border-b-2 border-gray-200 p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:()=>e("/"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4"}),"Back to Dashboard"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Headphones,{className:"h-5 w-5 text-green-600"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-lg",children:"IELTS Listening Test"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-orange-100 px-3 py-1 rounded-lg",children:[jsxRuntimeExports.jsx(Clock,{className:"h-4 w-4 text-orange-600"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-orange-600 font-medium",children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(s)})]}),jsxRuntimeExports.jsx(Button$1,{onClick:v,className:"bg-green-600 hover:bg-green-700",children:"Submit Test"})]})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto p-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Card,{className:"mb-6",children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Headphones,{className:"h-5 w-5"}),null==a?void 0:a.title]}),jsxRuntimeExports.jsxs(CardDescription,{children:["Section ",null==a?void 0:a.section_number]})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm",children:null==a?void 0:a.instructions}),(null==a?void 0:a.audio_url)?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:()=>{h&&(m?h.pause():h.play(),p(!m))},className:"flex items-center gap-2",children:[m?jsxRuntimeExports.jsx(Pause,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Play,{className:"h-4 w-4"}),m?"Pause":"Play"," Audio"]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:"Click play to start the listening section"})]}):jsxRuntimeExports.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-800",children:"Audio file not available. Please check the transcript below for content."})})]})})]}),(null==a?void 0:a.transcript)&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{children:"Transcript (for reference)"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed text-gray-600",children:a.transcript.split("\n\n").map((e,t)=>jsxRuntimeExports.jsx("p",{className:"mb-3",children:e},t))})})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{children:["Questions (",i.length,")"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Listen to the audio and answer all questions"})]}),jsxRuntimeExports.jsx(CardContent,{className:"space-y-6",children:(()=>{let e,t;return f.map(s=>{var r;const a=s.section_header&&s.section_header!==e,n=s.section_instruction&&s.section_instruction!==t;return a&&(e=s.section_header),n&&(t=s.section_instruction),jsxRuntimeExports.jsxs("div",{className:"border-b pb-4 last:border-b-0",children:[a&&jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-blue-600 mb-1",children:s.section_header}),n&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mb-2",children:s.section_instruction}),jsxRuntimeExports.jsxs("p",{className:"font-medium mb-3",children:[s.question_number,". ",s.question_text]}),"multiple_choice"===s.question_type&&Array.isArray(s.options)?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:s.options.map((e,t)=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:`question_${s.id}`,value:e,checked:l[s.id]===e,onChange:e=>y(s.id,e.target.value),className:"text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:e})]},t))}):jsxRuntimeExports.jsx("input",{type:"text",placeholder:(null==(r=s.section_instruction)?void 0:r.includes("NO MORE THAN"))?"Write NO MORE THAN TWO WORDS AND/OR A NUMBER":"Type your answer here",value:l[s.id]||"",onChange:e=>y(s.id,e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]},s.id)})})()})]})})]})})]})},TranscriptViewerContext=reactExports.createContext(null);function useTranscriptViewer(){const e=reactExports.useContext(TranscriptViewerContext);if(!e)throw new Error("useTranscriptViewer must be used within a TranscriptViewerContainer");return e}function TranscriptViewerContainer({children:e,audioSrc:t,audioType:s="audio/mpeg",alignment:r,className:a,...n}){const i=reactExports.useRef(null),[o,l]=reactExports.useState(0),[c,d]=reactExports.useState(0),[u,m]=reactExports.useState(!1);reactExports.useEffect(()=>{const e=i.current;if(!e)return;const t=()=>l(e.currentTime),s=()=>d(e.duration),r=()=>m(!0),a=()=>m(!1),n=()=>m(!1);return e.addEventListener("timeupdate",t),e.addEventListener("durationchange",s),e.addEventListener("play",r),e.addEventListener("pause",a),e.addEventListener("ended",n),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("durationchange",s),e.removeEventListener("play",r),e.removeEventListener("pause",a),e.removeEventListener("ended",n)}},[]);const p=reactExports.useCallback(()=>{i.current&&(u?i.current.pause():i.current.play())},[u]),h=reactExports.useCallback(e=>{i.current&&(i.current.currentTime=e)},[]),x=reactExports.useMemo(()=>({audioRef:i,currentTime:o,duration:c,isPlaying:u,alignment:r,togglePlay:p,seek:h}),[o,c,u,r,p,h]);return jsxRuntimeExports.jsx(TranscriptViewerContext.Provider,{value:x,children:jsxRuntimeExports.jsxs("div",{className:cn("relative",a),...n,children:[jsxRuntimeExports.jsxs("audio",{ref:i,src:t,children:[jsxRuntimeExports.jsx("source",{src:t,type:s}),"Your browser does not support the audio element."]}),e]})})}function TranscriptViewerAudio({className:e,...t}){return jsxRuntimeExports.jsx("div",{className:cn("",e),...t})}function TranscriptViewerWords({className:e,...t}){const{alignment:s,currentTime:r,seek:a}=useTranscriptViewer(),n=reactExports.useMemo(()=>{const e=[];let t="",a=-1,n=-1;return s.characters.forEach((i,o)=>{const l=s.characterStartTimesSeconds[o],c=s.characterEndTimesSeconds[o];if(-1===a&&(a=l),n=c,t+=i," "===i||o===s.characters.length-1){const s=r>=a&&r<=n;e.push({text:t,startTime:a,endTime:n,isActive:s}),t="",a=-1,n=-1}}),e},[s,r]);return jsxRuntimeExports.jsx("div",{className:cn("flex flex-wrap gap-x-0.5",e),...t,children:n.map((e,t)=>jsxRuntimeExports.jsx("span",{className:cn("cursor-pointer transition-colors duration-150 rounded px-0.5",e.isActive?"bg-primary/20 text-primary font-medium":"hover:bg-muted text-foreground/80"),onClick:()=>a(e.startTime),children:e.text},t))})}function TranscriptViewerScrubBar({className:e,...t}){const{currentTime:s,duration:r,seek:a}=useTranscriptViewer(),n=reactExports.useRef(null),i=r>0?s/r*100:0,o=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return jsxRuntimeExports.jsxs("div",{className:cn("w-full space-y-2",e),...t,children:[jsxRuntimeExports.jsx("div",{ref:n,className:"relative h-2 w-full bg-secondary rounded-full cursor-pointer overflow-hidden",onClick:e=>{if(!n.current)return;const t=n.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;a(s*r)},children:jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full bg-primary transition-all duration-100 ease-linear",style:{width:`${i}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("span",{children:o(s)}),jsxRuntimeExports.jsx("span",{children:o(r)})]})]})}function TranscriptViewerPlayPauseButton({children:e,className:t,onClick:s,...r}){const{isPlaying:a,togglePlay:n}=useTranscriptViewer();return jsxRuntimeExports.jsx("button",{className:cn("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",t),onClick:e=>{n(),null==s||s(e)},...r,children:e({isPlaying:a})})}function Skeleton({className:e,...t}){return jsxRuntimeExports.jsx("div",{className:cn("animate-pulse rounded-md bg-muted",e),...t})}const ListeningTranscriptViewer=({audioUrl:e,transcriptData:t})=>t?jsxRuntimeExports.jsxs(TranscriptViewerContainer,{className:"bg-card w-full rounded-xl border p-6 shadow-sm",audioSrc:e,audioType:"audio/mpeg",alignment:t,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Live Transcript"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:"Click words to jump"})]}),jsxRuntimeExports.jsx(TranscriptViewerAudio,{className:"sr-only"}),jsxRuntimeExports.jsx("div",{className:"max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:jsxRuntimeExports.jsx(TranscriptViewerWords,{className:"text-base leading-relaxed"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mt-6 pt-4 border-t",children:[jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx(TranscriptViewerScrubBar,{})}),jsxRuntimeExports.jsx(TranscriptViewerPlayPauseButton,{className:"w-full flex items-center justify-center gap-2 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 rounded-md transition-colors",children:({isPlaying:e})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Pause,{className:"w-4 h-4"})," Pause Audio"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Play,{className:"w-4 h-4"})," Play Audio"]})})})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex w-full flex-col gap-3 p-6 border rounded-xl bg-card",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-1/3 mb-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-3/4"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 mt-4",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-full"})})]}),ListeningTest=()=>{const e=useNavigate(),{toast:t}=useToast(),{testId:s}=useParams(),r=useThemeStyles(),[a,n]=reactExports.useState(1800),[i,o]=reactExports.useState(null),[l,c]=reactExports.useState([]),[d,u]=reactExports.useState({}),[m,p]=reactExports.useState(!0),[h,x]=reactExports.useState(!1),[f,g]=reactExports.useState(!1);reactExports.useState(!1);const[y,v]=reactExports.useState(0),[E,b]=reactExports.useState(!1),[j,R]=reactExports.useState(null),[_,w]=reactExports.useState(0),[S,T]=reactExports.useState(0),[P,C]=reactExports.useState({}),[k,A]=reactExports.useState(1),[N,I]=reactExports.useState([]),[M,D]=reactExports.useState({}),[L,F]=reactExports.useState([]),[O,B]=reactExports.useState(null);reactExports.useEffect(()=>{if(s){const e=(()=>{const e=s.match(/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/);return e?e[0]:s})();V(e)}else z()},[s]),reactExports.useEffect(()=>{if(!h){const e=setInterval(()=>{n(e=>e<=1?(G(),0):e-1)},1e3);return()=>clearInterval(e)}},[h]),reactExports.useEffect(()=>{console.log(" Fresh Start: Clearing any saved test data for fresh test experience"),localStorage.removeItem(`listening_test_${s}_answers`)},[s]),reactExports.useEffect(()=>{if(!(null==i?void 0:i.audio_url))return j&&j.pause(),R(null),T(0),w(0),void b(!1);const e=new Audio(i.audio_url),t=()=>{T(e.duration||0)},s=()=>{w(e.currentTime||0)},r=()=>{b(!1)};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",s),e.addEventListener("ended",r),R(e),()=>{e.pause(),e.currentTime=0,e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",s),e.removeEventListener("ended",r)}},[null==i?void 0:i.audio_url]);const V=async s=>{try{p(!0),console.log(` Loading listening test for test ID: ${s}`);const{data:r,error:a}=await supabase.from("tests").select("*").eq("id",s).maybeSingle();if(a)throw a;if(!r)return t({title:"Test Not Found",description:"This listening test doesn't exist. Please check the test ID.",variant:"destructive"}),void e(-1);const{data:n,error:i}=await supabase.from("questions").select("*").eq("test_id",s).order("part_number",{ascending:!0}).order("question_number_in_part",{ascending:!0});if(i)throw i;if(!n||0===n.length)return t({title:"No Questions Available",description:"This test doesn't have questions yet. Please contact your instructor.",variant:"destructive"}),void e(-1);const l={};n.forEach(e=>{const t=e.part_number||1;l[t]||(l[t]=[]),l[t].push(e)});const d=1,u=l[d]||[];if(0===u.length)return t({title:"No Questions Available",description:"This test doesn't have questions for Part 1.",variant:"destructive"}),void e(-1);const m=u[0],h=m.audio_url||null,x={id:`part-${d}`,title:`Part ${d}`,section_number:d,instructions:m.passage_text||`Part ${d} - Listen to the audio and answer the questions.`,audio_url:h,transcript:m.transcription||"",transcript_json:m.transcript_json||null,photo_url:m.answer_image_url||null,part_number:d,test_number:r.test_number||1};o(x);const f=u.map((e,t)=>({id:e.id,question_text:e.question_text,question_number:e.question_number_in_part||t+1,question_type:e.question_type||"multiple_choice",options:e.choices?"string"==typeof e.choices?e.choices.includes(";")?e.choices.split(";"):[e.choices]:Array.isArray(e.choices)?e.choices.map(e=>String(e)):[]:[],correct_answer:e.correct_answer,explanation:e.explanation||"",section_id:x.id}));c(f);const g={};Object.keys(l).forEach(e=>{const t=parseInt(e),s=l[t],a=s[0],n={id:`part-${t}`,title:`Part ${t}`,section_number:t,instructions:a.passage_text||`Part ${t} - Listen to the audio and answer the questions.`,audio_url:a.audio_url||null,transcript:a.transcription||"",transcript_json:a.transcript_json||null,photo_url:a.answer_image_url||null,part_number:t,test_number:r.test_number||1},i=s.map((e,t)=>({id:e.id,question_text:e.question_text,question_number:e.question_number_in_part||t+1,question_type:e.question_type||"multiple_choice",options:e.choices?"string"==typeof e.choices?e.choices.includes(";")?e.choices.split(";"):[e.choices]:Array.isArray(e.choices)?e.choices.map(e=>String(e)):[]:[],correct_answer:e.correct_answer,explanation:e.explanation||"",section_id:n.id}));g[t]={section:n,questions:i}}),D(g),A(d),B(r),console.log(` Listening test loaded: ${r.test_name}, ${Object.keys(l).length} parts`)}catch(r){console.error("Error loading listening test:",r),t({title:"Error",description:"Failed to load listening test: "+r.message,variant:"destructive"})}finally{p(!1)}},z=async()=>{p(!0);try{console.log(" Loading available listening tests...");const{data:e,error:t}=await supabase.from("tests").select("*").eq("test_type","IELTS").eq("module","Listening").order("created_at",{ascending:!1});if(t)throw console.error(" Error loading tests:",t),t;let s=e||[];if(s.length>0){const e=s.map(e=>e.id),{data:t,error:r}=await supabase.from("questions").select("test_id").in("test_id",e);if(!r&&t){const e=new Set(t.map(e=>e.test_id)),r=s.length;s=s.filter(t=>e.has(t.id)),console.log(` Filtered from ${r} to ${s.length} tests (only showing tests with questions)`)}}console.log(` Found ${s.length} available listening tests:`,s.map(e=>({id:e.id,name:e.test_name,module:e.module,skill_category:e.skill_category}))),F(s),p(!1)}catch(e){console.error("Error fetching available tests:",e),t({title:"Error",description:"Failed to fetch available listening tests: "+e.message,variant:"destructive"}),F([]),p(!1)}},$=(e,t)=>{u(s=>({...s,[e]:t}))},G=async()=>{var e,r;if(!h){j&&j.pause();let o=0,c=0;const u=[...N,k];u.forEach(e=>{if(M[e]){const t=M[e].questions;c+=t.length,t.forEach(e=>{d[e.id]===e.correct_answer&&o++})}}),M[k]||(c+=l.length,l.forEach(e=>{d[e.id]===e.correct_answer&&o++})),v(o),x(!0),g(!1),localStorage.removeItem(`listening_test_${s}_answers`);try{const{data:{user:t}}=await supabase.auth.getUser();if(t){const{data:s,error:n}=await supabase.from("test_results").insert({user_id:t.id,test_type:"listening",total_questions:c,correct_answers:o,score_percentage:o/c*100,time_taken:1800-a,test_data:{answers:d,total_score:o,completed_parts:u}}).select().single();if(n)throw n;for(const a of u){const n=M[a]||{section:i,questions:l},o=n.questions,c=o.filter(e=>d[e.id]===e.correct_answer).length,u=o.map(e=>({id:e.id,question_text:e.question_text,user_answer:d[e.id]||"",correct_answer:e.correct_answer,is_correct:d[e.id]===e.correct_answer}));await supabase.from("listening_test_results").insert({user_id:t.id,test_result_id:s.id,section_number:a,section_title:(null==(e=n.section)?void 0:e.title)||`Section ${a}`,audio_url:null==(r=n.section)?void 0:r.audio_url,questions_data:u,section_score:c,section_total:o.length,detailed_feedback:`Section ${a}: ${c}/${o.length} correct`})}console.log(" Listening test results saved successfully")}}catch(n){console.error("Error saving test results:",n)}console.log(" Sequential Flow: Listening test completed with all parts. Final score:",o,"out of",c,"questions"),t({title:"Test Submitted!",description:`You scored ${o}/${c} (${Math.round(o/c*100)}%)`})}},q=async e=>{if(console.log(` Sequential Flow: Loading data for Part ${e}`),M[e])return o(M[e].section),c(M[e].questions),A(e),void console.log(` Part ${e} loaded from cache`);t({title:"Part Not Found",description:`Part ${e} is not available for this test.`,variant:"destructive"})},H=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return m?jsxRuntimeExports.jsx(StudentLayout,{title:"Loading Test...",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-warm-gray",children:"Loading listening test..."})]})})}):s?jsxRuntimeExports.jsxs("div",{className:"min-h-screen relative "+("note"===r.theme.name?"font-serif":""),style:{backgroundColor:"dark"===r.theme.name?r.theme.colors.background:"transparent"},children:[jsxRuntimeExports.jsx(StudentLayout,{title:`IELTS Listening - ${(null==i?void 0:i.title)||"Test"}`,showBackButton:!0,backPath:"/tests",children:jsxRuntimeExports.jsx("div",{className:"flex-1 flex justify-center py-6 sm:py-8 pb-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 px-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[(null==i?void 0:i.cambridge_book)&&jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-background/50 backdrop-blur",children:i.cambridge_book}),(null==i?void 0:i.section_number)&&jsxRuntimeExports.jsxs(Badge,{variant:"outline",className:"bg-background/50 backdrop-blur",children:["Section ",i.section_number]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4",children:h?jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold text-primary",children:[y,"/",l.length]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground",children:["Band ",(W=y,getBandScore(W,"listening").toString())]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 py-1.5 rounded-full bg-orange-100/80 backdrop-blur border border-orange-200 text-orange-700 shadow-sm",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-mono font-medium",children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(a)})]})})]}),jsxRuntimeExports.jsx(Card,{className:"rounded-2xl border shadow-sm sticky top-4 z-30 transition-all duration-300",style:{backgroundColor:"dark"===r.theme.name?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderColor:r.border},children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4 flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center text-primary flex-shrink-0",children:jsxRuntimeExports.jsx(Headphones,{className:"h-5 w-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-sm truncate pr-4",children:(null==i?void 0:i.instructions)||"Listen to the audio"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-muted-foreground font-mono whitespace-nowrap",children:[H(_)," / ",H(S)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Button$1,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full hover:bg-primary/10 hover:text-primary shrink-0",onClick:()=>{j&&(E?j.pause():j.play().catch(e=>{console.error("Error playing audio:",e),b(!1)}),b(!E))},disabled:h||!(null==i?void 0:i.audio_url),children:E?jsxRuntimeExports.jsx(Pause,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Play,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-1.5 bg-muted rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-primary transition-all duration-100 ease-linear",style:{width:S?_/S*100+"%":"0%"}})})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[(null==i?void 0:i.photo_url)&&jsxRuntimeExports.jsx(Card,{className:"overflow-hidden border-none shadow-none bg-transparent",children:jsxRuntimeExports.jsx("img",{src:i.photo_url,alt:"Visual Reference",className:"w-full max-w-xl mx-auto rounded-xl shadow-md border border-border/50"})}),jsxRuntimeExports.jsx(Card,{className:"border shadow-sm rounded-3xl overflow-hidden",style:{backgroundColor:"dark"===r.theme.name?r.theme.colors.cardBackground:"rgba(255, 255, 255, 0.8)",borderColor:r.border},children:jsxRuntimeExports.jsx(CardContent,{className:"p-6 sm:p-8 space-y-8",children:l.map(e=>jsxRuntimeExports.jsxs("div",{className:"relative pl-0 sm:pl-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-3 mb-3",children:[jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-7 h-7 rounded-full bg-primary/10 text-primary text-sm font-bold",children:e.question_number}),jsxRuntimeExports.jsx("div",{className:"flex-1 pt-1",children:jsxRuntimeExports.jsx("div",{className:"text-base sm:text-lg font-medium leading-relaxed text-foreground/90 whitespace-pre-line",children:e.question_text})}),h&&jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 ml-2",children:d[e.id]===e.correct_answer?jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-500"}):jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5 text-red-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"pl-10",children:["multiple_choice"===e.question_type&&e.options&&e.options.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-2.5",children:e.options.map((t,s)=>jsxRuntimeExports.jsxs("label",{className:`\n                                      flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer hover:bg-muted/50\n                                      ${d[e.id]===t?"border-primary bg-primary/5 shadow-sm ring-1 ring-primary/20":"border-transparent bg-muted/30 hover:border-border"}\n                                      ${h&&t===e.correct_answer?"!border-green-500 !bg-green-50/50":""}\n                                      ${h&&d[e.id]===t&&t!==e.correct_answer?"!border-red-500 !bg-red-50/50":""}\n                                    `,children:[jsxRuntimeExports.jsx("div",{className:`\n                                      w-4 h-4 rounded-full border flex items-center justify-center\n                                      ${d[e.id]===t?"border-primary":"border-muted-foreground"}\n                                    `,children:d[e.id]===t&&jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})}),jsxRuntimeExports.jsx("input",{type:"radio",name:`question_${e.id}`,value:t,checked:d[e.id]===t,onChange:t=>$(e.id,t.target.value),disabled:h,className:"sr-only"}),jsxRuntimeExports.jsx("span",{className:"text-sm sm:text-base",children:t})]},s))}):jsxRuntimeExports.jsxs("div",{className:"relative max-w-md",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Type your answer...",value:d[e.id]||"",onChange:t=>$(e.id,t.target.value),disabled:h,className:`\n                                    w-full px-4 py-3 rounded-xl bg-muted/30 border transition-all focus:bg-background\n                                    focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\n                                    ${h?d[e.id]===e.correct_answer?"border-green-500 bg-green-50/50 text-green-900":"border-red-500 bg-red-50/50 text-red-900":"border-transparent hover:border-border"}\n                                  `}),h&&d[e.id]!==e.correct_answer&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-sm text-green-600 flex items-center gap-1.5 font-medium",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-3.5 h-3.5"}),"Answer: ",e.correct_answer]})]}),h&&e.explanation&&jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void C(e=>({...e,[t]:!e[t]}));var t},className:"h-auto p-0 text-purple-600 hover:text-purple-700 hover:bg-transparent font-medium flex items-center gap-1.5",children:[P[e.id]?jsxRuntimeExports.jsx(EyeOff,{className:"w-3.5 h-3.5"}):jsxRuntimeExports.jsx(Eye,{className:"w-3.5 h-3.5"}),P[e.id]?"Hide":"Show"," Explanation"]}),P[e.id]&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-4 rounded-xl bg-purple-50/50 border border-purple-100 dark:bg-purple-900/10 dark:border-purple-800/30",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("div",{className:"mt-0.5 shrink-0",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 text-purple-600"})}),jsxRuntimeExports.jsx("div",{className:"text-sm text-purple-900 dark:text-purple-100 leading-relaxed",children:e.explanation})]})})]})]})]},e.id))})})]}),h&&((null==i?void 0:i.transcript)||(null==i?void 0:i.transcript_json))&&jsxRuntimeExports.jsxs(Card,{className:"border shadow-sm rounded-3xl overflow-hidden bg-background/80 backdrop-blur",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-lg",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-muted-foreground"}),"Audio Transcript"]})}),jsxRuntimeExports.jsx(CardContent,{children:(null==i?void 0:i.transcript_json)?jsxRuntimeExports.jsx(ListeningTranscriptViewer,{audioUrl:i.audio_url,transcriptData:i.transcript_json}):jsxRuntimeExports.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm text-muted-foreground leading-relaxed whitespace-pre-wrap font-serif",children:null==i?void 0:i.transcript})})]}),jsxRuntimeExports.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/80 backdrop-blur-lg border-t z-40 sm:relative sm:bg-transparent sm:border-0 sm:p-0 sm:backdrop-blur-none",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto flex gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-sm text-muted-foreground mr-auto",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",k," of 4"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(e=>jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full "+(e===k?"bg-primary":N.includes(e)?"bg-green-500":"bg-muted")},e))})]}),h?jsxRuntimeExports.jsx(Button$1,{onClick:()=>e("/tests"),variant:"outline",className:"w-full sm:w-auto rounded-xl",children:"Back to Tests"}):k<4?jsxRuntimeExports.jsxs(Button$1,{onClick:()=>{if(I(e=>[...e,k]),k>=4)return void G();const e=k+1;A(e),M[e]?(o(M[e].section),c(M[e].questions)):q(e),console.log(` Sequential Flow: Moving from Part ${k} to Part ${e}`)},className:"w-full sm:w-auto rounded-xl min-w-[140px] shadow-lg hover:shadow-xl transition-all",children:["Next Part ",jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 ml-2 rotate-180"})]}):jsxRuntimeExports.jsxs(Button$1,{onClick:()=>g(!0),className:"w-full sm:w-auto rounded-xl min-w-[140px] bg-primary text-primary-foreground shadow-lg hover:shadow-xl transition-all",children:["Submit Test ",jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 ml-2"})]})]})})]})})}),jsxRuntimeExports.jsx(Dialog,{open:f,onOpenChange:g,children:jsxRuntimeExports.jsxs(DialogContent,{className:"rounded-2xl border-light-border sm:max-w-md",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{className:"font-georgia text-xl",children:"Ready to submit?"}),jsxRuntimeExports.jsxs(DialogDescription,{className:"pt-2",children:["You have answered ",jsxRuntimeExports.jsx("span",{className:"font-medium text-foreground",children:Object.keys(d).filter(e=>d[e]).length})," out of ",jsxRuntimeExports.jsx("span",{className:"font-medium text-foreground",children:l.length})," questions in this part.",jsxRuntimeExports.jsx("br",{}),"Proceeding will finalize your score for the whole test."]})]}),jsxRuntimeExports.jsxs(DialogFooter,{className:"gap-2 sm:gap-0",children:[jsxRuntimeExports.jsx(Button$1,{variant:"outline",onClick:()=>g(!1),className:"rounded-xl border-light-border",children:"Keep Reviewing"}),jsxRuntimeExports.jsx(Button$1,{onClick:G,className:"rounded-xl shadow-md",children:"Yes, Submit"})]})]})})]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"note"===r.theme.name||"minimalist"===r.theme.name||"dark"===r.theme.name?"none":"url('/1000031207.png')",backgroundColor:r.backgroundImageColor}}),jsxRuntimeExports.jsx("div",{className:"relative z-10",children:jsxRuntimeExports.jsx(StudentLayout,{title:"Available Listening Tests",children:jsxRuntimeExports.jsx("div",{className:"min-h-screen py-12",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"IELTS Listening Tests"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-muted-foreground",children:"Choose a test to begin your listening practice"})]}),L.length>0?jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:L.map(t=>jsxRuntimeExports.jsx(SpotlightCard,{className:"cursor-pointer h-[140px] hover:scale-105 transition-all duration-300 hover:shadow-lg bg-white/80 flex items-center justify-center",onClick:()=>e(`/listening/${t.id}`),children:jsxRuntimeExports.jsx(CardContent,{className:"p-3 md:p-4 text-center flex items-center justify-center h-full",children:jsxRuntimeExports.jsx("h3",{className:"font-semibold text-sm",children:t.test_name||`Listening Test ${t.test_number||""}`})})},t.id))}):jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"No listening tests available yet"}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>e("/ielts-portal"),variant:"outline",children:"Back to Portal"})]})]})})})})})]});var W},ContentSelection=()=>{const e=useNavigate(),t=useLocation(),{toast:s}=useToast(),r=t.pathname.includes("/reading")?"reading":"listening",a=r,[n,i]=reactExports.useState([]),[o,l]=reactExports.useState(!0),[c,d]=reactExports.useState({}),[u,m]=reactExports.useState(null),p=useThemeStyles();reactExports.useEffect(()=>{let e=!0,t=0;const s=async()=>{try{await h()}catch(r){if(console.error("Error loading content:",r),e&&t<2&&(t++,console.log(` Retrying content fetch (attempt ${t}/2)...`),await new Promise(e=>setTimeout(e,1e3*Math.pow(2,t))),e))return s()}};return s(),()=>{e=!1}},[r,u]);const h=async()=>{try{l(!0),console.log(" DEBUG: Fetching content from universal tables...");const e="reading"===a?"Reading":"Listening",{data:t,error:s}=await supabase.from("tests").select("*").eq("test_type","IELTS").eq("module",e).order("created_at",{ascending:!1});if(s)throw s;console.log(` DEBUG: Found ${(null==t?void 0:t.length)||0} ${e} tests`);let r=t||[];if(0===r.length)return console.log(" No tests found for module:",a),i([]),void d({});const n=r.map(e=>e.id),{data:o,error:c}=await supabase.from("questions").select("test_id, part_number, id").in("test_id",n);if(c)throw c;const u=[];r.forEach(e=>{const t=(null==o?void 0:o.filter(t=>t.test_id===e.id))||[];if(t.length>0){const s=Math.max(...t.map(e=>e.part_number||1),0);u.push({id:e.id,title:e.test_name||`Test ${e.test_number}`,cambridge_book:e.test_name||`Test ${e.test_number}`,test_number:e.test_number,section_number:1,part_number:s,question_count:t.length})}}),console.log(" DEBUG: Found tests with questions:",u.length),i(u),x(u)}catch(e){console.error("Error fetching content:",e),s({title:"Error",description:"Failed to load content",variant:"destructive"})}finally{l(!1)}},x=e=>{const t={};t["Available Tests"]=e,d(t)};return o?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen",style:{backgroundColor:p.cardBackground},children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:["Loading ",r," content..."]})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen relative "+("note"===p.theme.name?"font-serif":""),style:{backgroundColor:"dark"===p.theme.name?p.theme.colors.background:"transparent"},children:jsxRuntimeExports.jsx(StudentLayout,{title:`${a.charAt(0).toUpperCase()}${a.slice(1)} Tests`,showBackButton:!0,backPath:"/tests",transparentBackground:!0,children:jsxRuntimeExports.jsx("div",{className:"flex-1 flex justify-center py-8",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl mx-auto space-y-8 px-4",children:[jsxRuntimeExports.jsx(Card,{className:"border shadow-lg",style:{backgroundColor:"dark"===p.theme.name?"rgba(30, 41, 59, 0.5)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(12px)",borderColor:p.border},children:jsxRuntimeExports.jsxs(CardHeader,{className:"pb-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto rounded-3xl bg-primary/10 flex items-center justify-center mb-2",children:"reading"===a?jsxRuntimeExports.jsx(BookOpen,{className:"w-8 h-8 text-primary"}):jsxRuntimeExports.jsx(Headphones,{className:"w-8 h-8 text-primary"})}),jsxRuntimeExports.jsxs(CardTitle,{className:"text-3xl font-medium bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:["reading"===a?"IELTS Reading":"IELTS Listening"," Practice"]}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Practice with official Cambridge IELTS materials. Select a test below or start a random session."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 bg-background/50 border rounded-xl px-4 py-2 shadow-sm w-full sm:w-auto justify-between sm:justify-start",style:{borderColor:p.border},children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-muted-foreground whitespace-nowrap",children:"Filter Part:"}),jsxRuntimeExports.jsxs(Select,{value:(null==u?void 0:u.toString())||"all",onValueChange:e=>m("all"===e?null:parseInt(e)),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-32 border-none bg-transparent shadow-none h-8 px-0 focus:ring-0 text-right sm:text-left",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{className:"rounded-xl border shadow-lg",children:[jsxRuntimeExports.jsx(SelectItem,{value:"all",children:"All Parts"}),("reading"===a?[1,2,3]:[1,2,3,4]).map(e=>jsxRuntimeExports.jsxs(SelectItem,{value:e.toString(),children:["Part ",e]},e))]})]})]}),jsxRuntimeExports.jsxs(Button$1,{onClick:()=>{n.length>0?e(`/${a}/random`):s({title:"No Content Available",description:`No ${r} content is available yet.`,variant:"destructive"})},size:"default",className:"rounded-xl bg-primary text-primary-foreground shadow-md hover:shadow-lg transition-all w-full sm:w-auto h-11",children:[jsxRuntimeExports.jsx(Play,{className:"w-4 h-4 mr-2"}),"Start Random Test"]})]})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:Object.values(c).sort((e,t)=>{var s,r,a,n;return parseInt((null==(r=null==(s=t[0])?void 0:s.cambridge_book)?void 0:r.replace(/\D/g,""))||"0")-parseInt((null==(n=null==(a=e[0])?void 0:a.cambridge_book)?void 0:n.replace(/\D/g,""))||"0")}).map(t=>{var s;const r=(null==(s=t[0])?void 0:s.cambridge_book)||"Unknown Book",n=t.reduce((e,t)=>e+(t.question_count||0),0);return jsxRuntimeExports.jsxs(Card,{className:"overflow-hidden border shadow-sm rounded-3xl transition-all hover:shadow-md",style:{backgroundColor:p.cardBackground,borderColor:p.border},children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-4 border-b bg-muted/20",style:{borderColor:p.border},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"bg-background/50 backdrop-blur",children:"reading"===a?"Reading":"Listening"}),jsxRuntimeExports.jsx(CardTitle,{className:"text-lg font-bold font-georgia",style:{color:p.textPrimary},children:r})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground font-mono bg-background/50 px-2 py-1 rounded-md border",style:{borderColor:p.border},children:[jsxRuntimeExports.jsx(Target,{className:"w-3 h-3"}),n," Questions"]})]})}),jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map(t=>jsxRuntimeExports.jsxs(Button$1,{variant:"outline",onClick:()=>(t=>{e(`/${a}/${t.id}`)})(t),className:"h-auto py-4 flex flex-col gap-2 rounded-2xl hover:bg-primary/5 hover:border-primary/30 transition-all group",style:{borderColor:p.border,backgroundColor:"dark"===p.theme.name?"rgba(255,255,255,0.03)":"white"},children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-muted group-hover:bg-primary/10 flex items-center justify-center transition-colors",children:jsxRuntimeExports.jsx("span",{className:"font-bold text-sm group-hover:text-primary",style:{color:p.textPrimary},children:t.test_number||"?"})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium group-hover:text-primary transition-colors",style:{color:p.textPrimary},children:["Test ",t.test_number]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[t.question_count," Qs"]})]})]},t.id))})})]},r)})}),0===n.length&&!o&&jsxRuntimeExports.jsx("div",{className:"text-center py-20 bg-muted/20 rounded-3xl border border-dashed",style:{borderColor:p.border},children:jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:"reading"===a?jsxRuntimeExports.jsx(BookOpen,{className:"w-8 h-8 text-muted-foreground"}):jsxRuntimeExports.jsx(Headphones,{className:"w-8 h-8 text-muted-foreground"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:p.textPrimary},children:"No Content Available"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["No ",r," tests have been uploaded yet. Please check back soon."]}),jsxRuntimeExports.jsxs(Button$1,{variant:"outline",onClick:()=>e("/tests"),className:"rounded-xl",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Tests"]})]})})]})})})})},Writing=()=>{const e=useNavigate(),{toast:t}=useToast(),[s,r]=reactExports.useState(1),[a,n]=reactExports.useState(""),[i,o]=reactExports.useState(!1),[l,c]=reactExports.useState(null),[d,u]=reactExports.useState(0),m={1:"The chart below shows the percentage of households in owned and rented accommodation in England and Wales between 1918 and 2011. Summarise the information by selecting and reporting the main features, and make comparisons where relevant. Write at least 150 words.",2:"Some people think that all university students should study whatever they like. Others believe that they should only be allowed to study subjects that will be useful in the future, such as those related to science and technology. Discuss both these views and give your own opinion. Write at least 250 words."};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background",children:[jsxRuntimeExports.jsx(SEO,{title:"IELTS Writing Practice Test | AI Band Score Feedback",description:"Write IELTS Task 1 and Task 2 responses, then receive instant examiner-style feedback, band score predictions, and action steps from our AI tutors.",keywords:"IELTS writing practice, IELTS task 2 feedback, AI writing evaluation, IELTS essay checker, IELTS band score predictor",type:"article",schemaType:"faq",url:"https://englishaidol.com/writing",faqs:[{question:"How accurate is the IELTS writing band score prediction?",answer:"Our AI rubric mirrors the official IELTS Writing descriptors that former examiners encoded, so the predicted band aligns within 0.5 of real test results."},{question:"Can I practice both Task 1 and Task 2 essays?",answer:"Yes. Switch between Task 1 visuals and Task 2 opinion prompts, then submit writing to get tailored feedback on Task Achievement, Coherence, Lexical Resource, and Grammar."}]}),jsxRuntimeExports.jsx("header",{className:"border-b border-border bg-background shadow-soft",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"ghost",size:"sm",onClick:()=>e("/"),children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Dashboard"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(PenTool,{className:"w-5 h-5 text-blue-deep"}),jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Writing Test"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"60:00"})]}),jsxRuntimeExports.jsx(Button$1,{variant:"hero",size:"sm",children:"Submit Test"})]})]})})}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-center text-2xl",children:"Writing Practice"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-2 mt-4",children:[1,2].map(e=>jsxRuntimeExports.jsxs(Button$1,{variant:s===e?"default":"outline",onClick:()=>{r(e),n(""),c(null),u(0)},disabled:i,children:["Task ",e]},e))})]})}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{children:["Writing Task ",s]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground",children:1===s?"Minimum 150 words | 20 minutes":"Minimum 250 words | 40 minutes"})]}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-light/30 p-6 rounded-lg mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-3",children:"Task Instructions:"}),jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed",children:m[s]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Your Response:"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-muted-foreground",children:["Word count: ",jsxRuntimeExports.jsx("span",{className:d<(1===s?150:250)?"text-red-500":"text-green-600",children:d})]})]}),jsxRuntimeExports.jsx(Textarea,{value:a,onChange:e=>(e=>{n(e);const t=e.trim().split(/\s+/).filter(e=>e.length>0);u(t.length)})(e.target.value),placeholder:`Start writing your response for Task ${s}...`,className:"min-h-[300px] text-sm leading-relaxed",disabled:i}),jsxRuntimeExports.jsx(Button$1,{onClick:async()=>{if(a.trim().length<50)t({title:"Text too short",description:"Please write more content before requesting feedback.",variant:"destructive"});else{o(!0);try{const{data:e,error:r}=await supabase.functions.invoke("writing-feedback",{body:{writing:a,prompt:m[s],taskType:`Task ${s}`}});if(r)throw r;if(!e.success)throw new Error(e.error||"Analysis failed");c(e.feedback),t({title:"Feedback Complete",description:"Your writing has been analyzed successfully!"})}catch(e){console.error("Feedback error:",e),t({title:"Analysis Failed",description:e.message||"Could not analyze your writing. Please try again.",variant:"destructive"})}finally{o(!1)}}},disabled:i||a.trim().length<50,className:"w-full",children:i?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(LottieLoadingAnimation,{size:"sm",message:"Analyzing Writing..."})}):"Get AI Feedback"})]})]})]}),l&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{children:"Detailed Writing Analysis"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"prose max-w-none",children:jsxRuntimeExports.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:l})})})]})]})})]})};function useAdminContent(){const[e,t]=reactExports.useState(!1),[s,r]=reactExports.useState(null);return{loading:e,error:s,createNewTest:async(e,s)=>{t(!0),r(null);try{console.log("Creating new test:",{testType:e,module:s});const{count:r,error:a}=await supabase.from("tests").select("*",{count:"exact",head:!0}).eq("test_type",e);if(a)throw console.error("Error counting tests:",a),a;const n=(r||0)+1,i=`${e.toUpperCase()} Test ${n}`;console.log("Inserting new test:",{testName:i,testType:e,module:s});const{data:o,error:l}=await supabase.from("tests").insert({test_name:i,test_type:e,module:s}).select().single();if(l)throw console.error("Error inserting test:",l),l;return console.log("Test created successfully:",o),t(!1),o}catch(a){return console.error("Error creating new test:",a),r(a.message),t(!1),null}},createContent:async(e,s)=>{t(!0);try{if(console.log("Creating content:",e,s),"tests"===e){const{data:e,error:t}=await supabase.from("tests").insert(s).select().single();if(t)throw console.error("Supabase insert error:",t),new Error(`Database Error: ${t.message}`);return console.log("Content created successfully:",e),{data:e}}if("csv_upload"===e){const{data:e,error:t}=await supabase.functions.invoke("admin-content",{body:{questions:s.questions,adminKeypass:"myye65402086"}});if(t)throw console.error("CSV upload error:",t),t;return{success:!0,data:e}}const{data:t,error:r}=await supabase.functions.invoke("admin-content",{body:{action:"create",type:e,data:s,adminKeypass:"myye65402086"}});if(r)throw console.error("Edge function error:",r),r;return t}catch(r){throw console.error("Create content error:",r),r}finally{t(!1)}},updateContent:async(e,s)=>{t(!0);try{console.log("Updating content:",e,s);const{data:t,error:r}=await supabase.functions.invoke("admin-content",{body:{action:"update",type:e,data:s,adminKeypass:"myye65402086"}});if(r)throw console.error("Update error:",r),r;return t}catch(r){throw console.error("Update content error:",r),r}finally{t(!1)}},deleteContent:async(e,s)=>{t(!0);try{console.log("Deleting content:",e,s);const{data:t,error:r}=await supabase.functions.invoke("admin-content",{body:{action:"delete",type:e,data:{id:s},adminKeypass:"myye65402086"}});if(r)throw console.error("Delete error:",r),r;return t}catch(r){throw console.error("Delete content error:",r),r}finally{t(!1)}},listContent:async e=>{t(!0);try{if(console.log("Listing content for type:",e),"tests"===e){const{data:t,error:s}=await supabase.from("tests").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Supabase select error:",s),new Error(`Database Error: ${s.message}`);return console.log(`Found ${(null==t?void 0:t.length)||0} ${e} records`),{data:t}}if("questions"===e){const{data:t,error:s}=await supabase.from("questions").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Supabase select error:",s),new Error(`Database Error: ${s.message}`);return console.log(`Found ${(null==t?void 0:t.length)||0} ${e} records`),{data:t}}const{data:t,error:s}=await supabase.functions.invoke("admin-content",{body:{action:"list",type:e,adminKeypass:"myye65402086"}});if(s)throw console.error("List content error:",s),s;return t}catch(s){throw console.error("List content error:",s),s}finally{t(!1)}},uploadAudio:async e=>{t(!0);try{const t=e.name||"audio.wav",s=t.includes(".")?t.split(".").pop().toLowerCase():"wav",r=t.replace(/\.[^/.]+$/,"").normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase(),a=`${Date.now()}-${r}.${s}`,n=`admin/listening/${a}`;console.log(" Requesting presigned URL for R2 upload:",{originalName:t,fileName:a,size:e.size,type:e.type});const i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN1dW14bWZ6aHdsanlsYmRsZmxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1MTkxMjEsImV4cCI6MjA2OTA5NTEyMX0.8jqO_ciOttSxSLZnKY0i5oJmEn79ROF53TjUMYhNemI",o="https://cuumxmfzhwljylbdlflj.supabase.co/functions/v1/r2-upload",l=await fetch(o,{method:"POST",headers:{apikey:i,Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({operation:"presign",path:n,contentType:e.type||"audio/mpeg"})});if(!l.ok){const e=await l.text();throw console.error(" Presign request failed:",l.status,e),new Error(`Presign failed ${l.status}: ${e}`)}const c=await l.json();if(!c||!c.success||!c.uploadUrl)throw new Error((null==c?void 0:c.error)||"Failed to get upload URL");console.log(" Got presigned URL, uploading directly to R2...");const d=await fetch(c.uploadUrl,{method:"PUT",headers:{"Content-Type":e.type||"audio/mpeg"},body:e});if(!d.ok)throw console.error(" Direct upload to R2 failed:",d.status,d.statusText),new Error(`Direct upload failed: ${d.status} ${d.statusText}`);return console.log(" Audio uploaded successfully:",c.publicUrl),{success:!0,url:c.publicUrl}}catch(s){throw console.error("Upload error:",s),new Error(s.message||"Upload failed")}finally{t(!1)}}}}const WritingTest=()=>{const e=useNavigate(),[t]=useSearchParams(),s=useParams(),{listContent:r}=useAdminContent(),{toast:a}=useToast(),[n,i]=reactExports.useState([]),[o,l]=reactExports.useState(null),[c,d]=reactExports.useState(""),[u,m]=reactExports.useState(!1),[p,h]=reactExports.useState(null),[x,f]=reactExports.useState(0),[g,y]=reactExports.useState(1),[v,E]=reactExports.useState(!0),[b,j]=reactExports.useState("gemini"),[R,_]=reactExports.useState("en"),w=s.book||t.get("book")||"C19",S=s.test||t.get("test")||"1";reactExports.useEffect(()=>{T()},[w,S]);const T=async()=>{try{E(!0),console.log(` Loading writing prompts for ${w}, Test ${S}`);const e=(await r("writing_prompts")).data||[];console.log(" All prompts:",e.map(e=>({id:e.id,title:e.title,cambridge_book:e.cambridge_book,test_number:e.test_number})));const t=e.filter(e=>{const t=e.cambridge_book===w&&e.test_number===parseInt(S);return t&&console.log(" Match found:",{title:e.title,cambridge_book:e.cambridge_book,test_number:e.test_number}),t});if(console.log(` Found ${t.length} writing prompts for ${w}, Test ${S}`),0===t.length){console.log(" No exact matches found. Checking for similar patterns...");const t=e.filter(e=>{var t,s;return(null==(t=e.cambridge_book)?void 0:t.includes("19"))||(null==(s=e.cambridge_book)?void 0:s.includes("C19"))||e.test_number===parseInt(S)});console.log(" Similar prompts found:",t.map(e=>({title:e.title,cambridge_book:e.cambridge_book,test_number:e.test_number})))}0===t.length&&a({title:"No Writing Prompts Found",description:`No writing prompts available for ${w}, Test ${S}. Please check the admin panel.`,variant:"destructive"}),i(t);const s=t.find(e=>"task1"===e.task_type);l(s||t[0]||null)}catch(e){console.error(" Error loading writing prompts:",e),a({title:"Error Loading Prompts",description:"Failed to load writing prompts. Please try again.",variant:"destructive"})}finally{E(!1)}};if(v)return jsxRuntimeExports.jsx("div",{className:"min-h-screen glass-card flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-blue mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-text-primary",children:"Loading Writing Test..."})]})});if(!o)return jsxRuntimeExports.jsx("div",{className:"min-h-screen glass-card",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-2xl mx-auto text-center",children:jsxRuntimeExports.jsx(Card,{className:"glass-effect",children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-8",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-16 h-16 text-text-secondary mx-auto mb-4"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:"No Writing Prompts Available"}),jsxRuntimeExports.jsxs("p",{className:"text-text-secondary mb-6",children:["No writing prompts found for ",w,", Test ",S,". Please contact your admin to upload writing content."]}),jsxRuntimeExports.jsxs(Button$1,{onClick:()=>e("/tests"),className:"glass-button",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Tests"]})]})})})})});const P=n.map(e=>({type:e.task_type,number:parseInt(e.task_type.replace("task",""))})).sort((e,t)=>e.number-t.number);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen glass-card",children:[jsxRuntimeExports.jsx("header",{className:"border-b border-border/30 glass-effect shadow-lg",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"ghost",size:"sm",onClick:()=>e("/tests"),className:"glass-button",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Tests"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(PenTool,{className:"w-5 h-5 text-brand-blue"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-text-primary",children:"IELTS Writing Test"}),jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"glass-effect",children:[w," - Test ",S]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-primary",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{children:[(null==o?void 0:o.time_limit)||60," minutes"]})]}),jsxRuntimeExports.jsx(Button$1,{className:"btn-primary",size:"sm",children:"Submit Test"})]})]})})}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[P.length>1&&jsxRuntimeExports.jsx(Card,{className:"card-modern",children:jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-center text-2xl",children:"Select Writing Task"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-2 mt-4",children:P.map(e=>jsxRuntimeExports.jsxs(Button$1,{variant:(null==o?void 0:o.task_type)===e.type?"default":"outline",onClick:()=>(e=>{const t=n.find(t=>t.task_type===e);t&&(l(t),y(parseInt(e.replace("task",""))),d(""),h(null),f(0))})(e.type),disabled:u,className:"min-w-24",children:["Task ",e.number]},e.type))})]})}),jsxRuntimeExports.jsxs(Card,{className:"card-modern",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl",children:["Writing ",o.task_type.charAt(0).toUpperCase()+o.task_type.slice(1),o.task_number&&` - ${o.task_number}`]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Badge,{variant:"outline",children:[o.word_limit," words minimum"]}),jsxRuntimeExports.jsxs(Badge,{variant:"outline",children:[o.time_limit," minutes"]})]})]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-brand-blue/5 border border-brand-blue/20 p-6 rounded-xl mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-3 text-brand-blue",children:"Task Instructions:"}),jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed text-text-primary",children:o.prompt_text}),o.image_url&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("img",{src:o.image_url,alt:"Task 1 Chart/Graph",className:"max-w-full max-h-80 object-contain border border-border rounded-lg shadow-sm mx-auto"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Your Response:"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-text-secondary",children:["Word count: ",jsxRuntimeExports.jsx("span",{className:x<o.word_limit?"text-brand-red":"text-brand-green font-semibold",children:x})," / ",o.word_limit," minimum"]})]}),jsxRuntimeExports.jsx(Textarea,{value:c,onChange:e=>(e=>{d(e);const t=e.trim().split(/\s+/).filter(e=>e.length>0);f(t.length)})(e.target.value),placeholder:`Start writing your response for ${o.task_type}...`,className:"min-h-[350px] text-sm leading-relaxed input-modern",disabled:u}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 p-4 bg-surface-2 rounded-xl border border-border",children:[jsxRuntimeExports.jsx(Languages,{className:"w-5 h-5 text-brand-blue"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"feedback-language-writing",className:"text-sm font-medium mb-1 block",children:"Feedback Language"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Choose your preferred language for explanations. Your writing and key terms will remain in English."}),jsxRuntimeExports.jsxs(Select,{value:R,onValueChange:_,children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"feedback-language-writing",className:"w-full max-w-xs",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select language"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"en",children:"English"}),jsxRuntimeExports.jsx(SelectItem,{value:"zh",children:" (Chinese)"}),jsxRuntimeExports.jsx(SelectItem,{value:"es",children:"Espaol (Spanish)"}),jsxRuntimeExports.jsx(SelectItem,{value:"fr",children:"Franais (French)"}),jsxRuntimeExports.jsx(SelectItem,{value:"de",children:"Deutsch (German)"}),jsxRuntimeExports.jsx(SelectItem,{value:"ja",children:" (Japanese)"}),jsxRuntimeExports.jsx(SelectItem,{value:"ko",children:" (Korean)"}),jsxRuntimeExports.jsx(SelectItem,{value:"ar",children:" (Arabic)"}),jsxRuntimeExports.jsx(SelectItem,{value:"pt",children:"Portugus (Portuguese)"}),jsxRuntimeExports.jsx(SelectItem,{value:"ru",children:" (Russian)"}),jsxRuntimeExports.jsx(SelectItem,{value:"hi",children:" (Hindi)"}),jsxRuntimeExports.jsx(SelectItem,{value:"vi",children:"Ting Vit (Vietnamese)"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 p-4 border border-border/50 rounded-lg bg-surface-2",children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Choose AI Provider:"}),jsxRuntimeExports.jsxs(RadioGroup,{value:b,onValueChange:e=>j(e),className:"flex gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"gemini",id:"gemini"}),jsxRuntimeExports.jsx(Label,{htmlFor:"gemini",className:"cursor-pointer",children:"Google Gemini"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:"openai",id:"openai"}),jsxRuntimeExports.jsx(Label,{htmlFor:"openai",className:"cursor-pointer",children:"OpenAI GPT"})]})]})]}),jsxRuntimeExports.jsx(Button$1,{onClick:async()=>{var e;if(c.trim().length<50)a({title:"Text too short",description:"Please write more content before requesting feedback.",variant:"destructive"});else{m(!0);try{console.log(" Requesting AI feedback for writing...");const{data:s,error:r}=await supabase.functions.invoke("ielts-writing-examiner",{body:{task1Answer:"task1"===(null==o?void 0:o.task_type)?c:"Not completed",task2Answer:"task2"===(null==o?void 0:o.task_type)?c:"Not completed",task1Data:"task1"===(null==o?void 0:o.task_type)?{title:(null==o?void 0:o.title)||"Task 1",instructions:(null==o?void 0:o.prompt_text)||"",imageUrl:null==o?void 0:o.image_url}:{},task2Data:"task2"===(null==o?void 0:o.task_type)?{title:(null==o?void 0:o.title)||"Task 2",instructions:(null==o?void 0:o.prompt_text)||""}:{},apiProvider:b,targetLanguage:"en"!==R?R:void 0}});if(r)throw r;if(!s.success)throw new Error(s.error||"Analysis failed");h(s.feedback);try{const{data:{user:t}}=await supabase.auth.getUser();if(t){console.log(" Saving writing test results for user:",t.id);const{data:r,error:n}=await supabase.from("test_results").insert({user_id:t.id,test_type:"writing",total_questions:1,correct_answers:1,score_percentage:85,time_taken:60*((null==o?void 0:o.time_limit)||60),test_data:{prompt:o,response:c,word_count:x,feedback:s.feedback}}).select().single();if(n)throw console.error(" Error saving test result:",n),n;console.log(" Test result saved:",r);const{error:i}=await supabase.from("writing_test_results").insert({user_id:t.id,test_result_id:r.id,task_number:(null==o?void 0:o.task_number)||1,prompt_text:(null==o?void 0:o.prompt_text)||"",user_response:c,word_count:x,band_scores:(null==(e=s.structured)?void 0:e.criteria)||null,detailed_feedback:s.feedback,structured:s.structured||null,improvement_suggestions:[],time_taken_seconds:60*((null==o?void 0:o.time_limit)||60)});if(i)throw console.error(" Error saving writing result:",i),i;console.log(" Writing test results saved successfully"),a({title:"Results Saved",description:"Your writing test results have been saved to your dashboard!"})}}catch(t){console.error(" Error saving writing results:",t),a({title:"Save Failed",description:"Your feedback was generated but results couldn't be saved. Please contact support.",variant:"destructive"})}console.log(" AI feedback received successfully"),a({title:"Writing Analysis Complete",description:"Your writing has been analyzed with detailed IELTS band scores!"})}catch(s){console.error(" Feedback error:",s),a({title:"Analysis Failed",description:s.message||"Could not analyze your writing. Please try again.",variant:"destructive"})}finally{m(!1)}}},disabled:u||c.trim().length<50,className:"w-full btn-primary",children:u?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(LottieLoadingAnimation,{size:"sm",message:`Analyzing with ${"gemini"===b?"Gemini":"OpenAI"}...`})}):`Get AI Feedback & IELTS Band Score (${"gemini"===b?"Gemini":"OpenAI"})`})]})]})]}),p&&jsxRuntimeExports.jsxs(Card,{className:"card-modern",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(PenTool,{className:"w-5 h-5 text-brand-blue"}),"IELTS Writing Analysis & Band Score"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"prose max-w-none",children:jsxRuntimeExports.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed bg-surface-3 p-4 rounded-xl",children:p})})})]})]})})]})},AudioRecorder=({onRecordingComplete:e,disabled:t=!1,autoFocus:s=!1})=>{const[r,a]=reactExports.useState(!1),[n,i]=reactExports.useState(!1),[o,l]=reactExports.useState(null),[c,d]=reactExports.useState(0),u=reactExports.useRef(null),m=reactExports.useRef(null),p=reactExports.useRef(null),h=reactExports.useRef([]),x=reactExports.useRef(null),[f,g]=reactExports.useState(null),[y,v]=reactExports.useState(!1),{toast:E}=useToast();reactExports.useEffect(()=>{var e;!s||r||o||null==(e=x.current)||e.focus()},[s,r,o]),reactExports.useCallback(()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),s=e.createGain();t.type="sine",t.frequency.value=880,t.connect(s),s.connect(e.destination),s.gain.setValueAtTime(1e-4,e.currentTime),s.gain.exponentialRampToValueAtTime(.15,e.currentTime+.01),t.start(),setTimeout(()=>{s.gain.exponentialRampToValueAtTime(1e-5,e.currentTime+.12),setTimeout(()=>{t.stop(),e.close()},150)},100)}catch(e){}},[]);const b=reactExports.useCallback(async()=>{try{const t=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:44100,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),s=new MediaRecorder(t,{mimeType:"audio/webm;codecs=opus"});u.current=s,h.current=[],s.ondataavailable=e=>{e.data.size>0&&h.current.push(e.data)},s.onstop=()=>{const s=new Blob(h.current,{type:"audio/webm"});l(s),e(s),t.getTracks().forEach(e=>e.stop())},s.start(1e3),a(!0),d(0),p.current=setInterval(()=>{d(e=>e+1)},1e3)}catch(t){console.error("Error starting recording:",t),E({title:"Recording Error",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},[e,E]),j=reactExports.useCallback(()=>{u.current&&r&&(u.current.stop(),a(!1),p.current&&(clearInterval(p.current),p.current=null))},[r]),R=reactExports.useCallback(()=>{if(o&&!n){const e=URL.createObjectURL(o),t=new Audio(e);m.current=t,t.onended=()=>{i(!1),URL.revokeObjectURL(e)},t.play(),i(!0)}},[o,n]),_=reactExports.useCallback(()=>{m.current&&n&&(m.current.pause(),i(!1))},[n]),w=reactExports.useCallback(()=>{l(null),d(0),i(!1),m.current&&(m.current.pause(),m.current=null)},[]);return jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-mono text-primary",children:(S=c,`${Math.floor(S/60)}:${(S%60).toString().padStart(2,"0")}`)}),r&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary mt-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Recording..."})]})]}),y&&jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center text-3xl font-semibold text-primary",children:f})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4",children:[!r&&!o&&jsxRuntimeExports.jsxs(Button$1,{ref:x,onClick:b,disabled:t,size:"lg",children:[jsxRuntimeExports.jsx(Mic,{className:"w-5 h-5 mr-2"}),"Start recording"]}),r&&jsxRuntimeExports.jsxs(Button$1,{onClick:j,size:"lg",variant:"secondary",children:[jsxRuntimeExports.jsx(Square,{className:"w-5 h-5 mr-2"}),"Stop Recording"]}),o&&!r&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button$1,{onClick:n?_:R,size:"lg",variant:"outline",children:n?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Pause,{className:"w-5 h-5 mr-2"}),"Pause"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Play,{className:"w-5 h-5 mr-2"}),"Play"]})}),jsxRuntimeExports.jsxs(Button$1,{onClick:w,size:"lg",variant:"outline",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-5 h-5 mr-2"}),"Record Again"]})]})]}),o&&jsxRuntimeExports.jsx("div",{className:"text-center text-sm text-muted-foreground",children:'Recording complete! Click "Get Analysis" to receive detailed feedback.'})]})});var S},useSpeakingTest=()=>{const[e,t]=reactExports.useState(null),[s,r]=reactExports.useState(1),[a,n]=reactExports.useState(0),[i,o]=reactExports.useState(!1),[l,c]=reactExports.useState(!1),[d,u]=reactExports.useState(!1),{toast:m}=useToast(),p=reactExports.useCallback(async e=>{c(!0);try{const{data:s,error:r}=await supabase.from("speaking_prompts").select("*").eq("part_number",e);if(r)throw r;if(s&&s.length>0){const e=s[Math.floor(Math.random()*s.length)];t(e),n(60*e.time_limit),await h(e.prompt_text)}else m({title:"No questions available",description:`No speaking questions found for Part ${e}`,variant:"destructive"})}catch(s){console.error("Error loading prompt:",s),m({title:"Error loading question",description:s.message,variant:"destructive"})}finally{c(!1)}},[m]),h=async e=>{if(e){u(!0);try{const{data:t,error:s}=await supabase.functions.invoke("audio-cache",{body:{text:e,voice_id:"9BWtsMINqrJLrRacOk9x"}});if(s)throw s;if(null==t?void 0:t.audioContent){const e=new Audio(t.audioContent);e.onended=()=>{u(!1)},e.onerror=()=>{u(!1),m({title:"Audio playback failed",description:"Could not play the question audio",variant:"destructive"})},await e.play()}}catch(t){console.error("OpenAI TTS error:",t),u(!1),m({title:"Voice generation failed",description:"Could not generate question audio",variant:"destructive"})}}};reactExports.useEffect(()=>{let e;return i&&a>0&&(e=setInterval(()=>{n(e=>e<=1?(o(!1),m({title:"Time's up!",description:"The time limit for this part has been reached."}),0):e-1)},1e3)),()=>clearInterval(e)},[i,a,m]);return reactExports.useEffect(()=>{p(1)},[p]),{currentPrompt:e,currentPart:s,timeRemaining:a,isTimerActive:i,isLoading:l,isPlayingPrompt:d,loadRandomPrompt:p,playPromptAudio:h,startTimer:()=>{o(!0)},stopTimer:()=>{o(!1)},resetTimer:()=>{o(!1),e&&n(60*e.time_limit)},changePart:async e=>{r(e),o(!1),await p(e)},formatTime:e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}}},MAX_OVERFLOW=50;function VolumeSlider({defaultValue:e=50,onVolumeChange:t,className:s="",showValueIndicator:r=!0}){const[a,n]=reactExports.useState(!1);return jsxRuntimeExports.jsx("div",{className:`slider-container ${s}`,style:{width:a?void 0:"auto"},children:jsxRuntimeExports.jsx(Slider,{defaultValue:e,startingValue:0,maxValue:100,onVolumeChange:e=>{document.querySelectorAll("audio").forEach(t=>{t.volume=e/100});try{window.localStorage.setItem("appAudioVolume",String(e)),window.dispatchEvent(new CustomEvent("app:volume-change",{detail:{volume:e/100}}))}catch{}null==t||t(e)},rightIcon:jsxRuntimeExports.jsx(Volume2,{size:20}),showValueIndicator:r&&a,expanded:a,onToggleExpanded:()=>n(e=>!e)})})}function Slider({defaultValue:e,startingValue:t,maxValue:s,onVolumeChange:r,rightIcon:a,showValueIndicator:n=!0,expanded:i,onToggleExpanded:o}){const[l,c]=reactExports.useState(e),d=reactExports.useRef(null),[u,m]=reactExports.useState("middle"),p=useMotionValue(0),h=useMotionValue(0);reactExports.useEffect(()=>{c(e)},[e]),reactExports.useEffect(()=>{null==r||r(l)},[l,r]),useMotionValueEvent(p,"change",e=>{if(d.current){const{left:t,right:s}=d.current.getBoundingClientRect();let r;e<t?(m("left"),r=t-e):e>s?(m("right"),r=e-s):(m("middle"),r=0),h.jump(decay(r,MAX_OVERFLOW))}});const x=e=>{if(e.buttons>0&&d.current){const{left:r,width:a}=d.current.getBoundingClientRect();let n=t+(e.clientX-r)/a*(s-t);n=Math.min(Math.max(n,t),s),c(n),p.jump(e.clientX)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(motion.div,{className:"slider-wrapper",children:[jsxRuntimeExports.jsx("div",{ref:d,className:"slider-root",onPointerMove:i?x:void 0,onPointerDown:i?e=>{x(e),e.currentTarget.setPointerCapture(e.pointerId)}:void 0,onPointerUp:i?()=>{animate(h,0,{type:"spring",bounce:.5})}:void 0,children:i&&jsxRuntimeExports.jsx("div",{className:"slider-track-wrapper",children:jsxRuntimeExports.jsx("div",{className:"slider-track",children:jsxRuntimeExports.jsx("div",{className:"slider-range",style:{width:`${(()=>{const e=s-t;return 0===e?0:(l-t)/e*100})()}%`}})})})}),jsxRuntimeExports.jsx("div",{onClick:o,className:"cursor-pointer",children:a})]}),n&&jsxRuntimeExports.jsx("p",{className:"value-indicator",children:Math.round(l)})]})}function decay(e,t){const s=e/t;return 2*(1/(1+Math.exp(-s))-.5)*t}const SpeakingQuestionByQuestion=({partNumber:e,onComplete:t})=>{const{toast:s}=useToast(),[r,a]=reactExports.useState([]),[n,i]=reactExports.useState(0),[o,l]=reactExports.useState([]),[c,d]=reactExports.useState(!0),[u,m]=reactExports.useState(!1),[p,h]=reactExports.useState({});reactExports.useEffect(()=>{x()},[e]);const x=async()=>{try{d(!0);const{data:t,error:r}=await supabase.from("speaking_prompts").select("*").eq("part_number",e).order("id");if(r)throw r;if(t&&t.length>0){const e=t.map(e=>({...e,follow_up_questions:Array.isArray(e.follow_up_questions)?e.follow_up_questions:[]}));a(e)}else s({title:"No questions available",description:`No speaking questions found for Part ${e}`,variant:"destructive"})}catch(t){console.error("Error loading questions:",t),s({title:"Error loading questions",description:t.message,variant:"destructive"})}finally{d(!1)}};if(c)return jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsx(LottieLoadingAnimation,{size:"md",message:"Loading questions..."})});if(0===r.length)return jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:["No questions available for Part ",e]})});const f=r[n],g=n===r.length-1,y=o[n];return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"font-georgia",children:[" Part ",e," - Question ",n+1," of ",r.length]}),jsxRuntimeExports.jsxs(Badge,{variant:"outline",children:[f.time_limit," minutes"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx(VolumeSlider,{defaultValue:50,className:"w-64 md:w-80"}),jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:()=>(async(e,t)=>{if(e){m(!0);try{if(p[t]){console.log(" Efficient Voice: Reusing saved audio for question",t);const e=new Audio(p[t]);return e.onended=()=>m(!1),e.onerror=()=>{m(!1),s({title:"Audio playback failed",description:"Could not play the saved question audio",variant:"destructive"})},void(await e.play())}console.log(" Efficient Voice: Using audio cache for question",t);const{data:r,error:a}=await supabase.functions.invoke("audio-cache",{body:{text:e,voice:"alloy",questionId:t}});if(a)throw a;if(r.success){const e=r.cached?r.audioContent:`data:audio/mp3;base64,${r.audioContent}`;h(s=>({...s,[t]:e})),console.log(` Efficient Voice: Audio ${r.cached?"reused from cache":"generated and cached"} - cost efficient!`);const a=new Audio(e);a.onended=()=>m(!1),a.onerror=()=>{m(!1),s({title:"Audio playback failed",description:"Could not play the question audio",variant:"destructive"})},await a.play()}}catch(r){console.error("TTS error:",r),m(!1),s({title:"Voice generation failed",description:"Could not generate question audio",variant:"destructive"})}}})(f.prompt_text,f.id),disabled:u,children:[jsxRuntimeExports.jsx(Volume2,{className:"w-4 h-4 mr-2"}),u?"Playing...":"Hear Question"]})]})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gentle-blue/10 border border-gentle-blue/20 p-6 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-3 text-gentle-blue",children:" Question:"}),jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:f.prompt_text}),f.follow_up_questions&&Array.isArray(f.follow_up_questions)&&f.follow_up_questions.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-gentle-blue/20",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2 text-gentle-blue",children:"Follow-up questions:"}),jsxRuntimeExports.jsx("ul",{className:"text-sm space-y-1",children:f.follow_up_questions.map((e,t)=>jsxRuntimeExports.jsxs("li",{className:"text-muted-foreground",children:[" ",e]},t))})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:" Record your answer:"}),jsxRuntimeExports.jsx(AudioRecorder,{onRecordingComplete:async e=>{const t=r[n],s={questionId:t.id,questionText:t.prompt_text,audioBlob:e,timestamp:(new Date).toISOString()},a=[...o];a[n]=s,l(a)},disabled:!1})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-4",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outline",onClick:()=>{n>0&&i(n-1)},disabled:0===n,children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Previous"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-muted-foreground",children:["Question ",n+1," of ",r.length]}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>{n<r.length-1?i(n+1):t(o)},disabled:!y,variant:g?"default":"outline",children:g?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Complete Part ",e]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Next",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})})]})]})})]})},Speaking=()=>{const e=useNavigate(),{toast:t}=useToast(),[s,r]=reactExports.useState(!1),[a,n]=reactExports.useState(null),[i,o]=reactExports.useState(null),[l,c]=reactExports.useState(!1),{currentPrompt:d,currentPart:u,timeRemaining:m,isTimerActive:p,isLoading:h,isPlayingPrompt:x,playPromptAudio:f,startTimer:g,stopTimer:y,resetTimer:v,changePart:E,formatTime:b,loadRandomPrompt:j}=useSpeakingTest(),R=e=>{switch(e){case 1:return"Introduction & Interview (4-5 minutes)";case 2:return"Long Turn (3-4 minutes, including 1 minute preparation)";case 3:return"Discussion (4-5 minutes)";default:return""}},_={title:"IELTS Speaking Practice | AI Examiner Feedback & Transcripts",description:"Record IELTS Speaking responses, get instant transcripts, fluency analytics, pronunciation tips, and follow-up questions built by real examiners.",keywords:"IELTS speaking practice, AI speaking examiner, IELTS speaking feedback, pronunciation analysis, IELTS speaking timer",type:"article",schemaType:"faq",url:"https://englishaidol.com/speaking",faqs:[{question:"How does the AI evaluate my IELTS Speaking performance?",answer:"It listens to your recording, transcribes it, then scores Fluency, Lexical Resource, Grammar, and Pronunciation based on examiner rubrics, delivering actionable tips."},{question:"Can I practice Part 1, Part 2, and Part 3 questions?",answer:"Yes. Switch between all three parts, hear follow-up questions, and use the built-in timer to mimic the real interview experience."}]};return h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SEO,{..._}),jsxRuntimeExports.jsx("div",{className:"min-h-screen glass-background flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-brand-blue"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary",children:"Loading speaking test..."})]})})]}):d?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-surface-1/30 to-primary/5",children:[jsxRuntimeExports.jsx(SEO,{..._}),jsxRuntimeExports.jsx("header",{className:"border-b border-border/60 bg-background/80 backdrop-blur-xl shadow-sm",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"hover:bg-primary/10",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Dashboard"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-2xl bg-primary/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(Mic,{className:"w-5 h-5 text-primary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"font-semibold text-text-primary",children:"IELTS Speaking Practice"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-secondary",children:"AI-Powered Speech Analysis"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(VolumeSlider,{defaultValue:50,className:"w-32"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-surface-1 rounded-xl",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4 text-primary"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-sm "+(m<60?"text-destructive":"text-text-primary"),children:b(m)})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:p?y:g,className:"hover:bg-primary/10 border-primary/20",children:[p?jsxRuntimeExports.jsx(Pause,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Play,{className:"w-4 h-4"}),p?"Pause":"Start"]}),jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:v,className:"hover:bg-secondary/10 border-secondary/20",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4"}),"Reset"]})]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx(Card,{className:"bg-gradient-to-r from-background via-surface-1/50 to-background border border-border/60 shadow-lg",children:jsxRuntimeExports.jsxs(CardHeader,{className:"pb-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto rounded-3xl bg-primary/10 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Mic,{className:"w-8 h-8 text-primary"})}),jsxRuntimeExports.jsx(CardTitle,{className:"text-3xl font-medium bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"IELTS Speaking Practice"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"Experience an authentic IELTS speaking test with advanced AI analysis and instant feedback"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-3 mt-8",children:[1,2,3].map(e=>{var t;return jsxRuntimeExports.jsxs(Button$1,{variant:u===e?"default":"outline",onClick:()=>E(e),disabled:s||x,className:"flex flex-col h-auto p-6 min-w-[140px] transition-all duration-300 "+(u===e?"bg-primary text-primary-foreground shadow-lg scale-105":"hover:bg-primary/5 hover:border-primary/30 hover:scale-102"),children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold text-lg",children:["Part ",e]}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-75 mt-1 text-center leading-tight",children:R(e).split("(")[0].trim()}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-60 mt-1",children:(null==(t=R(e).match(/\((.*?)\)/))?void 0:t[1])||""})]},e)})}),(1===u||3===u)&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-6",children:jsxRuntimeExports.jsx(Button$1,{variant:"outline",onClick:()=>c(!l),className:"text-sm px-6 py-2 transition-all duration-300 "+(l?"bg-secondary/10 border-secondary/30 text-secondary":"hover:bg-primary/5 hover:border-primary/30"),children:l?" Switch to Free Practice":" One Question at a Time"})})]})}),(1===u||3===u)&&l&&jsxRuntimeExports.jsx(SpeakingQuestionByQuestion,{partNumber:u,onComplete:e=>{console.log(" Sequential Questions: Completed all questions with responses:",e.length),t({title:"Part Complete!",description:`All questions answered for Part ${u}`}),c(!1)}}),d&&!l&&jsxRuntimeExports.jsxs(Card,{className:"bg-gradient-to-br from-background to-surface-1/30 border border-border/60 shadow-lg",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl font-medium text-text-primary flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-xl bg-primary/10 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:""})}),d.title," - Part ",u]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:()=>f(d.prompt_text),disabled:x,className:"hover:bg-primary/10 border-primary/20",children:[jsxRuntimeExports.jsx(Volume2,{className:"w-4 h-4 mr-2"}),x?"Playing...":"Hear Question"]}),jsxRuntimeExports.jsxs(Button$1,{variant:"outline",size:"sm",onClick:()=>j(u),disabled:s||x,className:"hover:bg-secondary/10 border-secondary/20",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4 mr-2"}),"New Question"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:R(u)})]})]}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-secondary/5 border border-primary/20 p-6 rounded-2xl",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold mb-4 text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-6 h-6 rounded-lg bg-primary/10 flex items-center justify-center text-sm",children:""}),"Task Instructions"]}),jsxRuntimeExports.jsx("p",{className:"leading-relaxed whitespace-pre-wrap text-text-primary",children:d.prompt_text}),d.follow_up_questions&&Array.isArray(d.follow_up_questions)&&d.follow_up_questions.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-primary/20",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium mb-3 text-primary flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-5 h-5 rounded-lg bg-primary/10 flex items-center justify-center text-xs",children:""}),"Follow-up Questions"]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:d.follow_up_questions.map((e,t)=>jsxRuntimeExports.jsxs("li",{className:"text-text-secondary flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-primary mt-1",children:""}),jsxRuntimeExports.jsx("span",{children:e})]},t))})]})]}),jsxRuntimeExports.jsx("div",{className:"text-center py-4 bg-surface-1/50 rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-text-secondary font-medium",children:2===u?" You have 1 minute to prepare, then speak for up to 2 minutes":1===u?" Speak naturally for 4-5 minutes":" Engage in discussion for 4-5 minutes"})}),jsxRuntimeExports.jsx(AudioRecorder,{onRecordingComplete:async e=>{r(!0);try{const r=await(s=e,new Promise((e,t)=>{const r=new FileReader;r.onloadend=()=>{const t=r.result.split(",")[1];e(t)},r.onerror=t,r.readAsDataURL(s)})),{data:a,error:i}=await supabase.functions.invoke("speech-analysis",{body:{audio:r,prompt:(null==d?void 0:d.prompt_text)||"",speakingPart:`Part ${u}`}});if(i)throw i;if(!a.success)throw new Error(a.error||"Analysis failed");o(a.transcription),n(a.analysis),t({title:"Analysis Complete ",description:"Your speech has been analyzed successfully!"})}catch(a){console.error("Analysis error:",a),t({title:"Analysis Failed",description:a.message||"Could not analyze your speech. Please try again.",variant:"destructive"})}finally{r(!1)}var s},disabled:s}),s&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12 bg-gradient-to-r from-primary/5 to-secondary/5 rounded-2xl",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-12 h-12 animate-spin mx-auto mb-6 text-primary"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg text-text-primary mb-2",children:"Analyzing Your Speech"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary max-w-md mx-auto",children:" AI is evaluating pronunciation, fluency, intonation, and accent patterns to provide detailed feedback"})]})]})]}),i&&!l&&jsxRuntimeExports.jsxs(Card,{className:"bg-gradient-to-br from-secondary/5 to-background border border-secondary/20 shadow-lg",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl font-medium text-text-primary flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-xl bg-secondary/10 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:""})}),"Speech Transcription"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-surface-1 to-surface-1/50 p-6 rounded-2xl border border-border/60",children:jsxRuntimeExports.jsxs("p",{className:"text-text-primary leading-relaxed text-lg italic",children:['"',i,'"']})})})]}),a&&!l&&jsxRuntimeExports.jsxs(Card,{className:"bg-gradient-to-br from-primary/5 to-background border border-primary/20 shadow-lg",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"text-xl font-medium text-text-primary flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-xl bg-primary/10 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:""})}),"AI Speech Analysis & Feedback"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-surface-1 to-surface-1/50 p-6 rounded-2xl border border-border/60",children:jsxRuntimeExports.jsx("div",{className:"prose max-w-none",children:jsxRuntimeExports.jsx("div",{className:"whitespace-pre-wrap leading-relaxed text-text-primary",children:a})})})})]})]})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SEO,{..._}),jsxRuntimeExports.jsx("div",{className:"min-h-screen glass-background flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center glass-card p-8 rounded-2xl max-w-md",children:[jsxRuntimeExports.jsx(Mic,{className:"h-12 w-12 mx-auto mb-4 text-text-secondary"}),jsxRuntimeExports.jsx("h2",{className:"text-heading-2 mb-2 text-text-primary",children:"No Speaking Test Available"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary mb-6",children:"No speaking prompts found for this test. Please check with your instructor to upload content."}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs(Button$1,{onClick:()=>e(-1),variant:"outline",className:"w-full",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Go Back"]}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>e("/tests"),className:"w-full btn-primary",children:"Browse Other Tests"})]})]})})]})},ADMIN_SESSION_KEY="admin_session",ADMIN_PASSWORD="myye65402086";function useAdminAuth(){const[e,t]=reactExports.useState(null),[s,r]=reactExports.useState(!0);reactExports.useEffect(()=>{console.log(" Checking admin session...");"true"===localStorage.getItem(ADMIN_SESSION_KEY)?(console.log(" Valid admin session found"),t({id:"admin",email:"admin@system.local",name:"Admin"})):(console.log(" No valid admin session"),t(null)),r(!1)},[]);return{admin:e,loading:s,login:async e=>{console.log(" Attempting admin login...");try{return e!==ADMIN_PASSWORD?(console.log(" Invalid password"),{error:"Invalid password"}):(console.log(" Password validated"),localStorage.setItem(ADMIN_SESSION_KEY,"true"),t({id:"admin",email:"admin@system.local",name:"Admin"}),{success:!0})}catch(s){return console.error(" Error during admin login:",s),{error:"Failed to login"}}},logout:()=>{console.log(" Logging out admin..."),localStorage.removeItem(ADMIN_SESSION_KEY),t(null)},validateSession:()=>"true"===localStorage.getItem(ADMIN_SESSION_KEY)}}const AdminLogin=()=>{const e=useNavigate(),{toast:t}=useToast(),{login:s}=useAdminAuth(),[r,a]=reactExports.useState(""),[n,i]=reactExports.useState(!1),[o,l]=reactExports.useState(null),[c,d]=reactExports.useState(!1),u=async()=>{if(r){i(!0);try{const n=await s(r);n.success?(console.log(" Login successful, localStorage admin_session set"),l(null),d(!1),t({title:"Access granted",description:"Welcome to the admin panel"}),e("/admin")):(console.log(" Login failed:",n.error),n.blocked?(d(!0),l(0)):(d(!1),l(n.remaining??null)),t({title:n.blocked?"Access Blocked":"Access denied",description:n.error||"Failed to login",variant:"destructive"}),n.blocked||a(""))}catch(n){console.error(" Login error:",n),t({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{i(!1)}}else t({title:"Password required",description:"Please enter the admin password",variant:"destructive"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 w-full h-full",children:jsxRuntimeExports.jsx("img",{src:"/lovable-uploads/c25cc620-ab6d-47a4-9dc6-32d1f6264773.png",alt:"Background",className:"absolute inset-0 w-full h-full object-cover"})}),jsxRuntimeExports.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2",children:[jsxRuntimeExports.jsxs(Button$1,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"mb-4 bg-zinc-950/60 text-white hover:bg-zinc-800/80",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-white/10 border border-white/20 backdrop-blur-xl rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Settings,{className:"w-8 h-8 text-white"})})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-light text-zinc-950",children:"Admin Panel"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-700",children:"Enter password to access"})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-white/10 border border-white/20 backdrop-blur-xl",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-zinc-950 font-normal",children:"Admin Access"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-zinc-950",children:"Password"}),jsxRuntimeExports.jsx(Input,{type:"password",placeholder:"Enter admin password",value:r,onChange:e=>{a(e.target.value),(null!==o||c)&&(l(null),d(!1))},onKeyPress:e=>{"Enter"===e.key&&u()},disabled:n||c,className:"bg-white/20 border-white/30 text-zinc-950 placeholder:text-zinc-600"}),null!==o&&o>0&&!c&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:[o," attempt",1!==o?"s":""," remaining"]}),c&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Too many failed attempts. Please try again in 30 minutes."})]}),jsxRuntimeExports.jsx(Button$1,{onClick:u,className:"w-full",disabled:n||!r||c,children:n?"Accessing...":c?"Blocked - Try Again Later":"Access Admin Panel"})]})]})]})})]})},AdminDashboard=reactExports.lazy(()=>__vitePreload(()=>import("./AdminDashboard-BOJl-M4J.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),AdminReading=reactExports.lazy(()=>__vitePreload(()=>import("./AdminReading-Dv1XbNM2.js"),__vite__mapDeps([11,1,2,3,4,12,13,5,14,15,6,7,8,9,10]))),AdminListening=reactExports.lazy(()=>__vitePreload(()=>import("./AdminListening-U3ztXahi.js"),__vite__mapDeps([16,1,2,3,4,13,14,15,5,6,7,8,9,10]))),AdminWriting=reactExports.lazy(()=>__vitePreload(()=>import("./AdminWriting-BnGyU0UQ.js"),__vite__mapDeps([17,1,2,3,4,13,5,6,7,8,9,10]))),AdminSpeaking=reactExports.lazy(()=>__vitePreload(()=>import("./AdminSpeaking-CzHjobeY.js"),__vite__mapDeps([18,1,2,3,4,13,5,6,7,8,9,10]))),AdminIELTS=reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTS-28wp7Nzz.js"),__vite__mapDeps([19,1,2,3,4,20,21,22,5,14,15,23,6,7,8,9,10]))),AdminPTE=reactExports.lazy(()=>__vitePreload(()=>import("./AdminPTE-BhqDHxjy.js"),__vite__mapDeps([24,1,2,3,4,20,21,5,6,7,8,9,10]))),AdminTOEFL=reactExports.lazy(()=>__vitePreload(()=>import("./AdminTOEFL-Dg1pPg6A.js"),__vite__mapDeps([25,1,2,3,4,20,21,5,14,15,26,6,7,8,9,10]))),AdminTOEIC=reactExports.lazy(()=>__vitePreload(()=>import("./AdminTOEIC-CwNOD-hd.js"),__vite__mapDeps([27,1,2,3,4,20,21,22,5,6,7,8,9,10]))),AdminTOEICListening=reactExports.lazy(()=>__vitePreload(()=>import("./AdminTOEICListening-B7RLInR4.js"),__vite__mapDeps([28,1,2,3,4,20,5,29,6,7,8,9,10]))),AdminTOEICReading=reactExports.lazy(()=>__vitePreload(()=>import("./AdminTOEICReading-DVkmeDKj.js"),__vite__mapDeps([30,1,2,3,4,20,5,29,6,7,8,9,10]))),TOEICListeningTest=reactExports.lazy(()=>__vitePreload(()=>import("./TOEICListeningTest-CK5cLy_H.js"),__vite__mapDeps([31,1,2,3,4,32,33,6,7,8,9,10]))),TOEICReadingTest=reactExports.lazy(()=>__vitePreload(()=>import("./TOEICReadingTest-DHTAxI2k.js"),__vite__mapDeps([34,1,2,3,4,35,6,7,8,9,10]))),TOEICReadingResult=reactExports.lazy(()=>__vitePreload(()=>import("./TOEICReadingResult-BEZyhu-s.js"),__vite__mapDeps([36,1,2,3,4,35,13,6,7,8,9,10]))),TOEICPortal=reactExports.lazy(()=>__vitePreload(()=>import("./TOEICPortal-ByPul2WW.js"),__vite__mapDeps([37,1,2,3,4,6,7,8,9,10]))),AdminPTESpeakingWriting=reactExports.lazy(()=>__vitePreload(()=>import("./AdminPTESpeakingWriting-B0_YTg8t.js"),__vite__mapDeps([38,1,2,3,4,22,5,6,7,8,9,10]))),AdminPTEReading=reactExports.lazy(()=>__vitePreload(()=>import("./AdminPTEReading-Cp9e2ZEJ.js"),__vite__mapDeps([39,1,2,3,4,20,22,5,29,6,7,8,9,10]))),AdminPTEListening=reactExports.lazy(()=>__vitePreload(()=>import("./AdminPTEListening--soXvmKu.js"),__vite__mapDeps([40,1,2,3,4,20,22,5,29,6,7,8,9,10]))),PTESpeakingWritingTest=reactExports.lazy(()=>__vitePreload(()=>import("./PTESpeakingWritingTest-CjG7xZFD.js"),__vite__mapDeps([41,1,2,3,4,42,9,6,7,8,10]))),PTEReadingTest=reactExports.lazy(()=>__vitePreload(()=>import("./PTEReadingTest-CXNzc1aN.js"),__vite__mapDeps([43,1,2,3,4,44,6,7,8,9,10]))),PTEListeningTest=reactExports.lazy(()=>__vitePreload(()=>import("./PTEListeningTest-DAIuhpyq.js"),__vite__mapDeps([45,1,2,3,4,44,20,6,7,8,9,10]))),AdminGeneral=reactExports.lazy(()=>__vitePreload(()=>import("./AdminGeneral-Cfq34LVb.js"),__vite__mapDeps([46,1,2,3,4,20,21,5,14,15,26,6,7,8,9,10]))),PersonalPage=reactExports.lazy(()=>__vitePreload(()=>import("./PersonalPage-CvzsZcpL.js"),__vite__mapDeps([47,1,2,3,4,20,32,33,6,7,8,9,10]))),Dashboard=reactExports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>Dashboard$2),void 0)),TestSelection=reactExports.lazy(()=>__vitePreload(()=>import("./TestSelection-B_89kIcg.js"),__vite__mapDeps([48,1,2,3,4,6,7,8,9,10]))),Auth=reactExports.lazy(()=>__vitePreload(()=>import("./Auth-DIhS9Qpb.js"),__vite__mapDeps([49,1,2,3,4,6,7,8,9,10]))),NotFound=reactExports.lazy(()=>__vitePreload(()=>import("./NotFound-CRi7PsFG.js"),__vite__mapDeps([50,1,2,3,4]))),CommunityPage=reactExports.lazy(()=>__vitePreload(()=>import("./CommunityPage-CCyfBVL2.js"),__vite__mapDeps([51,1,2,3,4,6,7,8,9,10]))),SettingsPage=reactExports.lazy(()=>__vitePreload(()=>import("./SettingsPage-B1QFRi42.js"),__vite__mapDeps([52,1,2,3,4,53,21,22,6,7,8,9,10]))),PTEPortal=reactExports.lazy(()=>__vitePreload(()=>import("./PTEPortal-cjnwzM9T.js"),__vite__mapDeps([54,1,2,3,4,20,6,7,8,9,10]))),TOEFLPortal=reactExports.lazy(()=>__vitePreload(()=>import("./TOEFLPortal-DiPFiqn0.js"),__vite__mapDeps([55,1,2,3,4,6,7,8,9,10]))),GeneralPortal=reactExports.lazy(()=>__vitePreload(()=>import("./GeneralPortal-CK0VH17a.js"),__vite__mapDeps([56,1,2,3,4,6,7,8,9,10]))),EnhancedGeneralPortal=reactExports.lazy(()=>__vitePreload(()=>import("./EnhancedGeneralPortal-fMMBUcBU.js"),__vite__mapDeps([57,1,2,3,4,6,7,8,9,10]))),IELTSPortal=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSPortal-Bpmqsp-h.js"),__vite__mapDeps([58,1,2,3,4,23,6,7,8,9,10]))),IELTSSkillHub=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSSkillHub-kcxMWHsv.js"),__vite__mapDeps([59,1,2,3,4,6,7,8,9,10]))),IELTSSkillTests=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSSkillTests-DNGuN1FP.js"),__vite__mapDeps([60,1,2,3,4,6,7,8,9,10]))),AdminIELTSSkillManagement=reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTSSkillManagement-DUPHloBC.js"),__vite__mapDeps([61,1,2,3,4,22,5,6,7,8,9,10]))),IELTSTestModules=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSTestModules-C9NZmIU8.js"),__vite__mapDeps([62,1,2,3,4,6,7,8,9,10]))),QwenTTSTest=reactExports.lazy(()=>__vitePreload(()=>import("./QwenTTSTest-DFm4GCuX.js"),__vite__mapDeps([63,1,2,3,4,6,7,8,9,10]))),AdminTestManagement=reactExports.lazy(()=>__vitePreload(()=>import("./AdminTestManagement-4EI5_ilt.js"),__vite__mapDeps([64,1,2,3,4,5,6,7,8,9,10]))),AdminTestDetails=reactExports.lazy(()=>__vitePreload(()=>import("./AdminTestDetails-FzlE66re.js"),__vite__mapDeps([65,1,2,3,4,20,5,14,15,6,7,8,9,10]))),AdminSectionManagement=reactExports.lazy(()=>__vitePreload(()=>import("./AdminSectionManagement-CfjZ3V1d.js"),__vite__mapDeps([66,1,2,3,4,12,14,15,5,6,7,8,9,10]))),AdminReadingManagement=reactExports.lazy(()=>__vitePreload(()=>import("./AdminReadingManagement-Bk6ciavy.js"),__vite__mapDeps([67,1,2,3,4,5,6,7,8,9,10]))),AdminIELTSReadingDashboard=reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTSReadingDashboard-Cr7iMMPR.js"),__vite__mapDeps([68,1,2,3,4,22,5,6,7,8,9,10]))),AdminIELTSListening=reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTSListening-y3I6V7VX.js"),__vite__mapDeps([69,6,1,2,3,4,5,29,7,8,9,10])));reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTSWriting-rnv6BlmU.js"),__vite__mapDeps([70,1,2,3,4,22,5,6,7,8,9,10])));const AdminIELTSWritingTest=reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTSWritingTest-BzhJ8ThY.js"),__vite__mapDeps([71,1,2,3,4,21,5,72,6,7,8,9,10]))),AdminIELTSReadingTest=reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTSReadingTest-oe8RqinP.js"),__vite__mapDeps([73,1,2,3,4,20,5,29,6,7,8,9,10]))),AdminIELTSSpeaking=reactExports.lazy(()=>__vitePreload(()=>import("./AdminIELTSSpeaking-FigabrA2.js"),__vite__mapDeps([74,1,2,3,4,21,5,6,7,8,9,10]))),IELTSWritingTest=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSWritingTest-BY8aPkTa.js"),__vite__mapDeps([75,1,2,3,4,76,42,9,6,7,8,10]))),IELTSWritingProResults=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSWritingProResults-M48arg6-.js"),__vite__mapDeps([77,1,2,3,4,78,6,7,8,9,10]))),IELTSWritingResults=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSWritingResults-RGQgl9bK.js"),__vite__mapDeps([79,1,2,3,4,80,20,6,7,8,9,10]))),ReadingResults=reactExports.lazy(()=>__vitePreload(()=>import("./ReadingResults-Dbc60fBI.js"),__vite__mapDeps([81,1,2,3,4,13,32,33,6,7,8,9,10]))),ListeningResults=reactExports.lazy(()=>__vitePreload(()=>import("./ListeningResults-BV-HLFb2.js"),__vite__mapDeps([82,1,2,3,4,32,33,6,7,8,9,10]))),IELTSSpeakingResults=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSSpeakingResults-ChgfrT6g.js"),__vite__mapDeps([83,1,2,3,4,21,84,6,7,8,9,10]))),IELTSSpeakingTest=reactExports.lazy(()=>__vitePreload(()=>import("./IELTSSpeakingTest-D9dLuWup.js"),__vite__mapDeps([85,1,2,3,4,21,35,84,72,86,33,42,9,76,6,7,8,10]))),EnhancedReadingTest=reactExports.lazy(()=>__vitePreload(()=>import("./EnhancedReadingTest-KY7lrvNo.js"),__vite__mapDeps([87,1,2,3,4,78,6,7,8,9,10]))),Pricing=reactExports.lazy(()=>__vitePreload(()=>import("./Pricing-DpzFi9AQ.js"),__vite__mapDeps([88,1,2,3,4,6,7,8,9,10]))),AdminSkillsPractice=reactExports.lazy(()=>__vitePreload(()=>import("./AdminSkillsPractice-Bv9c02Oi.js"),__vite__mapDeps([89,1,2,3,4,5,23,6,7,8,9,10]))),AdminSkillManager=reactExports.lazy(()=>__vitePreload(()=>import("./AdminSkillManager-NVx8-HUH.js"),__vite__mapDeps([90,1,2,3,4,5,21,23,6,7,8,9,10]))),SkillPractice=reactExports.lazy(()=>__vitePreload(()=>import("./SkillPractice-DI74Lcbu.js"),__vite__mapDeps([91,6,1,2,3,4,23,78,92,22,7,8,9,10]))),AISpeakingCall=reactExports.lazy(()=>__vitePreload(()=>import("./AISpeakingCall-tHFEqysR.js"),__vite__mapDeps([93,1,2,3,4,6,7,8,9,10]))),AISpeakingTutor=reactExports.lazy(()=>__vitePreload(()=>import("./AISpeakingTutor-KCVwey-n.js"),__vite__mapDeps([94,1,2,3,4,6,7,8,9,10]))),AdminVocabularyTests=reactExports.lazy(()=>__vitePreload(()=>import("./AdminVocabularyTests-CZNHQnA6.js"),__vite__mapDeps([95,1,2,3,4,5,21,6,7,8,9,10]))),AdminVocabBook=reactExports.lazy(()=>__vitePreload(()=>import("./AdminVocabBook-41gexc75.js"),__vite__mapDeps([96,1,2,3,4,5,15,6,7,8,9,10]))),AdminVocabManager=reactExports.lazy(()=>__vitePreload(()=>import("./AdminVocabManager-zQrmTnDh.js"),__vite__mapDeps([97,1,2,3,4,6,7,8,9,10]))),AdminVocabularyTestDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminVocabularyTestDetail-BzGp5P0f.js"),__vite__mapDeps([98,1,2,3,4,5,21,15,99,6,7,8,9,10]))),AdminGrammarTests=reactExports.lazy(()=>__vitePreload(()=>import("./AdminGrammarTests-DsVpwWvL.js"),__vite__mapDeps([100,1,2,3,4,5,21,6,7,8,9,10]))),AdminGrammarTestDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminGrammarTestDetail-DnwYgTO7.js"),__vite__mapDeps([101,1,2,3,4,5,21,15,99,6,7,8,9,10]))),AdminParaphrasingTests=reactExports.lazy(()=>__vitePreload(()=>import("./AdminParaphrasingTests-DBq9rR8X.js"),__vite__mapDeps([102,1,2,3,4,5,21,6,7,8,9,10]))),AdminParaphrasingTestDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminParaphrasingTestDetail-CiEXx56Y.js"),__vite__mapDeps([103,1,2,3,4,5,21,15,6,7,8,9,10]))),AdminPronunciationTests=reactExports.lazy(()=>__vitePreload(()=>import("./AdminPronunciationTests-7G4xP2na.js"),__vite__mapDeps([104,1,2,3,4,5,21,6,7,8,9,10]))),AdminPronunciationTestDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminPronunciationTestDetail-bJQNH4oY.js"),__vite__mapDeps([105,1,2,3,4,5,21,6,7,8,9,10]))),AdminSentenceScrambleTests=reactExports.lazy(()=>__vitePreload(()=>import("./AdminSentenceScrambleTests-CVo--T5l.js"),__vite__mapDeps([106,1,2,3,4,5,21,6,7,8,9,10]))),AdminSentenceScrambleTestDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminSentenceScrambleTestDetail-zMpqheuY.js"),__vite__mapDeps([107,1,2,3,4,5,21,15,6,7,8,9,10]))),AdminListeningForDetailsTests=reactExports.lazy(()=>__vitePreload(()=>import("./AdminListeningForDetailsTests-Dku1f9hZ.js"),__vite__mapDeps([108,1,2,3,4,5,21,6,7,8,9,10]))),AdminListeningForDetailsTestDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminListeningForDetailsTestDetail-Cef6HblZ.js"),__vite__mapDeps([109,1,2,3,4,5,21,15,6,7,8,9,10]))),VocabularyQuiz=reactExports.lazy(()=>__vitePreload(()=>import("./VocabularyQuiz-C8cZAhQN.js"),__vite__mapDeps([110,1,2,3,4,111,78,6,7,8,9,10])));reactExports.lazy(()=>__vitePreload(()=>import("./GrammarQuiz-C1wNNMY8.js"),__vite__mapDeps([112,1,2,3,4,111,78,6,7,8,9,10])));const ParaphraseQuiz=reactExports.lazy(()=>__vitePreload(()=>import("./ParaphraseQuiz-BPOdyKEK.js"),__vite__mapDeps([113,1,2,3,4,111,78,6,7,8,9,10]))),SentenceScrambleQuiz=reactExports.lazy(()=>__vitePreload(()=>import("./SentenceScrambleQuiz-D5t6iOHU.js"),__vite__mapDeps([114,1,2,3,4,6,7,8,9,10]))),ListeningQuiz=reactExports.lazy(()=>__vitePreload(()=>import("./ListeningQuiz-azph9MGS.js"),__vite__mapDeps([115,1,2,3,4,111,78,6,7,8,9,10]))),VocabularyMap=reactExports.lazy(()=>__vitePreload(()=>import("./VocabularyMap-BYyjGJYv.js"),__vite__mapDeps([116,1,2,3,4,6,7,8,9,10]))),VocabularyBook=reactExports.lazy(()=>__vitePreload(()=>import("./VocabularyBook-CZ9vDAvR.js"),__vite__mapDeps([117,1,2,3,4,118,6,7,8,9,10])));reactExports.lazy(()=>__vitePreload(()=>import("./VocabHome-0Bp-x-Fv.js"),__vite__mapDeps([119,1,2,3,4,20,6,7,8,9,10])));const VocabDeck=reactExports.lazy(()=>__vitePreload(()=>import("./VocabDeck-BCq_6ZJP.js"),__vite__mapDeps([120,1,2,3,4,44,6,7,8,9,10]))),VocabReview=reactExports.lazy(()=>__vitePreload(()=>import("./VocabReview-B1anJ3i_.js"),__vite__mapDeps([121,1,2,3,4,6,7,8,9,10]))),VocabLevels=reactExports.lazy(()=>__vitePreload(()=>import("./VocabLevels-OyVo8v80.js"),__vite__mapDeps([122,1,2,3,4,118,6,7,8,9,10]))),VocabTest=reactExports.lazy(()=>__vitePreload(()=>import("./VocabTest-7HJxiN2O.js"),__vite__mapDeps([123,1,2,3,4,118,6,7,8,9,10,124]))),Signup=reactExports.lazy(()=>__vitePreload(()=>import("./Signup-B8u8HMxt.js"),__vite__mapDeps([125,1,2,3,4,6,7,8,9,10]))),AuthCallback=reactExports.lazy(()=>__vitePreload(()=>import("./AuthCallback-DLftrp43.js"),__vite__mapDeps([126,1,2,3,4,6,7,8,9,10]))),VocabularyMapView=reactExports.lazy(()=>__vitePreload(()=>import("./VocabularyMapView-DRigtntm.js"),__vite__mapDeps([92,1,2,3,4,22,6,7,8,9,10]))),WritingHistory=reactExports.lazy(()=>__vitePreload(()=>import("./WritingHistory-B17aLvjX.js"),__vite__mapDeps([127,1,2,3,4,6,7,8,9,10]))),WritingResultsDetail=reactExports.lazy(()=>__vitePreload(()=>import("./WritingResultsDetail-CdyY8hVr.js"),__vite__mapDeps([128,1,2,3,4,80,20,6,7,8,9,10]))),Pay=reactExports.lazy(()=>__vitePreload(()=>import("./Pay-qXXKIQjt.js"),__vite__mapDeps([129,1,2,3,4,6,7,8,9,10]))),ResetPassword=reactExports.lazy(()=>__vitePreload(()=>import("./ResetPassword-Cu7kWvGQ.js"),__vite__mapDeps([130,1,2,3,4,6,7,8,9,10]))),MyWordBook=reactExports.lazy(()=>__vitePreload(()=>import("./MyWordBook-DRqT8wNe.js"),__vite__mapDeps([131,1,2,3,4,44,6,7,8,9,10]))),AdminAnalytics=reactExports.lazy(()=>__vitePreload(()=>import("./AdminAnalytics-DL1U9Cg6.js"),__vite__mapDeps([132,1,2,3,4,5,6,7,8,9,10]))),OnboardingAssessment=reactExports.lazy(()=>__vitePreload(()=>import("./OnboardingAssessment-sHP6lFYG.js"),__vite__mapDeps([133,1,2,3,4,134,6,7,8,9,10]))),PlanPage=reactExports.lazy(()=>__vitePreload(()=>import("./Plan-DGT7RUXZ.js"),__vite__mapDeps([135,1,2,3,4,134,6,7,8,9,10]))),BlogListing=reactExports.lazy(()=>__vitePreload(()=>import("./BlogListing-Cl1zRqR-.js"),__vite__mapDeps([136,1,2,3,4,137,6,7,8,9,10]))),BlogDetail=reactExports.lazy(()=>__vitePreload(()=>import("./BlogDetail-CyHA7bSk.js"),__vite__mapDeps([138,1,2,3,4,137,6,7,8,9,10]))),AdminBlogManagement=reactExports.lazy(()=>__vitePreload(()=>import("./AdminBlogManagement-C5UrVN2r.js"),__vite__mapDeps([139,1,2,3,4,20,22,5,137,6,7,8,9,10]))),AdminBookCreation=reactExports.lazy(()=>__vitePreload(()=>import("./AdminBookCreation-Bhw7QlKR.js"),__vite__mapDeps([140,1,2,3,4,21,22,33,5,141,6,7,8,9,10]))),AdminTemplates=reactExports.lazy(()=>__vitePreload(()=>import("./AdminTemplates-ngHfoQ-x.js"),__vite__mapDeps([142,1,2,3,4,53,22,5,6,7,8,9,10]))),AdminAffiliates=reactExports.lazy(()=>__vitePreload(()=>import("./AdminAffiliates-C2NUvmNI.js"),__vite__mapDeps([143,1,2,3,4,20,22,12,5,6,7,8,9,10]))),AdminAffiliateDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminAffiliateDetail-DEhGY8Vs.js"),__vite__mapDeps([144,1,2,3,4,20,12,5,6,7,8,9,10]))),GrammarPortal=reactExports.lazy(()=>__vitePreload(()=>import("./GrammarPortal-CQ_AJ7zo.js"),__vite__mapDeps([145,1,2,3,4,20,6,7,8,9,10]))),GrammarLesson=reactExports.lazy(()=>__vitePreload(()=>import("./GrammarLesson-C3jVA-B0.js"),__vite__mapDeps([146,1,2,3,4,20,6,7,8,9,10]))),AdminGrammarDashboard=reactExports.lazy(()=>__vitePreload(()=>import("./AdminGrammarDashboard-eMr75G70.js"),__vite__mapDeps([147,1,2,3,4,5,20,53,33,6,7,8,9,10]))),AdminGrammarLessonEditor=reactExports.lazy(()=>__vitePreload(()=>import("./AdminGrammarLessonEditor-D3FQjS1o.js"),__vite__mapDeps([148,1,2,3,4,5,20,21,6,7,8,9,10]))),BusinessPortal=reactExports.lazy(()=>__vitePreload(()=>import("./BusinessPortal-BrIWOizB.js"),__vite__mapDeps([149,1,2,3,4,6,7,8,9,10]))),ResumeBuilder=reactExports.lazy(()=>__vitePreload(()=>import("./ResumeBuilder-DvRadSkV.js"),__vite__mapDeps([150,1,2,3,4,20,151,141,6,7,8,9,10]))),EmailPractice=reactExports.lazy(()=>__vitePreload(()=>import("./EmailPractice-DKiJ-WdG.js"),__vite__mapDeps([152,1,2,3,4,6,7,8,9,10]))),InterviewPractice=reactExports.lazy(()=>__vitePreload(()=>import("./InterviewPractice-Bxo5d7eN.js"),__vite__mapDeps([153,1,2,3,4,6,7,8,9,10]))),NCLEXPortal=reactExports.lazy(()=>__vitePreload(()=>import("./NCLEXPortal-ByLkOCsD.js"),__vite__mapDeps([154,1,2,3,4,6,7,8,9,10]))),NCLEXTest=reactExports.lazy(()=>__vitePreload(()=>import("./NCLEXTest-DeHJEWBO.js"),__vite__mapDeps([155,1,2,3,4,44,15,35,6,7,8,9,10]))),AdminNCLEX=reactExports.lazy(()=>__vitePreload(()=>import("./AdminNCLEX-CWeKV52t.js"),__vite__mapDeps([156,1,2,3,4,22,5,6,7,8,9,10]))),AdminNCLEXTestDetail=reactExports.lazy(()=>__vitePreload(()=>import("./AdminNCLEXTestDetail-BwAXLfpB.js"),__vite__mapDeps([157,1,2,3,4,20,22,5,15,21,35,44,6,7,8,9,10]))),BooksLibrary=reactExports.lazy(()=>__vitePreload(()=>import("./BooksLibrary-DH9rUsl_.js"),__vite__mapDeps([158,1,2,3,4,6,7,8,9,10]))),BookReader=reactExports.lazy(()=>__vitePreload(()=>import("./BookReader-CZiL7gga.js"),__vite__mapDeps([159,1,2,3,4,35,21,6,7,8,9,10]))),TemplatesGallery=reactExports.lazy(()=>__vitePreload(()=>import("./TemplatesGallery-B3i7nEwM.js"),__vite__mapDeps([160,1,2,3,4,6,7,8,9,10]))),PrivacyPolicy=reactExports.lazy(()=>__vitePreload(()=>import("./PrivacyPolicy-D44LHLP3.js"),__vite__mapDeps([161,1,2,3,4]))),RefundPolicy=reactExports.lazy(()=>__vitePreload(()=>import("./RefundPolicy-BJQMGOez.js"),__vite__mapDeps([162,1,2,3,4]))),TermsOfService=reactExports.lazy(()=>__vitePreload(()=>import("./TermsOfService-BviZXzbI.js"),__vite__mapDeps([163,1,2,3,4]))),Support=reactExports.lazy(()=>__vitePreload(()=>import("./Support-DzfDfYhv.js"),__vite__mapDeps([164,1,2,3,4]))),PodcastListing=reactExports.lazy(()=>__vitePreload(()=>import("./PodcastListing-B4nnh1dI.js"),__vite__mapDeps([165,1,2,3,4,86,32,33,6,7,8,9,10]))),AdminPodcast=reactExports.lazy(()=>__vitePreload(()=>import("./AdminPodcast-Bu7yfYhf.js"),__vite__mapDeps([166,1,2,3,4,53,22,5,72,6,7,8,9,10]))),queryClient=new QueryClient({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,5e3),refetchOnWindowFocus:!1,networkMode:"online"}}});function ProtectedAdminRoute({children:e}){const{admin:t,loading:s}=useAdminAuth(),r="undefined"!=typeof window&&"true"===localStorage.getItem("admin_session");return r||t||r?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e}):jsxRuntimeExports.jsx(Navigate,{to:"/admin/login",replace:!0})}const App=()=>jsxRuntimeExports.jsxs(z,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[jsxRuntimeExports.jsx(HelmetProvider,{children:jsxRuntimeExports.jsx(I18nextProvider,{i18n:instance,children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(GlobalTextSelection,{children:[jsxRuntimeExports.jsx(LanguageWelcomeBanner,{}),jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(ComingSoonModal,{}),jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-sm text-muted-foreground animate-pulse",children:"Loading..."})]}),children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Index,{})}),jsxRuntimeExports.jsx(Route,{path:"/hero",element:jsxRuntimeExports.jsx(HeroIndex,{})}),jsxRuntimeExports.jsx(Route,{path:"/hero/",element:jsxRuntimeExports.jsx(HeroIndex,{})}),jsxRuntimeExports.jsx(Route,{path:"/reading",element:jsxRuntimeExports.jsx(ReadingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/reading/:testId",element:jsxRuntimeExports.jsx(ReadingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/listening",element:jsxRuntimeExports.jsx(ContentSelection,{})}),jsxRuntimeExports.jsx(Route,{path:"/listening/:testId",element:jsxRuntimeExports.jsx(ListeningTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/writing",element:jsxRuntimeExports.jsx(Writing,{})}),jsxRuntimeExports.jsx(Route,{path:"/writing/random",element:jsxRuntimeExports.jsx(Writing,{})}),jsxRuntimeExports.jsx(Route,{path:"/writing-test",element:jsxRuntimeExports.jsx(WritingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/writing/:book/:test",element:jsxRuntimeExports.jsx(WritingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/speaking",element:jsxRuntimeExports.jsx(Speaking,{})}),jsxRuntimeExports.jsx(Route,{path:"/speaking/random",element:jsxRuntimeExports.jsx(Speaking,{})}),jsxRuntimeExports.jsx(Route,{path:"/speaking/:book/:test",element:jsxRuntimeExports.jsx(Speaking,{})}),jsxRuntimeExports.jsx(Route,{path:"/qwen-tts-test",element:jsxRuntimeExports.jsx(QwenTTSTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte/writing",element:jsxRuntimeExports.jsx(Writing,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte/speaking",element:jsxRuntimeExports.jsx(Speaking,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte/reading",element:jsxRuntimeExports.jsx(Reading,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte/listening",element:jsxRuntimeExports.jsx(Listening,{})}),jsxRuntimeExports.jsx(Route,{path:"/toefl/writing",element:jsxRuntimeExports.jsx(Writing,{})}),jsxRuntimeExports.jsx(Route,{path:"/toefl/speaking",element:jsxRuntimeExports.jsx(Speaking,{})}),jsxRuntimeExports.jsx(Route,{path:"/toefl/reading",element:jsxRuntimeExports.jsx(Reading,{})}),jsxRuntimeExports.jsx(Route,{path:"/toefl/listening",element:jsxRuntimeExports.jsx(Listening,{})}),jsxRuntimeExports.jsx(Route,{path:"/general/grammar",element:jsxRuntimeExports.jsx(EnhancedGeneralPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/general/vocabulary",element:jsxRuntimeExports.jsx(EnhancedGeneralPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/general/conversation",element:jsxRuntimeExports.jsx(EnhancedGeneralPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/general/listening",element:jsxRuntimeExports.jsx(EnhancedGeneralPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/general/speaking",element:jsxRuntimeExports.jsx(EnhancedGeneralPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-portal",element:jsxRuntimeExports.jsx(IELTSPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts",element:jsxRuntimeExports.jsx(IELTSSkillHub,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts/:skill",element:jsxRuntimeExports.jsx(IELTSSkillTests,{})}),jsxRuntimeExports.jsx(Route,{path:"/books",element:jsxRuntimeExports.jsx(BooksLibrary,{})}),jsxRuntimeExports.jsx(Route,{path:"/books/:bookId",element:jsxRuntimeExports.jsx(BookReader,{})}),jsxRuntimeExports.jsx(Route,{path:"/templates",element:jsxRuntimeExports.jsx(TemplatesGallery,{})}),jsxRuntimeExports.jsx(Route,{path:"/grammar",element:jsxRuntimeExports.jsx(GrammarPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/grammar/:topicSlug",element:jsxRuntimeExports.jsx(GrammarLesson,{})}),jsxRuntimeExports.jsx(Route,{path:"/business-portal",element:jsxRuntimeExports.jsx(BusinessPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/business/resume",element:jsxRuntimeExports.jsx(ResumeBuilder,{})}),jsxRuntimeExports.jsx(Route,{path:"/business/email",element:jsxRuntimeExports.jsx(EmailPractice,{})}),jsxRuntimeExports.jsx(Route,{path:"/business/interview",element:jsxRuntimeExports.jsx(InterviewPractice,{})}),jsxRuntimeExports.jsx(Route,{path:"/nclex",element:jsxRuntimeExports.jsx(NCLEXPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/nclex/test/:testId",element:jsxRuntimeExports.jsx(NCLEXTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/login",element:jsxRuntimeExports.jsx(AdminLogin,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminDashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/analytics",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminAnalytics,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/reading",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminReading,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/listening",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminListening,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/writing",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminWriting,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/speaking",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSpeaking,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/ielts",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTS,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/ielts/:skill",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTSSkillManagement,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTE,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toefl",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminTOEFL,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/general",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGeneral,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/blog",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminBlogManagement,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/books",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminBookCreation,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/templates",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminTemplates,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/affiliates",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminAffiliates,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/affiliates/:affiliateId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminAffiliateDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/grammar",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGrammarDashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/grammar/:topicId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGrammarLessonEditor,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/nclex",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminNCLEX,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/nclex/test/:testId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminNCLEXTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/:testType/tests",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminTestManagement,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/:testType/test/:testId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminTestDetails,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/:testType/test/:testId/:sectionId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSectionManagement,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/ielts/reading",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTSReadingDashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/:testType/test/:testId/reading",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminReadingManagement,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/:testType/test/:testId/listening",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTSListening,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/ielts/test/:testId/writing",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTSWritingTest,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/ielts/test/:testId/speaking",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTSSpeaking,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/ielts/test/:testId/reading",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTSReadingTest,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/ielts/test/:testId/listening",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminIELTSListening,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSkillsPractice,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/vocab",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminVocabManager,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/vocab/",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminVocabManager,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/vocabulary/tests",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminVocabularyTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/vocab-book",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminVocabBook,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/vocabulary/tests/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminVocabularyTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/vocabulary-builder",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminVocabularyTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/vocabulary-builder/tests/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminVocabularyTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/grammar/tests",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGrammarTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/grammar/tests/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGrammarTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/grammar-fix-it",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGrammarTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/grammar-fix-it/tests/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGrammarTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/paraphrasing-challenge",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminParaphrasingTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/paraphrasing-challenge/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminParaphrasingTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/sentence-scramble",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSentenceScrambleTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/sentence-scramble/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSentenceScrambleTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/sentence-structure-scramble",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSentenceScrambleTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/sentence-structure-scramble/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSentenceScrambleTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/listening-for-details",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminListeningForDetailsTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/listening-for-details/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminListeningForDetailsTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/pronunciation-repeat-after-me",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPronunciationTests,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/pronunciation-repeat-after-me/:id",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPronunciationTestDetail,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/skills/:slug",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSkillManager,{})})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-writing-test/:testId",element:jsxRuntimeExports.jsx(IELTSWritingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-writing-test",element:jsxRuntimeExports.jsx(IELTSWritingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-writing-results",element:jsxRuntimeExports.jsx(IELTSWritingResults,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-writing-results-pro",element:jsxRuntimeExports.jsx(IELTSWritingProResults,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-speaking-test",element:jsxRuntimeExports.jsx(IELTSSpeakingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-speaking-test/:testId",element:jsxRuntimeExports.jsx(IELTSSpeakingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-speaking-test/:testName",element:jsxRuntimeExports.jsx(IELTSSpeakingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-speaking-results",element:jsxRuntimeExports.jsx(IELTSSpeakingResults,{})}),jsxRuntimeExports.jsx(Route,{path:"/enhanced-reading-test/:testId",element:jsxRuntimeExports.jsx(EnhancedReadingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte/speaking_writing/:type",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTESpeakingWriting,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte/reading/:type",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTEReading,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte/listening/:testId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTEListening,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte/listening",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTE,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte/reading",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTE,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte/writing",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTE,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/pte/speaking",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPTE,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toefl/listening",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminListening,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toefl/reading",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminReading,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toefl/writing",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminWriting,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toefl/speaking",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminSpeaking,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toefl/integrated-writing",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminWriting,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toefl/independent-writing",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminWriting,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toeic",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminTOEIC,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toeic/listening/:testId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminTOEICListening,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/toeic/reading/:testId",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminTOEICReading,{})})}),jsxRuntimeExports.jsx(Route,{path:"/toeic",element:jsxRuntimeExports.jsx(TOEICPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/toeic-portal",element:jsxRuntimeExports.jsx(TOEICPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/toeic/listening/:testId",element:jsxRuntimeExports.jsx(TOEICListeningTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/toeic/reading/:testId",element:jsxRuntimeExports.jsx(TOEICReadingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/toeic/reading/result",element:jsxRuntimeExports.jsx(TOEICReadingResult,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/general/grammar",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGeneral,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/general/vocabulary",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGeneral,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/general/pronunciation",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminGeneral,{})})}),jsxRuntimeExports.jsx(Route,{path:"/reading-results",element:jsxRuntimeExports.jsx(ReadingResults,{})}),jsxRuntimeExports.jsx(Route,{path:"/listening-results",element:jsxRuntimeExports.jsx(ListeningResults,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-speaking-results",element:jsxRuntimeExports.jsx(IELTSSpeakingResults,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-writing-pro-results",element:jsxRuntimeExports.jsx(IELTSWritingProResults,{})}),jsxRuntimeExports.jsx(Route,{path:"/pay",element:jsxRuntimeExports.jsx(Pay,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/onboarding/assessment",element:jsxRuntimeExports.jsx(OnboardingAssessment,{})}),jsxRuntimeExports.jsx(Route,{path:"/plan",element:jsxRuntimeExports.jsx(PlanPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-portal",element:jsxRuntimeExports.jsx(IELTSPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/ielts-test-modules/:testId",element:jsxRuntimeExports.jsx(IELTSTestModules,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte-portal",element:jsxRuntimeExports.jsx(PTEPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte-speaking/:type",element:jsxRuntimeExports.jsx(PTESpeakingWritingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte-reading/:type",element:jsxRuntimeExports.jsx(PTEReadingTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/pte-listening/:testId",element:jsxRuntimeExports.jsx(PTEListeningTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/toefl-portal",element:jsxRuntimeExports.jsx(TOEFLPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/general-portal",element:jsxRuntimeExports.jsx(GeneralPortal,{})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard/writing-history",element:jsxRuntimeExports.jsx(WritingHistory,{})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard/my-word-book",element:jsxRuntimeExports.jsx(MyWordBook,{})}),jsxRuntimeExports.jsx(Route,{path:"/results/writing/:submissionId",element:jsxRuntimeExports.jsx(WritingResultsDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"/user-dashboard",element:jsxRuntimeExports.jsx(PersonalPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/practice",element:jsxRuntimeExports.jsx(TestSelection,{})}),jsxRuntimeExports.jsx(Route,{path:"/personal-page",element:jsxRuntimeExports.jsx(PersonalPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/auth",element:jsxRuntimeExports.jsx(Auth,{})}),jsxRuntimeExports.jsx(Route,{path:"/auth/callback",element:jsxRuntimeExports.jsx(AuthCallback,{})}),jsxRuntimeExports.jsx(Route,{path:"/tests",element:jsxRuntimeExports.jsx(TestSelection,{})}),jsxRuntimeExports.jsx(Route,{path:"/community",element:jsxRuntimeExports.jsx(CommunityPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(SettingsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/ai-speaking",element:jsxRuntimeExports.jsx(AISpeakingCall,{})}),jsxRuntimeExports.jsx(Route,{path:"/earthworm",element:jsxRuntimeExports.jsx(AISpeakingTutor,{})}),jsxRuntimeExports.jsx(Route,{path:"/skills/:slug",element:jsxRuntimeExports.jsx(SkillPractice,{})}),jsxRuntimeExports.jsx(Route,{path:"/skills/vocabulary-builder/map",element:jsxRuntimeExports.jsx(VocabularyMap,{})}),jsxRuntimeExports.jsx(Route,{path:"/skills/vocabulary-builder",element:jsxRuntimeExports.jsx(VocabularyMapView,{})}),jsxRuntimeExports.jsx(Route,{path:"/vocabulary",element:jsxRuntimeExports.jsx(VocabLevels,{})}),jsxRuntimeExports.jsx(Route,{path:"/vocabulary/levels",element:jsxRuntimeExports.jsx(VocabLevels,{})}),jsxRuntimeExports.jsx(Route,{path:"/vocabulary/book",element:jsxRuntimeExports.jsx(VocabularyBook,{})}),jsxRuntimeExports.jsx(Route,{path:"/vocabulary/deck/:deckId",element:jsxRuntimeExports.jsx(VocabDeck,{})}),jsxRuntimeExports.jsx(Route,{path:"/vocabulary/test/:deckId",element:jsxRuntimeExports.jsx(VocabTest,{})}),jsxRuntimeExports.jsx(Route,{path:"/vocabulary/review/:deckId",element:jsxRuntimeExports.jsx(VocabReview,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup",element:jsxRuntimeExports.jsx(Signup,{})}),jsxRuntimeExports.jsx(Route,{path:"/skills/vocabulary-builder/test/:testId",element:jsxRuntimeExports.jsx(VocabularyQuiz,{})}),jsxRuntimeExports.jsx(Route,{path:"/skills/paraphrasing-challenge/test/:testId",element:jsxRuntimeExports.jsx(ParaphraseQuiz,{})}),jsxRuntimeExports.jsx(Route,{path:"/skills/sentence-structure-scramble/test/:testId",element:jsxRuntimeExports.jsx(SentenceScrambleQuiz,{})}),jsxRuntimeExports.jsx(Route,{path:"/skills/listening-for-details/test/:testId",element:jsxRuntimeExports.jsx(ListeningQuiz,{})}),jsxRuntimeExports.jsx(Route,{path:"/pricing",element:jsxRuntimeExports.jsx(Pricing,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy-policy",element:jsxRuntimeExports.jsx(PrivacyPolicy,{})}),jsxRuntimeExports.jsx(Route,{path:"/refund-policy",element:jsxRuntimeExports.jsx(RefundPolicy,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms-of-service",element:jsxRuntimeExports.jsx(TermsOfService,{})}),jsxRuntimeExports.jsx(Route,{path:"/support",element:jsxRuntimeExports.jsx(Support,{})}),jsxRuntimeExports.jsx(Route,{path:"/podcasts",element:jsxRuntimeExports.jsx(PodcastListing,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/podcasts",element:jsxRuntimeExports.jsx(ProtectedAdminRoute,{children:jsxRuntimeExports.jsx(AdminPodcast,{})})}),jsxRuntimeExports.jsx(Route,{path:"/blog",element:jsxRuntimeExports.jsx(Navigate,{to:"/en/blog",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/:lang/blog",element:jsxRuntimeExports.jsx(BlogListing,{})}),jsxRuntimeExports.jsx(Route,{path:"/:lang/blog/:slug",element:jsxRuntimeExports.jsx(BlogDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})}),jsxRuntimeExports.jsx(MinimalisticChatbot,{})]})})})})})})}),void 0]});"undefined"!=typeof window&&(window.React=React),window.onerror=(e,t,s,r,a)=>{console.error("Global Error:",{message:e,source:t,lineno:s,colno:r,error:a})},window.addEventListener("error",e=>{console.error("Window Error Event:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled Promise Rejection:",e.reason)});try{const e=document.getElementById("root");if(!e)throw new Error("Root element not found!");console.log("Root element found, mounting React app..."),createRoot(e).render(jsxRuntimeExports.jsx(App,{})),console.log("React app mounted successfully!")}catch(error){console.error("Failed to mount React app:",error);const e=document.getElementById("root");e&&(e.innerHTML=`<div style="color: red; padding: 20px; font-size: 16px;">\n      <h1>Error Loading App</h1>\n      <p>${String(error)}</p>\n      <pre>${error instanceof Error?error.stack:""}</pre>\n    </div>`)}export{TooltipContent as $,SpotlightCard as A,Button$1 as B,Card as C,Dialog as D,useAuth as E,getLanguagesWithFlags as F,normalizeLanguageCode as G,getBandScore as H,Input as I,Jt as J,getLanguagesForSettings as K,Label as L,LightRays as M,cn as N,TooltipProvider as O,Progress as P,buttonVariants as Q,RadioGroup as R,Select as S,Textarea as T,SEO as U,adminSupabase as V,DialogDescription as W,DialogFooter as X,DotLottieLoadingAnimation as Y,Tooltip as Z,TooltipTrigger as _,CardContent as a,useDotLottieLoader as a0,LottieLoadingAnimation as a1,GlobalTextSelection as a2,AudioRecorder as a3,usePageTranslation as a4,config as a5,Calendar as a6,normalizeToLocalMidnight as a7,formatLocalISO as a8,LanguageSelector as a9,Skeleton as aa,client as ab,CardHeader as b,CardTitle as c,useToast as d,Badge as e,DialogContent as f,DialogHeader as g,DialogTitle as h,SelectTrigger as i,SelectValue as j,SelectContent as k,SelectItem as l,DialogTrigger as m,useAdminAuth as n,CardDescription as o,RadioGroupItem as p,useThemeStyles as q,Popover as r,supabase as s,PopoverTrigger as t,useAdminContent as u,PopoverContent as v,useTheme as w,LoadingAnimation as x,StudentLayout as y,themes as z};
